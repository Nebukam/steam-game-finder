"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(e,t,n){var i=[null];i.push.apply(i,t);var s,a=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(a,n.prototype),a}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function set(e,t,n,i){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(e,t,n,i){var s=_superPropBase(e,t),a;if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(i,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(i,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(i,t,a)}else _defineProperty(i,t,n);return!0})(e,t,n,i)}function _set(e,t,n,i,s){var a;if(!set(e,t,n,i||e)&&s)throw new Error("failed to set property");return n}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=_superPropBase(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(n):s.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var n=_getPrototypeOf(e),i;if(t){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(){function r(e,t,n){function o(s,a){if(!t[s]){if(!e[s]){var l="function"==typeof __r__&&__r__;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};e[s][0].call(u.exports,(function(t){var n;return o(e[s][1][t]||t)}),u,u.exports,r,e,t,n)}return t[s].exports}for(var i="function"==typeof __r__&&__r__,s=0;s<n.length;s++)o(n[s]);return o}return r}()({1:[function(__r__,e,t){var n=__r__(0),i=__r__(1);e.exports={RELAY:n,Request:i,REQUEST:__r__(2),Action:__r__(3),ActionGroup:__r__(4),ActionStack:__r__(5),COMMAND_SIGNAL:__r__(6),Command:__r__(7),CommandFn:__r__(8),CommandBox:__r__(9),CommandChain:__r__(10),CommandAction:__r__(11),Emit:i.Emit.bind(i)}},{2:2,3:5,4:3,5:4,7:12,11:7,9:8,10:9,8:10,6:11,0:13,1:14}],2:[function(__r__,e,t){var n=__r__(12);e.exports={EXIT:function(e){_inherits(EXIT,e);var t=_createSuper(EXIT);function EXIT(){var e;return _classCallCheck(this,EXIT),_possibleConstructorReturn(e)}return EXIT}(n.helpers.CSYMBOL),EDIT:function(e){_inherits(EDIT,e);var t=_createSuper(EDIT);function EDIT(){var e;return _classCallCheck(this,EDIT),_possibleConstructorReturn(e)}return EDIT}(n.helpers.CSYMBOL),PREVIEW:function(e){_inherits(PREVIEW,e);var t=_createSuper(PREVIEW);function PREVIEW(){var e;return _classCallCheck(this,PREVIEW),_possibleConstructorReturn(e)}return PREVIEW}(n.helpers.CSYMBOL),OPEN:function(e){_inherits(OPEN,e);var t=_createSuper(OPEN);function OPEN(){var e;return _classCallCheck(this,OPEN),_possibleConstructorReturn(e)}return OPEN}(n.helpers.CSYMBOL),CLOSE:function(e){_inherits(CLOSE,e);var t=_createSuper(CLOSE);function CLOSE(){var e;return _classCallCheck(this,CLOSE),_possibleConstructorReturn(e)}return CLOSE}(n.helpers.CSYMBOL),CREATE:function(e){_inherits(CREATE,e);var t=_createSuper(CREATE);function CREATE(){var e;return _classCallCheck(this,CREATE),_possibleConstructorReturn(e)}return CREATE}(n.helpers.CSYMBOL),SAVE:function(e){_inherits(SAVE,e);var t=_createSuper(SAVE);function SAVE(){var e;return _classCallCheck(this,SAVE),_possibleConstructorReturn(e)}return SAVE}(n.helpers.CSYMBOL),DELETE:function(e){_inherits(DELETE,e);var t=_createSuper(DELETE);function DELETE(){var e;return _classCallCheck(this,DELETE),_possibleConstructorReturn(e)}return DELETE}(n.helpers.CSYMBOL),RENAME:function(e){_inherits(RENAME,e);var t=_createSuper(RENAME);function RENAME(){var e;return _classCallCheck(this,RENAME),_possibleConstructorReturn(e)}return RENAME}(n.helpers.CSYMBOL),APPLY:function(e){_inherits(APPLY,e);var t=_createSuper(APPLY);function APPLY(){var e;return _classCallCheck(this,APPLY),_possibleConstructorReturn(e)}return APPLY}(n.helpers.CSYMBOL)}},{12:27}],3:[function(__r__,e,t){var n,i=function(e){_inherits(ActionGroup,e);var t=_createSuper(ActionGroup);function ActionGroup(){return _classCallCheck(this,ActionGroup),t.call(this)}return _createClass(ActionGroup,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ActionGroup.prototype),"_Init",this).call(this),this._actions=[],this._last=null}},{key:"last",get:function get(){return this._last}},{key:"_Register",value:function _Register(e){return this._actions.push(e),this._last=e,e}},{key:"Do",value:function Do(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"_InternalDo",value:function _InternalDo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"_InternalUndo",value:function _InternalUndo(){for(var e=this._actions,t=e.length-1;t>=0;t--)e[t].Undo()}},{key:"_InternalRedo",value:function _InternalRedo(){for(var e=this._actions,t=0,n=e.length;t<n;t++)e[t].Redo()}},{key:"_CleanUp",value:function _CleanUp(){this._last=null;for(var e=this._actions;0!=e.length;)e.pop().Release();this._actions.length=0,_get(_getPrototypeOf(ActionGroup.prototype),"_CleanUp",this).call(this)}}],[{key:"mergeable",get:function get(){return!1}}]),ActionGroup}(__r__(13));e.exports=i},{13:5}],4:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(15),a=function(){function ActionStack(){_classCallCheck(this,ActionStack),this._Init(),this._PostInit()}return _createClass(ActionStack,[{key:"_Init",value:function _Init(){this._maxCount=-1,this._headIndex=-1,this._stack=[],this._isEnabled=!0,this._groupingActive=!1,this._group=null}},{key:"_PostInit",value:function _PostInit(){}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(e){e?this.Enable():this.Disable()}},{key:"Enable",value:function Enable(){return!this._isEnabled&&(this._isEnabled=!0,!0)}},{key:"Disable",value:function Disable(){return!!this._isEnabled&&(this._isEnabled=!1,!0)}},{key:"ToggleGrouping",value:function ToggleGrouping(e){this._groupingActive!==e&&(this._groupingActive=e,!e&&this._group&&(this._group=null))}},{key:"Do",value:function Do(e,t){return this._isEnabled?(this._groupingActive&&(this._group||(this._group=this._Register(i.Rent(s)))),a=this._group?this._group.last:this._stack.length>0?this._stack[this._stack.length-1]:null,e.mergeable&&n.isInstanceOf(a,e)&&a.CanMerge(t)?a.Do(t,!0):this._group?this._group._Register(i.Rent(e).Do(t,!1)):this._Register(i.Rent(e).Do(t,!1))):null;var a}},{key:"_Register",value:function _Register(e){var t=this._stack;if(this._headIndex!=t.length-1){for(var n=this._headIndex+1,i=n;i<t.length;i++)t[i].Release();t.length=n}return t.push(e),this._headIndex=t.length-1,e}},{key:"Undo",value:function Undo(){var e=this._stack;if(0!==e.length){var t=this._headIndex;if(-1!==t){var n=e[t];this._headIndex=t-1,n.Undo()}}}},{key:"Redo",value:function Redo(){if(0!==this._stack.length){var e=this._headIndex;if(!((e+=1)>=this._stack.length)){var t=this._stack[e];this._headIndex=e,t.Redo()}}}},{key:"Clear",value:function Clear(){this.ToggleGrouping(!1);for(var e=this._stack;0!=e.length;)e.pop().Release();e.length=0,this._headIndex=-1,this._groupingActive=!1}}]),ActionStack}();e.exports=a},{15:3,12:27,14:458}],5:[function(__r__,e,t){var n,i=function(e){_inherits(Action,e);var t=_createSuper(Action);function Action(){return _classCallCheck(this,Action),t.call(this)}return _createClass(Action,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Action.prototype),"_Init",this).call(this),this._operation=null,this._undoed=!1}},{key:"operation",get:function get(){return this._operation}},{key:"CanMerge",value:function CanMerge(e){return!1}},{key:"Do",value:function Do(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||(this._operation=e),this._InternalDo(e,t),this}},{key:"Undo",value:function Undo(){this._undoed=!0,this._InternalUndo()}},{key:"Redo",value:function Redo(){this._undoed=!1,this._InternalRedo()}},{key:"_InternalDo",value:function _InternalDo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"_InternalUndo",value:function _InternalUndo(){}},{key:"_InternalRedo",value:function _InternalRedo(){}},{key:"_CleanUp",value:function _CleanUp(){this._operation=null,this._undoed=!1,_get(_getPrototypeOf(Action.prototype),"_CleanUp",this).call(this)}}],[{key:"mergeable",get:function get(){return!1}}]),Action}(__r__(12).pool.DisposableObject);e.exports=i},{12:27}],6:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(16),a=function(e){_inherits(Command,e);var t=_createSuper(Command);function Command(){return _classCallCheck(this,Command),t.call(this)}return _createClass(Command,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Command.prototype),"_Init",this).call(this),this._icon="",this._name=n.tils.CamelSplit(this.constructor.name),this._isEnabled=!0,this._context=null,this._emitter=null,this._order=0,this._running=!1}},{key:"running",get:function get(){return this._running}},{key:"order",get:function get(){return this._order},set:function set(e){this._order=e}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon=e}},{key:"name",get:function get(){return this._name},set:function set(e){this._name=e}},{key:"emitter",get:function get(){return this._emitter},set:function set(e){if(this._emitter!==e){var t=this._emitter;this._emitter=e,t&&t.Unwatch(i.SIGNAL.RELEASED,this._OnEmitterReleased,this),e&&e.Watch(i.SIGNAL.RELEASED,this._OnEmitterReleased,this)}}},{key:"_OnEmitterReleased",value:function _OnEmitterReleased(e){this.emitter=null}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(e){e?this.Enable():this.Disable()}},{key:"Enable",value:function Enable(){return!this._isEnabled&&(this._isEnabled=!0,this._Broadcast(i.SIGNAL.UPDATED,this),!0)}},{key:"Disable",value:function Disable(){return!!this._isEnabled&&(this._isEnabled=!1,this._Broadcast(i.SIGNAL.UPDATED,this),!0)}},{key:"context",get:function get(){return this._context},set:function set(e){var t=this._SanitizeContext(e);this._context!==t&&(this._context=t,this._OnContextChanged(),this.enabled=this.CanExecute(this._context))}},{key:"_SanitizeContext",value:function _SanitizeContext(e){return e}},{key:"_OnContextChanged",value:function _OnContextChanged(){}},{key:"CanExecute",value:function CanExecute(e){return!0}},{key:"Execute",value:function Execute(e){this._running||(this.context=e||this._context,this._isEnabled&&(this._Start(),this._InternalExecute()))}},{key:"_InternalExecute",value:function _InternalExecute(){}},{key:"_InternalCancel",value:function _InternalCancel(){}},{key:"_Start",value:function _Start(){this._running||(this._running=!0,this._Broadcast(s.START,this),this._Broadcast(i.SIGNAL.UPDATED,this))}},{key:"_Success",value:function _Success(){this._Broadcast(s.SUCCESS,this),this._End()}},{key:"_Fail",value:function _Fail(e){console.error("".concat(this," failed : ").concat(e)),this._Broadcast(s.FAIL,this,e),this._End()}},{key:"Cancel",value:function Cancel(){this._running&&this._Cancel()}},{key:"_Cancel",value:function _Cancel(){this._InternalCancel(),this._Broadcast(s.CANCEL,this),this._End()}},{key:"_End",value:function _End(){this._running=!1,this._Broadcast(s.END,this),this._Broadcast(i.SIGNAL.UPDATED,this)}},{key:"_CleanUp",value:function _CleanUp(){this.Cancel(),this._icon="",this._isEnabled=!0,this.context=null,this.emitter=null,this.order=0,_get(_getPrototypeOf(Command.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[>>".concat(this.constructor.name,"]")}}],[{key:"Rent",value:function Rent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=i.Rent(e);return a.name=n.isEmpty(t)?n.tils.CamelSplit(e.name):t,a.icon=n.isEmpty(s)?"command":s,a}}]),Command}(i.pool.DisposableObjectEx);e.exports=a},{16:11,12:27,14:458}],7:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(16),a,l=null,c=function(e){_inherits(CommandAction,e);var t=_createSuper(CommandAction);function CommandAction(){return _classCallCheck(this,CommandAction),t.call(this)}return _createClass(CommandAction,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CommandAction.prototype),"_Init",this).call(this),this._actionClass=null}},{key:"actionClass",get:function get(){return this._actionClass},set:function set(e){this._actionClass=e}},{key:"CanExecute",value:function CanExecute(e){return!(!e||!this._actionClass)}},{key:"_InternalExecute",value:function _InternalExecute(){var e=null;if(this._emitter&&!(e=this._emitter.editor))for(var t=i.pool.POOL.GetClass("Editor"),s=this._emitter;!e&&s;)n.isInstanceOf(s,t)&&(e=s),s=s.parent;e?e.Do(this._actionClass,this._context):i.Rent(this._actionClass).Do(this._context,!1).Release(),this._Success()}},{key:"_CleanUp",value:function _CleanUp(){this._actionClass=null,_get(_getPrototypeOf(CommandAction.prototype),"_CleanUp",this).call(this)}}],[{key:"Do",value:function Do(e,t,n){var i=this._COMMAND_ACTION;i||(i=this._COMMAND_ACTION=new CommandAction),i.emitter=e,i.actionClass=t,i.Execute(n)}}]),CommandAction}(__r__(17));e.exports=c},{17:12,16:11,12:27,14:458}],8:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(17),a=function(){function CommandBox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,CommandBox),this._context=null,this._commandList=new i.List(0),this._commandHooks=new i.Dictionary,this._onRegisterCmd=e}return _createClass(CommandBox,[{key:"list",get:function get(){return this._commandList}},{key:"context",get:function get(){return this._context},set:function set(e){this._context=e;for(var t=this._commandList,n=0,i=t.count;n<i;n++)t.At(n).context=e}},{key:"Create",value:function Create(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=s.Rent(e,t,n);return this._Register(a,i),a}},{key:"_Register",value:function _Register(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._commandList.Add(e)){if(t){this._commandHooks.Set(e,t);for(var n=0,i=t.length;n<i;n++){var s=t[n];e.Watch(s.evt,s.fn,s.thisArg||null)}}this._OnCommandRegistered(e)}}},{key:"_OnCommandRegistered",value:function _OnCommandRegistered(e){e.context=this._context,this._onRegisterCmd&&this._onRegisterCmd.call(null,e)}},{key:"RemoveCommand",value:function RemoveCommand(e){if(this._commandList.Remove(e)){var t;if(this._commandHooks.Get(e)){this._commandHooks.Remove(e);for(var n=0,i=p_hooks.length;n<i;n++){var s=p_hooks[n];e.Unwatch(s.evt,s.fn,s.thisArg||null)}}this._OnCommandRemoved(e)}}},{key:"_OnCommandRemoved",value:function _OnCommandRemoved(e){e.context=null}}]),CommandBox}();e.exports=a},{17:12,18:21,14:458}],9:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(16),a,l=function(e){_inherits(CommandChain,e);var t=_createSuper(CommandChain);function CommandChain(){return _classCallCheck(this,CommandChain),t.call(this)}return _createClass(CommandChain,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CommandChain.prototype),"_Init",this).call(this),this._nodes=[],this._currentIndex=0,this._cmdObserver=new i.signals.Observer,this._cmdObserver.Hook(s.START,this._NodeStart,this),this._cmdObserver.Hook(s.END,this._NodeEnd,this),this._cmdObserver.Hook(s.SUCCESS,this._NodeSuccess,this),this._cmdObserver.Hook(s.FAIL,this._NodeFail,this)}},{key:"_OnContextChanged",value:function _OnContextChanged(){_get(_getPrototypeOf(CommandChain.prototype),"_OnContextChanged",this).call(this);for(var e=0,t=this._nodes.length;e<t;e++)this._nodes[e].context=this._context}},{key:"CanExecute",value:function CanExecute(e){var t;if(!_get(_getPrototypeOf(CommandChain.prototype),"CanExecute",this).call(this,e))return!1;for(var n=0,i=this._nodes.length;n<i;n++)if(!this._nodes[n].CanExecute(e))return!1;return!0}},{key:"Execute",value:function Execute(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._running||(this.context=e||this._context,this._isEnabled&&(this._Start(),this._InternalExecute()))}},{key:"_InternalExecute",value:function _InternalExecute(){this._currentIndex=-1,this._ExecuteNextIndex()}},{key:"_ExecuteNextIndex",value:function _ExecuteNextIndex(){this._currentIndex+=1;var e=this._nodes.length;if(this._currentIndex>=e)this._Success();else{var t=this._nodes[this._currentIndex];this._cmdObserver.ObserveOnly(t),t.Execute(this._context)}}},{key:"_InternalCancel",value:function _InternalCancel(){}},{key:"_NodeStart",value:function _NodeStart(e){}},{key:"_NodeSuccess",value:function _NodeSuccess(e){this._ExecuteNextIndex()}},{key:"_NodeFail",value:function _NodeFail(e,t){this._Fail(t)}},{key:"_NodeEnd",value:function _NodeEnd(e){}},{key:"_Start",value:function _Start(){this._running||(this._running=!0,this._Broadcast(s.START,this),this._Broadcast(i.SIGNAL.UPDATED,this))}},{key:"_Success",value:function _Success(){this._Broadcast(s.SUCCESS,this),this._End()}},{key:"_Fail",value:function _Fail(e){this._Broadcast(s.FAIL,this,e),this._End()}},{key:"Cancel",value:function Cancel(){this._running&&this._Cancel()}},{key:"_Cancel",value:function _Cancel(){this._InternalCancel(),this._Broadcast(s.CANCEL,this),this._End()}},{key:"_End",value:function _End(){this._running=!1,this._Broadcast(s.END,this),this._Broadcast(i.SIGNAL.UPDATED,this)}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(CommandChain.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[>>".concat(this.constructor.name,"]")}}]),CommandChain}(__r__(17));e.exports=l},{17:12,16:11,12:27,14:458}],10:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(16),a,l=function(e){_inherits(CommandFn,e);var t=_createSuper(CommandFn);function CommandFn(){return _classCallCheck(this,CommandFn),t.call(this)}return _createClass(CommandFn,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CommandFn.prototype),"_Init",this).call(this),this._fn=null,this._thisArg=null,this._options=null}},{key:"thisArg",get:function get(){return this._thisArg},set:function set(e){this._thisArg=e}},{key:"fn",get:function get(){return this._fn},set:function set(e){this._fn=e}},{key:"options",get:function get(){return this._options},set:function set(e){if(this._options=e,this.fn=n.tils.Get(e,"fn",null),!this._fn)throw new Error("CommandFn options have no function defined.");this.thisArg=n.tils.Get(e,"thisArg",null),this.name=n.tils.Get(e,"name",n.tils.CamelSplit(this._fn.name)),this.icon=n.tils.Get(e,"icon","%ICON%/icon_cmd.svg"),this.order=n.tils.Get(e,"order",0)}},{key:"_InternalExecute",value:function _InternalExecute(){try{this._context?this._fn.call(this._thisArg,this._context):this._fn.call(this._thisArg),this._Success()}catch(e){this._Fail(e.message)}}}],[{key:"RentFn",value:function RentFn(e){var t;if(!n.tils.Get(e,"fn",null))throw new Error("Cannot create CommandFn with empty function");var s=i.Rent(CommandFn);return s.options=e,s}}]),CommandFn}(__r__(19));e.exports=l},{19:6,16:11,12:27,14:458}],11:[function(__r__,e,t){var n=function COMMAND_SIGNAL(){_classCallCheck(this,COMMAND_SIGNAL)};_defineProperty(n,"SUCCESS",Symbol("success")),_defineProperty(n,"FAIL",Symbol("fail")),_defineProperty(n,"CANCEL",Symbol("cancel")),_defineProperty(n,"START",Symbol("start")),_defineProperty(n,"END",Symbol("end")),e.exports=n},{}],12:[function(__r__,e,t){arguments[4][6][0].apply(t,arguments)},{16:11,12:27,14:458,dup:6}],13:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(20),a=__r__(21),l,c=__r__(12).signals,u=function(e){_inherits(RELAY,e);var t=_createSuper(RELAY);function RELAY(){return _classCallCheck(this,RELAY),t.call(this)}return _createClass(RELAY,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(RELAY.prototype),"_Init",this).call(this),this._requests=new i.List,a.isExtension&&(this._extIpc=new c.SignalBox,a.runtime.onMessage.addListener((function(e,t,n){var i=e.signal,s=e;e.respond=n,RELAY.instance._extIpc.Broadcast(i,s)})))}},{key:"HandleRequest",value:function HandleRequest(e){this._requests.Add(e),console.log("HandleRequest"),this._Broadcast(e.requestType,e),this._tick.Schedule()}},{key:"_Tick",value:function _Tick(e){_get(_getPrototypeOf(RELAY.prototype),"_Tick",this).call(this,e);for(var t=this._requests,n=0;n<t.count;n++){var i=!0,s=t.At(n);s.isHandled||(s.life>=s.timeout?s.HandleFail("timeout"):(s.life+=e,i=!1)),i&&(s.Release(),t.RemoveAt(n),n--)}}},{key:"_ipcOn",value:function _ipcOn(e,t){this._extIpc&&this._extIpc.Watch(e,t)}},{key:"_ipcSend",value:function _ipcSend(e){if(a.isExtension){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.runtime.sendMessage(null,JSON.stringify({signal:e,args:n}))}}},{key:"_ShowOpenDialog",value:function _ShowOpenDialog(e){return null}}],[{key:"HandleRequest",value:function HandleRequest(e){n.LOG._("⚡ ".concat(e),"color: #bebebe"),this.instance.HandleRequest(e)}},{key:"Broadcast",value:function Broadcast(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];(t=this.instance)._Broadcast.apply(t,[e].concat(i))}},{key:"ipcOn",value:function ipcOn(e,t){this.instance._ipcOn(e,t)}},{key:"ipcSend",value:function ipcSend(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];(t=this.instance)._ipcSend.apply(t,[e].concat(i))}},{key:"ShowOpenDialog",value:function ShowOpenDialog(e){return this.instance._ShowOpenDialog(e)}}]),RELAY}(s.ServiceBase);e.exports=u},{18:21,12:27,21:190,20:267,14:458}],14:[function(__r__,e,t){var n=__r__(12),i=__r__(22),s=function(e){_inherits(Request,e);var t=_createSuper(Request);function Request(){return _classCallCheck(this,Request),t.call(this)}return _createClass(Request,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Request.prototype),"_Init",this).call(this),this._emitter=null,this._requestType=null,this._options=null,this._handled=!1,this._handler=null,this._onFail=null,this._onSuccess=null,this._timeout=0,this._life=0,this._failReason=""}},{key:"requestType",get:function get(){return this._requestType},set:function set(e){this._requestType=e}},{key:"emitter",get:function get(){return this._emitter},set:function set(e){this._emitter=e}},{key:"onSuccess",get:function get(){return this._onSuccess},set:function set(e){this._onSuccess=e}},{key:"onFail",get:function get(){return this._onFail},set:function set(e){this._onFail=e}},{key:"_Success",value:function _Success(){this._onSuccess&&this._onSuccess.call(this._emitter,this)}},{key:"_Fail",value:function _Fail(e){this._failReason=e||"undocumented",this._onFail&&this._onFail.call(this._emitter,this)}},{key:"timeout",get:function get(){return this._timeout},set:function set(e){this._timeout=e}},{key:"life",get:function get(){return this._life},set:function set(e){this._life=e}},{key:"options",get:function get(){return this._options},set:function set(e){this._options=e}},{key:"failReason",get:function get(){return this._failReason}},{key:"GetOption",value:function GetOption(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._options;return n&&n.hasOwnProperty(e)?n[e]:t}},{key:"isHandled",get:function get(){return this._handled}},{key:"HandleSuccess",value:function HandleSuccess(e){if(this._handled)throw new Error("A request may not be handled twice.");this._handled=!0,this._handler=e,this._Success()}},{key:"HandleFail",value:function HandleFail(e){this._Fail(e)}},{key:"_CleanUp",value:function _CleanUp(){this._emitter=null,this._requestType=null,this._options=null,this._handled=!1,this._handler=null,this._onFail=null,this._onSuccess=null,this._timeout=0,this._life=0,_get(_getPrototypeOf(Request.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){var e=this._requestType&&"toString"in this._requestType?this._requestType.toString():this._requestType,t=this._emitter?this._emitter.constructor.name:"---";return"".concat(e," (from '").concat(t,"')")}}],[{key:"Emit",value:function Emit(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Request,h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],d=n.Rent(u);return d.requestType=e,d.emitter=s,d.onFail=l,d.onSuccess=a,d.timeout=c,d.options=t,h&&i.HandleRequest(d),d}}]),Request}(n.pool.DisposableObject);e.exports=s},{22:13,12:27}],15:[function(__r__,e,t){e.exports={APP_MESSAGES:__r__(23),AppBase:__r__(24),AutoUpdateDialogBox:__r__(25),GlobalOverlayHandler:__r__(26)}},{24:16,23:17,25:18,26:19}],16:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(21),a=__r__(27),l=__r__(28),c=__r__(29),u=__r__(30),h=__r__(31),d=__r__(32),p=__r__(33),m=__r__(34),y=__r__(35),g=function(e){_inherits(AppBase,e);var t=_createSuper(AppBase);function AppBase(){return _classCallCheck(this,AppBase),t.call(this)}return _createClass(AppBase,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(AppBase.prototype),"_Init",this).call(this),this._APPID="".concat(this.constructor.name),this._darkPaletteBuilder=null,this._lightPaletteBuilder=null,this._userPreferences=i.Rent(m),this._defaultUserPreferences={},this._layersWrapperClass=u.views.LayerContainer,this._layersWrapper=null,this._layers=[],this._overlayHandlerClass=y,this._overlayHandler=null,this._commands=new a.CommandBox,this._ipcBindings=[{evt:p.NODE_MESSAGE,fn:this._Bind(this._onNodeMessage)},{evt:p.NODE_ERROR,fn:this._Bind(this._onNodeError)},{evt:p.NODE_WARNING,fn:this._Bind(this._onNodeWarning)}],s.features.Watch(s.SIGNAL.COLORSCHEME_CHANGED,this._OnColorschemeChange,this),s.ENV.Watch(s.SIGNAL.PWA_UPDATE_AVAILABLE,this._OnPWAUpdateAvailable,this),this._loadingOverlay=document.getElementById("__loading__"),this._loadingOverlay&&s.ENV.ARGV.Has("no-loading")&&n.dom.Detach(this._loadingOverlay)}},{key:"_PostInit",value:function _PostInit(){if(_get(_getPrototypeOf(AppBase.prototype),"_PostInit",this).call(this),s.ENV.instance.RegisterServices(a.RELAY,l.RESOURCES,d.DIALOG),!this._layersWrapperClass)throw new Error("No app wrapper constructor defined.");if(!n.isInstanceOf(this._layersWrapperClass,u.views.LayerContainer))throw new Error("App wrapper constructor (".concat(this._layersWrapperClass.name,") must implement ui.views.LayerContainer."))}},{key:"mainWrapper",get:function get(){return this._layersWrapper}},{key:"userPreferences",get:function get(){return this._userPreferences}},{key:"SetUp",value:function SetUp(){n.LOG._("".concat(this._APPID," : SETUP"),"#339a6e","#212121"),s.isNodeEnabled&&this._RegisterIPCBindings(),c.STYLE.instance.defaultPalette._themeId=s.ENV.instance.config.theme||"default",this._layersWrapper=u.UI.Rent(this._layersWrapperClass),this._layersWrapper.setAttribute("id","app"),n.dom.AttachFirst(n.dom.El("link",{href:c.STYLE.instance.current.GetCSSLink("@/global.css"),rel:"stylesheet"}),this._layersWrapper._host);var e=this._layers?this._layers.length:0;if(e>0){for(var t=0,i=e;t<i;t++){var a=this._layers[t],l=this._layersWrapper.Add(a.cl);a.layer=l,a.id&&(this[a.id]=l),a.fn&&a.fn(l,a)}this._overlayHandler=this._layersWrapper.Add(this._overlayHandlerClass);for(var h=0,d=e;h<d;h++){var p=this._layers[h];p.postFn&&p.postFn(p.layer,p)}}else this._overlayHandler=this._layersWrapper.Add(this._overlayHandlerClass)}},{key:"_RegisterIPCBindings",value:function _RegisterIPCBindings(){for(var e,t=0,n=this._ipcBindings.length;t<n;t++)e=this._ipcBindings[t],a.RELAY.ipcOn(e.evt,e.fn)}},{key:"_OnPWAUpdateAvailable",value:function _OnPWAUpdateAvailable(){var e="";e=s.displayMode!=s.ENV_DISPLAY.STANDALONE?"An update is available, please refresh the page to apply it.":"An update is available, please close & re-open the app to apply it.",d.DIALOG.Push({title:"Update available",message:e,actions:[{label:"Ok",flavor:u.FLAGS.CTA}],origin:this})}},{key:"_InternalStart",value:function _InternalStart(){s.ENV.ARGV.Has("no-start")||this.Start()}},{key:"Start",value:function Start(){n.LOG._("".concat(this._APPID," : START"),"#339a6e","#212121"),n.dom.El("link",{href:c.STYLE.instance.current.GetCSSLink("@/global.css"),rel:"stylesheet"},document.head),n.dom.Attach(this._layersWrapper,document.body),this._userPreferences.Load("".concat(this._APPID,"Preferences"),this._defaultUserPreferences,this._Bind(this._InitUserPreferences),this._Bind(this._OnAppReadyInternal))}},{key:"_InitUserPreferences",value:function _InitUserPreferences(e){}},{key:"_OnAppReadyInternal",value:function _OnAppReadyInternal(e){if(a.RELAY.instance.Watch(a.REQUEST.EDIT,this._OnEditRequest,this),s.isNodeEnabled,n.LOG._("".concat(this._APPID," : READY"),"#030107","#339a6e"),this.AppReady(),this._loadingOverlay){this._loadingOverlay.addEventListener("animationend",(function(e){n.dom.Detach(e.target)}));var t="250ms",i="250ms",l="cubic-bezier(0.885, 0.025, 0.960, 0.030)",c=this.constructor.__loading_cssAnimationOut;this._loadingOverlay.style.animation="".concat(c," ").concat(t," ").concat(i," ").concat(l)}}},{key:"AppReady",value:function AppReady(e){}},{key:"_HandleDialogRequest",value:function _HandleDialogRequest(e){this._overlayHandler.HandleOverlayRequest(e)}},{key:"_OnEditRequest",value:function _OnEditRequest(e){}},{key:"_OnColorschemeChange",value:function _OnColorschemeChange(){}},{key:"ReloadApp",value:function ReloadApp(){a.RELAY.ipcSend(p.DO_RELOAD_APP)}},{key:"OpenWindow",value:function OpenWindow(e){a.RELAY.ipcSend(p.DO_OPEN_WINDOW,e)}},{key:"CloseWindow",value:function CloseWindow(e){a.RELAY.ipcSend(p.DO_CLOSE_WINDOW,e)}},{key:"Print",value:function Print(e){a.RELAY.ipcSend(p.DO_PRINT_WINDOW,e)}},{key:"LoadAndPrint",value:function LoadAndPrint(e){a.RELAY.ipcSend(p.DO_OPEN_AND_PRINT_WINDOW,e)}},{key:"_onNodeError",value:function _onNodeError(e,t){var n;console.error(t.error),d.DIALOG.Push((_defineProperty(n={},i.IDS.TITLE,t.message),_defineProperty(n,i.IDS.ICON,"error"),_defineProperty(n,i.IDS.MESSAGE,"".concat(t.error.message)),_defineProperty(n,"actions",[{text:"Close"}]),n))}},{key:"_onNodeWarning",value:function _onNodeWarning(e,t){var n;console.warning(t.message),d.DIALOG.Push((_defineProperty(n={},i.IDS.TITLE,"Attention !"),_defineProperty(n,i.IDS.ICON,"warning"),_defineProperty(n,i.IDS.MESSAGE,"".concat(t.message)),_defineProperty(n,"actions",[{text:"Close"}]),n))}},{key:"_onNodeMessage",value:function _onNodeMessage(e,t){console.log(t.message)}}]),AppBase}(i.helpers.SingletonEx);_defineProperty(g,"__loading_cssAnimationOut","__loading__fadeOut"),e.exports=g},{33:17,35:19,34:20,27:1,12:27,31:66,32:177,21:190,28:198,29:272,30:285,14:458}],17:[function(__r__,e,t){var n=function APP_MESSAGES(){_classCallCheck(this,APP_MESSAGES)};_defineProperty(n,"ERROR","node-error"),_defineProperty(n,"WARNING","node-warning"),_defineProperty(n,"MESSAGE","node-message"),_defineProperty(n,"AU_CHECK_REQUEST","au-check-request"),_defineProperty(n,"AU_CHECK_REQUEST_HANDLED","au-check-request-handled"),_defineProperty(n,"AU_NO_SERVER","au-no-server"),_defineProperty(n,"AU_ATTEMPT_CHECK","au-attempt-check"),_defineProperty(n,"AU_CHECKING_FOR_UPDATE","au-checking-for-update"),_defineProperty(n,"AU_UPDATE_AVAILABLE","au-udpate-available"),_defineProperty(n,"AU_UPDATE_NOT_AVAILABLE","au-update-not-available"),_defineProperty(n,"AU_UPDATE_DOWNLOADED","au-update-downloaded"),_defineProperty(n,"NODE_MESSAGE","node-message"),_defineProperty(n,"NODE_ERROR","node-error"),_defineProperty(n,"NODE_WARNING","node-warning"),_defineProperty(n,"DO_RELOAD_APP","do-reload-app"),_defineProperty(n,"DO_OPEN_WINDOW","request-window-open"),_defineProperty(n,"DO_RELOAD_WINDOW","request-window-reload"),_defineProperty(n,"DO_CLOSE_WINDOW","request-window-close"),_defineProperty(n,"DO_PRINT_WINDOW","request-window-print"),_defineProperty(n,"DO_OPEN_AND_PRINT_WINDOW","request-window-and-print"),e.exports=n},{}],18:[function(__r__,e,t){var n=__r__(30),i=__r__(32),s=__r__(36),a=function(e){_inherits(AutoUpdateDialogBox,e);var t=_createSuper(AutoUpdateDialogBox);function AutoUpdateDialogBox(){return _classCallCheck(this,AutoUpdateDialogBox),t.call(this)}return _createClass(AutoUpdateDialogBox,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(AutoUpdateDialogBox.prototype),"_Init",this).call(this)}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(AutoUpdateDialogBox.prototype),"_OnDataChanged",this).call(this,e);var t=this._data;RELAY.ipcOn(s.AU_ERROR,this._Bind(this._OnAUError)),RELAY.ipcOn(s.AU_CHECKING_FOR_UPDATE,this._Bind(this._OnAUCheckingForUpdate)),RELAY.ipcOn(s.AU_UPDATE_AVAILABLE,this._Bind(this._OnAUUpdateAvailable)),RELAY.ipcOn(s.AU_UPDATE_NOT_AVAILABLE,this._Bind(this._OnAUUpdateNotAvailable)),RELAY.ipcOn(s.AU_UPDATE_DOWNLOADED,this._Bind(this._OnAUUpdateDownloaded)),RELAY.ipcOn(s.AU_CHECK_REQUEST_HANDLED,this._Bind(this._OnAURequestHandled)),RELAY.ipcSend(s.AU_CHECK_REQUEST)}},{key:"_OnAURequestHandled",value:function _OnAURequestHandled(e,t,n){t!==s.AU_NO_SERVER||this._Close()}},{key:"_OnAUError",value:function _OnAUError(e,t){this._title.text="Oops !",this._bodyContent.text="Encountered a bumper while auto-updating : ".concat(t),this._ClearHandles(),this.CreateHandle({text:"Well then.",trigger:{fn:this._Close}})}},{key:"_OnAUCheckingForUpdate",value:function _OnAUCheckingForUpdate(e,t){this._title.text="Checking for update",this._bodyContent.text="Stand still."}},{key:"_OnAUUpdateAvailable",value:function _OnAUUpdateAvailable(e,t){this._title.text="Great !",this._bodyContent.text="An update was found, it is already downloading in the background.\nYou can either wait for the download to finish or carry on.",this.CreateHandle({text:"Install now !",trigger:{fn:this._Close}}),this.CreateHandle({text:"Continue working.",trigger:{fn:this._Close}})}},{key:"_OnAUUpdateNotAvailable",value:function _OnAUUpdateNotAvailable(e,t){this._title.text="You're all set !",this._bodyContent.text="No need for update.",this._ClearHandles(),this.CreateHandle({text:"Well then.",trigger:{fn:this._Close}})}},{key:"_OnAUUpdateDownloaded",value:function _OnAUUpdateDownloaded(e,t){this._title.text="Ray-day",this._bodyContent.text="Update has been downloaded and is ready to be installed.",this._ClearHandles(),this.CreateHandle({text:"Install now !",trigger:{fn:this._Close}}),this.CreateHandle({text:"Later.",trigger:{fn:this._Close}})}},{key:"_Clear",value:function _Clear(){_get(_getPrototypeOf(AutoUpdateDialogBox.prototype),"_Clear",this).call(this)}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(AutoUpdateDialogBox.prototype),"_CleanUp",this).call(this)}}]),AutoUpdateDialogBox}(i.DialogBox);e.exports=a,n.Register("nkmjs-auto-update-dialog-box",a)},{36:17,32:177,30:285}],19:[function(__r__,e,t){var n=__r__(27),i=__r__(30),s=__r__(32),a=__r__(37),l=function(e){_inherits(GlobalOverlayHandler,e);var t=_createSuper(GlobalOverlayHandler);function GlobalOverlayHandler(){return _classCallCheck(this,GlobalOverlayHandler),t.call(this)}return _createClass(GlobalOverlayHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(GlobalOverlayHandler.prototype),"_Init",this).call(this),this.CaptureLocalRequest(a.REQUEST.DRAWER).CaptureLocalRequest(s.REQUEST.DIALOG),n.RELAY.Watch(i.REQUEST.OVERLAY,this.HandleOverlayRequest,this).Watch(a.REQUEST.DRAWER,this.HandleOverlayRequest,this).Watch(s.REQUEST.DIALOG,this.HandleOverlayRequest,this)}}]),GlobalOverlayHandler}(i.overlays.OverlayHandler);e.exports=l,i.Register("nkmjs-global-overlay-handler",l)},{27:1,32:177,30:285,37:390}],20:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(38),l=function(e){_inherits(UserPreferences,e);var t=_createSuper(UserPreferences);function UserPreferences(){return _classCallCheck(this,UserPreferences),t.call(this)}return _createClass(UserPreferences,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(UserPreferences.prototype),"_Init",this).call(this),this._document=null,this._waitForThen=!1,this._initFn=null,this._thenFn=null,this._Bind(this._OnDocumentLoadSuccess),this._Bind(this._OnDocumentLoadError),this._Bind(this._OnDocumentSaveSuccess),this._Bind(this._OnDocumentSaveError),this._delayedSave=new i.time.DelayedCall(this._Bind(this.Save))}},{key:"Load",value:function Load(e,t,i,l){this._initFn=i,this._thenFn=l,this._defaults=t,this._waitForThen=!0,this._document=a.DOCUMENTS.Get({path:"".concat(n.PATH.USER_DATA,"/").concat(e,".json"),data:s.Metadata}),this._document.Watch(s.SIGNAL.DIRTY,this._OnDocumentDirty,this),this._document.Load({success:this._OnDocumentLoadSuccess,error:this._OnDocumentLoadError})}},{key:"_OnDocumentLoadSuccess",value:function _OnDocumentLoadSuccess(){n.LOG._("PREFS >> Successfully loaded.","#c862e3"),this.Init(),this._Then()}},{key:"_OnDocumentLoadError",value:function _OnDocumentLoadError(e){n.LOG._("PREFS >> Could not be found.","#c862e3"),this.Init()}},{key:"Init",value:function Init(){this._defaults&&n.tils.SetMissing(this._document.currentData._data,this._defaults),this._initFn(this._document.currentData),this._document.Dirty(),n.LOG._("PREFS >> Ready.","#c862e3")}},{key:"Save",value:function Save(){this._document.Save({success:this._OnDocumentSaveSuccess,error:this._OnDocumentSaveError})}},{key:"_OnDocumentSaveSuccess",value:function _OnDocumentSaveSuccess(){n.LOG._("PREFS >> Saved","#c862e3"),this._Then()}},{key:"_OnDocumentSaveError",value:function _OnDocumentSaveError(e){throw e}},{key:"_Then",value:function _Then(){this._waitForThen&&this._thenFn(this._document.currentData),this._waitForThen=!1}},{key:"_OnDocumentDirty",value:function _OnDocumentDirty(){this._delayedSave.Schedule()}},{key:"Set",value:function Set(e,t){return this._document.currentData.Set(e,t)}},{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._document.currentData.Get(e,t)}},{key:"GetOrSet",value:function GetOrSet(e,t){return this._document.currentData.GetOrSet(e,t)}},{key:"Delete",value:function Delete(e){this._document.currentData.Delete(e)}}]),UserPreferences}(i.pool.DisposableObjectEx);e.exports=l},{12:27,31:66,38:183,14:458}],21:[function(__r__,e,t){e.exports={List:__r__(39),Dictionary:__r__(40),KDictionary:__r__(41),DictionaryList:__r__(42)}},{40:23,42:22,41:25,39:26}],22:[function(__r__,e,t){var n=function(){function DictionaryList(){_classCallCheck(this,DictionaryList),this._map=new Map}return _createClass(DictionaryList,[{key:"internalMap",get:function get(){return this._map}},{key:"count",get:function get(){return this._map.size}},{key:"isEmpty",get:function get(){return this._map.size<=0}},{key:"keys",get:function get(){return Array.from(this._map.keys())}},{key:"Contains",value:function Contains(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return!!this._map.has(e)&&(void 0===t||this._map.get(e).includes(t))}},{key:"Count",value:function Count(e){return this._map.has(e)?this._map.get(e).length:0}},{key:"Set",value:function Set(e,t){var n=null;this._map.has(e)?n=this._map.get(e):(n=[],this._map.set(e,n)),n.includes(t)||n.push(t)}},{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(this._map.has(e)){var n=this._map.get(e);if(-1===t)return n;if(n.length<t)return n[t];throw new Error("index is out of bounds")}}},{key:"Remove",value:function Remove(e,t){if(!t||!e)return!1;var n=this._map.get(e);if(!n)return!1;var i=n.indexOf(t);return-1!=i&&(n.splice(i,1),0===n.length&&this._map.delete(e),!0)}},{key:"RemoveMultiple",value:function RemoveMultiple(e){throw new Error("RemoveMultiple not implemented")}},{key:"Pop",value:function Pop(e){if(this._map.has(e)){var t=this._map.get(e),n=t.pop();return 0===t.length&&this._map.delete(e),n}}},{key:"Clear",value:function Clear(){this._map.forEach(this._Clear,this),this._map.clear()}},{key:"_Clear",value:function _Clear(e,t,n){e.length=0}}]),DictionaryList}();e.exports=n},{}],23:[function(__r__,e,t){var n=__r__(43),i=function(){function Dictionary(){_classCallCheck(this,Dictionary),this._map=new Map}return _createClass(Dictionary,[{key:"internalMap",get:function get(){return this._map}},{key:"count",get:function get(){return this._map.size}},{key:"isEmpty",get:function get(){return this._map.size<=0}},{key:"keys",get:function get(){return Array.from(this._map.keys())}},{key:"Contains",value:function Contains(e){return this._map.has(e)}},{key:"Set",value:function Set(e,t){this._map.set(e,t)}},{key:"Get",value:function Get(e){return this._map.get(e)}},{key:"GetValueKeys",value:function GetValueKeys(e){if(n(e))return null;for(var t=null,i=this.keys,s=0,a=i.length;s<a;s++){var l=i[s];this._map.get(l)===e&&(null===t&&(t=[]),t.push(l))}return t}},{key:"Remove",value:function Remove(e){return this._map.delete(e)}},{key:"ForEach",value:function ForEach(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Array.from(this._map.keys());if(n)for(var s=i.length-1;s>=0;s--){var a=i[s];e.call(t,a,this._map.get(a))}else for(var l=0,c=i.length;l<c;l++){var u=i[l];e.call(t,u,this._map.get(u))}}},{key:"Clear",value:function Clear(){this._map.clear()}}]),Dictionary}();e.exports=i},{43:24}],24:[function(__r__,e,t){e.exports=function isVoid(e){return null==e}},{}],25:[function(__r__,e,t){var n=function(){function KDictionary(){_classCallCheck(this,KDictionary),this._rootMap=new Map}return _createClass(KDictionary,[{key:"rootMap",get:function get(){return this._rootMap}},{key:"Contains",value:function Contains(){for(var e=this._rootMap,t=0,n=arguments.length;t<n;t++)if(!(e=e.get(t<0||arguments.length<=t?void 0:arguments[t])))return!1;return!0}},{key:"Set",value:function Set(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.pop(),s=t.pop(),a=this._rootMap,l=a,c=0,u=t.length;c<u;c++){var h=t[c];(a=a.get(h))||(a=new Map,l.set(h,a)),l=a}l.set(s,i)}},{key:"Get",value:function Get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.pop(),s=this._rootMap,a=0,l=t.length;a<l;a++)if(!(s=s.get(t[a])))return null;return s.get(i)}},{key:"Remove",value:function Remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.pop(),s=this._rootMap,a=0,l=t.length;a<l;a++)if(!(s=s.get(t[a])))return null;var c=s.get(i);"undefined"!=typeof p_value&&null!==p_value&&(("function"==typeof c?c.prototype:c)instanceof Map&&c.clear(),s.remove(i))}},{key:"Clear",value:function Clear(){this._rootMap.clear()}}]),KDictionary}();e.exports=n},{}],26:[function(__r__,e,t){var n=__r__(43),i=function(){function List(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classCallCheck(this,List),this._array=new Array(e)}return _createClass(List,[{key:"internalArray",get:function get(){return this._array}},{key:"isEmpty",get:function get(){return 0===this._array.length}},{key:"count",get:function get(){return this._array.length}},{key:"first",get:function get(){return this._array[0]}},{key:"last",get:function get(){return this._array[this._array.length-1]}},{key:"Contains",value:function Contains(e){return this._array.includes(e)}},{key:"IndexOf",value:function IndexOf(e){return this._array.indexOf(e)}},{key:"Add",value:function Add(e){return!n(e)&&(!this._array.includes(e)&&(this._array.push(e),!0))}},{key:"Unshift",value:function Unshift(e){if(n(e))return!1;if(this._array.includes(e)){var t=this._array.indexOf(e);0!=t&&this._array.splice(t,1)}return this._array.unshift(e),!0}},{key:"Remove",value:function Remove(e){return!n(e)&&this.RemoveAt(this._array.indexOf(e))}},{key:"RemoveAt",value:function RemoveAt(e){return!(e<0||e>=this._array.length)&&this._array.splice(e,1)[0]}},{key:"Insert",value:function Insert(e,t){return!n(e)&&(-1==this._array.indexOf(e)?t>=this._array.length?(this._array.push(e),e):(this._array.splice(t,0,e),e):void 0);var i}},{key:"Move",value:function Move(e,t){if(n(e))return!1;var i=this._array.indexOf(e);return-1!=i&&(this._array.splice(i,1),t>=this._array.length?this._array.push(e):this._array.splice(t,0,e),e)}},{key:"MoveBefore",value:function MoveBefore(e,t){if(n(e)||n(t))return!1;var i=this._array.indexOf(e),s=this._array.indexOf(t);return-1!=i&&-1!=s&&(i<s&&s--,this._array.splice(i,1),this._array.splice(s,0,e),e)}},{key:"MoveAfter",value:function MoveAfter(e,t){if(n(e)||n(t))return!1;var i=this._array.indexOf(e),s=this._array.indexOf(t);return-1!=i&&-1!=s&&(this._array.splice(i,1),(s=i<s?s:s+1)>=this._array.length?this._array.push(e):this._array.splice(s,0,e),e)}},{key:"ToStart",value:function ToStart(e){if(n(e))return!1;var t=this._array.indexOf(e);return-1!=t&&(this._array.splice(t,1),this._array.unshift(e),e)}},{key:"ToEnd",value:function ToEnd(e){if(n(e))return!1;var t=this._array.indexOf(e);return-1!=t&&(this._array.splice(t,0),this._array.push(e),e)}},{key:"At",value:function At(e){return this._array[e]}},{key:"Pop",value:function Pop(){return this._array.pop()}},{key:"Shift",value:function Shift(){return this._array.shift()}},{key:"ForEach",value:function ForEach(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._array.length;if(n)for(var s=i-1;s>=0;s--)e.call(t,this._array[s],s);else for(var a=0;a<i;a++)e.call(t,this._array[a],a)}},{key:"Clear",value:function Clear(){this._array.length=0}}]),List}();e.exports=i},{43:24}],27:[function(__r__,e,t){var n=__r__(44);e.exports={NFOS:__r__(45),BINDINGS:__r__(46),SIGNAL:__r__(47),FLAGS:__r__(48),IDS:__r__(49),filters:__r__(50),helpers:__r__(51),pool:__r__(52),signals:__r__(53),time:__r__(54),Rent:n.Rent.bind(n),Preload:n.Preload.bind(n)}},{46:28,50:35,48:36,51:42,49:49,45:50,52:53,44:54,47:55,53:56,54:61}],28:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(55),a=__r__(56),l=new i.Dictionary,c=new i.Dictionary,u=new i.KDictionary,h=new i.KDictionary,d=new i.DictionaryList,p=new i.KDictionary,m=function(){function BINDINGS(){_classCallCheck(this,BINDINGS)}return _createClass(BINDINGS,null,[{key:"Expand",value:function Expand(e){n.isFunc(e)&&(e=new e),e.Deploy()}},{key:"SetClass",value:function SetClass(e,t){l.Set(e,t),c.Set(t,e)}},{key:"GetClass",value:function GetClass(e){return l.Get(e)}},{key:"GetClassKey",value:function GetClassKey(e){n.isObject(e)&&(e=e.constructor);var t=c.Get(e);if(!t){if(!(t=n.tils.Get(s.Get(e),a.UID,null)))throw new Error("No valid NFO found for ".concat(e.name));this.SetClass(t,e)}return t}},{key:"RemoveClass",value:function RemoveClass(e){l.Remove(e)}},{key:"Set",value:function Set(e,t,n){h.Set(e,t,n),d.Set(e,t)}},{key:"Get",value:function Get(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t=n.isFunc(t)?t:t.constructor,!n.isFunc(t))throw new Error("p_key must be a constructor or have an accessible constructor.");var a=h.Get(e,t);if(!a&&s){var l=d.Get(e);if(!l)return null;for(var c=-1,u=Number.MAX_SAFE_INTEGER,m=0,y=l.length;m<y;m++){var g=l[m];if(c=p.Get(t,g),n.isVoid(c)&&(c=n.tils.InheritanceDistance(t,g),p.Set(t,g,c)),-1!==c&&c<u){var v=h.Get(e,g);v&&(u=c,a=v)}}}return a||i}},{key:"Remove",value:function Remove(e,t,n){h.Remove(e,t,n),d.Remove(e,t)}}]),BINDINGS}();e.exports=m},{56:49,55:50,18:21,14:458}],29:[function(__r__,e,t){var n=__r__(14),i=__r__(57),s,a=function(e){_inherits(FilterBox,e);var t=_createSuper(FilterBox);function FilterBox(){return _classCallCheck(this,FilterBox),t.call(this)}return _createClass(FilterBox,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FilterBox.prototype),"_Init",this).call(this),this._filters=[]}},{key:"Add",value:function Add(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n.isFunc(e)){if(e=i.Rent(e),t)for(var s in t)e[s]=t[s];return this._filters.push(e),this._Reorder(),e}return this._filters.includes(e)?null:(this._filters.push(e),this._Reorder(),e)}},{key:"_Reorder",value:function _Reorder(){}},{key:"Check",value:function Check(e){return!0}}]),FilterBox}(__r__(58));e.exports=a},{57:54,58:34,14:458}],30:[function(__r__,e,t){var n,i=function(e){_inherits(FieldFieldValueNumber,e);var t=_createSuper(FieldFieldValueNumber);function FieldFieldValueNumber(){return _classCallCheck(this,FieldFieldValueNumber),t.call(this)}return _createClass(FieldFieldValueNumber,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldFieldValueNumber.prototype),"_Init",this).call(this),this._rangeStart=NaN,this._rangeEnd=NaN,this._Bind(this.CheckNumberRange),this._Bind(this.CheckNumberMin),this._Bind(this.CheckNumberMax)}},{key:"rangeStart",get:function get(){return this._rangeStart},set:function set(e){this._rangeStart=e,this._UpdateFn()}},{key:"rangeEnd",get:function get(){return this._rangeEnd},set:function set(e){this._rangeEnd=e,this._UpdateFn()}},{key:"_UpdateFn",value:function _UpdateFn(){this._checkFn=this.Check,NaN!=this._rangeStart?NaN!=this._rangeEnd?this.CheckNumberRange:this._checkFn=this.CheckNumberMin:NaN!=this._rangeEnd&&(this._checkFn=this.CheckNumberMax)}},{key:"CheckNumberRange",value:function CheckNumberRange(e){var t=this._FetchValue(e);return t>this._rangeEnd||t<this._rangeStart?this._Accept(e):this._Deny(e)}},{key:"CheckNumberMin",value:function CheckNumberMin(e){return this._FetchValue(e)<this._rangeEnd?this._Accept(e):this._Deny(e)}},{key:"CheckNumberMax",value:function CheckNumberMax(e){return this._FetchValue(e)>this._rangeEnd?this._Accept(e):this._Deny(e)}},{key:"_CleanUp",value:function _CleanUp(){this._rangeStart=NaN,this._rangeEnd=NaN,_get(_getPrototypeOf(FieldFieldValueNumber.prototype),"_CleanUp",this).call(this)}}]),FieldFieldValueNumber}(__r__(59));e.exports=i},{59:33}],31:[function(__r__,e,t){var n,i=function(e){_inherits(FilterFieldValueNumber,e);var t=_createSuper(FilterFieldValueNumber);function FilterFieldValueNumber(){return _classCallCheck(this,FilterFieldValueNumber),t.call(this)}return _createClass(FilterFieldValueNumber,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FilterFieldValueNumber.prototype),"_Init",this).call(this),this._rangeStart=NaN,this._rangeEnd=NaN,this._Bind(this.CheckString),this._Bind(this.CheckStringRange),this._Bind(this.CheckStringMin),this._Bind(this.CheckStringMax)}},{key:"rangeStart",get:function get(){return this._rangeStart},set:function set(e){this._rangeStart=e,this._UpdateFn()}},{key:"rangeEnd",get:function get(){return this._rangeEnd},set:function set(e){this._rangeEnd=e,this._UpdateFn()}},{key:"_UpdateFn",value:function _UpdateFn(){this._checkFn=this.CheckString,NaN!=this._rangeStart?NaN!=this._rangeEnd?this.CheckStringRange:this._checkFn=this.CheckStringMin:NaN!=this._rangeEnd&&(this._checkFn=this.CheckStringMax)}},{key:"CheckString",value:function CheckString(e){return this._FetchValue(e).includes(this._checkValue)?this._Accept(e):this._Deny(e)}},{key:"CheckStringRange",value:function CheckStringRange(e){var t=e[this._checkName],n=t.length,i=this._checkValue.length;return n<this._rangeStart||n<i||n<this._rangeEnd||n-this._rangeStart<i||!t.substring(this._rangeStart,this._rangeEnd).includes(this._checkValue)?this._Accept(e):this._Deny(e)}},{key:"CheckStringMin",value:function CheckStringMin(e){var t=e[this._checkName],n=t.length,i=this._checkValue.length;return n<this._rangeStart||n<i||n-this._rangeStart<i||!t.substr(this._rangeStart).includes(this._checkValue)?this._Accept(e):this._Deny(e)}},{key:"CheckStringMax",value:function CheckStringMax(e){var t=e[this._checkName],n=t.length,i=this._checkValue.length;return n<this._rangeStart||n<i||n<this._rangeEnd||!t.substring(0,this._rangeEnd).includes(this._checkValue)?this._Accept(e):this._Deny(e)}},{key:"_CleanUp",value:function _CleanUp(){this._rangeStart=NaN,this._rangeEnd=NaN,_get(_getPrototypeOf(FilterFieldValueNumber.prototype),"_CleanUp",this).call(this)}}]),FilterFieldValueNumber}(__r__(59));e.exports=i},{59:33}],32:[function(__r__,e,t){var n=__r__(14),i,s=function(e){_inherits(FilterFieldValueType,e);var t=_createSuper(FilterFieldValueType);function FilterFieldValueType(){return _classCallCheck(this,FilterFieldValueType),t.call(this)}return _createClass(FilterFieldValueType,[{key:"Check",value:function Check(e){n.isInstanceOf(this._FetchValue(e),this._checkValue)?this._Accept(e):this._Deny(e)}}]),FilterFieldValueType}(__r__(59));e.exports=s},{59:33,14:458}],33:[function(__r__,e,t){var n,i=function(e){_inherits(FilterFieldValue,e);var t=_createSuper(FilterFieldValue);function FilterFieldValue(){return _classCallCheck(this,FilterFieldValue),t.call(this)}return _createClass(FilterFieldValue,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FilterFieldValue.prototype),"_Init",this).call(this),this._checkName=null,this._checkValue=null}},{key:"checkName",get:function get(){return this._checkName},set:function set(e){this._checkName=e,this._UpdateFn()}},{key:"checkValue",get:function get(){return this._checkValue},set:function set(e){this._checkValue=e,this._UpdateFn()}},{key:"_UpdateFn",value:function _UpdateFn(){}},{key:"_FetchValue",value:function _FetchValue(e){return e[this._checkName]}},{key:"Check",value:function Check(e){var t;return this._FetchValue(e)===this._checkValue?this._Accept(e):this._Deny(e)}},{key:"_CleanUp",value:function _CleanUp(){this._checkName=null,this._checkValue=null,_get(_getPrototypeOf(FilterFieldValue.prototype),"_CleanUp",this).call(this)}}]),FilterFieldValue}(__r__(58));e.exports=i},{58:34}],34:[function(__r__,e,t){var n,i=function(e){_inherits(Filter,e);var t=_createSuper(Filter);function Filter(){var e;return _classCallCheck(this,Filter),(e=t.call(this))._checkFn=e._Bind(e.Check),e._invert=!1,e}return _createClass(Filter,[{key:"checkFn",get:function get(){return this._checkFn},set:function set(e){this._checkFn=e}},{key:"invert",get:function get(){return this._invert},set:function set(e){this._invert=e}},{key:"Check",value:function Check(e){return this._Accept(e)}},{key:"_Accept",value:function _Accept(e){return this._invert?(this._Broadcast(Filter.DENIED,e),!1):(this._Broadcast(Filter.ACCEPTED,e),!0)}},{key:"_Deny",value:function _Deny(e){return this._invert?(this._Broadcast(Filter.ACCEPTED,e),!0):(this._Broadcast(Filter.DENIED,e),!1)}}]),Filter}(__r__(60));_defineProperty(i,"ACCEPTED",Symbol("accepted")),_defineProperty(i,"DENIED",Symbol("denied")),e.exports=i},{60:51}],35:[function(__r__,e,t){e.exports={Filter:__r__(58),FilterBox:__r__(61),FieldValue:__r__(59),FieldValueNumber:__r__(62),FieldValueString:__r__(63),FieldValueType:__r__(64)}},{58:34,61:29,59:33,62:30,63:31,64:32}],36:[function(__r__,e,t){var n=function FLAGS(){_classCallCheck(this,FLAGS)};_defineProperty(n,"INFOS","infos"),_defineProperty(n,"WARNING","warning"),_defineProperty(n,"ERROR","error"),_defineProperty(n,"READY","ready"),_defineProperty(n,"DIRTY","dirty"),_defineProperty(n,"LOADING","loading"),_defineProperty(n,"PROCESSING","processing"),_defineProperty(n,"WAITING","waiting"),_defineProperty(n,"ACTIVE","active"),e.exports=n},{}],37:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=__r__(65),a=__r__(60),l=__r__(66),c=function(e){_inherits(BindingKit,e);var t=_createSuper(BindingKit);function BindingKit(){return _classCallCheck(this,BindingKit),t.call(this)}return _createClass(BindingKit,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(BindingKit.prototype),"_Init",this).call(this),this._deployed=!1,this._KVPS=[],this._CLASSES=[],this._classDict=new n.Dictionary}},{key:"Add",value:function Add(){if(this._deployed)throw new Error("Cannot add binding to kit while it is deployed.");for(var e=0,t=arguments.length;e<t;e++)this._KVPS.push(e<0||arguments.length<=e?void 0:arguments[e])}},{key:"AddClasses",value:function AddClasses(){if(this._deployed)throw new Error("Cannot add binding to kit while it is deployed.");for(var e=0,t=arguments.length;e<t;e++)this._CLASSES.push(e<0||arguments.length<=e?void 0:arguments[e])}},{key:"Deploy",value:function Deploy(){if(!this._deployed){for(var e=0,t=this._KVPS.length;e<t;e++)for(var n=this._KVPS[e],a=n.context,c=n.kvps,u=0,h=c.length;u<h;u++){var d=c[u];l.Set(a,d.key,d.binding);var p=i.isFunc(a)?a.name:a,m=i.isFunc(d.key)?d.key.name:d.key,y=i.isFunc(d.binding)?d.binding.name:d.binding;i.LOG._("┅ ".concat(p," ⟼ ").concat(m," ⤞ ").concat(y),"#7f7f7f")}for(var g=0,v=this._CLASSES.length;g<v;g++){var k=this._CLASSES[g],O=i.tils.Get(s.Get(k),"uid",null);if(!O)throw new Error("No valid NFO found for ".concat(this._CLASSES[g]));this._classDict.Set(k,O),l.SetClass(O,k),i.LOG._("⧉ ".concat(O," ⤞ ").concat(k.name),"#7f7f7f")}this._deployed=!0}}},{key:"Conceal",value:function Conceal(){if(this._deployed){for(var e=0,t=this._KVPS.length;e<t;e++)for(var n=this._KVPS[e],i=n.context,s=n.kvps,a=0,c=s.length;a<c;a++){var u=s[a];l._Remove(i,u.key,u.binding)}for(var h=this._classDict.keys,d=0,p=h.length;d<p;d++)l._RemoveClass(this._classDict.Get(h[d]));this._deployed=!1}}},{key:"_CleanUp",value:function _CleanUp(){this.Conceal(),_get(_getPrototypeOf(BindingKit.prototype),"_CleanUp",this).call(this)}}]),BindingKit}(a);e.exports=c},{66:28,65:50,60:51,18:21,14:458}],38:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=function(){function CallList(){_classCallCheck(this,CallList),this._list=new n.List(0)}return _createClass(CallList,[{key:"count",get:function get(){return this._list.count}},{key:"Add",value:function Add(e){if(!i.isFunc(e))throw new Error("p_fn is not a Function.");return this._list.Add(e),this}},{key:"Remove",value:function Remove(e){return this._list.Remove(e),this}},{key:"Notify",value:function Notify(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,s=this._list.count;i<s;i++)this._list.At(i).apply(null,t);return this}},{key:"Clear",value:function Clear(){return this._list.Clear(),this}}]),CallList}();e.exports=s},{18:21,14:458}],39:[function(__r__,e,t){var n=__r__(18),i=function(){function Callbacks(){_classCallCheck(this,Callbacks),this._dispatching=!1,this._onSuccessList=new n.List(0),this._onErrorList=new n.List(0),this._onAnyList=new n.List(0)}return _createClass(Callbacks,[{key:"onSuccess",set:function set(e){this._dispatching||this._onSuccessList.Add(e)}},{key:"onError",set:function set(e){this._dispatching||this._onErrorList.Add(e)}},{key:"onAny",set:function set(e){this._dispatching||this._onAnyList.Add(e)}},{key:"Add",value:function Add(e){return!e||this._dispatching||(e.success&&this._onSuccessList.Add(e.success),e.error&&this._onErrorList.Add(e.error),e.any&&this._onAnyList.Add(e.any)),this}},{key:"then",value:function then(e){return this.onSuccess=e,this}},{key:"catch",value:function _catch(e){return this.onError=e,this}},{key:"finally",value:function _finally(e){return this.onAny=e,this}},{key:"OnSuccess",value:function OnSuccess(){if(this._dispatching)return this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._Dispatch.apply(this,[this._onSuccessList].concat(t)),this._Dispatch.apply(this,[this._onAnyList].concat(t)),this}},{key:"OnError",value:function OnError(){if(this._dispatching)return this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._Dispatch.apply(this,[this._onErrorList].concat(t)),this._Dispatch.apply(this,[this._onAnyList].concat(t)),this}},{key:"_Dispatch",value:function _Dispatch(e){if(!this._dispatching){this._dispatching=!0;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var s=0,a=e.count;s<a;s++)e.At(s).apply(null,n);this._dispatching=!1}}},{key:"Clear",value:function Clear(){return this._dispatching||(this._onSuccessList.Clear(),this._onErrorList.Clear(),this._onAnyList.Clear()),this}}]),Callbacks}();e.exports=i},{18:21}],40:[function(__r__,e,t){var n,i=function(e){_inherits(CKEY,e);var t=_createSuper(CKEY);function CKEY(){return _classCallCheck(this,CKEY),t.call(this)}return CKEY}(__r__(67));e.exports=i},{67:41}],41:[function(__r__,e,t){var n=function(){function CSYMBOL(){_classCallCheck(this,CSYMBOL)}return _createClass(CSYMBOL,[{key:"toString",value:function toString(){return this.constructor.name.toUpperCase()}}],[{key:"toString",value:function toString(){return this.name.toUpperCase()}}]),CSYMBOL}();e.exports=n},{}],42:[function(__r__,e,t){e.exports={BindingKit:__r__(68),CallList:__r__(69),Callbacks:__r__(70),CSYMBOL:__r__(67),CKEY:__r__(71),OptionsHandler:__r__(72),OptionsObject:__r__(73),Singleton:__r__(74),SingletonEx:__r__(75),StateBase:__r__(76),StateMachine:__r__(77)}},{68:37,69:38,70:39,71:40,67:41,72:43,73:44,74:46,75:45,76:47,77:48}],43:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=Symbol("direct"),a=Symbol("null"),l=function(){function OptionsHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,OptionsHandler),this._hooks=new i.DictionaryList,this._defaults=n,this._beginFn=t,this._wrapUpFn=e}return _createClass(OptionsHandler,[{key:"Setup",value:function Setup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"_OnOptionsWillUpdate"in e&&("_Bind"in e?e._Bind(e._OnOptionsWillUpdate):e._OnOptionsWillUpdate=e._OnOptionsWillUpdate.bind(e)),"_OnOptionsUpdated"in e&&("_Bind"in e?e._Bind(e._OnOptionsUpdated):e._OnOptionsUpdated=e._OnOptionsUpdated.bind(e)),t&&(this._defaults=t)}},{key:"defaults",get:function get(){return this._defaults},set:function set(e){this._defaults=e}},{key:"beginFn",get:function get(){return this._beginFn},set:function set(e){this._beginFn=e}},{key:"wrapUpFn",get:function get(){return this._wrapUpFn},set:function set(e){this._wrapUpFn=e}},{key:"Hook",value:function Hook(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===t&&(t=s),this._hooks.Set(e,t),null!=n&&(this._defaults||(this._defaults={}),this._defaults[e]=n)}},{key:"UnHook",value:function UnHook(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=s),this._hooks.Remove(e,t)}},{key:"Process",value:function Process(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];l&&this._beginFn&&this._beginFn(t,i,this._defaults);for(var u=this._hooks._map,h=u.keys(),d=u.size,p,m=0;m<d;m++){var y=h.next().value,g=y in t?t[y]:this._defaults&&y in this._defaults?this._defaults[y]:a;if(g!==a)for(var v=0,k=(p=u.get(y)).length;v<k;v++){var O=p[v];O===s?e[y]=g:n.isString(O)?e[O]=g:O(g,i)}}c&&this._wrapUpFn&&this._wrapUpFn(t,i,this._defaults)}},{key:"ProcessExistingOnly",value:function ProcessExistingOnly(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];l&&this._beginFn&&this._beginFn(t,i,this._defaults);for(var u=this._hooks._map,h=u.keys(),d=u.size,p,m=0;m<d;m++){var y=h.next().value,g=y in t?t[y]:a;if(g!==a)for(var v=0,k=(p=u.get(y)).length;v<k;v++){var O=p[v];O===s?e[y]=g:n.isString(O)?e[O]=g:O(g,i,this._defaults)}}c&&this._wrapUpFn&&this._wrapUpFn(t,i,this._defaults)}},{key:"ProcessSingle",value:function ProcessSingle(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this._hooks.Get(t);if(c!==s){if(c){for(var u=0,h=c.count;u<h;u++){var d=c.At(u);n.isString(d)?e[d]=i:d(i,a)}l&&this._wrapUpFn&&this._wrapUpFn(a,null,this._defaults)}}else e[t]=i}},{key:"WrapUp",value:function WrapUp(e){this._wrapUpFn&&this._wrapUpFn(e,null,this._defaults)}},{key:"Clear",value:function Clear(){this._hooks.Clear(),this._defaults=null}}]),OptionsHandler}();e.exports=l},{18:21,14:458}],44:[function(__r__,e,t){var n=__r__(14),i=__r__(60),s=__r__(72),a=function(e){_inherits(OptionsObject,e);var t=_createSuper(OptionsObject);function OptionsObject(){return _classCallCheck(this,OptionsObject),t.call(this)}return _createClass(OptionsObject,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(OptionsObject.prototype),"_Init",this).call(this),this._options={},this._optionHandler=new s}},{key:"optionHandler",get:function get(){return this._optionHandler}},{key:"options",get:function get(){return this._options},set:function set(e){this._options=e,this._optionHandler.Process(this,e)}},{key:"AppendOptions",value:function AppendOptions(e){for(var t in this._options||(this._options={}),e){var n=e[t];this._options[t]=n}this._optionHandler.Process(this,e,this._options)}},{key:"GetOption",value:function GetOption(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._options.hasOwnProperty(e)?this._options[e]:t}},{key:"GetOrSetOption",value:function GetOrSetOption(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._options.hasOwnProperty(e)?this._options[e]:(this.SetOption(e,t),t)}},{key:"SetOption",value:function SetOption(e,t){this._options||(this._options={}),e in this._options&&this._options[e]===t||(this._optionHandler.ProcessSingle(this,e,t,this._options,!0),this._options[e]=t)}},{key:"_CleanUp",value:function _CleanUp(){this._options={},_get(_getPrototypeOf(OptionsObject.prototype),"_CleanUp",this).call(this)}}]),OptionsObject}(i);e.exports=a},{60:51,72:43,14:458}],45:[function(__r__,e,t){var n=__r__(74),i=__r__(78),s=function(e){_inherits(SingletonEx,e);var t=_createSuper(SingletonEx);function SingletonEx(){return _classCallCheck(this,SingletonEx),t.call(this)}return _createClass(SingletonEx,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(SingletonEx.prototype),"_Init",this).call(this),this._signals=new i}},{key:"_Broadcast",value:function _Broadcast(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return(t=this._signals).Broadcast.apply(t,[e].concat(i)),this}},{key:"Watch",value:function Watch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Add(e,t,n),this}},{key:"WatchOnce",value:function WatchOnce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.AddOnce(e,t,n),this}},{key:"Unwatch",value:function Unwatch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Remove(e,t,n),this}}],[{key:"Watch",value:function Watch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.instance._signals.Add(e,t,n),this}},{key:"WatchOnce",value:function WatchOnce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.instance._signals.AddOnce(e,t,n),this}},{key:"Unwatch",value:function Unwatch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.instance._signals.Remove(e,t,n),this}}]),SingletonEx}(n);e.exports=s},{78:58,74:46}],46:[function(__r__,e,t){var n=function(){function Singleton(){if(_classCallCheck(this,Singleton),this.constructor.__instance)throw new Error("Cannot create multiple instance of a singleton.");this.constructor.__instance=this;try{var e=window;this._isBrowser=!0}catch(e){this._isBrowser=!1}this._Init(),this._PostInit()}return _createClass(Singleton,[{key:"isBrowser",get:function get(){return this._isBrowser}},{key:"_Bind",value:function _Bind(e){return this[e.name]=e.bind(this)}},{key:"_Init",value:function _Init(){}},{key:"_PostInit",value:function _PostInit(){}}],[{key:"instance",get:function get(){return this.__instance||new this,this.__instance}}]),Singleton}();_defineProperty(n,"__instance",null),e.exports=n},{}],47:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=function(){function StateBase(){_classCallCheck(this,StateBase),this._id="",this._data=null}return _createClass(StateBase,[{key:"id",get:function get(){return this._id}},{key:"data",get:function get(){return this._data}},{key:"toString",value:function toString(){return this._id}}],[{key:"GetOrCreate",value:function GetOrCreate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.isVoid(this._stateMap)&&(this._stateMap=new n.Dictionary);var s=this._stateMap.Get(e);return i.isVoid(s)&&((s=new this)._id=e,s._data=t,this._stateMap.Set(e,s)),s}}]),StateBase}();e.exports=s},{18:21,14:458}],48:[function(__r__,e,t){var n=__r__(14),i=__r__(79),s=__r__(60),a=__r__(78),l=__r__(76),c=function(e){_inherits(StateMachine,e);var t=_createSuper(StateMachine);function StateMachine(){var e;return _classCallCheck(this,StateMachine),(e=t.call(this))._currentState=null,e._owner=_assertThisInitialized(e),e._signals=new a,e}return _createClass(StateMachine,[{key:"owner",get:function get(){return this._owner},set:function set(e){n.isVoid(e)&&(e=this),this._owner=e}},{key:"currentState",get:function get(){return this._currentState},set:function set(e){if(this._currentState!==e){var t=this._currentState;this._currentState=e,this._OnCurrentStateChanged(t),this._Broadcast(i.STATE_CHANGED,this._owner,e,t),this._owner===this?this._signals.Broadcast(e,this._owner):this._owner._Broadcast(e,this._owner)}}},{key:"Is",value:function Is(e){return this._currentState===e}},{key:"IsAny",value:function IsAny(){for(var e=0,t=arguments.length;e<t;e++)if(this._currentState===(e<0||arguments.length<=e?void 0:arguments[e]))return!0;return!1}},{key:"IsNot",value:function IsNot(e){return this._currentState!=e}},{key:"IsNotAny",value:function IsNotAny(){for(var e=0,t=arguments.length;e<t;e++)if(this._currentState===(e<0||arguments.length<=e?void 0:arguments[e]))return!1;return!0}},{key:"_OnCurrentStateChanged",value:function _OnCurrentStateChanged(e){}},{key:"_CleanUp",value:function _CleanUp(){this._currentState=null,this._owner=null,this._signals.RemoveAll(),_get(_getPrototypeOf(StateMachine.prototype),"_CleanUp",this).call(this)}}]),StateMachine}(s);e.exports=c},{60:51,79:55,78:58,76:47,14:458}],49:[function(__r__,e,t){var n=function IDS(){_classCallCheck(this,IDS)};_defineProperty(n,"METAPREFIX","META@"),_defineProperty(n,"UID","uid"),_defineProperty(n,"NAME","name"),_defineProperty(n,"TITLE","title"),_defineProperty(n,"MESSAGE","message"),_defineProperty(n,"ICON","icon"),_defineProperty(n,"PATH","path"),_defineProperty(n,"DATA","data"),_defineProperty(n,"CMD_PRIMARY","primaryCommand"),_defineProperty(n,"CMD_SECONDARY","secondaryCommand"),_defineProperty(n,"CMD_LIST","commandList"),_defineProperty(n,"OWNER","owner"),_defineProperty(n,"STATIC","static"),e.exports=n},{}],50:[function(__r__,e,t){var n=__r__(14),i="__NFO__",s=function(){function NFOS(){_classCallCheck(this,NFOS)}return _createClass(NFOS,null,[{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n.isObject(e)){if(i in e)return e.__NFO__;if(i in e.constructor)return e.constructor.__NFO__}else if(n.isFunc(e)&&i in e)return e.__NFO__;return t}},{key:"Ext",value:function Ext(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=t.__NFO__;for(var a in s){var l=s[a];if(e.hasOwnProperty(a)){var c=e[a];if(n.isArray(c)){if(n.isArray(l)&&i&&i.includes(a))for(var u=0,h=l.length;u<h;u++)c.includes(l[u])||c.push(l[u])}else n.isObject(c)&&UTILS.isObject(l)&&this.Ext(c,l,i)}else n.isArray(l)?e[a]=_toConsumableArray(l):n.isObject()?e[a]=this.Ext({},l):e[a]=l}return e}}]),NFOS}();_defineProperty(s,"KEY",i),e.exports=s},{14:458}],51:[function(__r__,e,t){var n=__r__(80),i=__r__(78),s=__r__(79),a=function(e){_inherits(DisposableObjectEx,e);var t=_createSuper(DisposableObjectEx);function DisposableObjectEx(){return _classCallCheck(this,DisposableObjectEx),t.call(this)}return _createClass(DisposableObjectEx,[{key:"_Init",value:function _Init(){this._signals=new i}},{key:"_Broadcast",value:function _Broadcast(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return(t=this._signals).Broadcast.apply(t,[e].concat(i)),this}},{key:"Watch",value:function Watch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Add(e,t,n),this}},{key:"WatchOnce",value:function WatchOnce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.AddOnce(e,t,n),this}},{key:"Unwatch",value:function Unwatch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Remove(e,t,n),this}},{key:"PreventRelease",value:function PreventRelease(){this._releasePrevented=!0}},{key:"Release",value:function Release(){if(!this._isReleasing){if(this._signals.silent=!1,this._isReleasing=!0,this._releasePrevented=!1,this._Broadcast(s.RELEASING,this),this._releasePrevented)return this._isReleasing=!1,void delete this._releasePrevented;this._Broadcast(s.RELEASED,this),this._CleanUp(),null!=this._returnFn&&this._returnFn(this),this._isReleasing=!1}}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(DisposableObjectEx.prototype),"_CleanUp",this).call(this),this._signals.Clear()}}]),DisposableObjectEx}(n);e.exports=a},{79:55,78:58,80:52}],52:[function(__r__,e,t){var n=function(){function DisposableObject(){_classCallCheck(this,DisposableObject),this._isReleasing=!1,this._Init(),this._PostInit()}return _createClass(DisposableObject,[{key:"_Init",value:function _Init(){}},{key:"_PostInit",value:function _PostInit(){}},{key:"_Bind",value:function _Bind(e){return this[e.name]=e.bind(this)}},{key:"isReleasing",get:function get(){return this._isReleasing}},{key:"Release",value:function Release(){this._isReleasing||(this._isReleasing=!0,this._CleanUp(),this._returnFn&&this._returnFn(this),this._isReleasing=!1)}},{key:"_CleanUp",value:function _CleanUp(){}}]),DisposableObject}();e.exports=n},{}],53:[function(__r__,e,t){e.exports={POOL:__r__(81),DisposableObject:__r__(80),DisposableObjectEx:__r__(82)}},{80:52,82:51,81:54}],54:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(83),a=__r__(80),l=function(e){_inherits(POOL,e);var t=_createSuper(POOL);function POOL(){return _classCallCheck(this,POOL),t.call(this)}return _createClass(POOL,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(POOL.prototype),"_Init",this).call(this),this._globalTypes=new i.Dictionary,this._globalPool=new i.DictionaryList,this._Bind(this._Return)}},{key:"_Register",value:function _Register(e){if(!n.isFunc(e))throw new Error("Register used with invalid constructor : ".concat(e));this._globalTypes.Set(e.name,e)}},{key:"_GetClass",value:function _GetClass(e){return this._globalTypes.Get(e)}},{key:"_Return",value:function _Return(e){if(!n.isObject(e)||!n.isInstanceOf(e,a))throw new Error("Return used with invalid object : "+e);var t=e.constructor.name;if(!this._globalTypes.Contains(t))throw new Error("Return used with a never-registered object type : "+t);this._globalPool.Set(t,e)}},{key:"_Rent",value:function _Rent(e){var t=null;if(n.isString(e))t=e;else{if("function"!=typeof e)throw new Error("Rent requires either a string or a constructor.");t=e.name}if(!this._globalTypes.Contains(t)){if("function"!=typeof e||!n.isInstanceOf(e.prototype,a))throw new Error("Could not find any constructor association for : ".concat(t));this._Register(e)}e=this._globalTypes.Get(t);var i=this._globalPool.Pop(t);return i||((i=new e)._returnFn=this._Return),"Wake"in i&&i.Wake(),i}},{key:"_Preload",value:function _Preload(e,t){for(var n=0;n<t;n++)this._Rent(e).Release()}}],[{key:"Register",value:function Register(e){this.instance._Register(e)}},{key:"GetClass",value:function GetClass(e){return this.instance._GetClass(e)}},{key:"Rent",value:function Rent(e){return this.instance._Rent(e)}},{key:"Preload",value:function Preload(e){return this.instance._Preload(e)}}]),POOL}(s);e.exports=l},{83:46,80:52,18:21,14:458}],55:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"RELEASING",Symbol("releasing")),_defineProperty(n,"RELEASED",Symbol("released")),_defineProperty(n,"UPDATED",Symbol("updated")),_defineProperty(n,"RENAMING",Symbol("renaming")),_defineProperty(n,"RENAMED",Symbol("renamed")),_defineProperty(n,"STATE_CHANGING",Symbol("stateChanging")),_defineProperty(n,"STATE_CHANGED",Symbol("stateChanged")),_defineProperty(n,"STARTED",Symbol("started")),_defineProperty(n,"STOPPED",Symbol("stopped")),_defineProperty(n,"PROGRESS",Symbol("progress")),_defineProperty(n,"COMPLETE",Symbol("complete")),_defineProperty(n,"FAIL",Symbol("fail")),_defineProperty(n,"CANCELED",Symbol("canceled")),_defineProperty(n,"READY",Symbol("ready")),_defineProperty(n,"TICK",Symbol("tick")),_defineProperty(n,"CONSUMED",Symbol("consumed")),_defineProperty(n,"ITEM_ADDED",Symbol("itemAdded")),_defineProperty(n,"ITEM_REMOVED",Symbol("itemRemoved")),_defineProperty(n,"ITEM_UPDATED",Symbol("itemUpdated")),e.exports=n},{}],56:[function(__r__,e,t){e.exports={SignalBroadcaster:__r__(84),SignalBox:__r__(85),Observer:__r__(86),isObservable:function isObservable(e){return null!=e&&("Watch"in e&&"Unwatch"in e&&"WatchOnce"in e)}}},{86:57,85:58,84:59}],57:[function(__r__,e,t){var n,i=function(e){_inherits(Observer,e);var t=_createSuper(Observer);function Observer(){return _classCallCheck(this,Observer),t.call(this)}return _createClass(Observer,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Observer.prototype),"_Init",this).call(this),this._hooks=[],this._targets=[],this._isEnabled=!0}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(e){e?this.Enable():this.Disable()}},{key:"Enable",value:function Enable(){if(this._isEnabled)return!1;this._isEnabled=!0;for(var e=0,t=this._targets.length;e<t;e++)this._WatchAll(this._targets[e]);return!0}},{key:"Disable",value:function Disable(){if(this._isEnabled)return!1;this._isEnabled=!1;for(var e=0,t=this._targets.length;e<t;e++)this._UnwatchAll(this._targets[e]);return!0}},{key:"Hook",value:function Hook(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._hooks.push({evt:e,thisArg:n,fn:t}),this._isEnabled)for(var i=0,s=this._targets.length;i<s;i++)this._targets[i].Watch(e,t,n);return this}},{key:"Unhook",value:function Unhook(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=0,s=this._hooks.length;i<s;i++){var a=this._hooks[i];if(a.evt===e&&a.thisArg===n&&a.fn===t&&(this._hooks.splice(i,1),i--,s--,this._isEnabled))for(var l=0,c=this._targets.length;l<c;l++)this._targets[l].Unwatch(e,t,n)}return this}},{key:"targets",get:function get(){return this._targets}},{key:"targetCount",get:function get(){return this._targets.length}},{key:"Observe",value:function Observe(e){if(!e)throw new Error("Target cannot be null.");return this._targets.includes(e)||(this._targets.push(e),this._isEnabled&&this._WatchAll(e)),e}},{key:"ObserveOnly",value:function ObserveOnly(e){return this._targets.includes(e)||(this.Flush(),e&&(this._targets.push(e),this._isEnabled&&this._WatchAll(e))),e}},{key:"Unobserve",value:function Unobserve(e){if(!e)throw new Error("Target cannot be null.");var t=this._targets.indexOf(e);return-1===t||(this._targets.splice(t,1),this._isEnabled&&this._UnwatchAll(e)),e}},{key:"_WatchAll",value:function _WatchAll(e){for(var t=0,n=this._hooks.length;t<n;t++){var i=this._hooks[t];e.Watch(i.evt,i.fn,i.thisArg)}}},{key:"_UnwatchAll",value:function _UnwatchAll(e){if(!e.isReleasing)for(var t=0,n=this._hooks.length;t<n;t++){var i=this._hooks[t];e.Unwatch(i.evt,i.fn,i.thisArg)}}},{key:"Flush",value:function Flush(){if(this._isEnabled)for(var e=0,t=this._targets.length;e<t;e++)this._UnwatchAll(this._targets[e]);this._targets.length=0}},{key:"_CleanUp",value:function _CleanUp(){this.Flush(),this._hooks.length=0,this._isEnabled=!0,_get(_getPrototypeOf(Observer.prototype),"_CleanUp",this).call(this)}}]),Observer}(__r__(60));e.exports=i},{60:51}],58:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(87),a=__r__(57),l=__r__(84),c=function(e){_inherits(SignalBox,e);var t=_createSuper(SignalBox);function SignalBox(){var e;return _classCallCheck(this,SignalBox),(e=t.call(this))._signals=new i.Dictionary,e._silent=!1,e}return _createClass(SignalBox,[{key:"silent",get:function get(){return this._silent},set:function set(e){this._silent=e}},{key:"hasWatchers",get:function get(){return this._signals.count>0}},{key:"isEmpty",value:function isEmpty(e){var t=this._signals;return!t.Contains(e)||t.Get(e).isEmpty}},{key:"Get",value:function Get(e){return this._signals.Get(e)}},{key:"Broadcast",value:function Broadcast(e){if(!this._silent&&!this._signals.isEmpty){if(!e)throw new Error("Signal may not be undefined or null.");var t=this._signals.Get(e);if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];t.Broadcast.apply(t,i)}}}},{key:"Add",value:function Add(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this._signals.Get(e);n.isVoid(s)&&(s=a.Rent(l),this._signals.Set(e,s)),s.Add(t,i)}},{key:"AddOnce",value:function AddOnce(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this._signals.Get(e);n.isVoid(s)&&(s=a.Rent(l),this._signals.Set(e,s)),s.AddOnce(t,i)}},{key:"Remove",value:function Remove(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this._signals.Get(e);n.isVoid(s)||(s.Remove(t,i),s.isEmpty&&(this._signals.Remove(e),s.Release()))}},{key:"RemoveAll",value:function RemoveAll(e){var t=this._signals.Get(e);n.isVoid(t)||(this._signals.Remove(e),t.Release())}},{key:"Clear",value:function Clear(){for(var e=this._signals,t=e.keys,n=0,i=t.length;n<i;n++)e.Get(t[n]).Release();e.Clear()}}]),SignalBox}(s);e.exports=c},{87:52,57:54,84:59,18:21,14:458}],59:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s,a=function(e){_inherits(SignalBroadcaster,e);var t=_createSuper(SignalBroadcaster);function SignalBroadcaster(){return _classCallCheck(this,SignalBroadcaster),t.call(this)}return _createClass(SignalBroadcaster,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(SignalBroadcaster.prototype),"_Init",this).call(this),this._broadcasting=!1,this._removeAll=!1,this._slots=new i.DictionaryList,this._onceSlots=new i.DictionaryList,this._deprecatedKVP=[],this._queuedBroadcasts=[]}},{key:"isEmpty",get:function get(){return 0===this._slots.count}},{key:"count",get:function get(){return this._slots.count}},{key:"Add",value:function Add(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n.isFunc(e))throw new Error("p_fn is not a function");n.isVoid(t)&&(t=SignalBroadcaster.BLANK),this._slots.Set(t,e),this._onceSlots.Remove(t,e)}},{key:"AddOnce",value:function AddOnce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n.isFunc(e))throw new Error("p_fn is not a function");n.isVoid(t)&&(t=SignalBroadcaster.BLANK),this._slots.Set(t,e),this._onceSlots.Set(t,e)}},{key:"Remove",value:function Remove(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n.isFunc(e))throw new Error("p_fn is not a function");n.isVoid(t)&&(t=SignalBroadcaster.BLANK),this._slots.Contains(t)&&(this._broadcasting?this._deprecatedKVP.push([t,e]):this._slots.Remove(t,e)),this._onceSlots.Contains(t)&&(this._broadcasting?this._deprecatedKVP.push([t,e]):this._onceSlots.Remove(t,e))}},{key:"RemoveAll",value:function RemoveAll(){this._broadcasting?this._removeAll=!0:(this._queuedBroadcasts.length=0,this._slots.Clear(),this._onceSlots.Clear(),this._deprecatedKVP.length=0,this._removeAll=!1)}},{key:"Broadcast",value:function Broadcast(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this._broadcasting)return this._queuedBroadcasts.push(t),void console.warn("Dispatching signal while already dispatching. Queueing.");this._broadcasting=!0;var i=this._slots._map,s=i.keys();if(null==t)for(var a=0,l=i.size;a<l;a++){var c=s.next().value,u=i.get(c),h=u.length,d=this._onceSlots.Get(c);if(c===SignalBroadcaster.BLANK)if(d)for(var p=0;p<h;p++){var m=u[p];m.apply(null),d.includes(m)&&this._deprecatedKVP.push([c,m])}else for(var y=0;y<h;y++)u[y].apply(null);else if(d)for(var g=0;g<h;g++){var v=u[g];v.apply(c),d.includes(v)&&this._deprecatedKVP.push([c,v])}else for(var k=0;k<h;k++)u[k].apply(c)}else for(var O=0,S=i.size;O<S;O++){var E=s.next().value,C=i.get(E),I=C.length,D=this._onceSlots.Get(E);if(E===SignalBroadcaster.BLANK)if(D)for(var P=0;P<I;P++){var R=C[P];R.apply(null,t),D.includes(R)&&this._deprecatedKVP.push([E,R])}else for(var A=0;A<I;A++)C[A].apply(null,t);else if(D)for(var b=0;b<I;b++){var T=C[b];T.apply(E,t),D.includes(T)&&this._deprecatedKVP.push([E,T])}else for(var x=0;x<I;x++)C[x].apply(E,t)}this._PostDispatch()}},{key:"_PostDispatch",value:function _PostDispatch(){if(this._broadcasting=!1,this._onceSlots.Clear(),this._removeAll)this.RemoveAll();else for(var e=0,t=this._deprecatedKVP.length;e<t;e++){var n=this._deprecatedKVP[e];this._slots.Remove(n[0],n[1])}this._deprecatedKVP.length=0,0!=this._queuedBroadcasts.length&&this.Broadcast.apply(this,this._queuedBroadcasts.shift())}},{key:"__BroadcastWithoutArgs",value:function __BroadcastWithoutArgs(e,t,n){var i=this._onceSlots.Get(t);if(t===SignalBroadcaster.BLANK)if(i)for(var s=0,a=e.length;s<a;s++){var l=e[s];l.apply(null),i.includes(l)&&this._deprecatedKVP.push([t,l])}else for(var c=0,u=e.length;c<u;c++)e[c].apply(null);else if(i)for(var h=0,d=e.length;h<d;h++){var p=e[h];p.apply(t),i.includes(p)&&this._deprecatedKVP.push([t,p])}else for(var m=0,y=e.length;m<y;m++)e[m].apply(t)}},{key:"__BroadcastWithArgs",value:function __BroadcastWithArgs(e,t,n){var i=this._onceSlots.Get(t);if(t===SignalBroadcaster.BLANK)if(i)for(var s=0,a=e.length;s<a;s++){var l=e[s];l.apply(null,this._args),i.includes(l)&&this._deprecatedKVP.push([t,l])}else for(var c=0,u=e.length;c<u;c++)e[c].apply(null,this._args);else if(i)for(var h=0,d=e.length;h<d;h++){var p=e[h];p.apply(t,this._args),i.includes(p)&&this._deprecatedKVP.push([t,p])}else for(var m=0,y=e.length;m<y;m++)e[m].apply(t,this._args)}},{key:"ListCallbacks",value:function ListCallbacks(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._slots.keys,n="",i="",s=0;s<e;s++)n+="    ";for(var a=0,l=t.length;a<l;a++){var c=t[a],u=this._slots.Get(c),h=null;try{h=c.constructor}catch(e){}for(var d=0;d<u.length;d++)i+="".concat(n,"(").concat(h?h.name:c,") => ").concat(u[d].name,"\n")}console.log(i)}},{key:"_CleanUp",value:function _CleanUp(){this.RemoveAll(),_get(_getPrototypeOf(SignalBroadcaster.prototype),"_CleanUp",this).call(this)}}]),SignalBroadcaster}(__r__(87));_defineProperty(a,"BLANK",Symbol("none")),e.exports=a},{87:52,18:21,14:458}],60:[function(__r__,e,t){var n=__r__(14),i=__r__(88),s=function(){function DelayedCall(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,DelayedCall),this.Clear(),this._Call=this._Call.bind(this),this.Schedule=this.Schedule.bind(this),this._delay=t,this._elapsed=0,e&&(this._callback=e)}return _createClass(DelayedCall,[{key:"scheduled",get:function get(){return this._scheduled}},{key:"callback",get:function get(){return this._callback},set:function set(e){var t=this._scheduled;this.Cancel(),this._callback=e,t&&this.Schedule()}},{key:"Schedule",value:function Schedule(){this._scheduled||n.isVoid(this._callback)||(this._scheduled=!0,i.instance.NextTickAdd(this._Call))}},{key:"Cancel",value:function Cancel(){this._scheduled&&!n.isVoid(this._callback)&&(i.instance.NextTickRemove(this._Call),this._elapsed=0)}},{key:"_Call",value:function _Call(e){this._delay>0&&(this._elapsed+=e,this._elapsed<this._delay)?i.instance.NextTickAdd(this._Call):(this._scheduled=!1,this._elapsed=0,this._callback(e))}},{key:"Clear",value:function Clear(){this.Cancel(),this._scheduled=!1,this._callback=null}}]),DelayedCall}();e.exports=s},{88:62,14:458}],61:[function(__r__,e,t){e.exports={TIME:__r__(88),DelayedCall:__r__(89)}},{89:60,88:62}],62:[function(__r__,e,t){(function(t){(function(){var n=__r__(14),i=__r__(79),s=__r__(90),a=function(e){_inherits(TIME,e);var a=_createSuper(TIME);function TIME(){return _classCallCheck(this,TIME),a.call(this)}return _createClass(TIME,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(TIME.prototype),"_Init",this).call(this),this._lastTick=null,this._deltaTime=0,this._timeScale=1,this._clA=new s.CallList,this._clB=new s.CallList,this._nextTick=this._clA,this._nextTickScheduled=!1,this._Bind(this._Tick)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(TIME.prototype),"_PostInit",this).call(this),this._isBrowser&&window.requestAnimationFrame(this._Tick)}},{key:"deltaTime",get:function get(){return this._deltaTime}},{key:"timeScale",get:function get(){return this._timeScale},set:function set(e){this._timeScale=e}},{key:"NextTickAdd",value:function NextTickAdd(e){if(!n.isFunc(e))throw new Error("p_fn is not a function");this._nextTick.Add(e),this._ScheduleNextTick()}},{key:"NextTickRemove",value:function NextTickRemove(e){if(!n.isFunc(e))throw new Error("p_fn is not a function");this._nextTick.Remove(e)}},{key:"_ScheduleNextTick",value:function _ScheduleNextTick(){this._isBrowser||this._nextTickScheduled||(this._nextTickScheduled=!0,t.nextTick(this._Tick))}},{key:"_Tick",value:function _Tick(e){null===this._lastTick&&(this._lastTick=e),this._deltaTime=(e-this._lastTick)*this._timeScale,this._lastTick=e;var t=this._nextTick;this._nextTick=t===this._clA?this._clB:this._clA,t.Notify(this._deltaTime).Clear(),this._Broadcast(i.TICK,this._deltaTime),this._isBrowser?window.requestAnimationFrame(this._Tick):(this._nextTickScheduled=!1,this._nextTick.count>0&&this._ScheduleNextTick())}}],[{key:"NEXT_TICK",set:function set(e){TIME.instance.NextTickAdd(e)}}]),TIME}(s.SingletonEx);e.exports=a}).call(this)}).call(this,__r__("_process"))},{90:42,79:55,14:458,_process:63}],63:[function(__r__,e,t){var n=e.exports={},i,s;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(i===setTimeout)return setTimeout(e,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function runClearTimeout(e){if(s===clearTimeout)return clearTimeout(e);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){i=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){s=defaultClearTimeout}}();var a=[],l=!1,c,u=-1;function cleanUpNextTick(){l&&c&&(l=!1,c.length?a=c.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=a.length;t;){for(c=a,a=[];++u<t;)c&&c[u].run();u=-1,t=a.length}c=null,l=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],64:[function(__r__,e,t){e.exports={actions:__r__(27),app:__r__(91),collections:__r__(18),common:__r__(12),data:__r__(31),datalib:__r__(92),dialog:__r__(32),documents:__r__(38),env:__r__(21),localisation:__r__(93),metrics:__r__(94),io:__r__(28),services:__r__(20),style:__r__(29),ui:__r__(30),uicontrols:__r__(95),uilib:__r__(37),uiworkspace:__r__(96),utils:__r__(14)}},{27:1,91:15,18:21,12:27,31:66,92:110,32:177,38:183,21:190,28:198,93:263,94:265,20:267,29:272,30:285,95:356,37:390,96:440,14:458}],65:[function(__r__,e,t){var n=__r__(12),i=__r__(97),s=i.Metadata,a=i.DataBlock,l=__r__(98),c=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),this.AddClasses(s,a),this.Add({context:l.CONTEXT.SERIALIZER,kvps:[{key:l.CONTEXT.JSON,binding:l.JSONSerializer},{key:l.CONTEXT.TEXT,binding:l.TEXTSerializer}]},{context:l.CONTEXT.JSON,kvps:[{key:s,binding:l.json.Metadata},{key:a,binding:l.json.DataBlock}]})}}]),Bindings}(n.helpers.BindingKit);e.exports=c},{97:81,98:96,12:27}],66:[function(__r__,e,t){e.exports={SIGNAL:__r__(47),IDS:__r__(49),DataBlock:__r__(99),SimpleDataBlock:__r__(100),DataFactory:__r__(101),Metadata:__r__(102),Repertoire:__r__(103),ID:__r__(104),IDDispenser:__r__(105),actions:__r__(106),catalogs:__r__(107),helpers:__r__(51),serialization:__r__(98),validate:__r__(108),sanitize:__r__(109)},__r__(12).BINDINGS.Expand(__r__(110))},{110:65,106:69,107:78,99:79,101:80,102:82,103:83,100:84,51:85,104:89,105:88,49:91,109:92,98:96,47:105,108:106,12:27}],67:[function(__r__,e,t){var n,i=function(e){_inherits(ActionMetadataSet,e);var t=_createSuper(ActionMetadataSet);function ActionMetadataSet(){return _classCallCheck(this,ActionMetadataSet),t.call(this)}return _createClass(ActionMetadataSet,[{key:"CanMerge",value:function CanMerge(e){var t=this._operation;return t.target===e.target&&t.path===e.path}},{key:"_InternalDo",value:function _InternalDo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,i=n.target,s=n.path,a=null;return t?(this._operation.value=n.value,a=this._operation.originalValue,n=this._operation):(this._operation=n,a=i.Get(s,void 0),n.originalValue=a),i.Set(s,n.value),console.log("%cDO : ".concat(a," => ").concat(n.value),"color: #909090"),this}},{key:"_InternalUndo",value:function _InternalUndo(){var e=this._operation;e.target.Set(e.path,e.originalValue)}},{key:"_InternalRedo",value:function _InternalRedo(){var e=this._operation;e.target.Set(e.path,e.value)}}],[{key:"mergeable",get:function get(){return!0}}]),ActionMetadataSet}(__r__(27).Action);e.exports=i},{27:1}],68:[function(__r__,e,t){var n,i=function(e){_inherits(ActionRenameID,e);var t=_createSuper(ActionRenameID);function ActionRenameID(){return _classCallCheck(this,ActionRenameID),t.call(this)}return _createClass(ActionRenameID,[{key:"CanMerge",value:function CanMerge(e){var t;return this._operation.target===e.target}},{key:"Do",value:function Do(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target,i=null;return t?(this._operation.value=e.value,i=this._operation.originalValue,e=this._operation):(this._operation=e,i=n.name,e.originalValue=i),n.name=e.value,console.log("%cDO : ".concat(i," => ").concat(e.value),"color: #909090"),this}},{key:"Merge",value:function Merge(e){}},{key:"Undo",value:function Undo(){var e=this._operation;e.target.name=e.originalValue}},{key:"Redo",value:function Redo(){var e=this._operation;e.target.name=e.value}}],[{key:"mergeable",get:function get(){return!0}}]),ActionRenameID}(__r__(27).Action);e.exports=i},{27:1}],69:[function(__r__,e,t){e.exports={ActionMetadataSet:__r__(111),ActionRenameID:__r__(112)}},{111:67,112:68}],70:[function(__r__,e,t){var n=__r__(12),i,s=function(e){_inherits(CatalogHandler,e);var t=_createSuper(CatalogHandler);function CatalogHandler(){return _classCallCheck(this,CatalogHandler),t.call(this)}return _createClass(CatalogHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogHandler.prototype),"_Init",this).call(this)}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t){return!!_get(_getPrototypeOf(CatalogHandler.prototype),"_OnCatalogItemAdded",this).call(this,e,t)&&(this._Broadcast(n.SIGNAL.ITEM_ADDED,this,t,null),!0)}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,i){var s=_get(_getPrototypeOf(CatalogHandler.prototype),"_OnCatalogItemRemoved",this).call(this,e,t,i);return!1!==s&&(this._Broadcast(n.SIGNAL.ITEM_REMOVED,this,t,s),s)}}]),CatalogHandler}(__r__(113));e.exports=s},{113:76,12:27}],71:[function(__r__,e,t){var n=__r__(12),i=__r__(114),s=__r__(115),a=function(e){_inherits(CatalogItem,e);var t=_createSuper(CatalogItem);function CatalogItem(){return _classCallCheck(this,CatalogItem),t.call(this)}return _createClass(CatalogItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogItem.prototype),"_Init",this).call(this),this._parent=null,this._isDir=!1,this._rootCatalog=null,this._rootDistance=-1,this._autoRelease=!0,this._isFirstUpdate=!0,this._delayedUpdate=new n.time.DelayedCall(this._Bind(this._OnUpdate)),this._optionHandler.wrapUpFn=this._Bind(this._OnOptionsUpdated),this._optionHandler.Hook(n.IDS.DATA),this._optionHandler.Hook(i.BOUND)}},{key:"isDir",get:function get(){return this._isDir}},{key:"rootCatalog",get:function get(){return this._rootCatalog},set:function set(e){this._rootCatalog=e}},{key:"rootDistance",get:function get(){return this._rootDistance},set:function set(e){this._rootDistance=e}},{key:"autoRelease",get:function get(){return this._autoRelease},set:function set(e){this._autoRelease=e}},{key:"parent",get:function get(){return this._parent},set:function set(e){if(this._parent!==e){var t=this._parent;this._parent=e,t&&t.Remove(this),e&&e.Add(this)}}},{key:"_OnOptionsUpdated",value:function _OnOptionsUpdated(e,t,n){this._delayedUpdate.Schedule()}},{key:"name",get:function get(){return this._options[n.IDS.NAME]},set:function set(e){this.SetOption(n.IDS.NAME,e)}},{key:"path",get:function get(){return this._options[n.IDS.PATH]},set:function set(e){this.SetOption(n.IDS.PATH,e)}},{key:"dataBound",get:function get(){return this._options[i.BOUND]},set:function set(e){this.SetOption(i.BOUND,e)}},{key:"data",get:function get(){return this._options[n.IDS.DATA]},set:function set(e){var t=this._options[n.IDS.DATA];this._options[n.IDS.DATA]=e,this._OnDataChanged(e,t)}},{key:"primaryCommand",get:function get(){return this._options[n.IDS.CMD_PRIMARY]},set:function set(e){this.SetOption(n.IDS.CMD_PRIMARY,e)}},{key:"secondaryCommand",get:function get(){return this._options[n.IDS.CMD_SECONDARY]},set:function set(e){this.SetOption(n.IDS.CMD_SECONDARY,e)}},{key:"commandList",get:function get(){return this._options[n.IDS.CMD_LIST]},set:function set(e){this.SetOption(n.IDS.CMD_LIST,e)}},{key:"_OnDataChanged",value:function _OnDataChanged(e,t){t&&"Unwatch"in t&&t.Unwatch(n.SIGNAL.RELEASED,this._OnDataReleased,this),e&&"Watch"in e&&e.Watch(n.SIGNAL.RELEASED,this._OnDataReleased,this),this._Broadcast(s.ITEM_DATA_CHANGED,this,e,t),this._delayedUpdate.Schedule()}},{key:"_OnDataReleased",value:function _OnDataReleased(e){this._Broadcast(s.ITEM_DATA_RELEASED,this,e),this._options[i.BOUND]&&this.Release()}},{key:"AddCommand",value:function AddCommand(e){var t=this.GetOrSetOption(n.IDS.CMD_LIST,[],!1);t.includes(e)||(t.push(e),this._delayedUpdate.Schedule())}},{key:"_CleanUp",value:function _CleanUp(){this._parent&&this._parent.Remove(this),this._autoRelease=!0,this._parent=null,this._rootCatalog=null,this._rootDistance=-1,this._isFirstUpdate=!0,this.data=null,_get(_getPrototypeOf(CatalogItem.prototype),"_CleanUp",this).call(this)}},{key:"_OnUpdate",value:function _OnUpdate(){this._isFirstUpdate?this._isFirstUpdate=!1:this._Broadcast(n.SIGNAL.UPDATED,this)}},{key:"toString",value:function toString(){return"".concat(this._options[n.IDS.NAME]," (").concat(this.constructor.name,")")}}]),CatalogItem}(n.helpers.OptionsObject);e.exports=a},{114:91,115:74,12:27}],72:[function(__r__,e,t){var n,i=function(e){_inherits(CatalogSearch,e);var t=_createSuper(CatalogSearch);function CatalogSearch(){return _classCallCheck(this,CatalogSearch),t.call(this)}return _createClass(CatalogSearch,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogSearch.prototype),"_Init",this).call(this),this._searchResult=new CatalogSearch,this._sourceCatalog=null}}]),CatalogSearch}(__r__(12).pool.DisposableObjectEx);e.exports=i},{12:27}],73:[function(__r__,e,t){var n=__r__(12),i,s=function(e){_inherits(CatalogSelection,e);var t=_createSuper(CatalogSelection);function CatalogSelection(){return _classCallCheck(this,CatalogSelection),t.call(this)}return _createClass(CatalogSelection,[{key:"GetOrCreateCatalog",value:function GetOrCreateCatalog(e){throw new Error("CatalogSelection does not support item creation.")}},{key:"Register",value:function Register(e){throw new Error("CatalogSelection does not support item creation.")}},{key:"_OnItemAdded",value:function _OnItemAdded(e){this._Broadcast(n.SIGNAL.ITEM_ADDED,this,e),e.Watch(n.SIGNAL.RELEASED,this._OnItemReleased,this),this._autoSort&&this._delayedSort.Schedule()}},{key:"_OnItemRemoved",value:function _OnItemRemoved(e){this._Broadcast(n.SIGNAL.ITEM_REMOVED,this,e),e.Unwatch(n.SIGNAL.RELEASED,this._OnItemReleased,this)}},{key:"Clear",value:function Clear(){for(var e=this._items,t=e.length;0!=t;)this.Remove(e[t-1]),t=e.length;e.length=0,this._delayedSort.Cancel()}}]),CatalogSelection}(__r__(116));e.exports=s},{116:77,12:27}],74:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"ROOT_ITEM_ADDED",Symbol("rootItemAdded")),_defineProperty(n,"ROOT_ITEM_REMOVED",Symbol("rootItemRemoved")),_defineProperty(n,"ITEM_DATA_CHANGED",Symbol("dataItemAdded")),_defineProperty(n,"ITEM_DATA_RELEASED",Symbol("dataItemRemoved")),_defineProperty(n,"ITEM_DATA_UPDATED",Symbol("dataItemUpdated")),_defineProperty(n,"SORTED",Symbol("sorted")),e.exports=n},{}],75:[function(__r__,e,t){var n="",i=null,s=function(){function SORTING(){_classCallCheck(this,SORTING)}return _createClass(SORTING,null,[{key:"NAME_ASC",value:function NAME_ASC(e,t){var n=e._isDir,i=t._isDir;return n&&i||!n&&!i?e.name.localeCompare(t.name):n?-1:1}},{key:"NAME_DSC",value:function NAME_DSC(e,t){var n=e._isDir,i=t._isDir;return n&&i||!n&&!i?-1*e.name.localeCompare(t.name):n?-1:1}},{key:"NUMERIC_ASC",value:function NUMERIC_ASC(e,t){return e-t}},{key:"NUMERIC_DSC",value:function NUMERIC_DSC(e,t){return t-e}},{key:"STRING_ASC",value:function STRING_ASC(e,t){return e.localeCompare(t)}},{key:"STRING_DSC",value:function STRING_DSC(e,t){return-1*e.localeCompare(t)}},{key:"OPTION",value:function OPTION(e,t){var s=e._isDir,a=t._isDir;return s&&a||!s&&!a?i(e.GetOption(n),t.GetOption(n)):s?-1:1}},{key:"SortByOption",value:function SortByOption(e,t,s){n=t,i=s,e._items.sort(SORTING.OPTION)}}]),SORTING}();e.exports=s},{}],76:[function(__r__,e,t){var n=__r__(12),i=__r__(115),s=function(e){_inherits(CatalogWatcher,e);var t=_createSuper(CatalogWatcher);function CatalogWatcher(){return _classCallCheck(this,CatalogWatcher),t.call(this)}return _createClass(CatalogWatcher,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogWatcher.prototype),"_Init",this).call(this),this._owner=null,this._catalog=null,this._map=new Map,this._filters=null,this._itemCount=0,this._isEnabled=!0,this._isDeepWatchEnabled=!1,this._catalogObserver=new n.signals.Observer,this._catalogObserver.Hook(n.SIGNAL.ITEM_ADDED,this._OnCatalogItemAdded,this),this._catalogObserver.Hook(n.SIGNAL.ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._catalogObserver.Hook(i.SORTED,this._OnCatalogSorted,this)}},{key:"count",get:function get(){return this._map.size}},{key:"owner",get:function get(){return this._owner},set:function set(e){this._owner=e}},{key:"catalog",get:function get(){return this._catalog},set:function set(e){if(this._catalog!==e){var t=this._catalog;this._catalog=e,t&&this._catalogObserver.Unobserve(t),e&&this._catalogObserver.Observe(e),this._OnCatalogChanged(t)}}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(e){e?this.Enable():this.Disable()}},{key:"Enable",value:function Enable(){return!this._isEnabled&&(this._isEnabled=!0,this._catalogObserver.Enable(),this._catalog&&this._AddCatalogContent(this._catalog,this._isDeepWatchEnabled),!0)}},{key:"Disable",value:function Disable(){return!!this._isEnabled&&(this._isEnabled=!1,this._catalogObserver.Disable(),this._catalog&&this._RemoveCatalogContent(this._catalog,this._isDeepWatchEnabled),!0)}},{key:"isDeepWatchEnabled",get:function get(){return this._isDeepWatchEnabled}},{key:"deepWatch",set:function set(e){this._isDeepWatchEnabled!==e&&(this._isDeepWatchEnabled=e,this._isDeepWatchEnabled?(this._catalogObserver.Unhook(n.SIGNAL.ITEM_ADDED,this._OnCatalogItemAdded,this),this._catalogObserver.Unhook(n.SIGNAL.ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._catalogObserver.Unhook(i.SORTED,this._OnCatalogSorted,this),this._catalogObserver.Hook(i.ROOT_ITEM_ADDED,this._OnCatalogItemAdded,this),this._catalogObserver.Hook(i.ROOT_ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._isEnabled&&this._catalog&&(this._RemoveCatalogContent(this._catalog),this._AddCatalogContent(this._catalog,!0))):(this._catalogObserver.Unhook(i.ROOT_ITEM_ADDED,this._OnCatalogItemAdded,this),this._catalogObserver.Unhook(i.ROOT_ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._catalogObserver.Hook(n.SIGNAL.ITEM_ADDED,this._OnCatalogItemAdded,this),this._catalogObserver.Hook(n.SIGNAL.ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._catalogObserver.Hook(i.SORTED,this._OnCatalogSorted,this),this._isEnabled&&this._catalog&&(this._RemoveCatalogContent(this._catalog,!0),this._AddCatalogContent(this._catalog))))}},{key:"_AddCatalogContent",value:function _AddCatalogContent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e._items;if(t)for(var i=0,s=n.length;i<s;i++){var a=n[i];a.isDir?this._AddCatalogContent(a,t):this._OnCatalogItemAdded(e,a)}else for(var l=0,c=n.length;l<c;l++){var u=n[l];this._OnCatalogItemAdded(e,u)}}},{key:"_RemoveCatalogContent",value:function _RemoveCatalogContent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e._items;if(t)for(var i=0,s=n.length;i<s;i++){var a=n[i];a.isDir?this._RemoveCatalogContent(a,t):this._OnCatalogItemRemoved(e,a,i)}else for(var l=0,c=n.length;l<c;l++){var u=n[l];this._OnCatalogItemRemoved(e,u,l)}}},{key:"_OnCatalogChanged",value:function _OnCatalogChanged(e){return!!this._isEnabled&&(e&&this._RemoveCatalogContent(e,this._isDeepWatchEnabled),this._catalog&&this._AddCatalogContent(this._catalog,this._isDeepWatchEnabled),!0)}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t){return(!this._isDeepWatchEnabled||!(t.isDir||t.rootDistance<=this._catalog.rootDistance))&&(this._itemCount++,!(this._filters&&!this._filters.Check(t))&&(t.Watch(i.ITEM_DATA_RELEASED,this._OnItemDataReleased,this),!0))}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,n){if(this._isDeepWatchEnabled&&(t.isDir||t.rootDistance<=this._catalog.rootDistance))return!1;this._itemCount--,t.isReleasing||t.Unwatch(i.ITEM_DATA_RELEASED,this._OnItemDataReleased,this);var s=this._map.get(t);return s&&this._map.delete(t),s}},{key:"_OnItemDataReleased",value:function _OnItemDataReleased(e,t){}},{key:"_OnCatalogSorted",value:function _OnCatalogSorted(e){this._Broadcast(i.SORTED,this)}},{key:"Set",value:function Set(e,t){return this._map.set(e,t),t}},{key:"Get",value:function Get(e){return this._map.get(e)}},{key:"GetAt",value:function GetAt(e){return this._map.get(this._catalog._items[e])}},{key:"GetValueKeys",value:function GetValueKeys(e){for(var t=this._map.keys,n=null,i=0,s=t.length;i<s;i++){var a=t[i],l;this._map.Get(a)===e&&(n||(n=[]),n.push(a))}return n}},{key:"_CleanUp",value:function _CleanUp(){this.flattened=!1,this.catalog=null,this._owner=null,this._isEnabled=!0,this._itemCount=0,_get(_getPrototypeOf(CatalogWatcher.prototype),"_CleanUp",this).call(this)}}]),CatalogWatcher}(n.pool.DisposableObjectEx);e.exports=s},{115:74,12:27}],77:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(115),a=__r__(117),l=__r__(118),c=function(e){_inherits(Catalog,e);var t=_createSuper(Catalog);function Catalog(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return _classCallCheck(this,Catalog),(e=t.call(this)).autoSort=n,e}return _createClass(Catalog,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Catalog.prototype),"_Init",this).call(this),this._optionHandler.beginFn=this._Bind(this._OnOptionsWillUpdate),this._optionHandler.Hook("autoSort","autoSort"),this._isDir=!0,this._expanded=!1,this._items=[],this._rootCatalog=this,this._sortPending=!1,this._autoSort=!0,this._defaultSortFunc=null,this._delayedSort=new i.time.DelayedCall(this._Bind(this.Sort))}},{key:"expanded",get:function get(){return this._expanded},set:function set(e){this._expanded=e}},{key:"count",get:function get(){return this._items.length}},{key:"rootCatalog",set:function set(e){if(this._rootCatalog!==e){this._rootCatalog=e;for(var t=this._rootDistance+1,n=0,i=this._items.length;n<i;n++){var s=this._items[n];s.rootCatalog=this._rootCatalog,s.rootDistance=t}}}},{key:"_OnOptionsWillUpdate",value:function _OnOptionsWillUpdate(e){this.autoSort=n.tils.Get(e,"autoSort",this._parent?this._parent.autoSort:this._autoSort)}},{key:"At",value:function At(e){if(this._items.length<=e)throw new Error("Argument error : Catalog index outside boundaries.");return this._items[e]}},{key:"ForEach",value:function ForEach(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._items.length;if(t)if(n)for(var s=i-1;s>=0;s--)e.call(t,this._items[s],s);else for(var a=0;a<i;a++)e.call(t,this._items[a],a);else if(n)for(var l=i-1;l>=0;l--)e.call(null,this._items[l],l);else for(var c=0;c<i;c++)e.call(null,this._items[c],c)}},{key:"GetOrCreateCatalog",value:function GetOrCreateCatalog(e){for(var t,s=n.isString(e)?e:e[i.IDS.NAME],a=this._items,l=null,c=0,u=a.length;c<u;c++)if(l=a[c],n.isInstanceOf(l,Catalog)&&l.name===s)return l;return(l=i.Rent(Catalog.GetItemClass(e,!0))).options=n.tils.Ensure(n.isObject(e)?e:{},(_defineProperty(t={},i.IDS.NAME,s),_defineProperty(t,i.IDS.ICON,"directory"),t)),this.Add(l)}},{key:"Register",value:function Register(e){if(!e)throw new Error("Cannot register item with null infos");var t=Catalog.PathInfos(e.path);if(!t.valid||!t.path){var s,a=i.Rent(Catalog.GetItemClass(e));return a.options=n.tils.EnsureMultiple(e,(_defineProperty(s={},i.IDS.NAME,t.name),_defineProperty(s,i.IDS.ICON,"document"),s)),this.Add(a)}if(this._rootCatalog!=this)return this._rootCatalog.Register(e);for(var l=t.path,c=null,u=0,h=l.length,d;u<h;u++)c=(0===u?this:c).GetOrCreateCatalog(l[u]);if(t.isDir)return c.options=n.tils.EnsureMultiple(e,(_defineProperty(d={},i.IDS.NAME,t.name),_defineProperty(d,i.IDS.ICON,"directory"),d)),c;var p,m=i.Rent(Catalog.GetItemClass(e));return m.options=n.tils.EnsureMultiple(e,(_defineProperty(p={},i.IDS.NAME,t.name),_defineProperty(p,i.IDS.ICON,"document"),p)),c.Add(m)}},{key:"Add",value:function Add(e){if(!n.isInstanceOf(e,l))throw new Error("Cannot Add a non-CatalogItem (".concat(e,") to Catalog."));return this._items.includes(e)?null:(this._items.push(e),this._OnItemAdded(e),e)}},{key:"_OnItemAdded",value:function _OnItemAdded(e){e.parent=this,e.rootCatalog=this._rootCatalog,e.rootDistance=this._rootDistance+1,e.Watch(i.SIGNAL.RELEASED,this._OnItemReleased,this),this._rootCatalog&&this._rootCatalog._Broadcast(s.ROOT_ITEM_ADDED,this._rootCatalog,e),this._Broadcast(i.SIGNAL.ITEM_ADDED,this,e),this._autoSort&&this._delayedSort.Schedule()}},{key:"_OnItemReleased",value:function _OnItemReleased(e){this.Remove(e)}},{key:"Remove",value:function Remove(e){if(n.isInstanceOf(e,l)){var t=this._items.indexOf(e);-1!==t&&(this._items.splice(t,1),this._OnItemRemoved(e,t))}}},{key:"_OnItemRemoved",value:function _OnItemRemoved(e,t){this._Broadcast(i.SIGNAL.ITEM_REMOVED,this,e,t),this._rootCatalog&&this._rootCatalog._Broadcast(s.ROOT_ITEM_REMOVED,this._rootCatalog,e,t),e.Unwatch(i.SIGNAL.RELEASED,this._OnItemReleased,this),e.parent===this&&(e.parent=null,e.autoRelease&&e.Release())}},{key:"Resolve",value:function Resolve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},{key:"FindDataHolders",value:function FindDataHolders(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=[]);for(var i=0,s=this._items.length;i<s;i++){var a=this._items[i];a.data===e&&(t.includes(a)||t.push(a)),n.isInstanceOf(a,Catalog)&&a.FindDataHolders(e,t)}return t}},{key:"FindFirstDataHolder",value:function FindFirstDataHolder(e){for(var t=0,i=this._items.length;t<i;t++){var s=this._items[t];if(s.data===e)return s;if(n.isInstanceOf(s,Catalog)&&(s=s.FindDataHolders(e)))return s}return null}},{key:"FindFirstDataByStringID",value:function FindFirstDataByStringID(e){for(var t=0,n=this._items.length;t<n;t++){var i=this._items[t],s=i.data;if(s&&s.id&&s.id.name===e)return i}return null}},{key:"FindFirstByOptionValue",value:function FindFirstByOptionValue(e,t){for(var n=0,i=this._items.length;n<i;n++){var s=this._items[n],a=s._options[e];if(a&&a===t)return s}return null}},{key:"autoSort",get:function get(){return this._autoSort},set:function set(e){this._autoSort!==e&&(this._autoSort=e,e?this._delayedSort.Schedule():this._delayedSort.Cancel())}},{key:"defaultSortFunc",get:function get(){return this._defaultSortFunc},set:function set(e){this._defaultSortFunc=e}},{key:"Sort",value:function Sort(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!1;e?e.id?(a.SortByOption(this,e.id,e.fn),t=!0):e.fn&&(this._items.sort(e.fn),t=!0):(this._items.sort(this._defaultSortFunc?this._defaultSortFunc:a.NAME_ASC),t=!0),t&&this._Broadcast(s.SORTED,this)}},{key:"Clear",value:function Clear(){for(var e=this._items.length-1;e>0;)this._items[e].Release(),e--;this._items.length=0,this._delayedSort.Cancel()}},{key:"_CleanUp",value:function _CleanUp(){this.Clear(),this._autoSort=!0,this._defaultSortFunc=null,_get(_getPrototypeOf(Catalog.prototype),"_CleanUp",this).call(this),this._rootCatalog=this,this._rootDistance=-1}},{key:"StructToString",value:function StructToString(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||(e=""),n.isVoid(t)&&(t=-1),t++;for(var i="\t",s="",a=0;a<t;a++)s+=i;e+="".concat(s,"/").concat(this._name," \n");for(var l=0,c=this._items.length;l<c;l++){var u=this._items[l];n.isInstanceOf(u,Catalog)?e=u.StructToString(e,t):e+="".concat(s).concat(i,"· ").concat(u.name,"\n")}return e}},{key:"toString",value:function toString(){return"!".concat(this._name," (").concat(this._items.length,")")}}],[{key:"PathInfos",value:function PathInfos(e){var t={path:null,isDir:!1,name:null,valid:!1};if(!e)return t;t.valid=!0;var i=e.split("/"),s=!1,a="";if(1===i.length)a=i[0];else{for(var l=[],c=0,u=i.length;c<u;c++){var h=i.shift();n.isEmpty(h)?c===u-1&&(s=!0):l.push(h)}a=s?l[l.length-1]:l.pop(),t.path=l}return t.isDir=s,t.name=a,t}},{key:"CreateFrom",value:function CreateFrom(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t&&!e)throw new Error("Cannot create Catalog from null options nor struct.");var s=i.Rent(this.GetItemClass(e,!0));if(s.options=e,n&&(s.parent=n),t)for(var a=0,l=t.length;a<l;a++){var c=t[a];c.hasOwnProperty("content")?Catalog.CreateFrom(c,c.content,s):s.Register(c)}return s}},{key:"GetItemClass",value:function GetItemClass(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=null;if(n.isObject(e)){var a=n.tils.Get(e,"data",null);a&&(s=i.BINDINGS.Get(Catalog,a,null)),s||(s=t||n.isArray(n.tils.Get(e,"content",null))?this.__default_catalogClass:this.__default_itemClass)}else s=t?this.__default_catalogClass:this.__default_itemClass;return s}}]),Catalog}(l);_defineProperty(c,"__default_catalogClass",c),_defineProperty(c,"__default_itemClass",l),e.exports=c},{118:71,115:74,117:75,12:27,14:458}],78:[function(__r__,e,t){var n=__r__(116);e.exports={SIGNAL:__r__(115),SORTING:__r__(117),CatalogItem:__r__(118),Catalog:n,CatalogSelection:__r__(119),CatalogSearch:__r__(120),CatalogWatcher:__r__(113),CatalogHandler:__r__(121),CreateFrom:n.CreateFrom.bind(n)}},{116:77,121:70,118:71,120:72,119:73,115:74,117:75,113:76}],79:[function(__r__,e,t){var n,i=__r__(12),s=__r__(79),a=__r__(122),l=__r__(123),c=function(e){_inherits(DataBlock,e);var t=_createSuper(DataBlock);function DataBlock(){return _classCallCheck(this,DataBlock),t.call(this)}return _createClass(DataBlock,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataBlock.prototype),"_Init",this).call(this),this._id=null,this._isTemp=!1,this._metadirty=!1,this._isDirty=!1,this._ecosystem=null,this._metadata=new a,this._metadata.owner=this,this._metadata.Watch(s.DIRTY,this.Dirty,this).Watch(s.DIRTY_CLEARED,this._OnMetadataCleaned,this),this._ready=!0}},{key:"ready",get:function get(){return this._ready}},{key:"metadata",get:function get(){return this._metadata}},{key:"uri",get:function get(){"".concat(this._id.name)}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){this._isDirty||(this._isDirty=!0,this._Broadcast(s.DIRTY,this))}},{key:"ClearDirty",value:function ClearDirty(){this._isDirty&&(this._isDirty=!1,this._Broadcast(s.DIRTY_CLEARED,this))}},{key:"id",get:function get(){return this._id},set:function set(e){if(this._id!==e){var t=this._id;this._id=e,t&&t.Unwatch(i.SIGNAL.RENAMED,this.Dirty,this),e&&e.Watch(i.SIGNAL.RENAMED,this.Dirty,this)}}},{key:"name",get:function get(){return this._id?this._id.name:""}},{key:"isTemp",get:function get(){return this._isTemp}},{key:"CommitUpdate",value:function CommitUpdate(){this.Dirty(),this._Broadcast(i.SIGNAL.UPDATED,this)}},{key:"_CleanUp",value:function _CleanUp(){this._id&&(this._id.Release(),this._id=null),this._metadata._isDirty=!1,this._metadirty=!1,this._isDirty=!1,this._ready=!0,this._isTemp=!1,this._metadata.Clear(),_get(_getPrototypeOf(DataBlock.prototype),"_CleanUp",this).call(this)}},{key:"_OnMetadataCleaned",value:function _OnMetadataCleaned(){}},{key:"toString",value:function toString(){return this._id?"[".concat(this.constructor.name,"::").concat(this._id.name,"]"):"[".concat(this.constructor.name,"::]")}}]),DataBlock}(i.pool.DisposableObjectEx);_defineProperty(c,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/data-core:data-block"),_defineProperty(n,i.IDS.ICON,"data-block"),n)),e.exports=c},{123:89,79:105,122:82,12:27}],80:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(79),l=__r__(124),c=__r__(125),u=function(e){_inherits(DataFactory,e);var t=_createSuper(DataFactory);function DataFactory(){return _classCallCheck(this,DataFactory),t.call(this)}return _createClass(DataFactory,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataFactory.prototype),"_Init",this).call(this),this._id=null,this._tempItemList=new i.List(0),this._itemRep=new c,this._itemRep.Watch(a.ITEM_REGISTERED,this._OnItemRegistered,this).Watch(a.ITEM_UNREGISTERED,this._OnItemUnregistered,this),this._itemClass=null}},{key:"id",get:function get(){return this._id},set:function set(e){_set(_getPrototypeOf(DataFactory.prototype),"_id",e,this,!0)}},{key:"itemClass",get:function get(){return this._itemClass},set:function set(e){if(!n.isInstanceOf(e,l))throw new Error("itemClass must inherit DataBlock");this._itemClass=e}},{key:"itemList",get:function get(){return this._itemRep.itemList}},{key:"count",get:function get(){return this._itemRep.itemList.length}},{key:"IsNameAvailable",value:function IsNameAvailable(e){return this._itemRep.IsNameAvailable(e)}},{key:"Create",value:function Create(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.Register(this.CreateTemp(t),e||n.tils.UUID)}},{key:"CreateTemp",value:function CreateTemp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._itemClass;if(e){if(!n.isInstanceOf(e,t))throw new Error("custom constructor (".concat(e,") does not inherit factory constructor (").concat(this._itemClass.name,")"));t=e}return this.RegisterTemp(s.Rent(t))}},{key:"RegisterTemp",value:function RegisterTemp(e){if(this._tempItemList.Add(e))return e._isTemp=!0,e.Watch(s.SIGNAL.RELEASED,this._OnItemReleased,this),e}},{key:"Register",value:function Register(e,t){if(!this._tempItemList.Contains(e))throw new Error("Cannot register an item that hasn't been created by this factory.");return this._tempItemList.Remove(e),e._isTemp=!1,this._itemRep.Register(e,t),e}},{key:"_OnItemRegistered",value:function _OnItemRegistered(e,t){this._Broadcast(a.ITEM_REGISTERED,this,t)}},{key:"Unregister",value:function Unregister(e){this._itemRep.Unregister(e),e.Release()}},{key:"_OnItemUnregistered",value:function _OnItemUnregistered(e,t){this._Broadcast(a.ITEM_UNREGISTERED,this,t)}},{key:"_OnItemReleased",value:function _OnItemReleased(e){this._tempItemList.Remove(e)}},{key:"Get",value:function Get(e){return this._itemRep.Get(e)}},{key:"GetByName",value:function GetByName(e){return this._itemRep.GetByName(e)}},{key:"Clear",value:function Clear(){this._itemRep.Clear()}},{key:"_CleanUp",value:function _CleanUp(){throw new Error("CleanUp Not implemented in ".concat(this.constructor.name))}}]),DataFactory}(s.pool.DisposableObjectEx);e.exports=u},{79:105,124:79,125:83,18:21,12:27,14:458}],81:[function(__r__,e,t){e.exports={Metadata:__r__(122),DataBlock:__r__(124),SimpleDataBlock:__r__(126),Repertoire:__r__(125),DataFactory:__r__(127)}},{124:79,127:80,122:82,125:83,126:84}],82:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(79),l=function(e){_inherits(Metadata,e);var t=_createSuper(Metadata);function Metadata(){var e;return _classCallCheck(this,Metadata),(e=t.call(this))._owner=null,e._data={},e._isDirty=!1,e}return _createClass(Metadata,[{key:"owner",get:function get(){return this._owner},set:function set(e){this._owner=e}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){this._isDirty||(this._isDirty=!0,this._Broadcast(a.DIRTY,this))}},{key:"ClearDirty",value:function ClearDirty(){this._isDirty&&(this._isDirty=!1,this._Broadcast(a.DIRTY_CLEARED,this))}},{key:"Set",value:function Set(e,t){var n=null,l=!1;if(i.isArray(e))n=e;else{if(!i.isString(e))throw new Error("Path ".concat(e," is invalid."));n=e.split("."),l=!0}for(var c=this._data,u=0,h=n.length,d=h-1,p=!1,m=null;u<h;){var y=n[u];if(u===d){var g=null;if(c.hasOwnProperty(y)){if((g=c[y])===t)return t;m=g,c[y]=t,c=t}else c[y]=t,c=t,this._Broadcast(a.META_ADDED,this,e,c)}else c=c.hasOwnProperty(y)?c[y]:c[y]={};u++}h-=1;for(var v=0;v<h;v++)this._Broadcast(a.META_MID_UPDATE,this,i.tils.Join(n,".",0,v));return this._Broadcast(a.META_UPDATED,this,e,c,m),this._Broadcast(s.SIGNAL.UPDATED,this),this.Dirty(),l&&(n.length=0),c}},{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,s=!1;if(i.isArray(e))n=e;else{if(!i.isString(e))throw new Error("Path ".concat(e," is invalid."));n=e.split("."),s=!0}for(var a=0,l=n.length,c=this._data;a<l;){var u=n[a];if(!c.hasOwnProperty(u))return t;c=c[u],a++}return s&&(n.length=0),c}},{key:"GetOrSet",value:function GetOrSet(e,t){var n=null,s=!1;if(i.isArray(e))n=e;else{if(!i.isString(e))throw new Error("Path ".concat(e," is invalid."));n=e.split("."),s=!0}for(var a=0,l=n.length,c=this._data;a<l;){var u=n[a];if(!c.hasOwnProperty(u))return this.Set(n,t);c=c[u],a++}return s&&(n.length=0),c}},{key:"Delete",value:function Delete(e){var t=null,n=!1;if(i.isArray(e))t=e;else{if(!i.isString(e))throw new Error("Path ".concat(e," is invalid."));t=e.split("."),n=!0}for(var a=0,l=t.length,c=this._data,u=t[l-1];a<l-1;){var h=t[a];if(!c.hasOwnProperty(h))return;c=c[h],a++}c&&(delete c[u],this._Broadcast(s.SIGNAL.UPDATED,this),this.Dirty()),n&&(t.length=0)}},{key:"BroadcastUpdate",value:function BroadcastUpdate(){this._Broadcast(s.SIGNAL.UPDATED,this),this.Dirty()}},{key:"Clear",value:function Clear(){this._data=i.tils.DeepClear(this._data,!0)}},{key:"Clone",value:function Clone(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return Metadata.Copy(this);if(i.isInstanceOf(e,Metadata))this._data=i.tils.Clone(e._data);else{if(!i.isObject(e))return;this._data=i.tils.Clone(e)}t?this.ClearDirty():this.Dirty()}},{key:"toString",value:function toString(){return"{Metadata}"}}],[{key:"Copy",value:function Copy(e){var t=pool.POOL.Rent(Metadata);return t._data=i.tils.Clone(e._data),t}}]),Metadata}(s.pool.DisposableObjectEx);_defineProperty(l,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/data-core:metadata"),_defineProperty(n,s.IDS.ICON,"metadata"),n)),e.exports=l},{79:105,12:27,14:458}],83:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(128),l=a.ID,c=a.IDDispenser,u=__r__(79),h=__r__(124),d=function(e){_inherits(Repertoire,e);var t=_createSuper(Repertoire);function Repertoire(){return _classCallCheck(this,Repertoire),t.call(this)}return _createClass(Repertoire,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Repertoire.prototype),"_Init",this).call(this),this._idDispenser=new c,this._itemList=new i.List(0),this._itemMap=new i.Dictionary}},{key:"idDispenser",get:function get(){return this._idDispenser}},{key:"itemList",get:function get(){return this._itemList}},{key:"itemMap",get:function get(){return this._itemMap}},{key:"count",get:function get(){return this._itemList.count}},{key:"IndexOf",value:function IndexOf(e){return this._itemList.IndexOf(e)}},{key:"IsNameAvailable",value:function IsNameAvailable(e){return this._idDispenser.IsNameAvailable(e)}},{key:"ContainsID",value:function ContainsID(e){return this._idDispenser.ContainsID(e)}},{key:"ContainsName",value:function ContainsName(e){return this._idDispenser.ContainsName(e)}},{key:"GetID",value:function GetID(e){return this._idDispenser.Get(e)}},{key:"ReserveID",value:function ReserveID(e){if(!this._idDispenser.IsNameAvailable(e))throw new Error("Cannot create an ID that already exists.");var t=this._idDispenser.Create(e);return t.Watch(s.SIGNAL.RELEASED,this._OnIDReleased,this).Watch(s.SIGNAL.RENAMED,this._OnIDRenamed,this),t}},{key:"_OnIDRenamed",value:function _OnIDRenamed(e,t){this._Broadcast(s.SIGNAL.RENAMED,e,t)}},{key:"_OnIDReleased",value:function _OnIDReleased(e){var t=this._itemMap.Get(e);t&&(console.warn("An ID (".concat(e.name,") has been released. Removing existing item from repertoire.")),this.Unregister(t))}},{key:"Register",value:function Register(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._itemList.Contains(e))throw new Error("Cannot re-register an item.");if(!n.isInstanceOf(e,h))throw new Error("Cannot register a non-DataBlock item.");if(e.id)throw new Error("Cannot register an item with an ID already set.");var i=null;if(t)if(n.isString(t)){var s=this._idDispenser.Get(t);if(s){if(this._itemMap.Contains(s))throw new Error("ID '".concat(t,"' already in use."));i=s}else i=this.ReserveID(t)}else{if(!n.isInstanceOf(t,l))throw new Error("'".concat(t,"' is neither a string identifier nor an ID instance."));if(!this._idDispenser.ContainsID(t))throw new Error("ID '".concat(t.name,"' must be provided by local dispenser."));if(this._itemMap.Contains(t))throw new Error("ID '".concat(t,"' already in use."));i=t}else i=this.ReserveID(n.tils.UUID);this._itemList.Add(e),this._itemMap.Set(i,e),e.id=i,this._OnItemRegistered(e)}},{key:"_OnItemRegistered",value:function _OnItemRegistered(e){e.Watch(s.SIGNAL.RELEASED,this._OnItemReleased,this),this._Broadcast(u.ITEM_REGISTERED,this,e)}},{key:"Unregister",value:function Unregister(e){if(n.isVoid(e))throw new Error("Cannot unregister a null item.");var t=e.id;if(n.isVoid(t))throw new Error("Cannot unregister a item with no ID.");if(n.isVoid(this._itemList.Remove(e)))throw new Error("Cannot unregister an item that is not in the repertoire.");this._itemMap.Remove(t),this._OnItemUnregistered(e),e.id=null,t.Release()}},{key:"_OnItemUnregistered",value:function _OnItemUnregistered(e){e.Unwatch(s.SIGNAL.RELEASED,this._OnItemReleased,this),this._Broadcast(u.ITEM_UNREGISTERED,this,e)}},{key:"_OnItemReleased",value:function _OnItemReleased(e){this.Unregister(e)}},{key:"Get",value:function Get(e){return this._itemMap.Get(e)}},{key:"GetByName",value:function GetByName(e){var t=this._idDispenser.Get(e);return t?this._itemMap.Get(t):null}},{key:"At",value:function At(e){return this._itemList.At(e)}},{key:"Clear",value:function Clear(){for(;!this._itemList.isEmpty;)this._itemList.last.Release()}},{key:"_CleanUp",value:function _CleanUp(){this.Clear(),_get(_getPrototypeOf(Repertoire.prototype),"_CleanUp",this).call(this)}}]),Repertoire}(s.pool.DisposableObjectEx);e.exports=d},{128:90,79:105,124:79,18:21,12:27,14:458}],84:[function(__r__,e,t){var n,i=function(e){_inherits(SimpleDataBlock,e);var t=_createSuper(SimpleDataBlock);function SimpleDataBlock(){return _classCallCheck(this,SimpleDataBlock),t.call(this)}return _createClass(SimpleDataBlock,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(SimpleDataBlock.prototype),"_Init",this).call(this),this._data={}}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(SimpleDataBlock.prototype),"_CleanUp",this).call(this),this._data={}}}]),SimpleDataBlock}(__r__(124));e.exports=i},{124:79}],85:[function(__r__,e,t){e.exports={DataObserver:__r__(129),MetadataObserver:__r__(130)}},{129:86,130:87}],86:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(131),a=function(e){_inherits(DataObserver,e);var t=_createSuper(DataObserver);function DataObserver(){return _classCallCheck(this,DataObserver),t.call(this)}return _createClass(DataObserver,[{key:"Observe",value:function Observe(e){return _get(_getPrototypeOf(DataObserver.prototype),"Observe",this).call(this,this._ExtractNestedData(e))}},{key:"ObserveOnly",value:function ObserveOnly(e){return _get(_getPrototypeOf(DataObserver.prototype),"ObserveOnly",this).call(this,this._ExtractNestedData(e))}},{key:"Unobserve",value:function Unobserve(e){return _get(_getPrototypeOf(DataObserver.prototype),"Unobserve",this).call(this,this._ExtractNestedData(e))}},{key:"_ExtractNestedData",value:function _ExtractNestedData(e){return e&&!n.isInstanceOf(e,s)&&(e=n.isInstanceOf(e[i.IDS.DATA],s)?e[i.IDS.DATA]:null),e}}]),DataObserver}(i.signals.Observer);e.exports=a},{131:79,12:27,14:458}],87:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(79),a="ADD",l="REM",c="UPD",u="IPD",h=function(e){_inherits(MetadataObserver,e);var t=_createSuper(MetadataObserver);function MetadataObserver(){return _classCallCheck(this,MetadataObserver),t.call(this)}return _createClass(MetadataObserver,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MetadataObserver.prototype),"_Init",this).call(this),this._observer=new i.signals.Observer,this._observer.Hook(s.META_ADDED,this._OnMetaAdded,this),this._observer.Hook(s.META_REMOVED,this._OnMetaRemoved,this),this._observer.Hook(s.META_UPDATED,this._OnMetaUpdated,this),this._observer.Hook(s.META_MID_UPDATE,this._OnMetaMidUpdate,this)}},{key:"target",set:function set(e){this._observer.ObserveOnly(e)}},{key:"_GetPrefix",value:function _GetPrefix(e){switch(e){case s.META_ADDED:return a;case s.META_REMOVED:return l;case s.META_UPDATED:return c;case s.META_MID_UPDATE:return u}throw new Error("Cannot hook to a signal that isn't META_ADDED, META_REMOVED or META_UPDATED")}},{key:"Hook",value:function Hook(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n.isArray(t)&&(t=t.join("."));var a="".concat(this._GetPrefix(e),"@").concat(t);this.Watch(a,i,s)}},{key:"Unhook",value:function Unhook(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n.isArray(t)&&(t=t.join("."));var a="".concat(this._GetPrefix(e),"@").concat(t);this.Unwatch(a,i,s)}},{key:"_OnMetaAdded",value:function _OnMetaAdded(e,t,n){var i="".concat(a,"@").concat(t);this._Broadcast(i,e,t,n)}},{key:"_OnMetaRemoved",value:function _OnMetaRemoved(e,t){var n="".concat(l,"@").concat(t);this._Broadcast(n,e,t,p_value,p_oldValue)}},{key:"_OnMetaUpdated",value:function _OnMetaUpdated(e,t,n,i){var s="".concat(c,"@").concat(t);this._Broadcast(s,e,t,n,i)}},{key:"_OnMetaMidUpdate",value:function _OnMetaMidUpdate(e,t){var n="".concat(u,"@").concat(t);this._Broadcast(n,e,t)}},{key:"_CleanUp",value:function _CleanUp(){this.target=null,_get(_getPrototypeOf(MetadataObserver.prototype),"_CleanUp",this).call(this)}}]),MetadataObserver}(i.pool.DisposableObjectEx);e.exports=h},{79:105,12:27,14:458}],88:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(132),l=function(e){_inherits(IDDispenser,e);var t=_createSuper(IDDispenser);function IDDispenser(){return _classCallCheck(this,IDDispenser),t.call(this)}return _createClass(IDDispenser,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(IDDispenser.prototype),"_Init",this).call(this),this._idMap=new i.Dictionary,this._idList=new i.List}},{key:"idList",get:function get(){return this._idList}},{key:"IsNameAvailable",value:function IsNameAvailable(e){return!this._idMap.Contains(e)}},{key:"Contains",value:function Contains(e){if(n.isString(e))return this._idMap.Contains(e);if(n.isInstanceOf(e,a))return this._idList.Contains(e);throw new Error("p_id must be either string or ID.")}},{key:"ContainsName",value:function ContainsName(e){return this._idMap.Contains(e)}},{key:"ContainsID",value:function ContainsID(e){return this._idList.Contains(e)}},{key:"Get",value:function Get(e){return this._idMap.Get(e)}},{key:"Create",value:function Create(e){if(!this.IsNameAvailable(e))throw new Error("ID ".concat(e," is not available."));var t=s.Rent(a);return t.name=e,this._idMap.Set(e,t),this._idList.Add(t),t.Watch(s.SIGNAL.RENAMING,this._OnIDRenaming,this).Watch(s.SIGNAL.RENAMED,this._OnIDRenamed,this).Watch(s.SIGNAL.RELEASED,this._OnIDReleased,this),t}},{key:"Remove",value:function Remove(e){return!!this._idMap.Remove(e.name)&&(e.Release(),this._idList.Remove(e),!0)}},{key:"_OnIDRenaming",value:function _OnIDRenaming(e,t){this._idMap.Contains(t)&&e.PreventRenaming()}},{key:"_OnIDRenamed",value:function _OnIDRenamed(e,t,n){this._idMap.Remove(n),this._idMap.Set(t,e)}},{key:"_OnIDReleased",value:function _OnIDReleased(e){this.Remove(e)}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(IDDispenser.prototype),"_CleanUp",this).call(this)}}]),IDDispenser}(s.pool.DisposableObjectEx);e.exports=l},{132:89,18:21,12:27,14:458}],89:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(ID,e);var t=_createSuper(ID);function ID(){return _classCallCheck(this,ID),t.call(this)}return _createClass(ID,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ID.prototype),"_Init",this).call(this),this._renamingPrevented=!1,this._name=""}},{key:"PreventRenaming",value:function PreventRenaming(){this._renamingPrevented=!0}},{key:"name",get:function get(){return this._name},set:function set(e){if(this._name!==e)if(this._Broadcast(n.SIGNAL.RENAMING,this,e),this._renamingPrevented)this._renamingPrevented=!1;else{var t=this._name;this._name=e,this._renamingPrevented=!1,this._Broadcast(n.SIGNAL.RENAMED,this,t)}}},{key:"_CleanUp",value:function _CleanUp(){this._name="",_get(_getPrototypeOf(ID.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return this._name}}],[{key:"New",value:function New(e){var t=n.Rent(ID);return t.name=e,t}}]),ID}(n.pool.DisposableObjectEx);e.exports=i},{12:27}],90:[function(__r__,e,t){e.exports={ID:__r__(132),IDDispenser:__r__(133)}},{132:89,133:88}],91:[function(__r__,e,t){var n=function IDS(){_classCallCheck(this,IDS)};_defineProperty(n,"AUTO_RELEASE","autoRelease"),_defineProperty(n,"BOUND","dataBound"),e.exports=n},{}],92:[function(__r__,e,t){e.exports={NUMBER:__r__(134),STRING:__r__(135)}},{134:93,135:94}],93:[function(__r__,e,t){var n=function(){function NUMBER(){_classCallCheck(this,NUMBER)}return _createClass(NUMBER,[{key:"ClampMin",value:function ClampMin(e,t){return e<t?t:e}},{key:"ClampMax",value:function ClampMax(e,t){return e>t?t:e}},{key:"Clamp",value:function Clamp(e,t,n){return e<t?e=t:e>n&&(e=n),e}}]),NUMBER}();e.exports=n},{}],94:[function(__r__,e,t){var n=function STRING(){_classCallCheck(this,STRING)};e.exports=n},{}],95:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(SERIALIZER,e);var t=_createSuper(SERIALIZER);function SERIALIZER(){return _classCallCheck(this,SERIALIZER),t.call(this)}return SERIALIZER}(n.helpers.CSYMBOL),s=function(e){_inherits(NONE,e);var t=_createSuper(NONE);function NONE(){return _classCallCheck(this,NONE),t.call(this)}return NONE}(n.helpers.CSYMBOL),a=function(e){_inherits(TEXT,e);var t=_createSuper(TEXT);function TEXT(){return _classCallCheck(this,TEXT),t.call(this)}return TEXT}(n.helpers.CSYMBOL),l=function(e){_inherits(JSON,e);var t=_createSuper(JSON);function JSON(){return _classCallCheck(this,JSON),t.call(this)}return JSON}(n.helpers.CSYMBOL);_defineProperty(l,"META_KEY","meta"),_defineProperty(l,"DATA_KEY","data"),_defineProperty(l,"ERRORS_KEY","errors"),_defineProperty(l,"CLASS","class"),_defineProperty(l,"UID",n.IDS.UID),e.exports={SERIALIZER:i,NONE:s,TEXT:a,JSON:l}},{12:27}],96:[function(__r__,e,t){e.exports={BaseSerializer:__r__(136),JSONSerializer:__r__(137),TEXTSerializer:__r__(138),CONTEXT:__r__(139),json:__r__(140)}},{139:95,140:97,136:102,137:103,138:104}],97:[function(__r__,e,t){e.exports={Base:__r__(141),Metadata:__r__(142),DataBlock:__r__(143),SimpleDataBlock:__r__(144)}},{141:98,143:99,142:100,144:101}],98:[function(__r__,e,t){var n=__r__(12),i=__r__(145),s=__r__(146),a=__r__(147),l=function(e){_inherits(AbstractJSONSerializer,e);var t=_createSuper(AbstractJSONSerializer);function AbstractJSONSerializer(){return _classCallCheck(this,AbstractJSONSerializer),t.call(this)}return AbstractJSONSerializer}(s);_defineProperty(l,"__context",i.JSON),_defineProperty(l,"__master",a),e.exports=l},{145:95,146:102,147:103,12:27}],99:[function(__r__,e,t){var n=__r__(12),i=__r__(148),s=__r__(141),a="metadata",l="data",c=function(e){_inherits(DataBlockJSONSerializer,e);var t=_createSuper(DataBlockJSONSerializer);function DataBlockJSONSerializer(){return _classCallCheck(this,DataBlockJSONSerializer),t.call(this)}return _createClass(DataBlockJSONSerializer,null,[{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.metadata,i=this.GetSerializer(n),s={};return s.metadata=i.Serialize(n,t),this.SerializeContent(s,e,t),s}},{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}},{key:"Deserialize",value:function Deserialize(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)throw new Error("Cannot unpack null data.");if(!t)throw new Error("Cannot unpack to null target.");var s=t.metadata,l=this.GetSerializer(s);return a in e&&l.Deserialize(e.metadata,s,n,i),this.DeserializeContent(e,t,n,i),t}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}}]),DataBlockJSONSerializer}(s);e.exports=c},{148:79,141:98,12:27}],100:[function(__r__,e,t){var n=__r__(14),i=__r__(149),s,a=function(e){_inherits(MetadataJSONSerializer,e);var t=_createSuper(MetadataJSONSerializer);function MetadataJSONSerializer(){return _classCallCheck(this,MetadataJSONSerializer),t.call(this)}return _createClass(MetadataJSONSerializer,null,[{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e._data}},{key:"Deserialize",value:function Deserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)throw new Error("Cannot unpack null data.");if(!t)throw new Error("Cannot unpack metadata with a null target");return n.tils.SetOverwrite(t._data,e),t}}]),MetadataJSONSerializer}(__r__(141));e.exports=a},{149:82,141:98,14:458}],101:[function(__r__,e,t){var n=__r__(12),i=__r__(145),s=__r__(148),a,l=function(e){_inherits(SimpleDataBlockJSONSerializer,e);var t=_createSuper(SimpleDataBlockJSONSerializer);function SimpleDataBlockJSONSerializer(){return _classCallCheck(this,SimpleDataBlockJSONSerializer),t.call(this)}return _createClass(SimpleDataBlockJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e[i.JSON.DATA_KEY]=t._data}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t._data=e[i.JSON.DATA_KEY]||{}}}]),SimpleDataBlockJSONSerializer}(__r__(143));e.exports=l},{148:79,145:95,143:99,12:27}],102:[function(__r__,e,t){var n=__r__(12),i=function(){function BaseSerializer(){_classCallCheck(this,BaseSerializer)}return _createClass(BaseSerializer,null,[{key:"GetSerializer",value:function GetSerializer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.BINDINGS.Get(this.__context,e,t)}},{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;throw new Error("not implemented")}},{key:"Deserialize",value:function Deserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;throw new Error("not implemented")}}]),BaseSerializer}();_defineProperty(i,"__context",null),_defineProperty(i,"__master",null),e.exports=i},{12:27}],103:[function(__r__,e,t){var n=__r__(12),i=__r__(131),s=__r__(136),a=__r__(139),l=function(e){_inherits(JSONSerializer,e);var t=_createSuper(JSONSerializer);function JSONSerializer(){return _classCallCheck(this,JSONSerializer),t.call(this)}return _createClass(JSONSerializer,null,[{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.GetSerializer(e.constructor,null);if(!i)throw new Error("Could not find suitable serializer for target=".concat(e));var s=i.Serialize(e);if(!(a.JSON.DATA_KEY in s)){var l={};l[a.JSON.DATA_KEY]=s,s=l}var c=null;a.JSON.META_KEY in s?c=s[a.JSON.META_KEY]:(c={},s[a.JSON.META_KEY]=c),c[a.JSON.CLASS]=n.BINDINGS.GetClassKey(e.constructor);var u=e.id;return u&&(c[n.IDS.UID]=u.toString()),s}},{key:"Deserialize",value:function Deserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null,l=e[a.JSON.META_KEY];if(null!=t)s=t.constructor;else{if(!l)throw new Error("Cannot unserialize without nfos");if(!(s=n.BINDINGS.GetClass(l[a.JSON.CLASS])))throw new Error("Could not find constructor ".concat(l.instanceOf));t=n.Rent(s)}var c=null;if(!(a.JSON.DATA_KEY in e))return t;c=e[a.JSON.DATA_KEY];var u=this.GetSerializer(s,null);if(!u)throw new Error("Could not find suitable de-serializer for target=".concat(s?s.name:null));return u.Deserialize(c,t,i,l)}}]),JSONSerializer}(s);_defineProperty(l,"__context",a.JSON),_defineProperty(l,"__master",l),e.exports=l},{131:79,139:95,136:102,12:27}],104:[function(__r__,e,t){var n=__r__(137),i=__r__(139),s=function(e){_inherits(TEXTSerializer,e);var t=_createSuper(TEXTSerializer);function TEXTSerializer(){return _classCallCheck(this,TEXTSerializer),t.call(this)}return _createClass(TEXTSerializer,null,[{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return JSON.stringify(n.Serialize(e,t))}},{key:"Deserialize",value:function Deserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return JSON.parse(n.Deserialize(e,t,i))}}]),TEXTSerializer}(n);_defineProperty(s,"__context",i.TEXT),_defineProperty(s,"__master",s),e.exports=s},{139:95,137:103}],105:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"ITEM_REGISTERED",Symbol("itemRegistered")),_defineProperty(n,"ITEM_UNREGISTERED",Symbol("itemUnregistered")),_defineProperty(n,"ITEM_UPDATED",Symbol("itemUpdated")),_defineProperty(n,"META_ADDED",Symbol("metaAdded")),_defineProperty(n,"META_REMOVED",Symbol("metaRemoved")),_defineProperty(n,"META_UPDATED",Symbol("metaUpdated")),_defineProperty(n,"META_MID_UPDATE",Symbol("metaMidUpdate")),_defineProperty(n,"DIRTY",Symbol("dirty")),_defineProperty(n,"DIRTY_CLEARED",Symbol("dirty-cleared")),_defineProperty(n,"VALUE_CHANGED",Symbol("valueChanged")),e.exports=n},{}],106:[function(__r__,e,t){arguments[4][92][0].apply(t,arguments)},{134:107,135:108,dup:92}],107:[function(__r__,e,t){var n=function(){function NUMBER(){_classCallCheck(this,NUMBER)}return _createClass(NUMBER,[{key:"GreaterThan",value:function GreaterThan(e,t){if(e>p_max)return"Value must be greater than ".concat(p_max,".")}},{key:"SmallerThan",value:function SmallerThan(e,t){if(e>t)return"Value must be smaller than ".concat(t,".")}},{key:"WithinRange",value:function WithinRange(e,t,n){if(e>n||e<t)return"Value must be withing range [".concat(t,",").concat(n,"].")}}]),NUMBER}();e.exports=n},{}],108:[function(__r__,e,t){arguments[4][94][0].apply(t,arguments)},{dup:94}],109:[function(__r__,e,t){var n=__r__(12),i=__r__(31),s=__r__(38),a=__r__(150),l=__r__(151),c=__r__(98),u=__r__(152),h=__r__(153),d=__r__(154),p=__r__(155),m=__r__(156),y=__r__(157),g=__r__(158),v=__r__(159),k=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),this.Add({context:i.serialization.CONTEXT.JSON,kvps:[{key:v,binding:c.json.DataBlockExtendable},{key:h,binding:c.json.Ecosystem},{key:d,binding:c.json.EcosystemBundle},{key:p,binding:c.json.FieldSlot},{key:m,binding:c.json.FieldDescriptor},{key:y,binding:c.json.DataModel},{key:g,binding:c.json.DataEntry}]},{context:s.CONTEXT.DOCUMENT_DEFAULT_DATA,kvps:[{key:u.Ecosystem,binding:h},{key:u.EcosystemBundle,binding:d}]}),this.AddClasses(l.Boolean,l.lists.List,l.lists.Map,l.numbers.Number,l.numbers.NumberClamped,l.numbers.Byte,l.numbers.Float,l.numbers.Float2,l.numbers.Float3,l.numbers.Float4,l.numbers.Int,l.numbers.Int2,l.numbers.Int3,l.numbers.Int4,l.numbers.UInt,l.strings.String,l.strings.LocalizedString,l.types.Type,l.types.KVP),this.Add({context:a.FIELD_DETAILS,kvps:[{key:l.lists.Array,binding:l.DetailsArray}]})}}]),Bindings}(n.helpers.BindingKit);e.exports=k},{150:111,159:112,158:113,157:115,152:119,153:121,154:120,156:122,155:123,151:127,98:165,12:27,31:66,38:183}],110:[function(__r__,e,t){var n=__r__(157),i=__r__(160);i.__default_modelClass=n,e.exports={CONTEXT:__r__(150),SIGNAL:__r__(47),IDS:__r__(49),utils:i,fields:__r__(151),parts:__r__(161),DataFactoryEx:__r__(162),DataBlockExtendable:__r__(159),FieldSlot:__r__(155),FieldDescriptor:__r__(156),DataEntry:__r__(158),DataModel:n,Ecosystem:__r__(153),EcosystemBundle:__r__(154)},__r__(12).BINDINGS.Expand(__r__(110))},{110:109,150:111,159:112,158:113,162:114,157:115,153:121,154:120,156:122,155:123,151:127,49:159,161:163,47:174,160:175,12:27}],111:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(FIELD_DETAILS,e);var t=_createSuper(FIELD_DETAILS);function FIELD_DETAILS(){return _classCallCheck(this,FIELD_DETAILS),t.call(this)}return FIELD_DETAILS}(n.helpers.CSYMBOL),s=function(e){_inherits(FIELD_DESCRIPTOR,e);var t=_createSuper(FIELD_DESCRIPTOR);function FIELD_DESCRIPTOR(){return _classCallCheck(this,FIELD_DESCRIPTOR),t.call(this)}return FIELD_DESCRIPTOR}(n.helpers.CSYMBOL);e.exports={FIELD_DETAILS:i}},{12:27}],112:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(163),l=function(e){_inherits(DataBlockExtendable,e);var t=_createSuper(DataBlockExtendable);function DataBlockExtendable(){return _classCallCheck(this,DataBlockExtendable),t.call(this)}return _createClass(DataBlockExtendable,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataBlockExtendable.prototype),"_Init",this).call(this),this._ecosystem=null,this._base=null,this._baseObserver=new i.signals.Observer,this._baseObserver.Hook(i.SIGNAL.UPDATED,this._OnBaseUpdated,this)}},{key:"ecosystem",get:function get(){return this._ecosystem},set:function set(e){this._ecosystem=e}},{key:"hasUnresolvedReferences",get:function get(){return this._ecosystem.HasUnresolvedReferences(this)}},{key:"uri",get:function get(){throw new Error("not implemented")}},{key:"base",get:function get(){return this._base},set:function set(e){if(this._base!==e){var t=this._base;this._base=e,this._baseObserver.ObserveOnly(e),this._OnBaseChanged(t),e&&this._OnBaseUpdated(this._base),this._Broadcast(a.BASE_CHANGED,this,t)}}},{key:"_OnBaseChanged",value:function _OnBaseChanged(e){}},{key:"_OnBaseUpdated",value:function _OnBaseUpdated(e){}},{key:"Inherits",value:function Inherits(e){return this._base===e||!!e&&(this===e||!!this._base&&this._base.Inherits(e))}},{key:"GetInheritanceChain",value:function GetInheritanceChain(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=[]),e&&t.push(this);for(var n=this._base;n;)t.push(n),n=n.base;return t}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(DataBlockExtendable.prototype),"_CleanUp",this).call(this),this.base=null,this.ecosystem=null}},{key:"toString",value:function toString(){return _get(_getPrototypeOf(DataBlockExtendable.prototype),"toString",this).call(this)}}]),DataBlockExtendable}(s.DataBlock);_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:data-block-extendable"),_defineProperty(n,i.IDS.ICON,"data-block-extendable"),n)),_defineProperty(l,"__uriPrefix",""),e.exports=l},{163:174,12:27,31:66}],113:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(56),l,c=function(e){_inherits(DataEntry,e);var t=_createSuper(DataEntry);function DataEntry(){return _classCallCheck(this,DataEntry),t.call(this)}return _createClass(DataEntry,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataEntry.prototype),"_Init",this).call(this),this._model=null,this._fieldValues={}}},{key:"model",get:function get(){return this._model},set:function set(e){if(this._model!==e){var t=this._model;this._model=e}}},{key:"uri",get:function get(){return"".concat(a.ENTRY,"/").concat(this._model._id._name,"/").concat(this._id._name)}},{key:"fieldValues",get:function get(){return this._fieldValues}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(DataEntry.prototype),"_CleanUp",this).call(this),this.model=null,this._fieldValues={}}}]),DataEntry}(__r__(164));_defineProperty(c,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:data-entry"),_defineProperty(n,i.IDS.ICON,"data-entry"),n)),e.exports=c},{164:112,56:159,12:27,31:66}],114:[function(__r__,e,t){var n=__r__(31),i=__r__(163),s=function(e){_inherits(DataFactoryEx,e);var t=_createSuper(DataFactoryEx);function DataFactoryEx(){return _classCallCheck(this,DataFactoryEx),t.call(this)}return _createClass(DataFactoryEx,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataFactoryEx.prototype),"_Init",this).call(this),this._Bind(this._OnItemBaseChanged)}},{key:"_OnItemRegistered",value:function _OnItemRegistered(e,t){_get(_getPrototypeOf(DataFactoryEx.prototype),"_OnItemRegistered",this).call(this,e,t),t.Watch(i.BASE_CHANGED,this._OnItemBaseChanged),t.base&&this._OnItemBaseChanged(t,null)}},{key:"_OnItemUnregistered",value:function _OnItemUnregistered(e,t){_get(_getPrototypeOf(DataFactoryEx.prototype),"_OnItemUnregistered",this).call(this,e,t),t.Unwatch(i.BASE_CHANGED,this._OnItemBaseChanged)}},{key:"_OnItemBaseChanged",value:function _OnItemBaseChanged(e,t){e.base?this._itemRep._itemList.MoveAfter(e,e.base):this._itemRep._itemList.Move(e,0)}}]),DataFactoryEx}(n.DataFactory);e.exports=s},{163:174,31:66}],115:[function(__r__,e,t){var n,i=__r__(18),s=__r__(14),a=__r__(12),l=__r__(31),c=__r__(163),u=__r__(56),h=__r__(139),d,p=function(e){_inherits(DataModel,e);var t=_createSuper(DataModel);function DataModel(){return _classCallCheck(this,DataModel),t.call(this)}return _createClass(DataModel,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataModel.prototype),"_Init",this).call(this),this._slotRep=new l.Repertoire,this._slotRep.Watch(l.SIGNAL.ITEM_REGISTERED,this._OnSlotRegistered,this).Watch(l.SIGNAL.ITEM_UNREGISTERED,this._OnSlotUnregistered,this).Watch(a.SIGNAL.RENAMED,this._OnSlotRenamed,this),this._groupRep=new l.Repertoire,this._groupRep.Watch(l.SIGNAL.ITEM_REGISTERED,this._OnSlotGroupRegistered,this).Watch(l.SIGNAL.ITEM_UNREGISTERED,this._OnSlotGroupUnregistered,this).Watch(a.SIGNAL.RENAMED,this._OnSlotGroupRenamed,this),this._defaultGroup=null,this._baseObserver.Hook(c.SLOT_ADDED,this._OnBaseFieldAdded,this).Hook(c.SLOT_REMOVED,this._OnBaseFieldRemoved,this).Hook(c.SLOT_RENAMED,this._OnBaseFieldRenamed,this),this._cachedSlotList=new i.List}},{key:"uri",get:function get(){return"".concat(u.MODEL,"/").concat(this._id._name)}},{key:"_OnBaseChanged",value:function _OnBaseChanged(e){}},{key:"_OnBaseUpdated",value:function _OnBaseUpdated(e){}},{key:"RegisterSlot",value:function RegisterSlot(e,t){return this._slotRep.Register(e,t)}},{key:"_OnSlotRegistered",value:function _OnSlotRegistered(e,t){t.model=this,t.InitSettings(),t.Watch(l.SIGNAL.DIRTY,this._OnSlotDirty,this);var n=this._base?this._base.GetSlotByName(t._id._name):null;n?(t.base=n,t.fieldIndex=n.fieldIndex):t.fieldIndex=this._slotRep._itemList.count-1,this._Broadcast(c.SLOT_ADDED,this,t),this.Dirty()}},{key:"_OnSlotUnregistered",value:function _OnSlotUnregistered(e,t){this._Broadcast(c.SLOT_REMOVED,this,t)}},{key:"_OnSlotRenamed",value:function _OnSlotRenamed(e,t){this._Broadcast(c.SLOT_RENAMED,this,e,t)}},{key:"_OnSlotDirty",value:function _OnSlotDirty(e){}},{key:"Owns",value:function Owns(e){return e.model===this}},{key:"GetSlotAt",value:function GetSlotAt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)return this._slotRep.At(e);var n=this._slotRep.At(e);return n||t||!this._base?n:void 0}},{key:"GetSlot",value:function GetSlot(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._slotRep.GetByName(e);if(n||t||!this._base)return n}},{key:"GetSlotByName",value:function GetSlotByName(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._slotRep.GetByName(e);if(n||t||!this._base)return n}},{key:"_OnBaseFieldAdded",value:function _OnBaseFieldAdded(e,t){var n=this._slotRep.Get(t.id.name);n?n.base=t:this._Broadcast(c.SLOT_ADDED,this,t)}},{key:"_OnBaseFieldRemoved",value:function _OnBaseFieldRemoved(e,t){var n=this._slotRep.Get(t.id.name);n?n.base=null:this._Broadcast(c.SLOT_REMOVED,this,t)}},{key:"_OnBaseFieldRenamed",value:function _OnBaseFieldRenamed(e,t,n){var i=this._slotRep.Get(n),s=this._slotRep.Get(t.name);i?s?(i.base=null,s.base=p_base.Get(t)):i.id.name=t.name:s?s.base=p_base.Get(t):this._Broadcast(c.SLOT_RENAMED,this,t,n)}},{key:"InitEntry",value:function InitEntry(e){for(var t=e._fieldValues,n=this._cachedSlotList._array,i=0,s=n.length;i<s;i++){var a=n[i];a._model.InitValues(a,t)}}},{key:"defaultGroup",get:function get(){return this._defaultGroup},set:function set(e){this._defaultGroup=e}},{key:"_OnSlotGroupRegistered",value:function _OnSlotGroupRegistered(e,t){this._defaultGroup||(this.defaultGroup=t)}},{key:"_OnSlotGroupUnregistered",value:function _OnSlotGroupUnregistered(e,t){this._defaultGroup}},{key:"_OnSlotGroupRenamed",value:function _OnSlotGroupRenamed(e,t){}},{key:"GetSlotGroupByName",value:function GetSlotGroupByName(e){return this._groupRep.GetByName(e)}}]),DataModel}(__r__(164));_defineProperty(p,"__NFO__",(_defineProperty(n={},a.IDS.UID,"@nkmjs/ecosystem:data-model"),_defineProperty(n,a.IDS.ICON,"data-model"),n)),e.exports=p},{139:111,164:112,56:159,163:174,18:21,12:27,31:66,14:458}],116:[function(__r__,e,t){var n=__r__(12),i=__r__(21),s=__r__(31),a=__r__(28),l=__r__(38),c=function(e){_inherits(DataBlockExtendableDocument,e);var t=_createSuper(DataBlockExtendableDocument);function DataBlockExtendableDocument(){return _classCallCheck(this,DataBlockExtendableDocument),t.call(this)}return _createClass(DataBlockExtendableDocument,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DataBlockExtendableDocument.prototype),"_Init",this).call(this),this._ecosystem=null}},{key:"ecosystem",get:function get(){return this._ecosystem},set:function set(e){this._ecosystem=e}},{key:"_CheckOptions",value:function _CheckOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(e=e||{}).ecosystem=e.ecosystem||this._ecosystem,e}}]),DataBlockExtendableDocument}(l.DocumentEx);_defineProperty(c,"__NFO__",n.NFOS.Ext({resource:a.resources.JSONResource,serializationContext:s.serialization.CONTEXT.JSON},l.DocumentEx.__NFO__)),e.exports=c},{12:27,31:66,38:183,21:190,28:198}],117:[function(__r__,e,t){var n=__r__(12),i=__r__(21),s=__r__(31),a=__r__(28),l=__r__(38),c=function(e){_inherits(EcosystemBundleDocument,e);var t=_createSuper(EcosystemBundleDocument);function EcosystemBundleDocument(){return _classCallCheck(this,EcosystemBundleDocument),t.call(this)}return EcosystemBundleDocument}(l.Document);_defineProperty(c,"__NFO__",n.NFOS.Ext({resource:a.resources.JSONResource,serializationContext:s.serialization.CONTEXT.JSON},l.Document.__NFO__)),e.exports=c},{12:27,31:66,38:183,21:190,28:198}],118:[function(__r__,e,t){var n=__r__(12),i=__r__(21),s=__r__(31),a=__r__(28),l=__r__(38),c=function(e){_inherits(EcosystemDocument,e);var t=_createSuper(EcosystemDocument);function EcosystemDocument(){return _classCallCheck(this,EcosystemDocument),t.call(this)}return EcosystemDocument}(l.Document);_defineProperty(c,"__NFO__",n.NFOS.Ext({resource:a.resources.JSONResource,serializationContext:s.serialization.CONTEXT.JSON},l.Document.__NFO__)),e.exports=c},{12:27,31:66,38:183,21:190,28:198}],119:[function(__r__,e,t){e.exports={DataBlockExtendable:__r__(165),Ecosystem:__r__(166),EcosystemBundle:__r__(167)}},{165:116,166:118,167:117}],120:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a,l=function(e){_inherits(EcosystemBundle,e);var t=_createSuper(EcosystemBundle);function EcosystemBundle(){return _classCallCheck(this,EcosystemBundle),t.call(this)}return EcosystemBundle}(__r__(168));_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:ecosystem-bundle"),_defineProperty(n,i.IDS.ICON,"ecosystem"),n)),e.exports=l},{168:121,12:27,31:66}],121:[function(__r__,e,t){var n,i=__r__(18),s=__r__(14),a=__r__(12),l=__r__(31),c=__r__(27),u=__r__(169),h=__r__(170),d=__r__(163),p=__r__(56),m=function(e){_inherits(Ecosystem,e);var t=_createSuper(Ecosystem);function Ecosystem(){return _classCallCheck(this,Ecosystem),t.call(this)}return _createClass(Ecosystem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Ecosystem.prototype),"_Init",this).call(this),this._unresolvedReferences=new u.UnresolvedReferenceManager,this._unresolvedReferences.Watch(d.DATA_REFERENCES_SOLVED,this._OnDataReferencesSolved,this),this._models=new h.Models,this._entries=new h.Entries,this._entries.models=this._models}},{key:"fields",get:function get(){return this._fields}},{key:"models",get:function get(){return this._models}},{key:"entries",get:function get(){return this._entries}},{key:"catalog",get:function get(){return this._catalog}},{key:"HasUnresolvedReferences",value:function HasUnresolvedReferences(e){return this._unresolvedReferences.Contains(e)}},{key:"GetUnresolvedReferences",value:function GetUnresolvedReferences(e){return this._unresolvedReferences.Get(e)}},{key:"AddUnresolvedReference",value:function AddUnresolvedReference(e,t){this._unresolvedReferences.Add(e,t)}},{key:"_OnDataReferencesSolved",value:function _OnDataReferencesSolved(e){this._unresolvedReferences.Resolve(e)}},{key:"Resolve",value:function Resolve(e){var t=e.split("/"),n;if(t.length<=1)throw new Error("Malformed URI");var i=t.shift(),s=this._models._factory.GetByName(t.shift());if(i===p.MODEL){if(0!=t.length){var a=s.GetFieldByName(t.shift());if(0!=t.length)throw new Error("Not implemented");return a}return s}if(i===p.ENTRY){var l=this._entries._libraryMap.Get(s)._factory.GetByName(t.shift());if(0!=t.length){var c=s.GetFieldByName(t.shift());throw t.length,new Error("Not implemented")}return l}}},{key:"_CleanUp",value:function _CleanUp(){ENV.instance.UnregisterEcosystem(this),this._models.Clear(),this._entries.Clear(),_get(_getPrototypeOf(Ecosystem.prototype),"_CleanUp",this).call(this)}}]),Ecosystem}(l.DataBlock);_defineProperty(m,"__NFO__",(_defineProperty(n={},a.IDS.UID,"@nkmjs/ecosystem:ecosystem"),_defineProperty(n,a.IDS.ICON,"ecosystem"),n)),e.exports=m},{169:156,56:159,170:163,163:174,27:1,18:21,12:27,31:66,14:458}],122:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(56),l=__r__(164),c=function(e){_inherits(FieldDescriptor,e);var t=_createSuper(FieldDescriptor);function FieldDescriptor(){return _classCallCheck(this,FieldDescriptor),t.call(this)}return _createClass(FieldDescriptor,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldDescriptor.prototype),"_Init",this).call(this),this._parent=null,this._id=null,this._slot=null,this._localSettings=null}},{key:"id",get:function get(){return this._id},set:function set(e){this._id=e}},{key:"requireSanitization",get:function get(){return this.constructor.__requireSanitization}},{key:"slot",get:function get(){return this._slot},set:function set(e){if(this._slot!==e){var t=this._slot;this._slot=e}}},{key:"InitSettings",value:function InitSettings(e){var t;return this._id?(t=e[this._id._name])||(t={},e[this._id._name]=t):t=e,this._localSettings=t,t}},{key:"InitValues",value:function InitValues(e,t){var n=t[this._id._name];return n||(n={},t[this._id._name]=n),n}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(FieldDescriptor.prototype),"_CleanUp",this).call(this),this._parent=null,this._fieldIndex=0,this._localSettings=null,this.slot=null,this.id=null}}]),FieldDescriptor}(i.pool.DisposableObjectEx);_defineProperty(c,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-descriptor"),_defineProperty(n,i.IDS.ICON,"field-descriptor"),n)),_defineProperty(c,"__requireSanitization",!1),e.exports=c},{164:112,56:159,12:27,31:66}],123:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(56),c=__r__(163),u,h=function(e){_inherits(FieldSlot,e);var t=_createSuper(FieldSlot);function FieldSlot(){return _classCallCheck(this,FieldSlot),t.call(this)}return _createClass(FieldSlot,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldSlot.prototype),"_Init",this).call(this),this._model=null,this._group=null,this._fieldIndex=0,this._settings=null,this._descriptor=null,this._baseObserver.Hook(c.DESCRIPTOR_CHANGED,this._OnBaseDescriptorChanged,this)}},{key:"requireSanitization",get:function get(){return this.constructor.__requireSanitization}},{key:"model",get:function get(){return this._model},set:function set(e){if(this._model!==e){var t=this._model;this._model=e}}},{key:"uri",get:function get(){return this._model?"".concat(this._model.uri,"/").concat(this._id._name):"".concat(l.ROAMING,"/").concat(this._id._name)}},{key:"fieldIndex",get:function get(){return this._fieldIndex},set:function set(e){this._fieldIndex=e}},{key:"settings",get:function get(){return this._settings},set:function set(e){this._settings=e}},{key:"group",get:function get(){return this._group},set:function set(e){if(this._group!==e){var t=this._group;this._group=e}}},{key:"descriptor",get:function get(){return this._descriptor},set:function set(e){if(this._descriptor!==e){var t=this._descriptor;this._descriptor=e,t&&t._slot===this&&t.Release(),this._descriptor&&(this._descriptor.slot=this,this._settings&&this._descriptor.InitSettings(this._settings)),this._Broadcast(c.DESCRIPTOR_CHANGED,this,this._descriptor,t)}}},{key:"_OnBaseDescriptorChanged",value:function _OnBaseDescriptorChanged(e,t,n){}},{key:"InitSettings",value:function InitSettings(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._settings||(this._settings={}),e&&i.tils.SetOverwrite(this._settings,e),this._descriptor&&this._descriptor.InitSettings(this._settings)}},{key:"InitValues",value:function InitValues(e,t){var n=t[this._id._name];return n||(n={},t[this._id._name]=n),n}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(FieldSlot.prototype),"_CleanUp",this).call(this),this._fieldIndex=0,this._settings=null,this.model=null}}]),FieldSlot}(__r__(164));_defineProperty(h,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-slot"),_defineProperty(n,s.IDS.ICON,"field-slot"),n)),_defineProperty(h,"__requireSanitization",!1),e.exports=h},{164:112,56:159,163:174,12:27,31:66,14:458}],124:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(114),c,u=function(e){_inherits(FieldBoolean,e);var t=_createSuper(FieldBoolean);function FieldBoolean(){return _classCallCheck(this,FieldBoolean),t.call(this)}return _createClass(FieldBoolean,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldBoolean.prototype),"InitValues",this).call(this,e,t);return l.VALUE in n||(n[l.VALUE]=!1),n}}]),FieldBoolean}(__r__(171));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-boolean"),_defineProperty(n,s.IDS.ICON,"field-boolean"),n)),e.exports=u},{171:122,114:159,12:27,31:66,14:458}],125:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a,l=function(e){_inherits(FieldDescriptorComposite,e);var t=_createSuper(FieldDescriptorComposite);function FieldDescriptorComposite(){return _classCallCheck(this,FieldDescriptorComposite),t.call(this)}return _createClass(FieldDescriptorComposite,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldDescriptorComposite.prototype),"_Init",this).call(this),this._composition=[]}},{key:"composition",get:function get(){return this._composition}},{key:"_Add",value:function _Add(e,t){var n=new e;return n._parent=this,n.id=t,this._composition.push(n),n}},{key:"InitSettings",value:function InitSettings(e){for(var t=_get(_getPrototypeOf(FieldDescriptorComposite.prototype),"InitSettings",this).call(this,e),n=0,i=this._composition.length;n<i;n++){var s=this._composition[n];s.slot=this._slot,s.InitSettings(t)}return t}},{key:"InitValues",value:function InitValues(e,t){var n=t[this._id._name];n||(n={},t[this._id._name]=n);for(var i=0,s=this._composition.length;i<s;i++)this._composition[i].InitValues(e,t);return n}}]),FieldDescriptorComposite}(__r__(171));_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-composite"),_defineProperty(n,i.IDS.ICON,"field-composite"),n)),_defineProperty(l,"__requireSanitization",!1),e.exports=l},{171:122,12:27,31:66}],126:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(172),l=__r__(114),c=__r__(173),u=__r__(174),h=s.ID.New(l.TYPE),d=function(e){_inherits(FieldDescriptorTyped,e);var t=_createSuper(FieldDescriptorTyped);function FieldDescriptorTyped(){return _classCallCheck(this,FieldDescriptorTyped),t.call(this)}return _createClass(FieldDescriptorTyped,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldDescriptorTyped.prototype),"_Init",this).call(this),this._type=this._Add(this.constructor.__default_typeClass,h)}}]),FieldDescriptorTyped}(c);_defineProperty(d,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-typed"),_defineProperty(n,i.IDS.ICON,"field-typed"),n)),_defineProperty(d,"__default_typeClass",u),e.exports=d},{172:115,114:159,173:125,174:154,12:27,31:66}],127:[function(__r__,e,t){e.exports={FieldDescriptorComposite:__r__(173),FieldDescriptorTyped:__r__(175),Boolean:__r__(176),types:__r__(177),lists:__r__(178),numbers:__r__(179),strings:__r__(180),transforms:__r__(181)}},{176:124,173:125,175:126,178:131,179:145,180:148,181:152,177:155}],128:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(182),l=__r__(183),c=__r__(184),u=function(e){_inherits(FieldArray,e);var t=_createSuper(FieldArray);function FieldArray(){return _classCallCheck(this,FieldArray),t.call(this)}return _createClass(FieldArray,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldArray.prototype),"InitValues",this).call(this,e,t);return a.VALUE in n||(n[a.VALUE]=[]),n}}]),FieldArray}(l);_defineProperty(u,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-array"),_defineProperty(n,i.IDS.ICON,"field-array"),n)),e.exports=u},{182:159,184:153,183:129,12:27,31:66}],129:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a,l=function(e){_inherits(FieldList,e);var t=_createSuper(FieldList);function FieldList(){return _classCallCheck(this,FieldList),t.call(this)}return _createClass(FieldList,[{key:"InitSettings",value:function InitSettings(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=_get(_getPrototypeOf(FieldList.prototype),"InitSettings",this).call(this,e);return t.maxSize=t.maxSize||-1,t}}]),FieldList}(__r__(185));_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.ICON,"field-list"),_defineProperty(n,i.IDS.UID,"@nkmjs/ecosystem:field-list"),n)),e.exports=l},{185:126,12:27,31:66}],130:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(182),l=__r__(183),c=__r__(184),u=function(e){_inherits(FieldMap,e);var t=_createSuper(FieldMap);function FieldMap(){return _classCallCheck(this,FieldMap),t.call(this)}return _createClass(FieldMap,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldMap.prototype),"InitValues",this).call(this,e,t);return a.VALUE in n||(n[a.VALUE]=new Map),n}}]),FieldMap}(l);_defineProperty(u,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-map"),_defineProperty(n,i.IDS.ICON,"field-map"),n)),_defineProperty(u,"__default_typeClass",c),e.exports=u},{182:159,184:153,183:129,12:27,31:66}],131:[function(__r__,e,t){e.exports={List:__r__(183),Array:__r__(186),Map:__r__(187)}},{186:128,183:129,187:130}],132:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldByte,e);var t=_createSuper(FieldByte);function FieldByte(){return _classCallCheck(this,FieldByte),t.call(this)}return FieldByte}(__r__(188));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-byte"),_defineProperty(n,s.IDS.ICON,"field-byte"),n)),e.exports=u},{182:159,188:143,12:27,31:66,14:458}],133:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldColor,e);var t=_createSuper(FieldColor);function FieldColor(){return _classCallCheck(this,FieldColor),t.call(this)}return FieldColor}(__r__(189));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-color"),_defineProperty(n,s.IDS.ICON,"field-color"),n)),e.exports=u},{182:159,189:136,12:27,31:66,14:458}],134:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldFloat,e);var t=_createSuper(FieldFloat);function FieldFloat(){return _classCallCheck(this,FieldFloat),t.call(this)}return FieldFloat}(__r__(188));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-float"),_defineProperty(n,s.IDS.ICON,"field-float"),n)),e.exports=u},{182:159,188:143,12:27,31:66,14:458}],135:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldFloat2,e);var t=_createSuper(FieldFloat2);function FieldFloat2(){return _classCallCheck(this,FieldFloat2),t.call(this)}return _createClass(FieldFloat2,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldFloat2.prototype),"InitValues",this).call(this,e,t);return l.VALUE2 in n||(n[l.VALUE2]=0),n}}]),FieldFloat2}(__r__(190));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-float2"),_defineProperty(n,s.IDS.ICON,"field-float2"),n)),e.exports=u},{182:159,190:134,12:27,31:66,14:458}],136:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldFloat3,e);var t=_createSuper(FieldFloat3);function FieldFloat3(){return _classCallCheck(this,FieldFloat3),t.call(this)}return _createClass(FieldFloat3,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldFloat3.prototype),"InitValues",this).call(this,e,t);return l.VALUE3 in n||(n[l.VALUE3]=0),n}}]),FieldFloat3}(__r__(191));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-float3"),_defineProperty(n,s.IDS.ICON,"field-float3"),n)),e.exports=u},{182:159,191:135,12:27,31:66,14:458}],137:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldFloat4,e);var t=_createSuper(FieldFloat4);function FieldFloat4(){return _classCallCheck(this,FieldFloat4),t.call(this)}return _createClass(FieldFloat4,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldFloat4.prototype),"InitValues",this).call(this,e,t);return l.VALUE4 in n||(n[l.VALUE4]=0),n}}]),FieldFloat4}(__r__(189));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-float4"),_defineProperty(n,s.IDS.ICON,"field-float4"),n)),e.exports=u},{182:159,189:136,12:27,31:66,14:458}],138:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldInt,e);var t=_createSuper(FieldInt);function FieldInt(){return _classCallCheck(this,FieldInt),t.call(this)}return FieldInt}(__r__(188));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-int"),_defineProperty(n,s.IDS.ICON,"field-int"),n)),e.exports=u},{182:159,188:143,12:27,31:66,14:458}],139:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldInt2,e);var t=_createSuper(FieldInt2);function FieldInt2(){return _classCallCheck(this,FieldInt2),t.call(this)}return _createClass(FieldInt2,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldInt2.prototype),"InitValues",this).call(this,e,t);return l.VALUE2 in n||(n[l.VALUE2]=0),n}}]),FieldInt2}(__r__(192));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-int2"),_defineProperty(n,s.IDS.ICON,"field-int2"),n)),e.exports=u},{182:159,192:138,12:27,31:66,14:458}],140:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldInt3,e);var t=_createSuper(FieldInt3);function FieldInt3(){return _classCallCheck(this,FieldInt3),t.call(this)}return _createClass(FieldInt3,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldInt3.prototype),"InitValues",this).call(this,e,t);return l.VALUE3 in n||(n[l.VALUE3]=0),n}}]),FieldInt3}(__r__(193));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-int3"),_defineProperty(n,s.IDS.ICON,"field-int3"),n)),e.exports=u},{182:159,193:139,12:27,31:66,14:458}],141:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldInt4,e);var t=_createSuper(FieldInt4);function FieldInt4(){return _classCallCheck(this,FieldInt4),t.call(this)}return _createClass(FieldInt4,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldInt4.prototype),"InitValues",this).call(this,e,t);return l.VALUE4 in n||(n[l.VALUE4]=0),n}}]),FieldInt4}(__r__(194));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-int4"),_defineProperty(n,s.IDS.ICON,"field-int4"),n)),e.exports=u},{182:159,194:140,12:27,31:66,14:458}],142:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(182),l,c=function(e){_inherits(FieldNumberClamped,e);var t=_createSuper(FieldNumberClamped);function FieldNumberClamped(){return _classCallCheck(this,FieldNumberClamped),t.call(this)}return _createClass(FieldNumberClamped,[{key:"InitSettings",value:function InitSettings(e){var t=_get(_getPrototypeOf(FieldNumberClamped.prototype),"InitSettings",this).call(this,e);return t.clamp=t.clamp||!1,t.min=t.min||0,t.max=t.max||0,t}},{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldNumberClamped.prototype),"InitValues",this).call(this,e,t);return a.VALUE in n||(n[a.VALUE]=0),n}}]),FieldNumberClamped}(__r__(188));_defineProperty(c,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-number-clamped"),_defineProperty(n,i.IDS.ICON,"field-number-clamped"),n)),e.exports=c},{182:159,188:143,12:27,31:66}],143:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldNumber,e);var t=_createSuper(FieldNumber);function FieldNumber(){return _classCallCheck(this,FieldNumber),t.call(this)}return _createClass(FieldNumber,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldNumber.prototype),"InitValues",this).call(this,e,t);return l.VALUE in n||(n[l.VALUE]=0),n}}]),FieldNumber}(__r__(195));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-number"),_defineProperty(n,s.IDS.ICON,"field-number"),n)),e.exports=u},{195:122,182:159,12:27,31:66,14:458}],144:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldUInt,e);var t=_createSuper(FieldUInt);function FieldUInt(){return _classCallCheck(this,FieldUInt),t.call(this)}return FieldUInt}(__r__(188));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-uint"),_defineProperty(n,s.IDS.ICON,"field-uint"),n)),e.exports=u},{182:159,188:143,12:27,31:66,14:458}],145:[function(__r__,e,t){e.exports={Number:__r__(188),NumberClamped:__r__(196),Byte:__r__(197),Float:__r__(190),Float2:__r__(191),Float3:__r__(189),Float4:__r__(198),Int:__r__(192),Int2:__r__(193),Int3:__r__(194),Int4:__r__(199),UInt:__r__(200),Color:__r__(201)}},{197:132,201:133,190:134,191:135,189:136,198:137,192:138,193:139,194:140,199:141,188:143,196:142,200:144}],146:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldLocalizedString,e);var t=_createSuper(FieldLocalizedString);function FieldLocalizedString(){return _classCallCheck(this,FieldLocalizedString),t.call(this)}return FieldLocalizedString}(__r__(202));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-string-localized"),_defineProperty(n,s.IDS.ICON,"field-string-localized"),n)),e.exports=u},{182:159,202:147,12:27,31:66,14:458}],147:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c,u=function(e){_inherits(FieldString,e);var t=_createSuper(FieldString);function FieldString(){return _classCallCheck(this,FieldString),t.call(this)}return _createClass(FieldString,[{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldString.prototype),"InitValues",this).call(this,e,t);return l.VALUE in n||(n[l.VALUE]=""),n}}]),FieldString}(__r__(195));_defineProperty(u,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-string"),_defineProperty(n,s.IDS.ICON,"field-string"),n)),e.exports=u},{195:122,182:159,12:27,31:66,14:458}],148:[function(__r__,e,t){e.exports={String:__r__(202),LocalizedString:__r__(203)}},{203:146,202:147}],149:[function(__r__,e,t){var n,i=__r__(12),s=__r__(204),a,l=function(e){_inherits(FieldTransform2D,e);var t=_createSuper(FieldTransform2D);function FieldTransform2D(){return _classCallCheck(this,FieldTransform2D),t.call(this)}return FieldTransform2D}(__r__(205));_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-transform-2d"),_defineProperty(n,i.IDS.ICON,"field-transform-2d"),n)),_defineProperty(l,"__positionDescriptorClass",s.Float2),_defineProperty(l,"__rotationDescriptorClass",s.Float2),_defineProperty(l,"__scaleDescriptorClass",s.Float2),e.exports=l},{204:145,205:151,12:27}],150:[function(__r__,e,t){var n,i=__r__(12),s=__r__(204),a,l=function(e){_inherits(FieldTransform3D,e);var t=_createSuper(FieldTransform3D);function FieldTransform3D(){return _classCallCheck(this,FieldTransform3D),t.call(this)}return FieldTransform3D}(__r__(206));_defineProperty(l,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-transform-3d"),_defineProperty(n,i.IDS.ICON,"field-transform-3d"),n)),_defineProperty(l,"__positionDescriptorClass",s.Float3),_defineProperty(l,"__rotationDescriptorClass",s.Float3),_defineProperty(l,"__scaleDescriptorClass",s.Float3),e.exports=l},{204:145,206:149,12:27}],151:[function(__r__,e,t){var n,i=__r__(12),s=__r__(31),a=__r__(207),l=s.ID.New("position"),c=s.ID.New("rotation"),u=s.ID.New("scale"),h=function(e){_inherits(FieldTransform,e);var t=_createSuper(FieldTransform);function FieldTransform(){return _classCallCheck(this,FieldTransform),t.call(this)}return _createClass(FieldTransform,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldTransform.prototype),"_Init",this).call(this),this._position=this._Add(this.constructor.__positionDescriptorClass,l),this._rotation=this._Add(this.constructor.__rotationDescriptorClass,c),this._scale=this._Add(this.constructor.__scaleDescriptorClass,u)}},{key:"InitSettings",value:function InitSettings(e){var t=_get(_getPrototypeOf(FieldTransform.prototype),"InitSettings",this).call(this,e);return t.maxSize=t.maxSize||-1,t}}]),FieldTransform}(a);_defineProperty(h,"__NFO__",(_defineProperty(n={},i.IDS.UID,"@nkmjs/ecosystem:field-transform"),_defineProperty(n,i.IDS.ICON,"field-transform"),n)),_defineProperty(h,"__positionDescriptorClass",null),_defineProperty(h,"__rotationDescriptorClass",null),_defineProperty(h,"__scaleDescriptorClass",null),e.exports=h},{207:125,12:27,31:66}],152:[function(__r__,e,t){e.exports={Transform:__r__(205),Transform2D:__r__(206),Transform3D:__r__(208)}},{205:151,206:149,208:150}],153:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(182),c=__r__(185),u=__r__(209),h=a.ID.New(l.VALUE_TYPE),d=function(e){_inherits(FieldKVP,e);var t=_createSuper(FieldKVP);function FieldKVP(){return _classCallCheck(this,FieldKVP),t.call(this)}return _createClass(FieldKVP,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldKVP.prototype),"_Init",this).call(this),this._valueType=this._Add(u,h)}},{key:"InitValues",value:function InitValues(e,t){var n=_get(_getPrototypeOf(FieldKVP.prototype),"InitValues",this).call(this,e,t);return l.VALUE in n||(n[l.VALUE]=null),l.KEY in n||(n[l.KEY]=null),n}}]),FieldKVP}(c);_defineProperty(d,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-kvp"),_defineProperty(n,s.IDS.ICON,"field-kvp"),n)),e.exports=d},{182:159,185:126,209:154,12:27,31:66,14:458}],154:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l,c=function(e){_inherits(FieldType,e);var t=_createSuper(FieldType);function FieldType(){return _classCallCheck(this,FieldType),t.call(this)}return _createClass(FieldType,[{key:"InitSettings",value:function InitSettings(e){var t=_get(_getPrototypeOf(FieldType.prototype),"InitSettings",this).call(this,e);return t.family=FieldType.FAMILY_FIELD,t}},{key:"InitValues",value:function InitValues(e,t){var n;return _get(_getPrototypeOf(FieldType.prototype),"InitValues",this).call(this,e,t)}}]),FieldType}(__r__(195));_defineProperty(c,"__NFO__",(_defineProperty(n={},s.IDS.UID,"@nkmjs/ecosystem:field-type"),_defineProperty(n,s.IDS.ICON,"field-type"),n)),_defineProperty(c,"FAMILY_FIELD","field"),_defineProperty(c,"FAMILY_MODEL","model"),_defineProperty(c,"FAMILY_ENTRY","entry"),e.exports=c},{195:122,12:27,31:66,14:458}],155:[function(__r__,e,t){e.exports={Type:__r__(209),KVP:__r__(210)}},{210:153,209:154}],156:[function(__r__,e,t){e.exports={UnresolvedReference:__r__(211),UnresolvedReferenceManager:__r__(212)}},{211:157,212:158}],157:[function(__r__,e,t){var n=__r__(18),i=__r__(12),s=__r__(79),a=function(e){_inherits(UnresolvedReference,e);var t=_createSuper(UnresolvedReference);function UnresolvedReference(){return _classCallCheck(this,UnresolvedReference),t.call(this)}return _createClass(UnresolvedReference,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(UnresolvedReference.prototype),"_Init",this).call(this),this._uri=null,this._dataList=new n.DictionaryList}},{key:"uri",get:function get(){return this._uri},set:function set(e){this._uri=e}},{key:"Add",value:function Add(e,t){this._dataList.Set(e,t)}},{key:"Resolve",value:function Resolve(e){for(var t=this._dataList.keys,n=0,i=t.length;n<i;n++){var a=t[n],l=this._dataList.Get(a);this._ResolveInfos(a,l,e)}this._Broadcast(s.REFERENCE_SOLVED,this,t),this.Release()}},{key:"_ResolveInfos",value:function _ResolveInfos(e,t,n){t.set?e[t.set]=n:t.fn&&(t.thisArg?(t.fn.call(t.thisArg,n),t.fn=null,t.thisArg=null):(t.fn(n),t.fn=null))}},{key:"_CleanUp",value:function _CleanUp(){this._uri=null,this._dataList.Clear(),_get(_getPrototypeOf(UnresolvedReference.prototype),"_CleanUp",this).call(this)}}]),UnresolvedReference}(i.pool.DisposableObjectEx);e.exports=a},{79:174,18:21,12:27}],158:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=__r__(12),a=__r__(79),l=__r__(211),c=function(e){_inherits(UnresolvedReferenceManager,e);var t=_createSuper(UnresolvedReferenceManager);function UnresolvedReferenceManager(){return _classCallCheck(this,UnresolvedReferenceManager),t.call(this)}return _createClass(UnresolvedReferenceManager,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(UnresolvedReferenceManager.prototype),"_Init",this).call(this),this._unresolvedURI={},this._waitingOnResolve=new n.DictionaryList}},{key:"ContainsURI",value:function ContainsURI(e){return this._unresolvedURI.hasOwnProperty(e)}},{key:"Contains",value:function Contains(e){return this._waitingOnResolve.Contains(e)}},{key:"Get",value:function Get(e){return this._waitingOnResolve.Get(e)}},{key:"Resolve",value:function Resolve(e,t){var n=i.tils.Get(this._unresolvedURI,t,null);n&&n.Resolve(e)}},{key:"Add",value:function Add(e,t){var n=t.uri,i;n in this._unresolvedURI?((i=s.Rent(l)).WatchOnce(a.REFERENCE_SOLVED,this._OnReferenceSolved,this),this._unresolvedURI[n]=i):i=this._unresolvedURI[n],i.Add(e,t),this._waitingOnResolve.Set(e,i)}},{key:"_OnReferenceSolved",value:function _OnReferenceSolved(e,t){delete this._unresolvedURI[e.uri];for(var n=0,i=t.length;n<i;n++){var s=t[n];this._waitingOnResolve.Remove(s,e),this._waitingOnResolve.Contains(s)||this._Broadcast(a.DATA_REFERENCES_SOLVED,s)}}}]),UnresolvedReferenceManager}(s.pool.DisposableObjectEx);e.exports=c},{79:174,211:157,18:21,12:27,14:458}],159:[function(__r__,e,t){var n=function IDS(){_classCallCheck(this,IDS)};_defineProperty(n,"ROAMING","roaming"),_defineProperty(n,"MODEL","model"),_defineProperty(n,"ENTRY","entry"),_defineProperty(n,"FIELD","field"),_defineProperty(n,"DESCRIPTOR","descriptor"),_defineProperty(n,"SETTINGS","settings"),_defineProperty(n,"BASE","base"),_defineProperty(n,"GROUP","group"),_defineProperty(n,"KEY","key"),_defineProperty(n,"SLOTS","slots"),_defineProperty(n,"VALUE","value"),_defineProperty(n,"VALUE2","value2"),_defineProperty(n,"VALUE3","value3"),_defineProperty(n,"VALUE4","value4"),_defineProperty(n,"TYPE","type"),_defineProperty(n,"VALUE_TYPE","valueType"),e.exports=n},{}],160:[function(__r__,e,t){var n=__r__(12),i=__r__(31),s=function(e){_inherits(EcosystemPart,e);var t=_createSuper(EcosystemPart);function EcosystemPart(){return _classCallCheck(this,EcosystemPart),t.call(this)}return _createClass(EcosystemPart,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EcosystemPart.prototype),"_Init",this).call(this),this._ecosystem=null,this._catalog=new i.catalogs.Catalog}},{key:"ecosystem",get:function get(){return this._ecosystem},set:function set(e){this._ecosystem=e,this._OnEcosystemChanged(this._ecosystem)}},{key:"_OnEcosystemChanged",value:function _OnEcosystemChanged(e){}},{key:"Clear",value:function Clear(){this._catalog.Clear()}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(EcosystemPart.prototype),"_CleanUp",this).call(this),this.Clear()}}]),EcosystemPart}(n.pool.DisposableObjectEx);e.exports=s},{12:27,31:66}],161:[function(__r__,e,t){var n=__r__(12),i=__r__(31),s=__r__(213),a=__r__(214),l=function(e){_inherits(EntryLibrary,e);var t=_createSuper(EntryLibrary);function EntryLibrary(){return _classCallCheck(this,EntryLibrary),t.call(this)}return _createClass(EntryLibrary,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EntryLibrary.prototype),"_Init",this).call(this),this._ecosystem=null,this._factory=new s,this._factory.itemClass=a,this._model=null}},{key:"ecosystem",get:function get(){return this._ecosystem},set:function set(e){this._ecosystem=e,this._OnEcosystemChanged(this._ecosystem)}},{key:"_OnEcosystemChanged",value:function _OnEcosystemChanged(e){}},{key:"factory",get:function get(){return this._factory}},{key:"model",get:function get(){return this._model},set:function set(e){if(this._model!==e){var t=this._model;this._model=e}}},{key:"entryList",get:function get(){return this._factory._itemRep._itemList}},{key:"Create",value:function Create(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._factory.Create(e,t);return n.ecosystem=this._ecosystem,n.model=this._model,n}},{key:"Clear",value:function Clear(){this._factory.Clear()}}]),EntryLibrary}(n.pool.DisposableObjectEx);e.exports=l},{214:113,213:114,12:27,31:66}],162:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(172),c=__r__(215),u,h=function(e){_inherits(EntryManager,e);var t=_createSuper(EntryManager);function EntryManager(){return _classCallCheck(this,EntryManager),t.call(this)}return _createClass(EntryManager,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EntryManager.prototype),"_Init",this).call(this),this._models=null,this._libraryList=new n.List,this._libraryMap=new n.Dictionary}},{key:"models",get:function get(){return this._models},set:function set(e){if(this._models!==e){var t=this._models;this._models=e,t&&this._models._factory.Unwatch(a.SIGNAL.ITEM_REGISTERED,this._OnModelRegistered,this).Unwatch(a.SIGNAL.ITEM_UNREGISTERED,this._OnModelUnregistered,this),this._models&&this._models._factory.Watch(a.SIGNAL.ITEM_REGISTERED,this._OnModelRegistered,this).Watch(a.SIGNAL.ITEM_UNREGISTERED,this._OnModelUnregistered,this)}}},{key:"_OnModelRegistered",value:function _OnModelRegistered(e,t){var n=s.Rent(c);n.ecosystem=this._ecosystem,n.model=t,this._libraryList.Add(n),this._libraryMap.Set(t,n)}},{key:"_OnModelUnregistered",value:function _OnModelUnregistered(e,t){var n=this._libraryMap.Get(t);this._libraryList.Remove(n),this._libraryMap.Remove(t),n.Release()}},{key:"GetLibrary",value:function GetLibrary(e){return this._libraryMap.Get(e)}},{key:"Create",value:function Create(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;if(i.isInstanceOf(t,l)?s=this._libraryMap.Get(t):i.isString(t)?s=this._libraryMap.Get(this._models._factory.GetByName(t)):i.isInstanceOf(t,a.ID)&&(s=this._libraryMap.Get(this._models._factory.Get(t))),!s)throw new Error("Could not find a valid library to create entry");var c=s.Create(e,n);return c}},{key:"Clear",value:function Clear(){_get(_getPrototypeOf(EntryManager.prototype),"Clear",this).call(this);for(var e=0,t=this._libraryList.count;e<t;e++){var n;this._libraryList.At(e).Release()}this._libraryList.Clear(),this._libraryMap.Clear()}}]),EntryManager}(__r__(216));e.exports=h},{172:115,216:160,215:161,18:21,12:27,31:66,14:458}],163:[function(__r__,e,t){e.exports={EcosystemPart:__r__(216),Models:__r__(217),EntryLibrary:__r__(215),Entries:__r__(218)}},{216:160,215:161,218:162,217:164}],164:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(219),l=__r__(213),c=__r__(172),u,h=function(e){_inherits(ModelManager,e);var t=_createSuper(ModelManager);function ModelManager(){return _classCallCheck(this,ModelManager),t.call(this)}return _createClass(ModelManager,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ModelManager.prototype),"_Init",this).call(this),this._factory=new l,this.defaultModelClass=c}},{key:"defaultModelClass",get:function get(){return this._defaultModelClass},set:function set(e){this._defaultModelClass=e,this._factory.itemClass=e}},{key:"factory",get:function get(){return this._factory}},{key:"modelList",get:function get(){return this._factory._itemRep._itemList}},{key:"Create",value:function Create(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this._factory.IsNameAvailable(e))throw new Error("Model ID '".concat(e,"' is already in use."));var l=t||this._defaultModelClass,c=this._factory.CreateTemp(l);if(c.ecosystem=this._ecosystem,s)for(var u in s){var h=s[u];n.isFunc(h)?a.CreateSlot(c,u,h):n.isString(h)?a.CreateSlot(c,u,i.BINDINGS.GetClass(h)):n.isObject(h)&&a.CreateSlot(c,u,h.cl,h.settings)}return this._factory.Register(c,e)}},{key:"Clear",value:function Clear(){_get(_getPrototypeOf(ModelManager.prototype),"Clear",this).call(this),this._factory.Clear()}}]),ModelManager}(__r__(216));e.exports=h},{213:114,172:115,219:175,216:160,12:27,31:66,14:458}],165:[function(__r__,e,t){e.exports={json:__r__(140)}},{140:166}],166:[function(__r__,e,t){e.exports={Ecosystem:__r__(220),EcosystemBundle:__r__(221),DataBlockExtendable:__r__(222),DataEntry:__r__(223),DataModel:__r__(224),FieldSlot:__r__(225),FieldDescriptor:__r__(226)}},{222:167,223:168,224:169,220:171,221:170,226:172,225:173}],167:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(182),l,c=function(e){_inherits(DataBlockExtendableJSONSerializer,e);var t=_createSuper(DataBlockExtendableJSONSerializer);function DataBlockExtendableJSONSerializer(){return _classCallCheck(this,DataBlockExtendableJSONSerializer),t.call(this)}return _createClass(DataBlockExtendableJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.base&&(e[a.BASE]=t.base.uri)}},{key:"Deserialize",value:function Deserialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=n.tils.Get(i,"ecosystem",null);if(!a)throw new Error("Cannot resolve reference without an ecosystem set");var l=this.TryGetExisting(a,e,s);if(l&&n.tils.Get(i,"useRegisteredData"))return t&&l!=t&&t.Release(),t=l,t=_get(_getPrototypeOf(DataBlockExtendableJSONSerializer),"Deserialize",this).call(this,e,t,i,s);t=_get(_getPrototypeOf(DataBlockExtendableJSONSerializer),"Deserialize",this).call(this,e,t,i);var c=this.RegisterToEcosystem(a,t,e,s);return t}},{key:"TryGetExisting",value:function TryGetExisting(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null}},{key:"RegisterToEcosystem",value:function RegisterToEcosystem(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return!1}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(a.BASE in e){var l=e[a.BASE],c=n.tils.Get(i,"ecosystem",null);if(!c)throw new Error("Cannot resolve reference without an ecosystem set");var u=c.Resolve(l);u?t.base=u:c.RegisterUnresolvedReference(t,{uri:l,set:a.BASE})}}}]),DataBlockExtendableJSONSerializer}(s.serialization.json.DataBlock);e.exports=c},{182:159,12:27,31:66,14:458}],168:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(182),a,l=function(e){_inherits(DataEntryJSONSerializer,e);var t=_createSuper(DataEntryJSONSerializer);function DataEntryJSONSerializer(){return _classCallCheck(this,DataEntryJSONSerializer),t.call(this)}return _createClass(DataEntryJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_get(_getPrototypeOf(DataEntryJSONSerializer),"SerializeContent",this).call(this,e,t,n),t.model&&(e[s.MODEL]=t.model.uri)}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_get(_getPrototypeOf(DataEntryJSONSerializer),"DeserializeContent",this).call(this,e,t,n,i)}},{key:"TryGetExisting",value:function TryGetExisting(e,t,n){var a=t[s.MODEL],l=n&&n[i.IDS.UID]||t[i.IDS.UID];if(!a||!l)return null;var c=e.Resolve(a);if(!c)return null;var u=e.entries.GetLibrary(c);return u?u._factory.GetByName(l):null}},{key:"RegisterToEcosystem",value:function RegisterToEcosystem(e,t,n,a){var l=n[s.MODEL],c=a&&a[i.IDS.UID]||n[i.IDS.UID];if(!l||!c)return!1;var u=e.Resolve(l);if(!u)return!1;var h=e.entries.GetLibrary(u);return!!h&&(h._factory.RegisterTemp(t),h._factory.Register(t,c))}}]),DataEntryJSONSerializer}(__r__(222));e.exports=l},{182:159,222:167,12:27,14:458}],169:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(227),l=__r__(182),c=__r__(222),u=__r__(225),h=__r__(226),d,p=__r__(228).CONTEXT,m="groups",y="slots",g=function(e){_inherits(DataModelJSONSerializer,e);var t=_createSuper(DataModelJSONSerializer);function DataModelJSONSerializer(){return _classCallCheck(this,DataModelJSONSerializer),t.call(this)}return _createClass(DataModelJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_get(_getPrototypeOf(DataModelJSONSerializer),"SerializeContent",this).call(this,e,t,n);for(var i=t._groupRep._itemList,s=[],a=t._slotRep._itemList,l=[],c=0,u=i.count;c<u;c++)s.push(this.__master.Serialize(i.At(c),n));for(var h=0,d=a.count;h<d;h++){var p=a.At(h);l.push(this.__master.Serialize(p,n))}e.slots=l,e.groups=s}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_get(_getPrototypeOf(DataModelJSONSerializer),"DeserializeContent",this).call(this,e,t,n);var a=e.slots,c=e.groups;if(c&&c.length)for(var u=0,h=c.length;u<h;u++){var d=c[u],m=slotSerial[p.JSON.META_KEY]?slotSerial[p.JSON.META_KEY][i.IDS.UID]:null,y=serializer.Deserialize(d,y,n);t._groupRep.Register(y,m)}if(a&&a.length)for(var g=0,v=a.length;g<v;g++){var k=a[g],O=k[p.JSON.DATA_KEY]?k[p.JSON.DATA_KEY][l.GROUP]:null,S=k[p.JSON.META_KEY]?k[p.JSON.META_KEY][i.IDS.UID]:null,E=S?t.GetSlotByName(S):null,C=this.__master.Deserialize(k,E,n);O&&(C.group=t.GetSlotGroupByName(O)),E||t.RegisterSlot(C,S)}}},{key:"TryGetExisting",value:function TryGetExisting(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=n&&n[i.IDS.UID]||t[i.IDS.UID];return s?e.models._factory.GetByName(s):null}},{key:"RegisterToEcosystem",value:function RegisterToEcosystem(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.models._factory,l=s&&s[i.IDS.UID]||n[i.IDS.UID];return!!l&&(a.RegisterTemp(t),a.Register(t,l))}}]),DataModelJSONSerializer}(c);e.exports=g},{182:159,227:175,222:167,226:172,225:173,12:27,31:66,228:96,14:458}],170:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(182),l=s.serialization.json.DataBlock,c="models",u="entries",h=function(e){_inherits(EcosystemBundleJSONSerializer,e);var t=_createSuper(EcosystemBundleJSONSerializer);function EcosystemBundleJSONSerializer(){return _classCallCheck(this,EcosystemBundleJSONSerializer),t.call(this)}return _createClass(EcosystemBundleJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[],s=t.models.modelList,a={},l=0,c=s.count;l<c;l++){var u=s.At(l),h=t.entries.GetLibrary(u),d=h.entryList,p=d.count;if(i.push(this.__master.Serialize(u,n)),!(p<=0)){var m=[];a[u._id.name]=m;for(var y=0,g=p;y<g;y++){var v=d.At(y);m.push(this.__master.Serialize(v,n))}}}e.models=i,e.entries=a}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n&&n.ecosystem||(n?n.ecosystem=t:n={ecosystem:t});var s=e.models,a=e.entries;if(s)for(var l=0,c=s.length;l<c;l++)this.__master.Deserialize(s[l],null,n);if(a)for(var u=0,h=a.length;u<h;u++)this.__master.Deserialize(a[u],null,n)}}]),EcosystemBundleJSONSerializer}(l);e.exports=h},{182:159,12:27,31:66,14:458}],171:[function(__r__,e,t){var n=__r__(14),i=__r__(31),s=__r__(182),a,l=function(e){_inherits(EcosystemJSONSerializer,e);var t=_createSuper(EcosystemJSONSerializer);function EcosystemJSONSerializer(){return _classCallCheck(this,EcosystemJSONSerializer),t.call(this)}return _createClass(EcosystemJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}}]),EcosystemJSONSerializer}(i.serialization.json.DataBlock);e.exports=l},{182:159,31:66,14:458}],172:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s,a=function(e){_inherits(FieldDescriptorJSONSerializer,e);var t=_createSuper(FieldDescriptorJSONSerializer);function FieldDescriptorJSONSerializer(){return _classCallCheck(this,FieldDescriptorJSONSerializer),t.call(this)}return _createClass(FieldDescriptorJSONSerializer,null,[{key:"Serialize",value:function Serialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.slot._settings}},{key:"Deserialize",value:function Deserialize(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t._settings=e}}]),FieldDescriptorJSONSerializer}(__r__(31).serialization.json.Base);e.exports=a},{12:27,31:66,14:458}],173:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(182),l=__r__(222),c=__r__(226),u=function(e){_inherits(FieldSlotJSONSerializer,e);var t=_createSuper(FieldSlotJSONSerializer);function FieldSlotJSONSerializer(){return _classCallCheck(this,FieldSlotJSONSerializer),t.call(this)}return _createClass(FieldSlotJSONSerializer,null,[{key:"SerializeContent",value:function SerializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=t.descriptor,l=t.group;if(s){e[a.DESCRIPTOR]=i.BINDINGS.GetClassKey(s);var u=this.GetSerializer(s,c);e[a.SETTINGS]=u.Serialize(s,n)}l&&(e[a.GROUP]=l._id._name)}},{key:"DeserializeContent",value:function DeserializeContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=e[a.DESCRIPTOR];if(l){var u=i.BINDINGS.GetClass(l),h=i.Rent(u),d=this.GetSerializer(h,c);t.settings=d.Deserialize(e[a.SETTINGS],t,n,s),t.descriptor=h}}}]),FieldSlotJSONSerializer}(l);e.exports=u},{182:159,222:167,226:172,12:27,31:66,14:458}],174:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"BASE_CHANGED",Symbol("baseChanged")),_defineProperty(n,"SLOT_ADDED",Symbol("slotAdded")),_defineProperty(n,"SLOT_REMOVED",Symbol("slotRemoved")),_defineProperty(n,"SLOT_UPDATED",Symbol("slotUpdated")),_defineProperty(n,"SLOT_RENAMED",Symbol("slotRenamed")),_defineProperty(n,"DESCRIPTOR_CHANGED",Symbol("slotDescriptorChanged")),_defineProperty(n,"REFERENCE_SOLVED",Symbol("referenceSolved")),_defineProperty(n,"DATA_REFERENCES_SOLVED",Symbol("dataReferenceSolved")),e.exports=n},{}],175:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(229),a=function(){function UTILS(){_classCallCheck(this,UTILS)}return _createClass(UTILS,null,[{key:"CreateModel",value:function CreateModel(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=i.Rent(t?n.isFunc(t)?t:t.constructor:this.__default_modelClass);for(var a in e){var l=e[a];n.isFunc(l)?this.CreateSlot(s,a,l):n.isString(l)?this.CreateSlot(s,a,i.BINDINGS.GetClass(l)):n.isObject(l)&&this.CreateSlot(s,a,l.cl,l.settings)}return s}},{key:"CreateSlot",value:function CreateSlot(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=i.Rent(s);return l&&(c._settings?n.tils.SetOverwrite(c._settings,l):c._settings=l),a&&(c.descriptor=i.Rent(a)),e.RegisterSlot(c,t),c}},{key:"IsFieldNameAvailable",value:function IsFieldNameAvailable(e,t){for(;null!=e;){if(!e._fieldRep.IsNameAvailable(t))return!1;e=e._base}return!0}},{key:"IsCircularReference",value:function IsCircularReference(e,t){if(e===t)return!0;for(var n=e.base;n;){if(n===t)return!0;n=n.base}return!1}}]),UTILS}();_defineProperty(a,"__default_modelClass",null),e.exports=a},{229:123,12:27,14:458}],176:[function(__r__,e,t){var n=__r__(12),i=__r__(30),s=__r__(1),a=__r__(230),l=__r__(231),c=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),this.Add({context:i.overlays.CONTEXT.OVERLAY,kvps:[{key:s.DIALOG,binding:l}]},{context:i.overlays.CONTEXT.CONTENT,kvps:[{key:s.DIALOG,binding:a}]})}}]),Bindings}(n.helpers.BindingKit);e.exports=c},{230:178,231:179,1:181,12:27,30:285}],177:[function(__r__,e,t){var n=__r__(232);e.exports={DIALOG:n,REQUEST:__r__(1),DialogBox:__r__(230),DialogOverlay:__r__(231),Push:n.Push.bind(n)},__r__(12).BINDINGS.Expand(__r__(110))},{110:176,232:180,230:178,231:179,1:181,12:27}],178:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(29),l=__r__(30),c=function(e){_inherits(DialogBox,e);var t=_createSuper(DialogBox);function DialogBox(){return _classCallCheck(this,DialogBox),t.call(this)}return _createClass(DialogBox,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DialogBox.prototype),"_Init",this).call(this),this._formHandler=new l.inputs.InputFormHandler,this._formHandler.Watch(l.inputs.SIGNAL.FORM_INVALID,this._OnFormInvalid,this).Watch(l.inputs.SIGNAL.FORM_READY,this._OnFormReady,this),this._contentWrapper=null,this._hasInput=!1,this._handles=[],this._contents=[],this._submitMap=new i.Dictionary,this._submitList=new i.List,this._toolbarClass=l.WidgetBar,this._toolbar=null,this._optionsHandler=new s.helpers.OptionsHandler(this._Bind(this._OnOptionsUpdated),this._Bind(this._OnOptionsWillUpdate)),this._optionsHandler.Hook(l.IDS.FLAVOR),this._optionsHandler.Hook(l.IDS.TITLE,null,"!!! MISSING TITLE !!!"),this._optionsHandler.Hook(l.IDS.MESSAGE),this._optionsHandler.Hook("actions",this._Bind(this.SetActions),null),this._optionsHandler.Hook("content",this._Bind(this.SetContent)),this._Bind(this._Close),this._Bind(this._Submit),this._flavorEnum=new l.helpers.FlagEnum(l.FLAGS.flavorsExtended,!0),this._flavorEnum.Add(this),this._variantEnum=new l.helpers.FlagEnum(l.FLAGS.variants,!0),this._variantEnum.Add(this)}},{key:"_PostInit",value:function _PostInit(){if(_get(_getPrototypeOf(DialogBox.prototype),"_PostInit",this).call(this),!this._toolbar)throw new Error("DialogBox (".concat(this,") doesn't have a toolbar !"))}},{key:"_Style",value:function _Style(){return a.Extends({":host":{overflow:"hidden"}},_get(_getPrototypeOf(DialogBox.prototype),"_Style",this).call(this))}},{key:"_OnOptionsWillUpdate",value:function _OnOptionsWillUpdate(e,t,n){}},{key:"_OnOptionsUpdated",value:function _OnOptionsUpdated(e,t,n){this._hasInput=this._formHandler._inputList.count>0,this._hasInput&&this._formHandler.ValidateForm()}},{key:"message",set:function set(e){this._messageElement||(this._messageElement=n.dom.El("span",{class:"item message"},this._contentWrapper)),this._messageElement.innerHTML=e,this._contents.push(this._messageElement)}},{key:"title",set:function set(e){throw new Error("dialog.title not implemented.")}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(e){this._flavorEnum.Set(e)}},{key:"variant",get:function get(){return this._variantEnum.currentFlag},set:function set(e){this._variantEnum.Set(e)}},{key:"SetActions",value:function SetActions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)for(var t=0,i=e.length;t<i;t++){var s=e[t];this.CreateHandle(s,n.tils.Get(s,"cl",null))}else this.CreateHandle({text:"Close"})}},{key:"SetContent",value:function SetContent(e){if(!Array.isArray(e))throw new Error("Cannot build dialog content list out of ".concat(e));for(var t=0,i=e.length;t<i;t++){var s=e[t],a=s.cl,c=s.data;if(!a)throw new Error("Cannot create item with unspecified class.");var u=this.Add(a,"item",this._contentWrapper);if(n.isInstanceOf(a,l.inputs.InputBase)){u.inputId=s.inputId,s.value&&(u.currentValue=s.value);var h=s.validations;if(h)for(var d=0,p=h.length;d<p;d++)u.AddValidation(h[d]);this._formHandler.Register(u)}c&&(u.data=c),this._contents.push(u)}}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){this._Clear(),this._optionsHandler.Process(this,e.options)}},{key:"_ClearHandles",value:function _ClearHandles(){for(var e=this._handles;0!=e.length;)e.pop().Release()}},{key:"CreateHandle",value:function CreateHandle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._toolbar.CreateHandle(e,t);return this._handles.push(i),n.tils.Get(e,"submit",!1)&&(this._submitMap.Set(i,e.submit),this._submitList.Add(i),i.Watch(l.SIGNAL.TRIGGERED,this._Submit)),n.tils.Get(e,"close",!0)&&i.Watch(l.SIGNAL.TRIGGERED,this._Close),i}},{key:"_OnFormInvalid",value:function _OnFormInvalid(e){this._submitList.ForEach((function(e){e.activable=!1}))}},{key:"_OnFormReady",value:function _OnFormReady(e){this._submitList.ForEach((function(e){e.activable=!0}))}},{key:"_Close",value:function _Close(){this._data.Consume()}},{key:"_Submit",value:function _Submit(e){var t=this._submitMap.Get(e);t.fn.call(t.thisArg,this._formHandler.inputValues)}},{key:"_Clear",value:function _Clear(){this._submitMap.Clear(),this._submitList.Clear(),this._formHandler.Clear(),this._ClearHandles();for(var e=0,t=this._contents.length;e<t;e++){var i=this._contents[e];"Release"in i?this._contents[e].Release():n.dom.Detach(i)}this._messageElement=null,this._hasInput=!1,this._contents.length=0,this.flavor=this.constructor.__default_flavor,this.variant=this.constructor.__default_variant}},{key:"_CleanUp",value:function _CleanUp(){this._Clear(),_get(_getPrototypeOf(DialogBox.prototype),"_CleanUp",this).call(this)}}]),DialogBox}(l.Widget);_defineProperty(c,"__NFO__",s.NFOS.Ext({},l.Widget,["css"])),_defineProperty(c,"__default_flavor",null),_defineProperty(c,"__default_variant",null),e.exports=c},{18:21,12:27,29:272,30:285,14:458}],179:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(233),l=function(e){_inherits(DialogOverlay,e);var t=_createSuper(DialogOverlay);function DialogOverlay(){return _classCallCheck(this,DialogOverlay),t.call(this)}return _createClass(DialogOverlay,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DialogOverlay.prototype),"_Init",this).call(this)}},{key:"_Style",value:function _Style(){return i.Extends({":host":{display:"flex","flex-flow":"row","align-content":"center","align-items":"center","justify-content":"center"},".content":{flex:"1 1 auto","max-width":"500px"}},_get(_getPrototypeOf(DialogOverlay.prototype),"_Style",this).call(this))}}]),DialogOverlay}(s.overlays.Overlay);_defineProperty(l,"__NFO__",n.NFOS.Ext({css:["@/dialogs/dialog-overlay.css"]},s.overlays.Overlay,["css"])),_defineProperty(l,"__default_overlayContentClass",a),e.exports=l,s.Register("nkmjs-dialog-overlay",l)},{233:178,12:27,29:272,30:285}],180:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(20),l=__r__(27),c=__r__(30),u=__r__(234),h=function(e){_inherits(DIALOG,e);var t=_createSuper(DIALOG);function DIALOG(){return _classCallCheck(this,DIALOG),t.call(this)}return _createClass(DIALOG,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DIALOG.prototype),"_Init",this).call(this),this._dialogs=new i.List,this._Bind(this._ProcessNext),this._inDialog=!1}},{key:"_Start",value:function _Start(){return!!_get(_getPrototypeOf(DIALOG.prototype),"Start",this).call(this)&&(this._ProcessNext(),!0)}},{key:"_Push",value:function _Push(e){var t=null;if((t=n.isInstanceOf(e,c.overlays.OverlayOptions)?e:c.overlays.OverlayOptions.Create(e)).origin,!this._dialogs.Add(t))throw Error("OverlayOptions already exists in stack. Are you trying to push the same dialogInfo multiple times ?");return this._started&&this._ProcessNext(),t}},{key:"_ProcessNext",value:function _ProcessNext(){if(this._inDialog)return null;var e=this._dialogs.Shift();if(!e)return this._inDialog=!1,null;this._inDialog=!0,e.Watch(s.SIGNAL.CONSUMED,this._OnDialogConsumed,this),l.Request.Emit(u.DIALOG,e,this,this._OnRequestSuccess,this._OnRequestFail)}},{key:"_OnRequestFail",value:function _OnRequestFail(e){var t=e.options;throw new Error("Unhandled dialog : ".concat(t))}},{key:"_OnRequestSuccess",value:function _OnRequestSuccess(e){}},{key:"_OnDialogConsumed",value:function _OnDialogConsumed(e){this._dialogs.Remove(e),this._inDialog=!1,this._ProcessNext()}}],[{key:"Push",value:function Push(e){this.instance._Push(e)}}]),DIALOG}(a.ServiceBase);e.exports=h},{234:181,27:1,18:21,12:27,20:267,30:285,14:458}],181:[function(__r__,e,t){var n=__r__(30);e.exports={DIALOG:function(e){_inherits(DIALOG,e);var t=_createSuper(DIALOG);function DIALOG(){var e;return _classCallCheck(this,DIALOG),_possibleConstructorReturn(e)}return DIALOG}(n.REQUEST.OVERLAY)}},{30:285}],182:[function(__r__,e,t){var n=__r__(12),i=__r__(31),s=__r__(150),a,l=__r__(152).MetaDocument,c=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),this.Add({context:s.DOCUMENT,kvps:[{key:i.Metadata,binding:l}]})}}]),Bindings}(n.helpers.BindingKit);e.exports=c},{150:184,152:189,12:27,31:66}],183:[function(__r__,e,t){e.exports={DOCUMENTS:__r__(235),CONTEXT:__r__(150),Document:__r__(236),DocumentEx:__r__(237),MetaDocument:__r__(238)},__r__(12).BINDINGS.Expand(__r__(110))},{110:182,150:184,236:185,235:186,237:187,238:188,12:27}],184:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(DOCUMENT,e);var t=_createSuper(DOCUMENT);function DOCUMENT(){return _classCallCheck(this,DOCUMENT),t.call(this)}return DOCUMENT}(n.helpers.CSYMBOL),s=function(e){_inherits(DOCUMENT_DEFAULT_DATA,e);var t=_createSuper(DOCUMENT_DEFAULT_DATA);function DOCUMENT_DEFAULT_DATA(){return _classCallCheck(this,DOCUMENT_DEFAULT_DATA),t.call(this)}return DOCUMENT_DEFAULT_DATA}(n.helpers.CSYMBOL);e.exports={DOCUMENT:i,DOCUMENT_DEFAULT_DATA:s}},{12:27}],185:[function(__r__,e,t){var n,i=__r__(14),s=__r__(12),a=__r__(31),l=__r__(28),c=function(e){_inherits(Document,e);var t=_createSuper(Document);function Document(){return _classCallCheck(this,Document),t.call(this)}return _createClass(Document,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Document.prototype),"_Init",this).call(this),this._currentPath=null,this._currentRsc=null,this._options=null,this._isDirty=!1,this._callbacks=new s.helpers.Callbacks,this._resourceObserver=new s.signals.Observer,this._resourceObserver.Hook(s.SIGNAL.RELEASED,this._OnRscReleased,this),this._resourceObserver.Hook(l.IO_SIGNAL.READ_COMPLETE,this._OnReadComplete,this),this._resourceObserver.Hook(l.IO_SIGNAL.WRITE_START,this._OnWriteStart,this),this._dataObserver=new s.signals.Observer,this._dataObserver.Hook(s.SIGNAL.RELEASED,this._OnDataReleased,this),this._dataObserver.Hook(a.SIGNAL.DIRTY,this._OnDataDirty,this),this._dataObserver.Hook(a.SIGNAL.DIRTY_CLEARED,this._OnDataCleaned,this),this._Bind(this._OnLoadError),this._Bind(this._OnSaveError),this._Bind(this._OnSaveSuccess)}},{key:"currentPath",get:function get(){},set:function set(e){e=i.PATH.SHORT(e),this._currentPath!==e&&(this._currentPath=e,!i.isEmpty(e)&&this._currentRsc&&this._currentRsc.path!=e&&(this._currentRsc=null))}},{key:"currentRsc",get:function get(){return this._currentRsc},set:function set(e){if(this._currentRsc!==e){var t=this._currentRsc;this._currentRsc=e,t&&this._resourceObserver.Unobserve(t),e&&(this._resourceObserver.Observe(e),this.currentPath=e.path)}}},{key:"currentData",get:function get(){return this._currentData},set:function set(e){if(this._currentData!==e){var t=this._currentData;this._currentData=e,t&&this._dataObserver.Unobserve(t),e&&(this._dataObserver.Observe(e),e.isDirty?this.Dirty():this.ClearDirty())}else e&&(e.isDirty?this.Dirty():this.ClearDirty())}},{key:"isDirty",get:function get(){return this._isDirty}},{key:"Dirty",value:function Dirty(){this._isDirty||(this._isDirty=!0,this._Broadcast(a.SIGNAL.DIRTY,this))}},{key:"ClearDirty",value:function ClearDirty(){this._isDirty&&(this._isDirty=!1,this._Broadcast(a.SIGNAL.DIRTY_CLEARED,this))}},{key:"_GetRsc",value:function _GetRsc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&(this.currentPath=e),!this._currentRsc){if(i.isEmpty(this._currentPath))throw new Error("Empty path.");this.currentRsc=l.RESOURCES.Get(this._currentPath,t)}return this._currentRsc}},{key:"_OnRscReleased",value:function _OnRscReleased(e){this.currentRsc=null}},{key:"_OnDataReleased",value:function _OnDataReleased(e){this.data=null}},{key:"_OnDataDirty",value:function _OnDataDirty(e){this.Dirty()}},{key:"_OnDataCleaned",value:function _OnDataCleaned(e){this.ClearDirty()}},{key:"Load",value:function Load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=s.NFOS.Get(this),n=this._GetRsc(i.tils.Get(e,"path",null),{cl:t.resource,encoding:t.encoding});if(!n)throw new Error("No resource set.");return!!n.Read({io:i.tils.Get(e,"io",t.defaultIOType),error:this._OnLoadError})&&(this._options=e,this._callbacks.Add(e),!0)}},{key:"_OnLoadError",value:function _OnLoadError(e){e.document=this,this._callbacks.OnError(e).Clear()}},{key:"_OnReadComplete",value:function _OnReadComplete(e){this.currentData=this._Unpack(e.content,this._currentData),this._callbacks.OnSuccess(this).Clear()}},{key:"_Unpack",value:function _Unpack(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.BINDINGS.Get(a.serialization.CONTEXT.SERIALIZER,s.NFOS.Get(this).serializationContext),i=n.Deserialize(e,t,this._options);return this.Dirty(),i}},{key:"Save",value:function Save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._currentData)throw new Error("No data.");var t=s.NFOS.Get(this),n=this._GetRsc(i.tils.Get(e,"path",null),{cl:t.resource,encoding:t.encoding});if(!n)throw new Error("No resource set.");return!!n.Write({io:i.tils.Get(e,"io",t.defaultIOType),error:this._OnSaveError,success:this._OnSaveSuccess})&&(this._options=e,this._callbacks.Add(e),!0)}},{key:"_OnWriteStart",value:function _OnWriteStart(e){e.content=this._Pack(this._currentData)}},{key:"_OnSaveSuccess",value:function _OnSaveSuccess(){this._currentData&&this._currentData.ClearDirty(),this.ClearDirty(),this._callbacks.OnSuccess(this).Clear()}},{key:"_OnSaveError",value:function _OnSaveError(e){e.document=this,this._callbacks.OnError(e).Clear()}},{key:"_Pack",value:function _Pack(e){var t;return s.BINDINGS.Get(a.serialization.CONTEXT.SERIALIZER,s.NFOS.Get(this).serializationContext).Serialize(e,this._options)}},{key:"Delete",value:function Delete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}},{key:"_CleanUp",value:function _CleanUp(){this.currentRsc=null,this._currentPath=null,this._options=null,_get(_getPrototypeOf(Document.prototype),"_CleanUp",this).call(this)}}]),Document}(s.pool.DisposableObjectEx);_defineProperty(c,"__NFO__",(_defineProperty(n={},s.IDS.ICON,"document"),_defineProperty(n,"resource",l.Resource),_defineProperty(n,"encoding",l.ENCODING.UTF8),_defineProperty(n,"serializationContext",a.serialization.CONTEXT.NONE),_defineProperty(n,"defaultIOType",l.IO_TYPE.DEFAULT),n)),e.exports=c},{12:27,31:66,28:198,14:458}],186:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(139),l=function(e){_inherits(DOCUMENTS,e);var t=_createSuper(DOCUMENTS);function DOCUMENTS(){return _classCallCheck(this,DOCUMENTS),t.call(this)}return _createClass(DOCUMENTS,[{key:"_Init",value:function _Init(){}},{key:"_Get",value:function _Get(e){var t,s,l;if(s=n.tils.Get(e,"data",null),t=n.tils.Get(e,"document",null),l=n.tils.Get(e,"path",null),s&&!t&&(t=i.BINDINGS.Get(a.DOCUMENT,s,null)),!t)throw new Error("Not enough options set to create a new document.");return t=i.Rent(t),l&&(t.currentPath=l),s||(s=i.BINDINGS.Get(a.DOCUMENT_DEFAULT_DATA,s,null)),s&&(n.isFunc(s)&&(s=i.Rent(s)),t.currentData=s),t}}],[{key:"Get",value:function Get(e){return this.instance._Get(e)}}]),DOCUMENTS}(i.helpers.SingletonEx);e.exports=l},{139:184,12:27,31:66,14:458}],187:[function(__r__,e,t){var n=__r__(12),i=__r__(21),s=__r__(31),a=__r__(28),l,c=function(e){_inherits(DocumentEx,e);var t=_createSuper(DocumentEx);function DocumentEx(){return _classCallCheck(this,DocumentEx),t.call(this)}return _createClass(DocumentEx,[{key:"_CheckOptions",value:function _CheckOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e}},{key:"Load",value:function Load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _get(_getPrototypeOf(DocumentEx.prototype),"Load",this).call(this,this._CheckOptions(e))}},{key:"Save",value:function Save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _get(_getPrototypeOf(DocumentEx.prototype),"Save",this).call(this,this._CheckOptions(e))}},{key:"Delete",value:function Delete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _get(_getPrototypeOf(DocumentEx.prototype),"Delete",this).call(this,this._CheckOptions(e))}}]),DocumentEx}(__r__(239));e.exports=c},{239:185,12:27,31:66,21:190,28:198}],188:[function(__r__,e,t){var n=__r__(12),i=__r__(21),s=__r__(31),a=__r__(28),l=__r__(240),c=function(e){_inherits(MetaDocument,e);var t=_createSuper(MetaDocument);function MetaDocument(){return _classCallCheck(this,MetaDocument),t.call(this)}return _createClass(MetaDocument,[{key:"_CheckOptions",value:function _CheckOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(e=e||{}).io=i.ENV.IF_NODE(a.IO_TYPE.FILE_SYSTEM,a.IO_TYPE.LOCAL_STORAGE),e}}]),MetaDocument}(l);_defineProperty(c,"__NFO__",n.NFOS.Ext({resource:a.resources.JSONResource,serializationContext:s.serialization.CONTEXT.JSON},l.__NFO__)),e.exports=c},{240:187,12:27,31:66,21:190,28:198}],189:[function(__r__,e,t){e.exports={DocumentEx:__r__(240),MetaDocument:__r__(241)}},{240:187,241:188}],190:[function(__r__,e,t){var n=__r__(242);e.exports={DOM_STATE:__r__(243),ENV_DISPLAY:__r__(244),SIGNAL:__r__(47),ENV:n,features:n.instance._features,get APP(){return n.instance._app},get ARGV(){return n.instance._config.argv},IF_NODE:function IF_NODE(e,t){return n.IF_NODE(e,t)},get isBrowser(){return n.instance._features.isBrowser},get isOnline(){return n.instance._features.isOnline},get isTouchEnabled(){return n.instance._features.isTouchEnabled},get isMobile(){return n.instance._features.isMobile},get hasStorage(){return n.instance._features.hasStorage},get storageArea(){return n.instance._features.storageArea},get isExtension(){return n.instance._features.isExtension},get isChromium(){return n.instance._features.isChromium},get runtime(){return n.instance._features.runtime},get isCORSEnabled(){return n.instance._features.isCORSEnabled},get isNodeEnabled(){return n.instance._features.isNodeEnabled},get domState(){return n.instance._features.domState},get displayMode(){return n.instance._features.displayMode},get prefersColorScheme(){return n.instance._features.prefersColorScheme},get displayType(){return n.instance._features.displayType},get prefs(){return n.instance._app.userPreferences}}},{243:191,244:192,242:193,47:196}],191:[function(__r__,e,t){var n=function DOM_STATE(){_classCallCheck(this,DOM_STATE)};_defineProperty(n,"NONE","none"),_defineProperty(n,"LOADING","loading"),_defineProperty(n,"INTERACTIVE","interactive"),_defineProperty(n,"COMPLETE","complete"),e.exports=n},{}],192:[function(__r__,e,t){var n=function ENV_DISPLAY(){_classCallCheck(this,ENV_DISPLAY)};_defineProperty(n,"NONE","none"),_defineProperty(n,"DEFAULT","browser"),_defineProperty(n,"FULLSCREEN","fullscreen"),_defineProperty(n,"MINIMAL","minimal-ui"),_defineProperty(n,"STANDALONE","standalone"),_defineProperty(n,"displayModes",[n.DEFAULT,n.FULLSCREEN,n.MINIMAL,n.STANDALONE]),_defineProperty(n,"COLORSCHEME_DARK","dark"),_defineProperty(n,"COLORSCHEME_LIGHT","light"),_defineProperty(n,"COLORSCHEME_NO_PREFERENCES","no-preferences"),_defineProperty(n,"colorSchemes",[n.COLORSCHEME_DARK,n.COLORSCHEME_LIGHT,n.COLORSCHEME_NO_PREFERENCES]),_defineProperty(n,"MOBILE","mobile"),_defineProperty(n,"TABLET","tablet"),_defineProperty(n,"DESKTOP","desktop"),_defineProperty(n,"displayTypes",[n.DESKTOP,n.TABLET,n.MOBILE]),_defineProperty(n,"displayTypes_width",[1280,1024,760]),e.exports=n},{}],193:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(20),l=__r__(163),c=__r__(245),u=__r__(246),h=__r__(247),d=__r__(248),p=function(e){_inherits(ENV,e);var t=_createSuper(ENV);function ENV(){return _classCallCheck(this,ENV),t.call(this)}return _createClass(ENV,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ENV.prototype),"_Init",this).call(this),this._features=new u,this._features.Watch(l.ONLINE,this._OnEnvOnline,this).Watch(l.OFFLINE,this._OnEnvOffline,this),this._app=null,this._config=null,this._updateQueued=!1,this._started=!1,this._running=!1,this._services=new i.List,this._pwaSWHandler=new d,this._pwaSWHandler.Watch(c.SW_READY,this._OnServiceWorkerReady,this).Watch(c.SW_UPDATE_AVAILABLE,this._OnServiceWorkerUpdateAvailable,this).Watch(c.SW_REGISTRATION_ERROR,this._OnServiceWorkerRegistrationError,this),this._Bind(this._BootService),this._onStart=new s.helpers.CallList,this._useFetchRequestAsDefault=!1,this._manifestVersion=0}},{key:"useFetchRequestAsDefault",get:function get(){return this._useFetchRequestAsDefault},set:function set(e){this._useFetchRequestAsDefault=e}},{key:"manifestVersion",get:function get(){return this._manifestVersion}},{key:"features",get:function get(){return this._features}},{key:"app",get:function get(){return this._app}},{key:"paths",get:function get(){return this._config.paths}},{key:"config",get:function get(){return this._config}},{key:"RegisterServices",value:function RegisterServices(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(this._running)return console.warn("RegisterServices called post-Start. Be sure this is intended."),void n.forEach(this._BootService);for(var s=0,a=n.length;s<a;s++)this._services.Add(n[s])}},{key:"Start",value:function Start(e){if(this._started)throw new Error("Cannot ENV.Start more than once.");if(this._started=!0,this._manifestVersion=e&&e.manifestVersion||0,ENV.instance._features._manifestVersion=this._manifestVersion,n.LOG._("ENV : START","#33979b","#212121"),ENV.instance._features.List(),ENV.instance._features.isBrowser)if(e.argv)e.argv=new n.Argv(e.argv);else{var t=new n.Argv,i;new URLSearchParams(window.location.search).forEach((function(e,n){t[n]=e})),e.argv=t}else e.argv=new n.Argv(e.argv);this._config=e,console.log(this._config),e.argv.Has("offline")&&(this._features._isOnline=!1);var s=n.tils.Get(this._config,"service_worker",!1);!1!==s&&this._pwaSWHandler.Register(s)||this._InternalStart()}},{key:"_OnServiceWorkerReady",value:function _OnServiceWorkerReady(){this._InternalStart()}},{key:"_OnServiceWorkerUpdateAvailable",value:function _OnServiceWorkerUpdateAvailable(){this._running?this._Broadcast(l.PWA_UPDATE_AVAILABLE):this._updateQueued=!0}},{key:"_OnServiceWorkerRegistrationError",value:function _OnServiceWorkerRegistrationError(e){console.warn("Error whilst registering service worker",e),this._InternalStart()}},{key:"_InternalStart",value:function _InternalStart(){var e=this._config.paths;if(e)for(var t in e)n.PATH.SET(t,e[t]);var i=n.tils.Get(this._config,"renderer",null);if(i?(n.LOG._("ENV : App found (".concat(i.name,")"),"#33979b","#212121"),this._app=new i):n.LOG._("ENV : App not found","#fff","#980700"),a.ServicesManager.instance.Boot(),this._services.ForEach(this._BootService),this._features.isBrowser)switch(this._features.domState){case h.NONE:case h.LOADING:case h.INTERACTIVE:this._features.domState==h.INTERACTIVE&&this._app&&this._app.SetUp(),this._features.Watch(l.DOMSTATE_CHANGED,this._OnDOMStateChanged,this);break;case h.COMPLETE:this._app&&this._app.SetUp(),this._OnStart()}else this._OnStart()}},{key:"_OnDOMStateChanged",value:function _OnDOMStateChanged(e){switch(this._features.domState){case h.LOADING:break;case h.INTERACTIVE:this._app&&this._app.SetUp();break;case h.COMPLETE:this._features.Unwatch(l.DOMSTATE_CHANGED,this._OnDOMStateChanged,this),this._OnStart()}}},{key:"_OnStart",value:function _OnStart(){this._running||(this._running=!0,this._app&&this._app._InternalStart(),this._onStart.Notify(this).Clear(),this._Broadcast(l.START,this),this._updateQueued&&this._OnServiceWorkerUpdateAvailable())}},{key:"_BootService",value:function _BootService(e){if(!n.isInstanceOf(e,a.ServiceBase))throw new Error("".concat(e," is not a service."));e.instance.InitializeAndStart(this)}},{key:"_OnEnvOnline",value:function _OnEnvOnline(){this._Broadcast(l.ONLINE)}},{key:"_OnEnvOffline",value:function _OnEnvOffline(){this._Broadcast(l.OFFLINE)}}],[{key:"FEATURES",get:function get(){return this.instance._features}},{key:"APP",get:function get(){return this.instance._app}},{key:"ARGV",get:function get(){return this.instance._config.argv}},{key:"onStart",value:function onStart(e){this.instance._onStart.Add(e)}},{key:"IF_NODE",value:function IF_NODE(e,t){return this.instance.features.isNodeEnabled?e:t}}]),ENV}(s.helpers.SingletonEx);e.exports=p},{247:191,246:194,248:195,163:196,245:197,18:21,12:27,20:267,14:458}],194:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(249),a=__r__(250),l=__r__(79),c=function(e){_inherits(Features,e);var t=_createSuper(Features);function Features(){var e;_classCallCheck(this,Features),(e=t.call(this))._manifestVersion=0,e._isNodeEnabled=!1,e._isBrowser=!1,e._displayType=s.DESKTOP,e._isExtension=!1,e._isMobile=!1,e._isChromium=!1,e._isTouchEnabled=!1,e._isOnline=!1,e._context=null,e._runtime=null,e._hasStorageArea=!1,e._storageArea=null,e._prefersColorScheme=s.COLORSCHEME_NO_PREFERENCES,e._displayMode=s.NONE,e._domState=a.NONE,e._isCORSEnabled=!1,e._Bind(e._OnDisplayModeMdqChange),e._Bind(e._OnColorSchemeMdqChange),e._Bind(e._OnDisplayTypeMdqChange),e._mdqMap=new Map;try{if(e._context=chrome,e._runtime=e._context.runtime,e._isExtension=!0,e._isChromium=!0,!chrome.extension)throw new Error}catch(t){try{if(e._context=browser,e._runtime=e._context.runtime,e._isExtension=!0,e._isChromium=!1,!browser.extension)throw new Error}catch(t){e._isExtension=!1,e._context=null,e._runtime=null,e._isChromium=!1}}try{if(e._storageArea=chrome.storage,e._hasStorageArea=!n.isVoid(e._storageArea),!e._hasStorageArea)throw new Error}catch(t){try{e._storageArea=browser.storage,e._hasStorageArea=!n.isVoid(e._storageArea)}catch(t){e._storageArea=null,e._hasStorageArea=!1}}try{var i=window;e._isBrowser=!0,e._isOnline=navigator.onLine,window.addEventListener("online",e._Bind(e._OnEnvironmentOnline)),window.addEventListener("offline",e._Bind(e._OnEnvironmentOffline));var l=window.performance.getEntriesByType("navigation");l.length>0&&l[0].loadEventEnd>0?e._OnWindowLoaded():window.addEventListener("load",e._Bind(e._OnWindowLoaded)),e._isMobile=/Mobi|Android/i.test(navigator.userAgent),e._isTouchEnabled="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var c=document.readyState,u=!0;c!==a.COMPLETE&&c!==a.INTERACTIVE||(c===a.COMPLETE&&(e._InitMediaQueries(),u=!1),e.domState=c),u&&document.addEventListener("readystatechange",e._Bind(e._OnDOMStateChange));try{var h=new XMLHttpRequest;n.isVoid(h.withCredentials)?e._isCORSEnabled=!1:e._isCORSEnabled=!0}catch(t){e._isCORSEnabled=!1,console.warn(t)}}catch(t){e._isBrowser=!1}return e}return _createClass(Features,[{key:"_OnWindowLoaded",value:function _OnWindowLoaded(e){}},{key:"isBrowser",get:function get(){return this._isBrowser}},{key:"isOnline",get:function get(){return this._isOnline}},{key:"isTouchEnabled",get:function get(){return this._isTouchEnabled}},{key:"isMobile",get:function get(){return this._isMobile}},{key:"hasStorage",get:function get(){return this._hasStorageArea}},{key:"storageArea",get:function get(){return this._storageArea}},{key:"isExtension",get:function get(){return this._isExtension}},{key:"isChromium",get:function get(){return this._isChromium}},{key:"context",get:function get(){return this._context}},{key:"runtime",get:function get(){return this._runtime}},{key:"isCORSEnabled",get:function get(){return this._isCORSEnabled}},{key:"isNodeEnabled",get:function get(){return this._isNodeEnabled}},{key:"domState",get:function get(){return this._domState},set:function set(e){if(this._domState!==e){var t=this._domState;switch(this._domState=e,n.LOG._U("domState",this._domState,t,"#f7d801"),this._domState){case a.LOADING:break;case a.INTERACTIVE:this._InitMediaQueries();break;case a.COMPLETE:}this._Broadcast(l.DOMSTATE_CHANGED,this._domState)}}},{key:"_OnDOMStateChange",value:function _OnDOMStateChange(){document.readyState===a.COMPLETE&&document.removeEventListener("DOMContentLoaded",this._OnDOMStateChange),this.domState=document.readyState}},{key:"_InitMediaQueries",value:function _InitMediaQueries(){var e=s.DEFAULT;navigator.standalone&&(e=s.STANDALONE);for(var t=0,n=s.displayModes.length;t<n;t++){var i=s.displayModes[t],a=window.matchMedia("(display-mode: ".concat(i,")"));this._mdqMap.set(i,a),a.matches&&(e=i),a.addEventListener("change",this._OnDisplayModeMdqChange)}this._displayMode=e,e=s.COLORSCHEME_NO_PREFERENCES;for(var l=0,c=s.colorSchemes.length;l<c;l++){var u=s.colorSchemes[l],h=window.matchMedia("(prefers-color-scheme: ".concat(u,")"));this._mdqMap.set(u,h),h.matches&&(e=u),h.addEventListener("change",this._OnColorSchemeMdqChange)}this._prefersColorScheme=e,e=s.DESKTOP;for(var d=0,p=s.displayTypes_width.length;d<p;d++){var m=s.displayTypes[d],y=window.matchMedia("(max-width: ".concat(s.displayTypes_width[d],"px)"));this._mdqMap.set(m,y),y.matches&&(e=m),y.addEventListener("change",this._OnDisplayTypeMdqChange)}this._displayType=e}},{key:"displayMode",get:function get(){return this._displayMode},set:function set(e){if(this._displayMode!==e){var t=this._displayMode;this._displayMode=e,n.LOG._U("displayMode",this._displayMode,t,"#f7d801"),this._Broadcast(l.DISPLAY_MODE_CHANGED,this._displayMode,t)}}},{key:"_OnDisplayModeMdqChange",value:function _OnDisplayModeMdqChange(e){this._UpdateMDQ(s.displayModes,"displayMode")}},{key:"prefersColorScheme",get:function get(){return this._prefersColorScheme},set:function set(e){if(this._prefersColorScheme!==e){var t=this._prefersColorScheme;this._prefersColorScheme=e,n.LOG._U("prefersColorScheme",this._prefersColorScheme,t,"#f7d801"),this._Broadcast(l.COLOR_SCHEME_CHANGED,this._prefersColorScheme,t)}}},{key:"_OnColorSchemeMdqChange",value:function _OnColorSchemeMdqChange(e){this._UpdateMDQ(s.colorSchemes,"prefersColorScheme")}},{key:"displayType",get:function get(){return this._displayType},set:function set(e){if(this._displayType!==e){var t=this._displayType;this._displayType=e,n.LOG._U("device",this._displayType,t,"#f7d801"),this._Broadcast(l.DISPLAY_TYPE_CHANGED,this._displayType,t)}}},{key:"_OnDisplayTypeMdqChange",value:function _OnDisplayTypeMdqChange(e){this._UpdateMDQ(s.displayTypes,"displayType")}},{key:"_UpdateMDQ",value:function _UpdateMDQ(e,t){for(var n=this["_".concat(t)],i=0,s=e.length;i<s;i++){var a=e[i],l;this._mdqMap.get(a).matches&&(n=a)}this[t]=n}},{key:"_OnEnvironmentOnline",value:function _OnEnvironmentOnline(e){this._isOnline||(this._isOnline=!0,this._Broadcast(l.ONLINE))}},{key:"_OnEnvironmentOffline",value:function _OnEnvironmentOffline(e){this._isOnline&&(this._isOnline=!1,this._Broadcast(l.OFFLINE))}},{key:"List",value:function List(){var e="✔",t="🞫",i="889000",s="d86100",a="#171717";n.LOG._("".concat(this._isBrowser?e:t," isBrowser"),"#".concat(this._isBrowser?i:s),a),n.LOG._("".concat(this._isMobile?e:t," isMobile"),"#".concat(this._isMobile?i:s),a),n.LOG._("".concat(this._isExtension?e:t," isExtension (v").concat(this._isExtension?this._manifestVersion:0,")"),"#".concat(this._isExtension?i:s),a),n.LOG._("".concat(this._isTouchEnabled?e:t," isToucheEnabled"),"#".concat(this._isTouchEnabled?i:s),a),n.LOG._("".concat(this._hasStorageArea?e:t," hasStorageArea"),"#".concat(this._hasStorageArea?i:s),a),n.LOG._("".concat(this._isCORSEnabled?e:t," isCORSEnabled"),"#".concat(this._isCORSEnabled?i:s),a),n.LOG._("▢ displayMode : ".concat(this._displayMode),"#889000",a),n.LOG._("◐ prefersColorScheme : ".concat(this._prefersColorScheme),"#889000",a),n.LOG._("⎚ displayType : ".concat(this._displayType),"#889000",a),n.LOG._("".concat(this._isNodeEnabled?e:t," isNodeEnabled"),"#".concat(this._isNodeEnabled?"182000":"fff"),"#".concat(this._isNodeEnabled?"7ca500":"980700"))}}]),Features}(i.pool.DisposableObjectEx);e.exports=c},{250:191,249:192,79:196,12:27,14:458}],195:[function(__r__,e,t){var n=__r__(12),i=__r__(251),s=function(e){_inherits(ServiceWorkerHandler,e);var t=_createSuper(ServiceWorkerHandler);function ServiceWorkerHandler(){return _classCallCheck(this,ServiceWorkerHandler),t.call(this)}return _createClass(ServiceWorkerHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ServiceWorkerHandler.prototype),"_Init",this).call(this),this._name="",this._registration=null,this._installedWorker=null,this._newWorker=null,this._Bind(this._OnRegistered),this._Bind(this._OnInstalledWorkerStateChange),this._Bind(this._OnNewWorkerStateChange),this._Bind(this._OnRegistrationError),this._Bind(this._OnUpdateFound),this._Bind(this._OnInstalledWorkerMessage),this._Bind(this._OnNewWorkerMessage),this._Bind(this._OnMessage)}},{key:"Register",value:function Register(e){return this._name=e,"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("message",this._OnMessage),navigator.serviceWorker.register(this._name).then(this._OnRegistered).catch(this._OnRegistrationError),!0)}},{key:"_OnRegistrationError",value:function _OnRegistrationError(e){console.log("_OnRegistrationError(".concat(e,")"),e),this._Broadcast(i.SW_REGISTRATION_ERROR,this,e)}},{key:"_OnRegistered",value:function _OnRegistered(e){this._Broadcast(i.SW_REGISTERED,this),console.log("_OnRegistered(".concat(e,")"),e),this._registration=e,console.log("Active : ",this._registration.active),console.log("Installing : ",this._registration.installing),this._installedWorker=this._registration.active,this._installedWorker&&(this._installedWorker.onstatechange=this._OnInstalledWorkerStateChange,this._installedWorker.addEventListener("message",this._OnInstalledWorkerMessage),this._Ready()),this._newWorker=this._registration.installing,this._newWorker&&(this._newWorker.addEventListener("message",this._OnNewWorkerMessage),this._newWorker.onstatechange=this._OnNewWorkerStateChange),this._registration.onupdatefound=this._OnUpdateFound}},{key:"_OnUpdateFound",value:function _OnUpdateFound(){console.log("_OnUpdateFound"),this._newWorker&&(this._newWorker.removeEventListener("message",this._OnNewWorkerMessage),this._newWorker.onstatechange=null),this._newWorker=this._registration.installing,this._newWorker&&(this._newWorker.addEventListener("message",this._Bind(this._OnNewWorkerMessage)),this._newWorker.onstatechange=this._OnNewWorkerStateChange)}},{key:"_OnInstalledWorkerStateChange",value:function _OnInstalledWorkerStateChange(e){this._installedWorkerState=this._installedWorker.state}},{key:"_OnNewWorkerStateChange",value:function _OnNewWorkerStateChange(e){this._newWorkerState=this._newWorker.state,"activated"===this._newWorkerState&&(this._installedWorker?this._Broadcast(i.SW_UPDATE_AVAILABLE,this):(this._installedWorker=this._newWorker,this._Ready()))}},{key:"_OnInstalledWorkerMessage",value:function _OnInstalledWorkerMessage(e){console.log("_OnInstalledWorkerMessage(".concat(e,")"),e),this._Broadcast(i.SW_MESSAGE,this,e.data)}},{key:"_OnNewWorkerMessage",value:function _OnNewWorkerMessage(e){console.log("_OnNewWorkerMessage(".concat(e,")"),e),this._Broadcast(i.SW_MESSAGE,this,e.data)}},{key:"_OnMessage",value:function _OnMessage(e){console.log("_OnMessage(".concat(e,")"),e),this._Broadcast(i.SW_MESSAGE,this,e.data)}},{key:"Send",value:function Send(e){console.log("Send ".concat(e," to this._installedWorker = ").concat(this._installedWorker),e),this._installedWorker.postMessage(e)}},{key:"_Ready",value:function _Ready(){this.Send({command:"YOLO"}),this._Broadcast(i.SW_READY,this)}}]),ServiceWorkerHandler}(n.pool.DisposableObjectEx);e.exports=s},{251:197,12:27}],196:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"START",Symbol("environment-start")),_defineProperty(n,"DOMSTATE_CHANGED",Symbol("displaymode-changed")),_defineProperty(n,"DISPLAY_MODE_CHANGED",Symbol("color-scheme-changed")),_defineProperty(n,"COLOR_SCHEME_CHANGED",Symbol("domstate-changed")),_defineProperty(n,"DISPLAY_TYPE_CHANGED",Symbol("device-changed")),_defineProperty(n,"ONLINE",Symbol("online")),_defineProperty(n,"OFFLINE",Symbol("offline")),_defineProperty(n,"PWA_UPDATE_AVAILABLE",Symbol("pwa-update-available")),e.exports=n},{}],197:[function(__r__,e,t){var n=function SW_SIGNAL(){_classCallCheck(this,SW_SIGNAL)};_defineProperty(n,"SW_MESSAGE",Symbol("message")),_defineProperty(n,"SW_REGISTERED",Symbol("registered")),_defineProperty(n,"SW_REGISTERED",Symbol("installed")),_defineProperty(n,"SW_REGISTRATION_ERROR",Symbol("registration-fail")),_defineProperty(n,"SW_READY",Symbol("ready")),_defineProperty(n,"SW_UPDATE_AVAILABLE",Symbol("update-available")),e.exports=n},{}],198:[function(__r__,e,t){var n=__r__(252);e.exports={ENCODING:__r__(253),RESPONSE_TYPE:__r__(254),IO_TYPE:__r__(255),IO_SIGNAL:__r__(256),RESOURCES:n,RESSOURCE_STATE:__r__(257),Resource:__r__(258),Directory:__r__(259),IOProcess:__r__(260),IOQueue:__r__(261),ResourceOperation:__r__(262),resources:__r__(263),ioprocesses:__r__(264),Get:n.Get.bind(n),Read:n.GetAndRead.bind(n)}},{259:199,253:200,260:201,264:210,261:223,256:224,255:225,258:228,262:226,257:227,263:230,252:229,254:235}],199:[function(__r__,e,t){var n=__r__(12),i=__r__(18),s,a=function(e){_inherits(Directory,e);var t=_createSuper(Directory);function Directory(){return _classCallCheck(this,Directory),t.call(this)}return _createClass(Directory,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Directory.prototype),"_Init",this).call(this),this._requestRsc=null,this._directories=new i.List,this._resources=new i.List}},{key:"isDir",get:function get(){return!0}},{key:"_OnPathUpdated",value:function _OnPathUpdated(e){}},{key:"_Encode",value:function _Encode(){return null}},{key:"_Decode",value:function _Decode(){for(var e=PATH.FULL(this._path),t=0,n=this._raw.length;t<n;t++)var i=this._requestRsc("".concat(e,"/").concat(this._raw[t]))}},{key:"Add",value:function Add(e){var t=!1;(t=e.isDir?this._directories.Add(e):this._resources.Add(e))&&(e.Watch(n.SIGNAL.RELEASED,this._OnRscReleased,this),e.directory=this)}},{key:"Remove",value:function Remove(e){var t=!1;(t=e.isDir?this._directories.Remove(e):this._resources.Remove(e))&&(e.directory===this&&(e.directory=null),e.Unwatch(n.SIGNAL.RELEASED,this._OnRscReleased,this))}},{key:"ReleaseContent",value:function ReleaseContent(){for(var e=this._resources.internalArray,t=0,n=e.length;t<n;t++)e[e.length-1].Release();for(var i=0,s=(e=this._directories.internalArray).length;i<s;i++){var a=e[e.length-1];a.ReleaseContent(),a.Release()}}},{key:"ReleaseWithContent",value:function ReleaseWithContent(){this.ReleaseContent(),this.Release()}},{key:"_OnRscReleased",value:function _OnRscReleased(e){this.Remove(e)}}]),Directory}(__r__(265));e.exports=a},{265:228,18:21,12:27}],200:[function(__r__,e,t){var n=function ENCODING(){_classCallCheck(this,ENCODING)};_defineProperty(n,"UTF8","utf8"),_defineProperty(n,"UCS2","ucs2"),_defineProperty(n,"UTF16le","utf16le"),_defineProperty(n,"LATIN1","latin1"),_defineProperty(n,"BINARY","binary"),_defineProperty(n,"BASE64","base64"),_defineProperty(n,"ASCII","ascii"),_defineProperty(n,"HEX","hex"),e.exports=n},{}],201:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=function(e){_inherits(IOProcess,e);var t=_createSuper(IOProcess);function IOProcess(){return _classCallCheck(this,IOProcess),t.call(this)}return _createClass(IOProcess,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(IOProcess.prototype),"_Init",this).call(this),this._operation=null,this._running=!1,this._globalResourceMap=null,this._Bind(this._OnStart),this._Bind(this._OnProgress),this._Bind(this._OnError),this._Bind(this._OnSuccess),this._Bind(this._OnComplete)}},{key:"running",get:function get(){return this._running}},{key:"rsc",get:function get(){return this._operation.rsc}},{key:"encoding",get:function get(){this._operation.rsc.encoding}},{key:"operation",get:function get(){return this._operation},set:function set(e){this._operation=e}},{key:"Validate",value:function Validate(){return!n.isEmpty(this._operation.rsc.path)||(this._OnError(new Error("Resource path is empty.")),!1)}},{key:"Process",value:function Process(){throw new Error("Process not implemented in io-process")}},{key:"_OnStart",value:function _OnStart(){this._running=!0,this._operation.OnStart()}},{key:"_OnProgress",value:function _OnProgress(e){this._operation.OnProgress(e)}},{key:"_OnError",value:function _OnError(e){this._operation.OnError(e),this._OnComplete()}},{key:"_OnSuccess",value:function _OnSuccess(){this._operation.OnSuccess(),this._OnComplete()}},{key:"_OnComplete",value:function _OnComplete(){this._running=!1,this._Broadcast(i.SIGNAL.COMPLETE,this),this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this._operation=null,this._running=!1,this._globalResourceMap=null,_get(_getPrototypeOf(IOProcess.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[".concat(this.constructor.name,"::").concat(this._operation?this._operation.fullPath:"NO_OPERATION_SET","]")}}]),IOProcess}(i.pool.DisposableObjectEx);e.exports=s},{12:27,14:458}],202:[function(__r__,e,t){var n,i=function(e){_inherits(FetchIORename,e);var t=_createSuper(FetchIORename);function FetchIORename(){return _classCallCheck(this,FetchIORename),t.call(this)}return _createClass(FetchIORename,[{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._OnError(new Error("HTTP delete not supported."))}}]),FetchIORename}(__r__(266));e.exports=i},{266:201}],203:[function(__r__,e,t){var n=__r__(21),i=__r__("axios"),s=__r__(266),a=__r__(267),l=function(e){_inherits(FetchIOReader,e);var t=_createSuper(FetchIOReader);function FetchIOReader(){return _classCallCheck(this,FetchIOReader),t.call(this)}return _createClass(FetchIOReader,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FetchIOReader.prototype),"_Init",this).call(this),this._Bind(this._OnMessageResponse),this._Bind(this._OnRequestSuccess)}},{key:"Process",value:function Process(){this._OnStart(),_get(_getPrototypeOf(FetchIOReader.prototype),"_OnProgress",this).call(this,0),n.runtime.sendMessage({url:this._operation.fullPath},this._OnMessageResponse)}},{key:"_OnMessageResponse",value:function _OnMessageResponse(e){e.error?this._OnError(new Error(e.error)):e.data?(this._OnProgress(1),this._OnRequestSuccess(e)):this._OnError(new Error("Empty response"))}},{key:"_OnRequestSuccess",value:function _OnRequestSuccess(e){this.rsc.raw=e.data,this._OnSuccess()}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(FetchIOReader.prototype),"_CleanUp",this).call(this)}}]),FetchIOReader}(s);e.exports=l},{267:200,266:201,21:190,axios:236}],204:[function(__r__,e,t){var n=__r__(14),i,s=function(e){_inherits(FetchIORename,e);var t=_createSuper(FetchIORename);function FetchIORename(){return _classCallCheck(this,FetchIORename),t.call(this)}return _createClass(FetchIORename,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FetchIORename.prototype),"_Init",this).call(this),this._targetPath=null}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(e){this._targetPath=n.PATH.FULL(e)}},{key:"Validate",value:function Validate(){if(!_get(_getPrototypeOf(FetchIORename.prototype),"Validate",this).call(this))return!1;var e=this._resources.Get(n.PATH.SHORT(this._targetPath));return!e||e==this.rsc||(this._OnError(new Error("Cannot rename resource from '".concat(this.rsc.path,"' to '").concat(this._targetPath,"' : destination already exists"))),!1)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._OnError(new Error("HTTP rename not supported."))}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null,_get(_getPrototypeOf(FetchIORename.prototype),"_CleanUp",this).call(this)}}]),FetchIORename}(__r__(266));e.exports=s},{266:201,14:458}],205:[function(__r__,e,t){var n=__r__(14),i=__r__(266),s=__r__(268),a=function(e){_inherits(FetchIOWriter,e);var t=_createSuper(FetchIOWriter);function FetchIOWriter(){return _classCallCheck(this,FetchIOWriter),t.call(this)}return _createClass(FetchIOWriter,[{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0);try{var e=FetchIOWriter.dlLink;e.download="".concat(n.PATH.name(this._operation.fullPath)).concat(ext),e.href=window.URL.createObjectURL(n.isInstanceOf(this.rsc.content,Blob)?this.rsc.content:new Blob([this.rsc.content],{type:"".concat(this.rsc.mime?this.rsc.mime.type:"text/plain")})),e.click(),this._OnSuccess()}catch(e){this._OnError(e)}}}],[{key:"dlLink",get:function get(){return this.__a||(this.__a=document.createElement("a"),this.__a.style.display="none"),this.__a}}]),FetchIOWriter}(i);e.exports=a},{266:201,268:232,14:458}],206:[function(__r__,e,t){var n,i=function(e){_inherits(HTTPIORename,e);var t=_createSuper(HTTPIORename);function HTTPIORename(){return _classCallCheck(this,HTTPIORename),t.call(this)}return _createClass(HTTPIORename,[{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._OnError(new Error("HTTP delete not supported."))}}]),HTTPIORename}(__r__(266));e.exports=i},{266:201}],207:[function(__r__,e,t){var n=__r__("axios"),i=__r__(266),s=__r__(267),a=function(e){_inherits(HTTPIOReader,e);var t=_createSuper(HTTPIOReader);function HTTPIOReader(){return _classCallCheck(this,HTTPIOReader),t.call(this)}return _createClass(HTTPIOReader,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(HTTPIOReader.prototype),"_Init",this).call(this),this._Bind(this._OnRequestSuccess)}},{key:"Process",value:function Process(){this._OnStart();var e={onDownloadProgress:this._OnProgress,responseType:this.rsc.type,headers:{"Access-Control-Allow-Origin":"*"}};this.rsc.mime&&(e.headers["Content-Type"]=this.rsc.mime),_get(_getPrototypeOf(HTTPIOReader.prototype),"_OnProgress",this).call(this,0),n.get(this._operation.fullPath,e).then(this._OnRequestSuccess).catch(this._OnError)}},{key:"_OnProgress",value:function _OnProgress(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("x-decompressed-content-length")||e.target.getResponseHeader("content-length"),n=1;null!==t&&(n=e.loaded/t),_get(_getPrototypeOf(HTTPIOReader.prototype),"_OnProgress",this).call(this,n)}},{key:"_OnRequestSuccess",value:function _OnRequestSuccess(e){this.rsc.raw=e.data,this._OnSuccess()}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(HTTPIOReader.prototype),"_CleanUp",this).call(this)}}]),HTTPIOReader}(i);e.exports=a},{267:200,266:201,axios:236}],208:[function(__r__,e,t){var n=__r__(14),i,s=function(e){_inherits(HTTPIORename,e);var t=_createSuper(HTTPIORename);function HTTPIORename(){return _classCallCheck(this,HTTPIORename),t.call(this)}return _createClass(HTTPIORename,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(HTTPIORename.prototype),"_Init",this).call(this),this._targetPath=null}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(e){this._targetPath=n.PATH.FULL(e)}},{key:"Validate",value:function Validate(){if(!_get(_getPrototypeOf(HTTPIORename.prototype),"Validate",this).call(this))return!1;var e=this._resources.Get(n.PATH.SHORT(this._targetPath));return!e||e==this.rsc||(this._OnError(new Error("Cannot rename resource from '".concat(this.rsc.path,"' to '").concat(this._targetPath,"' : destination already exists"))),!1)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._OnError(new Error("HTTP rename not supported."))}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null,_get(_getPrototypeOf(HTTPIORename.prototype),"_CleanUp",this).call(this)}}]),HTTPIORename}(__r__(266));e.exports=s},{266:201,14:458}],209:[function(__r__,e,t){var n=__r__(14),i=__r__(266),s=__r__(268),a=function(e){_inherits(HTTPIOWriter,e);var t=_createSuper(HTTPIOWriter);function HTTPIOWriter(){return _classCallCheck(this,HTTPIOWriter),t.call(this)}return _createClass(HTTPIOWriter,[{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0);try{var e=HTTPIOWriter.dlLink;e.download="".concat(n.PATH.name(this._operation.fullPath)).concat(ext),e.href=window.URL.createObjectURL(n.isInstanceOf(this.rsc.content,Blob)?this.rsc.content:new Blob([this.rsc.content],{type:"".concat(this.rsc.mime?this.rsc.mime.type:"text/plain")})),e.click(),this._OnSuccess()}catch(e){this._OnError(e)}}}],[{key:"dlLink",get:function get(){return this.__a||(this.__a=document.createElement("a"),this.__a.style.display="none"),this.__a}}]),HTTPIOWriter}(i);e.exports=a},{266:201,268:232,14:458}],210:[function(__r__,e,t){e.exports={HTTPIOReader:__r__(269),HTTPIOWriter:__r__(270),HTTPIORename:__r__(271),HTTPIODelete:__r__(272),FetchIOReader:__r__(273),FetchIOWriter:__r__(274),FetchIORename:__r__(275),FetchIODelete:__r__(276),LocalStorageIOReader:__r__(277),LocalStorageIOWriter:__r__(278),LocalStorageIORename:__r__(279),LocalStorageIODelete:__r__(280),StorageIOReader:__r__(281),StorageIOWriter:__r__(282),StorageIORename:__r__(283),StorageIODelete:__r__(284),StoragePromiseIOReader:__r__(285),StoragePromiseIOWriter:__r__(286),StoragePromiseIORename:__r__(287),StoragePromiseIODelete:__r__(288)}},{276:202,273:203,275:204,274:205,272:206,269:207,271:208,270:209,280:211,277:212,279:213,278:214,284:215,281:216,283:217,282:218,288:219,285:220,287:221,286:222}],211:[function(__r__,e,t){var n,i=function(e){_inherits(LocalStorageIODelete,e);var t=_createSuper(LocalStorageIODelete);function LocalStorageIODelete(){return _classCallCheck(this,LocalStorageIODelete),t.call(this)}return _createClass(LocalStorageIODelete,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(LocalStorageIODelete.prototype),"_Init",this).call(this),this._Bind(this._OnStorageRemoved)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0);try{localStorage.removeItem(this._operation.fullPath),this._OnProgress(1),this._OnSuccess()}catch(e){this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set.")))}}}]),LocalStorageIODelete}(__r__(266));e.exports=i},{266:201}],212:[function(__r__,e,t){var n,i=function(e){_inherits(LocalStorageIOReader,e);var t=_createSuper(LocalStorageIOReader);function LocalStorageIOReader(){return _classCallCheck(this,LocalStorageIOReader),t.call(this)}return _createClass(LocalStorageIOReader,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(LocalStorageIOReader.prototype),"_Init",this).call(this)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0);var e=localStorage.getItem(this._operation.fullPath);e?(this._OnProgress(1),this.rsc.raw=e,this._OnSuccess()):this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set.")))}}]),LocalStorageIOReader}(__r__(266));e.exports=i},{266:201}],213:[function(__r__,e,t){var n=__r__(14),i,s=function(e){_inherits(LocalStorageIORename,e);var t=_createSuper(LocalStorageIORename);function LocalStorageIORename(){return _classCallCheck(this,LocalStorageIORename),t.call(this)}return _createClass(LocalStorageIORename,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(LocalStorageIORename.prototype),"_Init",this).call(this),this._targetPath=null,this._oldPath=null}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(e){this._targetPath=e}},{key:"Validate",value:function Validate(){if(!_get(_getPrototypeOf(LocalStorageIORename.prototype),"Validate",this).call(this))return!1;var e=this._resources.Get(n.PATH.SHORT(this._targetPath));return!e||e==this.rsc||(this._OnError(new Error("Cannot rename resource from '".concat(this._operation.fullPath,"' to '").concat(this._targetPath,"' : destination already exists"))),!1)}},{key:"Process",value:function Process(){var e;this._OnStart(),this._OnProgress(0),this._oldPath=this._operation.fullPath,localStorage.getItem(this._targetPath)?this._OnError(new Error("Can't rename '".concat(this._oldPath,"' to '").concat(this._targetPath,"' : data is already present."))):(localStorage.setItem(this._targetPath,localStorage.getItem(this._oldPath)),localStorage.removeItem(this._oldPath),this._OnProgress(1),this._UpdatePath(this._targetPath),this._OnSuccess())}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null,this._oldPath=null,_get(_getPrototypeOf(LocalStorageIORename.prototype),"_CleanUp",this).call(this)}}]),LocalStorageIORename}(__r__(266));e.exports=s},{266:201,14:458}],214:[function(__r__,e,t){var n,i=function(e){_inherits(LocalStorageIOWriter,e);var t=_createSuper(LocalStorageIOWriter);function LocalStorageIOWriter(){return _classCallCheck(this,LocalStorageIOWriter),t.call(this)}return _createClass(LocalStorageIOWriter,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(LocalStorageIOWriter.prototype),"_Init",this).call(this)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._OnProgress(1),localStorage.setItem(this._operation.fullPath,this.rsc.raw),this._OnSuccess()}}]),LocalStorageIOWriter}(__r__(266));e.exports=i},{266:201}],215:[function(__r__,e,t){var n=__r__(21),i,s=function(e){_inherits(StorageIODelete,e);var t=_createSuper(StorageIODelete);function StorageIODelete(){return _classCallCheck(this,StorageIODelete),t.call(this)}return _createClass(StorageIODelete,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StorageIODelete.prototype),"_Init",this).call(this),this._Bind(this._OnStorageRemoved)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),n.storageArea.local.remove(this._operation.fullPath,this._OnStorageRemoved)}},{key:"_OnStorageRemoved",value:function _OnStorageRemoved(e){n.runtime.lastError?this._OnError(n.runtime.lastError):(this._OnProgress(1),this._OnSuccess())}}]),StorageIODelete}(__r__(266));e.exports=s},{266:201,21:190}],216:[function(__r__,e,t){var n=__r__(14),i=__r__(21),s,a=function(e){_inherits(StorageIOReader,e);var t=_createSuper(StorageIOReader);function StorageIOReader(){return _classCallCheck(this,StorageIOReader),t.call(this)}return _createClass(StorageIOReader,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StorageIOReader.prototype),"_Init",this).call(this),this._Bind(this._OnStorageRead)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),i.storageArea.local.get(this._operation.fullPath,this._OnStorageRead)}},{key:"_OnStorageRead",value:function _OnStorageRead(e){console.log(e);var t=e[this._operation.fullPath];n.isVoid(t)?this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set."))):(this._OnProgress(1),this.rsc.raw=t,this._OnSuccess())}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(StorageIOReader.prototype),"_CleanUp",this).call(this)}}]),StorageIOReader}(__r__(266));e.exports=a},{266:201,21:190,14:458}],217:[function(__r__,e,t){var n=__r__(14),i=__r__(21),s,a=function(e){_inherits(StorageIORename,e);var t=_createSuper(StorageIORename);function StorageIORename(){return _classCallCheck(this,StorageIORename),t.call(this)}return _createClass(StorageIORename,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StorageIORename.prototype),"_Init",this).call(this),this._targetPath=null,this._oldPath=null,this._Bind(this._OnRenameExistsCheck),this._Bind(this._OnRenameStorageWritten),this._Bind(this._OnRenameStorageOldDeleted)}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(e){this._targetPath=e}},{key:"Validate",value:function Validate(){if(!_get(_getPrototypeOf(StorageIORename.prototype),"Validate",this).call(this))return!1;var e=this._resources.Get(n.PATH.SHORT(this._targetPath));return!e||e==this.rsc||(this._OnError(new Error("Cannot rename resource from '".concat(this._operation.fullPath,"' to '").concat(this._targetPath,"' : destination already exists"))),!1)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._oldPath=this._operation.fullPath,i.storageArea.local.get(this._targetPath,this._OnRenameExistsCheck)}},{key:"_OnRenameExistsCheck",value:function _OnRenameExistsCheck(e){var t=e[this._oldPath];if(n.isVoid(t)){var s=i.storageArea,a={};a[this._targetPath]=t,s.local.set(a,this._OnRenameStorageWritten)}else this._OnError(new Error("Can't rename '".concat(this._oldPath,"' to '").concat(this._targetPath,"' : data is already present.")))}},{key:"_OnRenameStorageWritten",value:function _OnRenameStorageWritten(){i.runtime.lastError?(this._OnProgress(.5),storage.local.remove(this._oldPath,this._OnRenameStorageOldDeleted)):this._OnError(i.runtime.lastError)}},{key:"_OnRenameStorageOldDeleted",value:function _OnRenameStorageOldDeleted(){i.runtime.lastError?this._OnError(i.runtime.lastError):(this._OnProgress(1),this._UpdatePath(this._targetPath),this._OnSuccess())}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null,this._oldPath=null,_get(_getPrototypeOf(StorageIORename.prototype),"_CleanUp",this).call(this)}}]),StorageIORename}(__r__(266));e.exports=a},{266:201,21:190,14:458}],218:[function(__r__,e,t){var n=__r__(21),i,s=function(e){_inherits(StorageIOWriter,e);var t=_createSuper(StorageIOWriter);function StorageIOWriter(){return _classCallCheck(this,StorageIOWriter),t.call(this)}return _createClass(StorageIOWriter,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StorageIOWriter.prototype),"_Init",this).call(this),this._Bind(this._OnStorageWritten)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),n.storageArea.local.set(_defineProperty({},this._operation.fullPath,this.rsc.raw),this._OnStorageWritten)}},{key:"_OnStorageWritten",value:function _OnStorageWritten(){n.runtime.lastError?this._OnError(n.runtime.lastError):(this._OnProgress(1),this._OnSuccess())}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(StorageIOWriter.prototype),"_CleanUp",this).call(this)}}]),StorageIOWriter}(__r__(266));e.exports=s},{266:201,21:190}],219:[function(__r__,e,t){var n=__r__(21),i,s=function(e){_inherits(StoragePromiseIODelete,e);var t=_createSuper(StoragePromiseIODelete);function StoragePromiseIODelete(){return _classCallCheck(this,StoragePromiseIODelete),t.call(this)}return _createClass(StoragePromiseIODelete,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StoragePromiseIODelete.prototype),"_Init",this).call(this),this._Bind(this._OnStorageRemoved),this._Bind(this._OnStorageRemovedError)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),n.storageArea.local.remove(this._operation.fullPath).then(this._OnStorageRemoved).catch(this._OnStorageRemovedError)}},{key:"_OnStorageRemovedError",value:function _OnStorageRemovedError(e){this._OnError(e)}},{key:"_OnStorageRemoved",value:function _OnStorageRemoved(e){this._OnProgress(1),this._OnSuccess()}}]),StoragePromiseIODelete}(__r__(266));e.exports=s},{266:201,21:190}],220:[function(__r__,e,t){var n=__r__(14),i=__r__(21),s=__r__("axios"),a,l=function(e){_inherits(StoragePromiseIOReader,e);var t=_createSuper(StoragePromiseIOReader);function StoragePromiseIOReader(){return _classCallCheck(this,StoragePromiseIOReader),t.call(this)}return _createClass(StoragePromiseIOReader,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StoragePromiseIOReader.prototype),"_Init",this).call(this),this._Bind(this._OnStorageRead),this._Bind(this._OnStorageReadError)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),i.storageArea.local.get(this._operation.fullPath).then(this._OnStorageRead).catct(this._OnStorageReadError)}},{key:"_OnStorageReadError",value:function _OnStorageReadError(e){this._OnError(e)}},{key:"_OnStorageRead",value:function _OnStorageRead(e){console.log(e);var t=e[this._operation.fullPath];n.isVoid(t)?this._OnError(new Error("Key '".concat(this._operation.fullPath,"' is not set."))):(this._OnProgress(1),this.rsc.raw=t,this._OnSuccess())}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(StoragePromiseIOReader.prototype),"_CleanUp",this).call(this)}}]),StoragePromiseIOReader}(__r__(266));e.exports=l},{266:201,21:190,14:458,axios:236}],221:[function(__r__,e,t){var n=__r__(14),i=__r__(21),s,a=function(e){_inherits(StoragePromiseIORename,e);var t=_createSuper(StoragePromiseIORename);function StoragePromiseIORename(){return _classCallCheck(this,StoragePromiseIORename),t.call(this)}return _createClass(StoragePromiseIORename,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StoragePromiseIORename.prototype),"_Init",this).call(this),this._targetPath=null,this._oldPath=null,this._Bind(this._OnRenameExistsCheck),this._Bind(this._OnRenameExistsCheckError),this._Bind(this._OnRenameStorageWritten),this._Bind(this._OnRenameStorageWrittenError),this._Bind(this._OnRenameStorageOldDeleted),this._Bind(this._OnRenameStorageOldDeletedError)}},{key:"targetPath",get:function get(){return this._targetPath},set:function set(e){this._targetPath=e}},{key:"Validate",value:function Validate(){if(!_get(_getPrototypeOf(StoragePromiseIORename.prototype),"Validate",this).call(this))return!1;var e=this._resources.Get(n.PATH.SHORT(this._targetPath));return!e||e==this.rsc||(this._OnError(new Error("Cannot rename resource from '".concat(this._operation.fullPath,"' to '").concat(this._targetPath,"' : destination already exists"))),!1)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),this._oldPath=this._operation.fullPath,i.storageArea.local.get(this._targetPath).then(this._OnRenameExistsCheck).catch(this._OnRenameExistsCheckError)}},{key:"_OnRenameExistsCheckError",value:function _OnRenameExistsCheckError(e){this._OnError(e)}},{key:"_OnRenameExistsCheck",value:function _OnRenameExistsCheck(e){var t=e[this._oldPath];if(n.isVoid(t)){var s=i.storageArea,a={};a[this._targetPath]=t,s.local.set(a,this._OnRenameStorageWritten)}else this._OnError(new Error("Can't rename '".concat(this._oldPath,"' to '").concat(this._targetPath,"' : data is already present.")))}},{key:"_OnRenameStorageWrittenError",value:function _OnRenameStorageWrittenError(e){this._OnError(e)}},{key:"_OnRenameStorageWritten",value:function _OnRenameStorageWritten(){this._OnProgress(.5),storage.local.remove(this._oldPath,this._OnRenameStorageOldDeleted)}},{key:"_OnRenameStorageOldDeletedError",value:function _OnRenameStorageOldDeletedError(e){this._OnError(e)}},{key:"_OnRenameStorageOldDeleted",value:function _OnRenameStorageOldDeleted(){this._OnProgress(1),this._UpdatePath(this._targetPath),this._OnSuccess()}},{key:"_CleanUp",value:function _CleanUp(){this._targetPath=null,this._oldPath=null,_get(_getPrototypeOf(StoragePromiseIORename.prototype),"_CleanUp",this).call(this)}}]),StoragePromiseIORename}(__r__(266));e.exports=a},{266:201,21:190,14:458}],222:[function(__r__,e,t){var n=__r__(21),i,s=function(e){_inherits(StoragePromiseIOWriter,e);var t=_createSuper(StoragePromiseIOWriter);function StoragePromiseIOWriter(){return _classCallCheck(this,StoragePromiseIOWriter),t.call(this)}return _createClass(StoragePromiseIOWriter,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(StoragePromiseIOWriter.prototype),"_Init",this).call(this),this._Bind(this._OnStorageWritten),this._Bind(this._OnStorageWrittenError)}},{key:"Process",value:function Process(){this._OnStart(),this._OnProgress(0),n.storageArea.local.set(_defineProperty({},this._operation.fullPath,this.rsc.raw)).then(this._OnStorageWritten).catch(this._OnStorageWrittenError)}},{key:"_OnStorageWrittenError",value:function _OnStorageWrittenError(e){this._OnError(e)}},{key:"_OnStorageWritten",value:function _OnStorageWritten(){this._OnProgress(1),this._OnSuccess()}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(StoragePromiseIOWriter.prototype),"_CleanUp",this).call(this)}}]),StoragePromiseIOWriter}(__r__(266));e.exports=s},{266:201,21:190}],223:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(18),a=__r__(289),l=function(e){_inherits(IOQueue,e);var t=_createSuper(IOQueue);function IOQueue(){return _classCallCheck(this,IOQueue),t.call(this)}return _createClass(IOQueue,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(IOQueue.prototype),"_Init",this).call(this),this._queue=new s.List,this._currentItem=null,this._running=!1,this._itemObserver=new i.signals.Observer,this._itemObserver.Hook(i.SIGNAL.FAIL,this._OnCurrentRscProcessingFailed,this),this._itemObserver.Hook(i.SIGNAL.COMPLETE,this._OnCurrentRscProcessingComplete,this)}},{key:"running",get:function get(){return this._running}},{key:"isEmpty",get:function get(){return this._queue.isEmpty}},{key:"currentItem",get:function get(){return this._currentItem},set:function set(e){if(this._currentItem!==e){var t=this._currentItem;this._currentItem=e,t&&this._itemObserver.Unobserve(t),e&&this._itemObserver.Observe(e)}}},{key:"Add",value:function Add(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==this._currentItem&&(t?this._queue.Unshift(e):this._queue.Add(e))}},{key:"Remove",value:function Remove(e){e!==this._currentItem&&this._queue.Remove(e)}},{key:"Bump",value:function Bump(e){var t=this._queue.internalArray;if(n.isInstanceOf(e,a)){var i=e;e=null;for(var s=0;s<t.length;s++){var l=t[s];if(l.operation==i){e=l;break}}}e&&this._queue.Unshift(e)}},{key:"ProcessNext",value:function ProcessNext(){this._running||(this._running=!0,this._currentItem=this._queue.Shift(),this._currentItem?(this._currentItem.Watch(i.SIGNAL.COMPLETE,this._OnCurrentItemComplete,this),this._currentItem.Validate()&&this._currentItem.Process()):this._running=!1)}},{key:"_OnCurrentItemComplete",value:function _OnCurrentItemComplete(e){this._running=!1,this.ProcessNext()}},{key:"_CleanUp",value:function _CleanUp(){this._queue.Clear(),_get(_getPrototypeOf(IOQueue.prototype),"_CleanUp",this).call(this)}}]),IOQueue}(i.pool.DisposableObjectEx);e.exports=l},{289:226,18:21,12:27,14:458}],224:[function(__r__,e,t){var n=function IO_SIGNAL(){_classCallCheck(this,IO_SIGNAL)};_defineProperty(n,"RSC_REGISTERED",Symbol("rscRegistered")),_defineProperty(n,"RSC_UNREGISTERED",Symbol("rscUnregistered")),_defineProperty(n,"READ_START",Symbol("readStart")),_defineProperty(n,"READ_ERROR",Symbol("readError")),_defineProperty(n,"READ_PROGRESS",Symbol("readProgress")),_defineProperty(n,"READ_COMPLETE",Symbol("readComplete")),_defineProperty(n,"WRITE_START",Symbol("writeStart")),_defineProperty(n,"WRITE_ERROR",Symbol("writeError")),_defineProperty(n,"WRITE_PROGRESS",Symbol("writeProgress")),_defineProperty(n,"WRITE_COMPLETE",Symbol("writeComplete")),_defineProperty(n,"RENAME_START",Symbol("renameStart")),_defineProperty(n,"RENAME_ERROR",Symbol("renameError")),_defineProperty(n,"RENAME_PROGRESS",Symbol("renameProgress")),_defineProperty(n,"RENAME_COMPLETE",Symbol("renameComplete")),_defineProperty(n,"DELETE_START",Symbol("deleteStart")),_defineProperty(n,"DELETE_ERROR",Symbol("deleteError")),_defineProperty(n,"DELETE_PROGRESS",Symbol("deleteProgress")),_defineProperty(n,"DELETE_COMPLETE",Symbol("deleteComplete")),_defineProperty(n,"RENAMED",Symbol("renamed")),e.exports=n},{}],225:[function(__r__,e,t){var n=function IO_TYPE(){_classCallCheck(this,IO_TYPE)};_defineProperty(n,"DEFAULT","default"),_defineProperty(n,"FETCH","fetch"),_defineProperty(n,"REMOTE","remote"),_defineProperty(n,"LOCAL_STORAGE","local-storage"),_defineProperty(n,"FILE_SYSTEM","file-system"),e.exports=n},{}],226:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=function(e){_inherits(ResourceOperation,e);var t=_createSuper(ResourceOperation);function ResourceOperation(){return _classCallCheck(this,ResourceOperation),t.call(this)}return _createClass(ResourceOperation,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ResourceOperation.prototype),"_Init",this).call(this),this._callbacks=new i.helpers.Callbacks,this._originalState=null,this._ioType=null,this._cancelled=!1,this._fullPath=null,this._important=!1,this._parallel=!1,this._Reset()}},{key:"rsc",get:function get(){return this._rsc},set:function set(e){n.isVoid(e)&&(e=this),this._rsc=e}},{key:"ioType",get:function get(){return this._ioType}},{key:"fullPath",get:function get(){return this._fullPath}},{key:"isImportant",get:function get(){return this._important}},{key:"isParallel",get:function get(){return this._parallel}},{key:"_Reset",value:function _Reset(){this._rsc=null,this._originalState=null,this._callbacks.Clear(),this._states=null,this._ioType=null,this._fullPath=null,this._important=!1,this._parallel=!1}},{key:"Prepare",value:function Prepare(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this._cancelled=!1,this._rsc=e,this._fullPath=n.PATH.FULL(e.path),this._ioType=n.tils.Get(s,"io",null),this._callbacks.Add(s),this._states=i,this._originalState=this._rsc._state.currentState,this._rsc._state.currentState=this._states.prepare.state,this._important=n.tils.Get(s,"important",!1),this._parallel=n.tils.Get(s,"parallel",!1),a.unshift(this),t.apply(null,a)}},{key:"Cancel",value:function Cancel(){this._cancelled=!0,this._rsc._state.currentState=this._originalState,this.OnEnd()}},{key:"OnStart",value:function OnStart(){if(this._rsc._state.currentState=this._states.start,this._rsc._Broadcast(this._states.start.evt,this._rsc),this._states.start.fn)try{this._states.start.fn()}catch(e){return void this.OnError(e)}}},{key:"OnError",value:function OnError(e){this._states.error.fn&&this._states.error.fn(),this._rsc._state.currentState=this._states.error.state,e.rsc=this._rsc,this._callbacks.OnError(e).Clear(),this._rsc._Broadcast(this._states.error.evt,this._rsc,e),this.OnEnd()}},{key:"OnProgress",value:function OnProgress(e){if(this._states.progress.fn)try{this._states.progress.fn()}catch(e){return void this.OnError(e)}this._rsc._state.currentState=this._states.progress.state,this._rsc._Broadcast(this._states.progress.evt,this._rsc,e)}},{key:"OnSuccess",value:function OnSuccess(){if(this._states.success.fn)try{this._states.success.fn()}catch(e){return void this.OnError(e)}this._rsc._state.currentState=this._states.success.state,this._callbacks.OnSuccess(this._rsc).Clear(),this._rsc._Broadcast(this._states.success.evt,this._rsc),this.OnEnd()}},{key:"OnEnd",value:function OnEnd(){this._rsc._operation===this&&(this._rsc._operation=null),this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this._Reset(),_get(_getPrototypeOf(ResourceOperation.prototype),"_CleanUp",this).call(this)}}]),ResourceOperation}(i.pool.DisposableObjectEx);e.exports=s},{12:27,14:458}],227:[function(__r__,e,t){var n,i=function(e){_inherits(RESSOURCE_STATE,e);var t=_createSuper(RESSOURCE_STATE);function RESSOURCE_STATE(){return _classCallCheck(this,RESSOURCE_STATE),t.call(this)}return _createClass(RESSOURCE_STATE,null,[{key:"NONE",get:function get(){return RESSOURCE_STATE.GetOrCreate("none")}},{key:"READ_PENDING",get:function get(){return RESSOURCE_STATE.GetOrCreate("read-pending")}},{key:"READING",get:function get(){return RESSOURCE_STATE.GetOrCreate("reading")}},{key:"WRITE_PENDING",get:function get(){return RESSOURCE_STATE.GetOrCreate("write-pending")}},{key:"WRITING",get:function get(){return RESSOURCE_STATE.GetOrCreate("writing")}},{key:"RENAME_PENDING",get:function get(){return RESSOURCE_STATE.GetOrCreate("rename-pending")}},{key:"RENAMING",get:function get(){return RESSOURCE_STATE.GetOrCreate("renaming")}},{key:"DELETE_PENDING",get:function get(){return RESSOURCE_STATE.GetOrCreate("delete-pending")}},{key:"DELETING",get:function get(){return RESSOURCE_STATE.GetOrCreate("deleting")}},{key:"READY",get:function get(){return RESSOURCE_STATE.GetOrCreate("ready")}}]),RESSOURCE_STATE}(__r__(12).helpers.StateBase);e.exports=i},{12:27}],228:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(290),a=__r__(291),l=__r__(289),c=__r__(292),u=function(e){_inherits(Resource,e);var t=_createSuper(Resource);function Resource(){return _classCallCheck(this,Resource),t.call(this)}return _createClass(Resource,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Resource.prototype),"_Init",this).call(this),this._name=null,this._path=null,this._mime=null,this._type=this.constructor.__defaultType,this._encoding=null,this._stats=null,this._exists=!1,this._loaded=!1,this._raw=null,this._content=null,this._directory=null,this._readFn=null,this._writeFn=null,this._deleteFn=null,this._renameFn=null,this._commitRnFn=null,this._deserializeFn=null,this._serializeFn=null,this._state=new i.helpers.StateMachine,this._state.currentState=a.NONE,this._state.owner=this,this._operation=null,this._releaseOnDeleteSuccess=!1,this._readOperationConfig={prepare:{state:a.READ_PENDING},start:{state:a.READING,evt:s.READ_START},progress:{state:a.READING,evt:s.READ_PROGRESS},error:{state:a.NONE,evt:s.READ_ERROR},success:{state:a.READY,evt:s.READ_COMPLETE,fn:this._Bind(this._OnReadSuccess)}},this._writeOperationConfig={prepare:{state:a.WRITE_PENDING},start:{state:a.WRITING,evt:s.WRITE_START,fn:this._Bind(this._OnWriteStart)},progress:{state:a.WRITING,evt:s.WRITE_PROGRESS},error:{state:a.NONE,evt:s.WRITE_ERROR},success:{state:a.READY,evt:s.WRITE_COMPLETE}},this._renameOperationConfig={prepare:{state:a.RENAME_PENDING},start:{state:a.RENAMING,evt:s.RENAME_START},progress:{state:a.RENAMING,evt:s.RENAME_PROGRESS},error:{state:a.NONE,evt:s.RENAME_ERROR},success:{state:a.READY,evt:s.RENAME_COMPLETE}},this._deleteOperationConfig={prepare:{state:a.DELETE_PENDING},start:{state:a.DELETING,evt:s.DELETE_START},progress:{state:a.DELETING,evt:s.DELETE_PROGRESS},error:{state:a.NONE,evt:s.DELETE_ERROR},success:{state:a.READY,evt:s.DELETE_COMPLETE,fn:this._Bind(this._OnDeleteSuccess)}}}},{key:"loaded",get:function get(){return this._loaded}},{key:"directory",get:function get(){return this._directory},set:function set(e){if(this._directory!==e){var t=this._directory;this._directory=e,this._OnDirectoryChanged(t)}}},{key:"_OnDirectoryChanged",value:function _OnDirectoryChanged(e){e&&e.Remove(this),this._directory&&this._directory.Add(this)}},{key:"isDir",get:function get(){return!1}},{key:"name",get:function get(){return this._name}},{key:"path",get:function get(){return this._path},set:function set(e){if(this._path)throw new Error("Attempting to change the already set path of an rsc. Use Rename instead.");this._path=e,this._UpdatePathInfos()}},{key:"mime",get:function get(){return this._mime},set:function set(e){this._mime=e}},{key:"type",get:function get(){return this._type},set:function set(e){this._type=e}},{key:"encoding",get:function get(){return this._encoding},set:function set(e){this._encoding=e}},{key:"state",get:function get(){return this._state.currentState}},{key:"stats",get:function get(){return this._stats},set:function set(e){this._stats=e}},{key:"exists",get:function get(){return this._exists},set:function set(e){this._exists=e}},{key:"_UpdatePath",value:function _UpdatePath(e){var t=this._path;this._path=e,this._UpdatePathInfos(),this._commitRnFn(this,t),this._OnPathUpdated(t),this._Broadcast(s.RENAMED,this,t)}},{key:"_OnPathUpdated",value:function _OnPathUpdated(e){}},{key:"_UpdatePathInfos",value:function _UpdatePathInfos(){try{this._name=n.PATH.name(new URL(n.PATH.FULL(this._path)).pathname)}catch(e){this._name=n.PATH.name(this._path)}this._mime||(this._mime=n.MIME.Get(n.PATH.ext(this._path)))}},{key:"raw",get:function get(){return this._raw},set:function set(e){this._raw=e}},{key:"content",get:function get(){return this._content},set:function set(e){this._content=e}},{key:"_PrepareOperation",value:function _PrepareOperation(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._state.IsNotAny(a.NONE,a.READY))return console.warn("Resource ".concat(this," not in a state allowing operation")),!1;this._operation=i.Rent(l);for(var s=arguments.length,c=new Array(s>3?s-3:0),u=3;u<s;u++)c[u-3]=arguments[u];return this._operation.Prepare(this,e,t,n,c),!0}},{key:"CancelOperation",value:function CancelOperation(){this._operation&&this._operation.Cancel()}},{key:"Read",value:function Read(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._PrepareOperation(this._readFn,this._readOperationConfig,e)}},{key:"_OnReadSuccess",value:function _OnReadSuccess(){this._loaded=!0,this._content=this._Decode()}},{key:"_Decode",value:function _Decode(){if(!this._deserializeFn)throw new Error("Deserialize not implemented in resource. If you don't use a serializer, make sure to set Resource._deserializeFn.");return this._deserializeFn(this._raw,this)}},{key:"Write",value:function Write(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._PrepareOperation(this._writeFn,this._writeOperationConfig,e)}},{key:"_OnWriteStart",value:function _OnWriteStart(){this._raw=this._Encode()}},{key:"_Encode",value:function _Encode(){if(!this._serializeFn)throw new Error("Serialize not implemented in resource. If you don't use a serializer, make sure to set Resource._serializeFn.");return this._serializeFn(this._content,this)}},{key:"Rename",value:function Rename(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._PrepareOperation(this._renameFn,this._renameOperationConfig,t,e)}},{key:"Delete",value:function Delete(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._PrepareOperation(this._deleteFn,this._deleteOperationConfig,e)}},{key:"DeleteAndRelease",value:function DeleteAndRelease(){return this._releaseOnDeleteSuccess=!0,this._PrepareOperation(this._deleteFn,this._deleteOperationConfig,p_options)}},{key:"_OnDeleteSuccess",value:function _OnDeleteSuccess(){n.isInstanceOf(this._content,i.pool.DisposableObject)&&this._content.Release(),this._content=null,this._raw=null,this._loaded=!1,this._releaseOnDeleteSuccess&&this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this._operation&&this.CancelOperation(),this._operation=null,this._name=null,this._path=null,this._mime=null,this._type=this.constructor.defaultType,this._encoding=null,this._stats=null,this._exists=!1,this._loaded=!1,this._raw=null,this._content=null,this._readFn=null,this._writeFn=null,this._readFn=null,this._writeFn=null,this._deleteFn=null,this._renameFn=null,this._commitRnFn=null,this._deserializeFn=null,this._serializeFn=null,this._releaseOnDeleteSuccess=!1,this._state.currentState=a.NONE,_get(_getPrototypeOf(Resource.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"[".concat(this.constructor.name,"::").concat(this.path,"]")}}]),Resource}(i.pool.DisposableObjectEx);_defineProperty(u,"__defaultType",c.TEXT),e.exports=u},{290:224,289:226,291:227,292:235,12:27,14:458}],229:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(18),a=__r__(20),l=__r__(21),c=__r__(293),u=__r__(294),h=__r__(295),d=__r__(265),p=__r__(296),m=__r__(297),y=__r__(298),g=__r__(289),v=__r__(299),k=__r__("axios"),O=function(e){_inherits(RESOURCES,e);var t=_createSuper(RESOURCES);function RESOURCES(){return _classCallCheck(this,RESOURCES),t.call(this)}return _createClass(RESOURCES,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(RESOURCES.prototype),"_Init",this).call(this),this._resources=new s.Dictionary,this._IOStatCheck=this._GetStats;var e=__r__(300);this._io={},this._io[y.DEFAULT]={read:e.HTTPIOReader,write:e.HTTPIOWriter,rename:e.HTTPIORename,delete:e.HTTPIODelete},this._io[y.REMOTE]={read:e.HTTPIOReader,write:e.HTTPIOWriter,rename:e.HTTPIORename,delete:e.HTTPIODelete},this._io[y.FETCH]={read:e.FetchIOReader,write:e.FetchIOWriter,rename:e.FetchIORename,delete:e.FetchIODelete},l.isExtension?l.isChromium?this._io[y.LOCAL_STORAGE]={read:e.StorageIOReader,write:e.StorageIOWriter,rename:e.StorageIORename,delete:e.StorageIODelete}:this._io[y.LOCAL_STORAGE]={read:e.StoragePromiseIOReader,write:e.StoragePromiseIOWriter,rename:e.StoragePromiseIORename,delete:e.StoragePromiseIODelete}:this._io[y.LOCAL_STORAGE]={read:e.LocalStorageIOReader,write:e.LocalStorageIOWriter,rename:e.LocalStorageIORename,delete:e.LocalStorageIODelete},k.defaults.withCredentials=!0,this._IOQueue=new m,this._Bind(this._RequestRead),this._Bind(this._RequestWrite),this._Bind(this._RequestDelete),this._Bind(this._RequestRename),this._Bind(this._CommitRename),this._Bind(this._RequestRsc)}},{key:"_GetStats",value:function _GetStats(e,t){return null}},{key:"_TryGet",value:function _TryGet(e){return this._resources.Get(n.PATH.SHORT(e))}},{key:"_Get",value:function _Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=n.PATH.SHORT(e),a=this._resources.Get(s),l=n.tils.Get(t,"cl",null),c=null,h=n.PATH.FULL(e);if(a){if(l&&!n.isInstanceOf(a,l))throw new Error("Attempting to get an existing resource (".concat(a.constructor.name,") with a mismatching type(").concat(l.name,")"));return a}try{c=this._GetStats(h)}catch(e){c=null}if(c)if(c.isDirectory()){if(l&&!n.isInstanceOf(l,p))throw new Error("Directory cannot be assigned Resource constructor (".concat(l.name,")"));l||(l=p)}else l||(l=d);else l||(l=d);return(a=i.Rent(l)).path=s,a.encoding=n.tils.Get(t,"encoding",u.UTF8),a.type=n.tils.Get(t,"type",a.type),a.stats=c,a.exists=null!=c,this._RegisterRsc(a),a}},{key:"_RegisterRsc",value:function _RegisterRsc(e){e._readFn=this._RequestRead,e._writeFn=this._RequestWrite,e._deleteFn=this._RequestDelete,e._renameFn=this._RequestRename,e._commitRnFn=this._CommitRename,e.isDir&&(e._requestRsc=this._RequestRsc),e.Watch(i.SIGNAL.RELEASED,this._OnRscReleased,this),this._resources.Set(e.path,e);var t=n.PATH.dir(e.path),s=this._resources.Get(t);s&&s!=e&&s.Add(e),this._Broadcast(c.RSC_REGISTERED,e)}},{key:"_IOID",value:function _IOID(e,t){return n.isEmpty(e)||!(e in this._io)?y.DEFAULT:e}},{key:"_RequestRead",value:function _RequestRead(e){var t=i.Rent(this._io[this._IOID(e.ioType,e)].read);t.operation=e,this._PushIOProcess(t)}},{key:"_RequestWrite",value:function _RequestWrite(e){var t=i.Rent(this._io[this._IOID(e.ioType,e)].write);t.operation=e,this._PushIOProcess(t)}},{key:"_RequestDelete",value:function _RequestDelete(e){var t=i.Rent(this._io[this._IOID(e.ioType,e)].delete);t.operation=e,this._PushIOProcess(t)}},{key:"_RequestRename",value:function _RequestRename(e,t){var n=i.Rent(this._io[this._IOID(e.ioType,e)].rename);n.operation=e,n.targetPath=t,this._PushIOProcess(n)}},{key:"_PushIOProcess",value:function _PushIOProcess(e){e._globalResourceMap=this._resources,e.operation.isParallel?e.Process():(this._IOQueue.Add(e,e.operation.isImportant),this._tick.Schedule())}},{key:"_BumpOperation",value:function _BumpOperation(e){this._IOQueue.Bump(e)}},{key:"_CommitRename",value:function _CommitRename(e,t){this._resources.Remove(t);var i=e.path;this._resources.Set(i,e);var s=n.PATH.dir(i),a=this._resources.Get(s);a?e.directory=a:e.directory&&(e.directory=null)}},{key:"_RequestRsc",value:function _RequestRsc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._Get(e,t,n)}},{key:"_OnRscReleased",value:function _OnRscReleased(e){this._resources.Remove(e.path),this._Broadcast(c.RSC_UNREGISTERED,e)}},{key:"_Tick",value:function _Tick(e){_get(_getPrototypeOf(RESOURCES.prototype),"_Tick",this).call(this,e),this._UpdateQueue(this._IOQueue)}},{key:"_UpdateQueue",value:function _UpdateQueue(e){e.isEmpty||this._tick.Schedule(),e.running||e.isEmpty||e.ProcessNext()}}],[{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.instance._Get(e,t)}},{key:"GetAndRead",value:function GetAndRead(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.instance._Get(e,t);return i.Read(n),i}},{key:"TryGet",value:function TryGet(e){return this.instance._TryGet(e)}},{key:"GetDir",value:function GetDir(e){return this.instance._Get(e,{cl:p})}}]),RESOURCES}(a.ServiceBase);e.exports=O},{296:199,294:200,299:201,300:210,297:223,293:224,298:225,265:228,289:226,295:235,18:21,12:27,21:190,20:267,14:458,axios:236}],230:[function(__r__,e,t){e.exports={BinaryResource:__r__(301),BlobResource:__r__(302),TextResource:__r__(303),JSONResource:__r__(304)}},{301:231,302:232,304:233,303:234}],231:[function(__r__,e,t){var n=__r__(305),i=__r__(306),s=function(e){_inherits(BinaryResource,e);var t=_createSuper(BinaryResource);function BinaryResource(){return _classCallCheck(this,BinaryResource),t.call(this)}return BinaryResource}(n);_defineProperty(s,"__defaultType",i.ARRAYBUFFER),e.exports=s},{305:228,306:235}],232:[function(__r__,e,t){var n=__r__(14),i=__r__(301),s=__r__(306),a=function(e){_inherits(BlobResource,e);var t=_createSuper(BlobResource);function BlobResource(){return _classCallCheck(this,BlobResource),t.call(this)}return _createClass(BlobResource,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(BlobResource.prototype),"_Init",this).call(this),this._objectURL=null}},{key:"objectURL",get:function get(){return this._objectURL||(this._objectURL=URL.createObjectURL(this._content)),this._objectURL}},{key:"_Encode",value:function _Encode(){return n.isInstanceOf(this._content,Blob)?this._content:this._mime?new Blob([this._content],{type:this._mime.type}):new Blob([this._content])}},{key:"_Decode",value:function _Decode(){return this._objectURL&&URL.revokeObjectURL(this._objectURL),this._objectURL=null,n.isInstanceOf(this._raw,Blob)?this._raw:this._mime?new Blob([this._raw],{type:this._mime.type}):new Blob([this._raw])}},{key:"_CleanUp",value:function _CleanUp(){this._objectURL&&(URL.revokeObjectURL(this._objectURL),this._objectURL=null),_get(_getPrototypeOf(BlobResource.prototype),"_CleanUp",this).call(this)}}]),BlobResource}(i);_defineProperty(a,"__defaultType",s.BLOB),e.exports=a},{306:235,301:231,14:458}],233:[function(__r__,e,t){var n=__r__(14),i=__r__(303),s=__r__(306),a=function(e){_inherits(JSONResource,e);var t=_createSuper(JSONResource);function JSONResource(){return _classCallCheck(this,JSONResource),t.call(this)}return _createClass(JSONResource,[{key:"_Encode",value:function _Encode(){return n.isObject(this._content)?JSON.stringify(this._content,null,"     "):"{}"}},{key:"_Decode",value:function _Decode(){if(n.isObject(this._raw))return this._raw;if(n.isString(this._raw))return JSON.parse(this._raw);var e=_get(_getPrototypeOf(JSONResource.prototype),"_Decode",this).call(this);return n.isObject(e)?e:n.isString(e)?n.isEmpty(e)?{}:JSON.parse(_get(_getPrototypeOf(JSONResource.prototype),"_Decode",this).call(this)):void 0}}]),JSONResource}(i);_defineProperty(a,"__defaultType",s.JSON),e.exports=a},{306:235,303:234,14:458}],234:[function(__r__,e,t){var n=__r__(14),i=__r__(305),s=__r__(306),a=function(e){_inherits(TextResource,e);var t=_createSuper(TextResource);function TextResource(){return _classCallCheck(this,TextResource),t.call(this)}return _createClass(TextResource,[{key:"_Encode",value:function _Encode(){return this._content?this._content:""}},{key:"_Decode",value:function _Decode(){if(n.isString(this._raw))return this._raw;var e;if(n.isArrayBuffer(this._raw))return new TextDecoder(this._encoding).decode(ArrayBuffer.isView(this._raw)?this._raw:new DataView(this._raw,0));try{var t=new FileReaderSync;return n.isInstanceOf(this._raw,Blob)?t.readAsString(this._raw,this._encoding):""}catch(e){return""}}}]),TextResource}(i);_defineProperty(a,"__defaultType",s.TEXT),e.exports=a},{305:228,306:235,14:458}],235:[function(__r__,e,t){var n=function RESPONSE_TYPE(){_classCallCheck(this,RESPONSE_TYPE)};_defineProperty(n,"TEXT","text"),_defineProperty(n,"ARRAYBUFFER","arraybuffer"),_defineProperty(n,"BLOB","blob"),_defineProperty(n,"DOCUMENT","document"),_defineProperty(n,"JSON","json"),e.exports=n},{}],236:[function(__r__,e,t){e.exports=__r__(307)},{307:238}],237:[function(__r__,e,t){var n=__r__(308),i=__r__(309),s=__r__(310),a=__r__(311),l=__r__(312),c=__r__(313),u=__r__(314),h=__r__(315);e.exports=function xhrAdapter(e){return new Promise((function dispatchXhrRequest(t,d){var p=e.data,m=e.headers;n.isFormData(p)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(g+":"+v)}var k=l(e.baseURL,e.url);if(y.open(e.method.toUpperCase(),a(k,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,y.onreadystatechange=function handleLoad(){if(y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,s,a={data:e.responseType&&"text"!==e.responseType?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y};i(t,d,a),y=null}},y.onabort=function handleAbort(){y&&(d(h("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function handleError(){d(h("Network Error",e,null,y)),y=null},y.ontimeout=function handleTimeout(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),d(h(t,e,"ECONNABORTED",y)),y=null},n.isStandardBrowserEnv()){var O=(e.withCredentials||u(k))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;O&&(m[e.xsrfHeaderName]=O)}if("setRequestHeader"in y&&n.forEach(m,(function setRequestHeader(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),e.responseType)try{y.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function onCanceled(e){y&&(y.abort(),d(e),y=null)})),p||(p=null),y.send(p)}))}},{312:244,315:245,309:249,311:253,310:255,314:258,313:260,308:262}],238:[function(__r__,e,t){var n=__r__(316),i=__r__(317),s=__r__(318),a=__r__(319),l;function createInstance(e){var t=new s(e),a=i(s.prototype.request,t);return n.extend(a,s.prototype,t),n.extend(a,t),a}var c=createInstance(__r__(320));c.Axios=s,c.create=function create(e){return createInstance(a(c.defaults,e))},c.Cancel=__r__(321),c.CancelToken=__r__(322),c.isCancel=__r__(323),c.all=function all(e){return Promise.all(e)},c.spread=__r__(324),c.isAxiosError=__r__(325),e.exports=c,e.exports.default=c},{321:239,322:240,323:241,318:242,319:248,320:251,317:252,325:257,324:261,316:262}],239:[function(__r__,e,t){function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,e.exports=Cancel},{}],240:[function(__r__,e,t){var n=__r__(326);function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function promiseExecutor(e){t=e}));var i=this;e((function cancel(e){i.reason||(i.reason=new n(e),t(i.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e,t;return{token:new CancelToken((function executor(t){e=t})),cancel:e}},e.exports=CancelToken},{326:239}],241:[function(__r__,e,t){e.exports=function isCancel(e){return!(!e||!e.__CANCEL__)}},{}],242:[function(__r__,e,t){var n=__r__(308),i=__r__(327),s=__r__(328),a=__r__(329),l=__r__(330);function Axios(e){this.defaults=e,this.interceptors={request:new s,response:new s}}Axios.prototype.request=function request(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function unshiftRequestInterceptors(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function pushResponseInterceptors(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Axios.prototype.getUri=function getUri(e){return e=l(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function forEachMethodNoData(e){Axios.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}})),n.forEach(["post","put","patch"],(function forEachMethodWithData(e){Axios.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}})),e.exports=Axios},{327:253,308:262,328:243,329:246,330:248}],243:[function(__r__,e,t){var n=__r__(308);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){n.forEach(this.handlers,(function forEachHandler(t){null!==t&&e(t)}))},e.exports=InterceptorManager},{308:262}],244:[function(__r__,e,t){var n=__r__(331),i=__r__(332);e.exports=function buildFullPath(e,t){return e&&!n(t)?i(e,t):t}},{332:254,331:256}],245:[function(__r__,e,t){var n=__r__(333);e.exports=function createError(e,t,i,s,a){var l=new Error(e);return n(l,t,i,s,a)}},{333:247}],246:[function(__r__,e,t){var n=__r__(308),i=__r__(334),s=__r__(335),a=__r__(336);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function dispatchRequest(e){var t;return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function onAdapterRejection(t){return s(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},{335:241,336:251,308:262,334:250}],247:[function(__r__,e,t){e.exports=function enhanceError(e,t,n,i,s){return e.config=t,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},{}],248:[function(__r__,e,t){var n=__r__(219);e.exports=function mergeConfig(e,t){t=t||{};var i={},s=["url","method","data"],a=["headers","auth","proxy","params"],l=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function getMergedValue(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function mergeDeepProperties(s){n.isUndefined(t[s])?n.isUndefined(e[s])||(i[s]=getMergedValue(void 0,e[s])):i[s]=getMergedValue(e[s],t[s])}n.forEach(s,(function valueFromConfig2(e){n.isUndefined(t[e])||(i[e]=getMergedValue(void 0,t[e]))})),n.forEach(a,mergeDeepProperties),n.forEach(l,(function defaultToConfig2(s){n.isUndefined(t[s])?n.isUndefined(e[s])||(i[s]=getMergedValue(void 0,e[s])):i[s]=getMergedValue(void 0,t[s])})),n.forEach(c,(function merge(n){n in t?i[n]=getMergedValue(e[n],t[n]):n in e&&(i[n]=getMergedValue(void 0,e[n]))}));var u=s.concat(a).concat(l).concat(c),h=Object.keys(e).concat(Object.keys(t)).filter((function filterAxiosKeys(e){return-1===u.indexOf(e)}));return n.forEach(h,mergeDeepProperties),i}},{219:262}],249:[function(__r__,e,t){var n=__r__(337);e.exports=function settle(e,t,i){var s=i.config.validateStatus;i.status&&s&&!s(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},{337:245}],250:[function(__r__,e,t){var n=__r__(308);e.exports=function transformData(e,t,i){return n.forEach(i,(function transform(n){e=n(e,t)})),e}},{308:262}],251:[function(__r__,e,t){(function(t){(function(){var n=__r__(316),i=__r__(338),s={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=__r__(339):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(e=__r__(340)),e}var a={adapter:getDefaultAdapter(),transformRequest:[function transformRequest(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function transformResponse(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function forEachMethodNoData(e){a.headers[e]={}})),n.forEach(["post","put","patch"],(function forEachMethodWithData(e){a.headers[e]=n.merge(s)})),e.exports=a}).call(this)}).call(this,__r__("_process"))},{340:237,339:237,338:259,316:262,_process:63}],252:[function(__r__,e,t){e.exports=function bind(e,t){return function wrap(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},{}],253:[function(__r__,e,t){var n=__r__(308);function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(n.isURLSearchParams(t))s=t.toString();else{var a=[];n.forEach(t,(function serialize(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function parseValue(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(encode(t)+"="+encode(e))})))})),s=a.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},{308:262}],254:[function(__r__,e,t){e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],255:[function(__r__,e,t){var n=__r__(308);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,i,s,a,l){var c=[];c.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),n.isString(s)&&c.push("path="+s),n.isString(a)&&c.push("domain="+a),!0===l&&c.push("secure"),document.cookie=c.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},{308:262}],256:[function(__r__,e,t){e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],257:[function(__r__,e,t){e.exports=function isAxiosError(e){return"object"===_typeof(e)&&!0===e.isAxiosError}},{}],258:[function(__r__,e,t){var n=__r__(308);e.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function resolveURL(n){var i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return i=resolveURL(window.location.href),function isURLSameOrigin(e){var t=n.isString(e)?resolveURL(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function isURLSameOrigin(){return!0}},{308:262}],259:[function(__r__,e,t){var n=__r__(219);e.exports=function normalizeHeaderName(e,t){n.forEach(e,(function processHeader(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},{219:262}],260:[function(__r__,e,t){var n=__r__(308),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t={},s,a,l;return e?(n.forEach(e.split("\n"),(function parser(e){if(l=e.indexOf(":"),s=n.trim(e.substr(0,l)).toLowerCase(),a=n.trim(e.substr(l+1)),s){if(t[s]&&i.indexOf(s)>=0)return;t[s]="set-cookie"===s?(t[s]?t[s]:[]).concat([a]):t[s]?t[s]+", "+a:a}})),t):t}},{308:262}],261:[function(__r__,e,t){e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},{}],262:[function(__r__,e,t){var n=__r__(317),i=Object.prototype.toString;function isArray(e){return"[object Array]"===i.call(e)}function isUndefined(e){return void 0===e}function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===i.call(e)}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return null!==e&&"object"===_typeof(e)}function isPlainObject(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function isDate(e){return"[object Date]"===i.call(e)}function isFile(e){return"[object File]"===i.call(e)}function isBlob(e){return"[object Blob]"===i.call(e)}function isFunction(e){return"[object Function]"===i.call(e)}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if("object"!==_typeof(e)&&(e=[e]),isArray(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}function merge(){var e={};function assignValue(t,n){isPlainObject(e[n])&&isPlainObject(t)?e[n]=merge(e[n],t):isPlainObject(t)?e[n]=merge({},t):isArray(t)?e[n]=t.slice():e[n]=t}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],assignValue);return e}function extend(e,t,i){return forEach(t,(function assignValue(t,s){e[s]=i&&"function"==typeof t?n(t,i):t})),e}function stripBOM(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM}},{317:252}],263:[function(__r__,e,t){e.exports={LOC:__r__(341)}},{341:264}],264:[function(__r__,e,t){},{}],265:[function(__r__,e,t){e.exports={METRICS:__r__(342)}},{342:266}],266:[function(__r__,e,t){var n,i=function(e){_inherits(METRICS,e);var t=_createSuper(METRICS);function METRICS(){return _classCallCheck(this,METRICS),t.call(this)}return _createClass(METRICS,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(METRICS.prototype),"_Init",this).call(this)}},{key:"InitializeAndStart",value:function InitializeAndStart(){}}]),METRICS}(__r__(20).ServiceBase);e.exports=i},{20:267}],267:[function(__r__,e,t){e.exports={SIGNAL:__r__(47),SERVICE_STATE:__r__(343),ServiceBase:__r__(344),ServicesManager:__r__(345)}},{344:268,343:269,345:270,47:271}],268:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(346),a=function(e){_inherits(ServiceBase,e);var t=_createSuper(ServiceBase);function ServiceBase(){return _classCallCheck(this,ServiceBase),t.call(this)}return _createClass(ServiceBase,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ServiceBase.prototype),"_Init",this).call(this),this._initialized=!1,this._started=!1,this._running=!1,this._tick=new i.time.DelayedCall(this._Bind(this._Tick))}},{key:"Initialize",value:function Initialize(){this._initialized||(s.instance.Register(this),this._initialized=!0)}},{key:"InitializeAndStart",value:function InitializeAndStart(){this.Initialize(),this.Start()}},{key:"started",get:function get(){return this._started}},{key:"running",get:function get(){return this._running}},{key:"Start",value:function Start(){return this._initialized?!this._started&&(this._started=!0,n.LOG._("STARTED :· ".concat(this.constructor.name),"#add800","#2e3a00"),!0):(console.error("Attempting to start a service (".concat(this.constructor.name,") that hasn't been initialized yet.")),!1)}},{key:"Stop",value:function Stop(){this._started&&(this._started=!1,n.LOG._("STOPPED :: ".concat(this.constructor.name),"#ef8700","#492900"))}},{key:"Restart",value:function Restart(){}},{key:"_Tick",value:function _Tick(e){}}]),ServiceBase}(i.helpers.SingletonEx);e.exports=a},{346:270,12:27,14:458}],269:[function(__r__,e,t){var n,i=function(e){_inherits(SERVICE_STATE,e);var t=_createSuper(SERVICE_STATE);function SERVICE_STATE(){return _classCallCheck(this,SERVICE_STATE),t.call(this)}return _createClass(SERVICE_STATE,null,[{key:"UNINITIALIZED",get:function get(){return SERVICE_STATE.GetOrCreate("uninitialized")}},{key:"INITIALIZING",get:function get(){return SERVICE_STATE.GetOrCreate("initializing")}},{key:"INITIALIZED",get:function get(){return SERVICE_STATE.GetOrCreate("initialized")}},{key:"STARTING",get:function get(){return SERVICE_STATE.GetOrCreate("starting")}},{key:"STARTED",get:function get(){return SERVICE_STATE.GetOrCreate("started")}},{key:"STOPPING",get:function get(){return SERVICE_STATE.GetOrCreate("stopping")}},{key:"STOPPED",get:function get(){return SERVICE_STATE.GetOrCreate("stopped")}}]),SERVICE_STATE}(__r__(12).helpers.StateBase);e.exports=i},{12:27}],270:[function(__r__,e,t){var n=__r__(18),i,s=function(e){_inherits(ServicesManager,e);var t=_createSuper(ServicesManager);function ServicesManager(){return _classCallCheck(this,ServicesManager),t.call(this)}return _createClass(ServicesManager,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ServicesManager.prototype),"_Init",this).call(this),this._services=new n.List}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(ServicesManager.prototype),"_PostInit",this).call(this)}},{key:"Boot",value:function Boot(){}},{key:"Register",value:function Register(e){this._services.Add(e.constructor)}}]),ServicesManager}(__r__(12).helpers.SingletonEx);e.exports=s},{18:21,12:27}],271:[function(__r__,e,t){var n=__r__(347),i=function(){function SIGNAL(){_classCallCheck(this,SIGNAL)}return _createClass(SIGNAL,null,[{key:"UNINITIALIZED",get:function get(){return n.UNINITIALIZED}},{key:"INITIALIZING",get:function get(){return n.INITIALIZING}},{key:"INITIALIZED",get:function get(){return n.INITIALIZED}},{key:"STARTING",get:function get(){return n.STARTING}},{key:"STARTED",get:function get(){return n.STARTED}},{key:"STOPPING",get:function get(){return n.STOPPING}},{key:"STOPPED",get:function get(){return n.STOPPED}}]),SIGNAL}();e.exports=i},{347:269}],272:[function(__r__,e,t){var n=__r__(348),i=__r__(349);e.exports={FONT_FLAG:__r__(350),colors:__r__(351),CSS:n,STYLE:i,Palette:__r__(352),PaletteBuilder:__r__(353),Extends:n.Extends.bind(n),URLTheme:function URLTheme(e){return i.instance.current.URLTheme(e)},URLAssets:function URLAssets(e){return i.instance.current.URLAssets(e)},URLImgs:function URLImgs(e){return i.instance.current.URLImgs(e)}}},{351:276,348:278,350:280,352:282,353:281,349:283}],273:[function(__r__,e,t){var n=function ColorBase(){_classCallCheck(this,ColorBase)};e.exports=n},{}],274:[function(__r__,e,t){var n=__r__(354),i=__r__(355),s=function(){function COLOR(){_classCallCheck(this,COLOR)}return _createClass(COLOR,null,[{key:"HSLA",value:function HSLA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:360,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new n(e,t,i,s)}},{key:"RGBA",value:function RGBA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:255,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new i(e,t,n,s)}},{key:"RGBAtoHSLA",value:function RGBAtoHSLA(e){var t=e.r,i=e.g,s=e.b,a=Math.min(t,i,s),l=Math.max(t,i,s),c=l-a,u=0,h=0,d=0;return u=0===c?0:l===t?(i-s)/c%6:l===i?(s-t)/c+2:(t-i)/c+4,(u=Math.round(60*u))<0&&(u+=360),d=(l+a)/2,h=+(100*(h=0===c?0:c/(1-Math.abs(2*d-1)))).toFixed(1),d=+(100*d).toFixed(1),new n(u,h,d,e.a)}},{key:"HSLAtoRGBA",value:function HSLAtoRGBA(e){var t=e.h,n=e.s,s=e.l,a=(1-Math.abs(2*s-1))*n,l=a*(1-Math.abs(t/60%2-1)),c=s-a/2,u=0,h=0,d=0;return 0<=t&&t<60?(u=a,h=l,d=0):60<=t&&t<120?(u=l,h=a,d=0):120<=t&&t<180?(u=0,h=a,d=l):180<=t&&t<240?(u=0,h=l,d=a):240<=t&&t<300?(u=l,h=0,d=a):300<=t&&t<360&&(u=a,h=0,d=l),u=Math.round(255*(u+c)),h=Math.round(255*(h+c)),d=Math.round(255*(d+c)),new i(u,h,d,e.a)}}]),COLOR}();e.exports=s},{354:275,355:277}],275:[function(__r__,e,t){var n,i=function(e){_inherits(HSLA,e);var t=_createSuper(HSLA);function HSLA(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,HSLA),(e=t.call(this))._H=n,e._S=i,e._L=s,e._a=a,e}return _createClass(HSLA,[{key:"Set",value:function Set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this._H=e,this._S=t,this._L=n,this._a=i,this}},{key:"H",get:function get(){return this._H},set:function set(e){this._H=e}},{key:"h",get:function get(){return this._H/360},set:function set(e){this._H=360*e}},{key:"S",get:function get(){return this._S},set:function set(e){this._S=e}},{key:"s",get:function get(){return this._S/100},set:function set(e){this._S=100*e}},{key:"L",get:function get(){return this._L},set:function set(e){this._L=e}},{key:"l",get:function get(){return this._L/100},set:function set(e){this._L=100*e}},{key:"A",get:function get(){return 255*this._a},set:function set(e){this._a=e/255}},{key:"a",get:function get(){return this._a},set:function set(e){this._a=e}},{key:"hsl",get:function get(){return"hsl(".concat(this._H,",").concat(this._S,"%,").concat(this._L,"%)")}},{key:"hsla",get:function get(){return"hsla(".concat(this._H,",").concat(this._S,"%,").concat(this._L,"%,").concat(this._a,")")}},{key:"toString",value:function toString(){return this.hsla}}],[{key:"hex",value:function hex(e){var t=new HSLA;return t.hex=e,t}},{key:"Get",value:function Get(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=new HSLA;return s.R=e,s.G=t,s.B=n,s.a=i,s}}]),HSLA}(__r__(356));e.exports=i},{356:273}],276:[function(__r__,e,t){e.exports={RGBA:__r__(355),HSLA:__r__(354),COLOR:__r__(357)}},{357:274,354:275,355:277}],277:[function(__r__,e,t){var n,i=function(e){_inherits(RGBA,e);var t=_createSuper(RGBA);function RGBA(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,RGBA),(e=t.call(this))._R=n,e._G=i,e._B=s,e._a=a,e}return _createClass(RGBA,[{key:"Set",value:function Set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this._R=e,this._G=t,this._B=n,this._a=i,this}},{key:"R",get:function get(){return this._R},set:function set(e){this._R=e}},{key:"r",get:function get(){return this._R/255},set:function set(e){this._R=255*e}},{key:"G",get:function get(){return this._G},set:function set(e){this._G=e}},{key:"g",get:function get(){return this._G/255},set:function set(e){this._G=255*e}},{key:"B",get:function get(){return this._B},set:function set(e){this._B=e}},{key:"b",get:function get(){return this._B/255},set:function set(e){this._B=255*e}},{key:"A",get:function get(){return 255*this._a},set:function set(e){this._a=e/255}},{key:"a",get:function get(){return this._a},set:function set(e){this._a=e}},{key:"hex",get:function get(){var e=this._R.toString(16);e=1===e.length?"0"+e:e;var t=this._G.toString(16);t=1===t.length?"0"+t:t;var n=this._B.toString(16);return n=1===n.length?"0"+n:n,"#".concat(e).concat(t).concat(n)},set:function set(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);t?(this._R=parseInt(t[1],16),this._G=parseInt(t[2],16),this._B=parseInt(t[3],16)):(this._R=0,this._G=0,this._B=0)}},{key:"hexa",get:function get(){var e=this._R.toString(16);e=1===e.length?"0"+e:e;var t=this._G.toString(16);t=1===t.length?"0"+t:t;var n=this._B.toString(16);n=1===n.length?"0"+n:n;var i=this.A.toString(16);return i=1===i.length?"0"+i:i,"#".concat(e).concat(t).concat(n).concat(i)},set:function set(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);t?(this._R=parseInt(t[1],16),this._G=parseInt(t[2],16),this._B=parseInt(t[3],16),this._a=parseInt(t[4],16)/255):(this._R=0,this._G=0,this._B=0,this._a=0)}},{key:"rgb",get:function get(){return"rgb(".concat(this._R,",").concat(this._G,",").concat(this._B,")")}},{key:"rgba",get:function get(){return"rgba(".concat(this._R,",").concat(this._G,",").concat(this._B,",").concat(this._a,")")}},{key:"toString",value:function toString(){return this.rgba}}],[{key:"hex",value:function hex(e){var t=new RGBA;return t.hex=e,t}},{key:"HexToRGBString",value:function HexToRGBString(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=0,i=0,s=0;return t&&(n=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16)),"".concat(n,",").concat(i,",").concat(s)}},{key:"Get",value:function Get(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=new RGBA;return s.R=e,s.G=t,s.B=n,s.a=i,s}}]),RGBA}(__r__(356));e.exports=i},{356:273}],278:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s="@media ",a=function(e){_inherits(CSS_UTILS,e);var t=_createSuper(CSS_UTILS);function CSS_UTILS(){return _classCallCheck(this,CSS_UTILS),t.call(this)}return _createClass(CSS_UTILS,null,[{key:"CSSImport",value:function CSSImport(e){var t=n.dom.El("style",{type:"text/css"});return t.innerText='@import url("'.concat(e,'")'),t}},{key:"Style",value:function Style(e){var t=n.dom.El("style"),i=null;if(n.tils.IsString(e))i=e;else if(i="",null!=e&&null!=e)for(var s in e)i+=CSS.CSS(s,e[s]);return t.innerText=i,t}},{key:"CSS",value:function CSS(e,t){if(!n.isObject(t))return"";if(0===e.indexOf(s)){var i="";for(var a in t)i+=CSS_UTILS.CSS(a,t[a]);return"".concat(e,"{").concat(i,"}")}return"".concat(e,"{").concat(CSS_UTILS.InlineCSS(t),"}")}},{key:"InlineCSS",value:function InlineCSS(e){if(!n.isObject(e))return"";var t="";if(null!=e&&null!=e)for(var i in e)t+="".concat(i,":").concat(e[i],";");return t}},{key:"Merge",value:function Merge(e,t){if(!e)return JSON.parse(JSON.stringify(t));for(var i in t){var s=e[i],a=t[i];if(i in e)if(n.isArray(a))if(null===a[0]){var l=_toConsumableArray(a);l.shift(),e[i]=l}else if(n.isArray(s))for(var c=0,u=a.length;c<u;c++){var h=a[c];s.includes(h)||s.push(h)}else e[i]=_toConsumableArray(a);else n.isObject(a)?this.Merge(s,a):e[i]=a;else n.isArray(a)?e[i]=_toConsumableArray(a):n.isObject(a)?e[i]=JSON.parse(JSON.stringify(a)):e[i]=a}return e}},{key:"Compose",value:function Compose(e,t){if(!e)return JSON.parse(JSON.stringify(t));for(var i in t){var s=e[i],a=t[i];if(i in e)if(n.isArray(a)){if(n.isArray(s)){if(null===s[0])continue;for(var l=0,c=a.length;l<c;l++){var u=a[l];s.includes(u)||s.unshift(u)}}}else n.isObject(a)?this.Compose(s,a):e[i]=a;else n.isArray(a)?e[i]=_toConsumableArray(a):n.isObject(a)?e[i]=JSON.parse(JSON.stringify(a)):e[i]=a}return e}},{key:"Extends",value:function Extends(e,t){if(!e)return JSON.parse(JSON.stringify(t));for(var i in t){var s=e[i],a=t[i];if(i in e)if(n.isArray(a)){if(n.isArray(s)){if(null===s[0])continue;for(var l=0,c=a.length;l<c;l++){var u=a[l];s.includes(u)||s.unshift(u)}}}else n.isObject(a)&&this.Extends(s,a);else n.isArray(a)?e[i]=_toConsumableArray(a):n.isObject(a)?e[i]=JSON.parse(JSON.stringify(a)):e[i]=a}return e}}]),CSS_UTILS}(i.helpers.Singleton);e.exports=a},{12:27,14:458}],279:[function(__r__,e,t){var n=__r__(12),i=__r__(358),s,a=function(e){_inherits(DefaultStylesheet,e);var t=_createSuper(DefaultStylesheet);function DefaultStylesheet(){return _classCallCheck(this,DefaultStylesheet),t.call(this)}return _createClass(DefaultStylesheet,[{key:"Build",value:function Build(e){var t={};t[n.FLAGS.INFOS]=i.RGBA(102,175,204),t[n.FLAGS.WARNING]=i.RGBA(255,206,0),t[n.FLAGS.ERROR]=i.RGBA(226,5,0),t[n.FLAGS.READY]=i.RGBA(120,164,0),t[n.FLAGS.DIRTY]=i.RGBA(164,100,0),t[n.FLAGS.LOADING]=i.RGBA(102,119,204),t[n.FLAGS.PROCESSING]=i.RGBA(102,119,204),t[n.FLAGS.WAITING]=i.RGBA(102,119,204),t[n.FLAGS.ACTIVE]=i.RGBA(62,193,136),e.AddColors(t),e.AddDocumentRulesets({"html, body":{margin:0,padding:0,"font-family":"'Regular', sans-serif","font-size":"0.85rem","font-weight":400,"line-height":1.5,color:"#dedede","text-align":"left","background-color":"#1e1e1e",overflow:"hidden"}}),e.AddVariables({"margin-medium":"10px","padding-medium":"5px","scroll-size-small":"2px","scroll-size":"4px","color-warning":i.RGBA().rgba,"size-xs":"16px","size-s":"24px","size-m":"32px","size-l":"50px","size-xl":"108px"}),e.AddSuffixes({"small-scroll":{"::-webkit-scrollbar-track":{"background-color":"|color-warning|"},"::-webkit-scrollbar":{width:"|scroll-size-small|",height:"|scroll-size-small|","background-color":"|color-warning|"},"::-webkit-scrollbar-thumb":{"background-color":"|color-warning|"},":hover::-webkit-scrollbar":{width:"|scroll-size|",height:"|scroll-size|"},":hover::-webkit-scrollbar-thumb":{"background-color":"|color-warning|"}}}),e.AddSuffixes({"interactive-shadow":{"":{filter:"drop-shadow(0px 2px 1px rgba(0,0,0,0.1))"},"(.focused)":{cursor:"pointer",filter:"drop-shadow(0px 2px 5px rgba(0,0,0,1))"},"(.selected)":{filter:"drop-shadow(0px 2px 2px rgba(0,0,0,0.2))"},"(.selected.focused)":{filter:"drop-shadow(0px 2px 5px rgba(0,0,0,1))"},"(.disabled)":{}},"interactive-area":{"":{"background-color":"#000","border-radius":"5px"},"(.selected)":{},"(.selected.focused)":{},"(.disabled)":{}}}),e.AddRulesets({h4:{"margin-block-start":0,"margin-block-end":0}}),e.AddProperties({layer:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","box-sizing":"border-box"},"invisible-fill":{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","box-sizing":"border-box",opacity:"0"},cover:{"background-size":"cover","background-position":"center"}}),e.AddProperties({"icon-small":{width:"20px",height:"20px","@":["cover"]}}),e.AddProperties({"drop-shadow":{filter:"drop-shadow(0px 5px 5px rgba(0,0,0,0.2))"}})}}]),DefaultStylesheet}(__r__(359));e.exports=a},{358:274,359:281,12:27}],280:[function(__r__,e,t){var n=function FONT_FLAG(){_classCallCheck(this,FONT_FLAG)};_defineProperty(n,"TITLE","title"),_defineProperty(n,"LABEL","label"),_defineProperty(n,"TEXT","text"),_defineProperty(n,"TAG","font-tag"),_defineProperty(n,"SMALL","font-small"),_defineProperty(n,"MEDIUM","font-medium"),_defineProperty(n,"LARGE","font-large"),_defineProperty(n,"XLARGE","font-xlarge"),e.exports=n},{}],281:[function(__r__,e,t){var n=function(){function PaletteBuilder(){_classCallCheck(this,PaletteBuilder)}return _createClass(PaletteBuilder,[{key:"Build",value:function Build(e){}}]),PaletteBuilder}();e.exports=n},{}],282:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(360),l="|",c="@",u=function(e){_inherits(Palette,e);var t=_createSuper(Palette);function Palette(){return _classCallCheck(this,Palette),t.call(this)}return _createClass(Palette,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Palette.prototype),"_Init",this).call(this),this._STYLE=null,this._fonts={},this._colors={},this._variables={},this._rulesets={},this._suffixes={},this._properties={},this._documentRulesets={},this._externalCSSMap={},this._themeId="default",this._cache=new i.Dictionary}},{key:"InitFrom",value:function InitFrom(e){this._fonts=JSON.parse(JSON.stringify(e._fonts)),this._colors=a.Merge(this._colors,e._colors),this._variables=JSON.parse(JSON.stringify(e._variables)),this._rulesets=JSON.parse(JSON.stringify(e._rulesets)),this._suffixes=JSON.parse(JSON.stringify(e._suffixes)),this._properties=JSON.parse(JSON.stringify(e._properties)),this._documentRulesets=JSON.parse(JSON.stringify(e._documentRulesets)),this._externalCSSMap=JSON.parse(JSON.stringify(e._externalCSSMap))}},{key:"AddCSSLink",value:function AddCSSLink(e,t){this._externalCSSMap[e]=t}},{key:"GetCSSLink",value:function GetCSSLink(e){return e in this._externalCSSMap&&(e=this._externalCSSMap[e]),e=e[0]===c?"".concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId).concat(e.substring(1)):n.PATH.FULL(e)}},{key:"URLTheme",value:function URLTheme(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?'url("'.concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/").concat(e,'")'):"".concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/").concat(e)}},{key:"URLAssets",value:function URLAssets(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?'url("'.concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/assets/").concat(e,'")'):"".concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/assets/").concat(e)}},{key:"URLImgs",value:function URLImgs(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?'url("'.concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/assets/imgs/").concat(e,'")'):"".concat(n.PATH.FULL(n.PATH.STYLE),"/").concat(this._themeId,"/assets/imgs/").concat(e)}},{key:"AddFontFace",value:function AddFontFace(e,t){this._fonts[e]=n.PATH.FULL(t)}},{key:"AddColors",value:function AddColors(e){for(var t in e){var n=e[t];this._colors[t]=n,this._variables["".concat(l).concat(t).concat(l)]=n}}},{key:"AddDocumentRulesets",value:function AddDocumentRulesets(e){}},{key:"AddVariables",value:function AddVariables(e){for(var t in e)this._variables["".concat(l).concat(t).concat(l)]=e[t]}},{key:"AddSuffixes",value:function AddSuffixes(e){this._suffixes=a.Merge(this._suffixes,e)}},{key:"AddProperties",value:function AddProperties(e){this._properties=a.Merge(this._properties,e)}},{key:"AddRulesets",value:function AddRulesets(e){for(var t in e)this.AddSingleRuleset(t,e[t])}},{key:"AddSingleRuleset",value:function AddSingleRuleset(e,t){var n=this._rulesets;n[e]=e in n?a.Merge(n[e],t):t}},{key:"Get",value:function Get(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=this._cache.Get(e);if(!n.isVoid(l)&&!i)return l;l?l.length=0:l=[];var c=s.NFOS.Get(e);if(c){if(c.css)for(var u=c.css.length-1;u>=0;u--)l.push(n.dom.El("link",{href:this.GetCSSLink(c.css[u]),rel:"stylesheet",type:"text/css"}));if(c.ignoreLocal)return this._cache.Set(e,l),l}var h=t();if(!n.isEmpty(h)){if(!n.isObject(h))throw new Error("Generator must return an object.");var d="";for(var p in h)this._ProcessSuffixes(p,h[p],h);for(var m in h)d+=a.CSS(m,this._ProcessSingleRuleset(m,h[m]));var y=n.dom.El("style");y.innerText=d,l.push(y)}return this._cache.Set(e,l),l}},{key:"_ProcessSuffixes",value:function _ProcessSuffixes(e,t,i){var s=e[0]===c;if(n.isArray(t)){if(s&&n.isArray(t)){for(var l=e.substr(1,e.length-1),u=0,h=t.length;u<h;u++){var d=t[u];if(d in this._suffixes){var p=this._suffixes[d],m=void 0,y=void 0;for(var g in p)m="".concat(l).concat(g),y=p[g],i[m]=m in i?a.Compose(i[m],y):a.Compose(null,y)}}delete i[e]}}else if(s&&n.isObject(t)&&(0===e.indexOf("@media")||0===e.indexOf("@supports")))for(var v in t)this._ProcessSuffixes(v,t[v],t)}},{key:"_ProcessSingleRuleset",value:function _ProcessSingleRuleset(e,t){var i=n.isObject(t);if(e[0]===c&&i&&(0===e.indexOf("@media")||0===e.indexOf("@supports"))){for(var s in t)this._ProcessSingleRuleset(s,t[s]);return console.log(t),t}var u=this._rulesets,h=e in u;if(i){if(h&&a.Compose(t,u[e]),c in t){for(var d=t["@"],p=0,m=d.length;p<m;p++){var y=d[p];if(null!==y){if(!(y in this._properties))throw new Error("".concat(y," is not a valid property kit"));a.Compose(t,this._properties[y])}}delete t["@"]}}else h?(t=a.Compose(null,u[e]),i=!0):t="";if(i)for(var g in t){var v=t[g];n.isString(v)&&v.includes(l)&&(t[g]=this._ReplaceVars(v))}return t}},{key:"_ReplaceVars",value:function _ReplaceVars(e){for(var t in this._variables)e=e.replace(t,this._variables[t]);return e}}]),Palette}(s.pool.DisposableObject);e.exports=u},{360:278,18:21,12:27,14:458}],283:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(361),a=__r__(358),l=__r__(362),c=__r__(360),u=__r__(363),h=function(e){_inherits(STYLE,e);var t=_createSuper(STYLE);function STYLE(){return _classCallCheck(this,STYLE),t.call(this)}return _createClass(STYLE,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(STYLE.prototype),"_Init",this).call(this),this._defaultPalette=i.Rent(l),this._defaultPalette._STYLE=this,this._current=this._defaultPalette,this._headerStyle=null,this._cssPaths={},this._InitDefaults()}},{key:"_InitDefaults",value:function _InitDefaults(){var e;(new u).Build(this._defaultPalette)}},{key:"defaultPalette",get:function get(){return this._defaultPalette}},{key:"current",get:function get(){return this._current},set:function set(e){null===e&&(e=this._defaultPalette),this._current=e}}],[{key:"CreatePalette",value:function CreatePalette(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=i.Rent(l);return n._STYLE=this,e&&n.InitFrom(this.instance.defaultPalette),t&&(this.instance.current=n),n}},{key:"DeployCurrent",value:function DeployCurrent(){if(this._isBrowser){var e=this.instance.current,t="";for(var i in e._fonts)t+="@font-face { font-family: '".concat(i,"'; src: url('").concat(e._fonts[i],"');}\n");t+="\n";var s=e._documentRulesets,a;for(var l in s)e._ProcessSuffixes(l,s[l],s);for(var u in s)t+=c.CSS(u,e._ProcessSingleRuleset(u,s[u]));var h=this.instance.current._externalCSSMap;for(var d in h)this.instance.current.PrintCSSLink(d,document.head);n.isVoid(this._headerStyle)?(this._headerStyle=document.createElement("style"),this._headerStyle.innerText=t,n.dom.Attach(this._headerStyle,document.head)):this._headerStyle.innerText=t}}},{key:"Get",value:function Get(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.instance.current.Get(e,t,n)}},{key:"TF",value:function TF(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span";e=t.strong?"<strong>".concat(e,"</strong>"):e;var s="";if(t.style)s=" style='".concat(c.InlineCSS(this.instance.current._ProcessSingleRuleset("",t.style)),"' ");else if(t.color){var a=t.color;n.isString(a)&&a in this.instance.current._colors&&(a=this.instance.current._colors[a]),s=" style='color:".concat(a,";' ")}var l=t.class?" class='".concat(t.class,"'"):"";return"<".concat(i).concat(l).concat(s,">").concat(e,"</").concat(i,">")}}]),STYLE}(i.helpers.Singleton);e.exports=h},{358:274,361:273,360:278,363:279,362:282,12:27,14:458}],284:[function(__r__,e,t){var n=__r__(12),i=__r__(1),s=__r__(364),a=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),this.Add({context:s.CONTEXT.OVERLAY,kvps:[{key:i.OVERLAY,binding:s.Overlay}]},{context:s.CONTEXT.CONTENT,kvps:[]})}}]),Bindings}(n.helpers.BindingKit);e.exports=a},{364:337,1:343,12:27}],285:[function(__r__,e,t){var n=__r__(365),i=__r__(366);i.instance._Prepare();var s=__r__(367);e.exports={SIGNAL:__r__(47),FLAGS:__r__(48),IDS:__r__(49),REQUEST:__r__(1),CONTEXT:__r__(150),UI:n,INPUT:i,POINTER:__r__(368),KEYBOARD:__r__(369),DisposableHTMLElement:__r__(370),DisplayObject:__r__(371),DisplayObjectContainer:__r__(372),Widget:__r__(373),WidgetButton:__r__(374),WidgetOrientable:__r__(375),WidgetItem:__r__(376),WidgetBar:__r__(377),extensions:__r__(378),helpers:__r__(51),inputs:__r__(379),manipulators:__r__(380),lists:__r__(381),views:__r__(382),overlays:__r__(364),DOMTemplate:s,Register:n.Register.bind(n),RegisterGroup:n.RegisterGroup.bind(n),Render:s.Render.bind(s)},__r__(12).BINDINGS.Expand(__r__(110))},{110:284,150:286,371:288,372:287,370:289,367:290,378:299,48:300,51:306,49:309,366:310,379:311,369:322,381:323,380:333,364:337,368:342,1:343,47:344,365:345,382:347,373:355,377:351,374:352,376:353,375:354,12:27}],286:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(INPUT,e);var t=_createSuper(INPUT);function INPUT(){return _classCallCheck(this,INPUT),t.call(this)}return INPUT}(n.helpers.CSYMBOL),s=function(e){_inherits(STANDALONE_INPUT,e);var t=_createSuper(STANDALONE_INPUT);function STANDALONE_INPUT(){return _classCallCheck(this,STANDALONE_INPUT),t.call(this)}return STANDALONE_INPUT}(n.helpers.CSYMBOL);e.exports={INPUT:i,STANDALONE_INPUT:s}},{12:27}],287:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(383),a=__r__(163),l=__r__(384),c=function(e){_inherits(DisplayObjectContainer,e);var t=_createSuper(DisplayObjectContainer);function DisplayObjectContainer(){return _classCallCheck(this,DisplayObjectContainer),t.call(this)}return _createClass(DisplayObjectContainer,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DisplayObjectContainer.prototype),"_Init",this).call(this),this._displayList=new i.List(0)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(DisplayObjectContainer.prototype),"_PostInit",this).call(this),this._wrapper||(this._wrapper=this._host)}},{key:"count",get:function get(){return this._displayList.count}},{key:"displayList",get:function get(){return this._displayList}},{key:"At",value:function At(e){return this._displayList[e]}},{key:"Add",value:function Add(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if((a>=this._displayList.count||a<0)&&(a=-1),n.isFunc(e)&&n.isInstanceOf(e,l)&&(e=s.Rent(e)),!e)throw new Error("Cannot Add an empty display object (".concat(e,")."));if(this._displayList.Contains(e))return-1===a||this.Move(e,a),e;if(i&&i!==this?n.isInstanceOf(i,DisplayObjectContainer)&&(i=i.wrapper):i=this._wrapper,-1===a){this._displayList.Add(e),a=this._displayList.count-1;try{i.appendChild(e)}catch(e){throw e}}else this._displayList.Insert(e,a),i.insertBefore(e,this._displayList.At(a));if(e.parent=this,t)if(t.includes(" "))for(var c=t.split(" "),u=0,h=c.length;u<h;u++)e.classList.add(c[u]);else e.classList.add(t);return this._OnChildAdded(e,a),e}},{key:"Move",value:function Move(e,t){if(!this._displayList.Contains(e))throw new Error("Provided display object is not a child of this container.");console.warning("DisplayObject.Move is not implemented."),this._OnChildMoved(e,t,t)}},{key:"Remove",value:function Remove(e){var t=this._displayList.IndexOf(e);return-1===t?e:this.RemoveAt(t)}},{key:"RemoveAt",value:function RemoveAt(e){if(e<0||e>=this._displayList.count)return null;var t=this._displayList.RemoveAt(e);return t.parent===this&&(t.parent=null,n.dom.Detach(t)),this._OnChildRemoved(t,e),t}},{key:"_OnChildAdded",value:function _OnChildAdded(e,t){this._Broadcast(a.CHILD_ADDED,this,e,t)}},{key:"_OnChildMoved",value:function _OnChildMoved(e,t,n){this._Broadcast(a.CHILD_MOVED,this,e,t,n)}},{key:"_OnChildRemoved",value:function _OnChildRemoved(e,t){this._Broadcast(a.CHILD_REMOVED,this,e,t)}}]),DisplayObjectContainer}(l);e.exports=c},{384:288,163:344,383:345,18:21,14:458}],288:[function(__r__,e,t){var n=__r__(14),i=__r__(27),s=__r__(12),a=__r__(29),l=__r__(383),c=__r__(385),u=__r__(386),h=__r__(387),d=function(e){_inherits(DisplayObject,e);var t=_createSuper(DisplayObject);function DisplayObject(){return _classCallCheck(this,DisplayObject),t.call(this)}return _createClass(DisplayObject,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DisplayObject.prototype),"_Init",this).call(this),this._isTransformDirty=!1,this._transforms={},this._wrapper=null,this._host=null,this._styles=null,this._shadowConfig={mode:"open"},this._visible=!0,this._flags=new h,this._requestSignalBox=null,this._order=null,this._parent=null}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(DisplayObject.prototype),"_PostInit",this).call(this),this._BuildHost(),this._wrapper=this._host,this._PrintStyle(),this._Render(),this._PostRender()}},{key:"order",get:function get(){return this._order},set:function set(e){this._order!==e&&(this._order=e,null===e?this.style.removeProperty("--order"):this.style.setProperty("--order",e))}},{key:"host",get:function get(){return this._host}},{key:"wrapper",get:function get(){return this._wrapper}},{key:"_BuildHost",value:function _BuildHost(){this._host=this.attachShadow(this._shadowConfig)}},{key:"_Style",value:function _Style(){}},{key:"_PrintStyle",value:function _PrintStyle(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._styles){for(var t=0,i=this._styles.length;t<i;t++)this._styles[t].remove();this._styles.length=0}this._styles=a.STYLE.Get(this.constructor,this._Bind(this._Style),e);for(var s=0,l=this._styles.length;s<l;s++)n.dom.Attach(this._styles[s].cloneNode(!0),this._host)}},{key:"_Render",value:function _Render(){}},{key:"_PostRender",value:function _PostRender(){}},{key:"BringToFront",value:function BringToFront(){n.dom.ToFront(this),this._parent&&this._parent._displayList.ToEnd(this)}},{key:"parent",get:function get(){return this._parent},set:function set(e){if(this._parent!==e){var t=this._parent;this._parent=e,t&&t.Remove(this),this._parent&&this._parent.Add(this),this._OnParentChanged(t)}}},{key:"_OnParentChanged",value:function _OnParentChanged(e){}},{key:"visible",get:function get(){return this._visible},set:function set(e){this._visible!==e&&(this._visible=e,e?this.style.removeProperty("display"):this.style.display="none")}},{key:"flags",get:function get(){return this._flags}},{key:"_EmitLocalRequest",value:function _EmitLocalRequest(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.Request;this._HandleLocalRequest(i.Request.Emit(e,t,this,n,s,a,l,!1))}},{key:"_EmitGlobalRequest",value:function _EmitGlobalRequest(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.Request;i.Request.Emit(e,t,this,n,s,a,l,!0)}},{key:"_HandleLocalRequest",value:function _HandleLocalRequest(e){e.isHandled||e.emitter!=this&&this._requestSignalBox&&(this._requestSignalBox.Broadcast(e.requestType,e),e.isHandled)||(this._parent?this._parent._HandleLocalRequest(e):i.RELAY.HandleRequest(e))}},{key:"_RegisterLocalRequestHandler",value:function _RegisterLocalRequestHandler(e,t){this._requestSignalBox||(this._requestSignalBox=new s.signals.SignalBox),this._requestSignalBox.Add(e,t,this)}},{key:"_UnregisterLocalRequestHandler",value:function _UnregisterLocalRequestHandler(e,t){this._requestSignalBox&&this._requestSignalBox.Remove(e,t,this)}},{key:"transforms",get:function get(){return this._transforms},set:function set(e){this._transforms!==e&&(this._transforms=e,this._DirtyTransform())}},{key:"dirty",get:function get(){return this._isTransformDirty}},{key:"_DirtyTransform",value:function _DirtyTransform(){this._isTransformDirty||(this._isTransformDirty=!0,l.AddDirty(this))}},{key:"x",get:function get(){return n.tils.Get(this._transforms,"x",0)},set:function set(e){this._transforms.x!=e&&(this._transforms.x=e,this._DirtyTransform())}},{key:"y",get:function get(){return n.tils.Get(this._transforms,"y",0)},set:function set(e){this._transforms.y!=e&&(this._transforms.y=e,this._DirtyTransform())}},{key:"z",get:function get(){return n.tils.Get(this._transforms,"z",0)},set:function set(e){this._transforms.z!=e&&(this._transforms.z=e,this._DirtyTransform())}},{key:"rotation",get:function get(){return n.tils.Get(this._transforms,"rotation",0)},set:function set(e){this._transforms.rotation!=e&&(this._transforms.rotation=e,this._DirtyTransform())}},{key:"rotationX",get:function get(){return n.tils.Get(this._transforms,"rotationX",0)},set:function set(e){this._transforms.rotationX!=e&&(this._transforms.rotationX=e,this._DirtyTransform())}},{key:"rotationY",get:function get(){return n.tils.Get(this._transforms,"rotationY",0)},set:function set(e){this._transforms.rotationY!=e&&(this._transforms.rotationY=e,this._DirtyTransform())}},{key:"rotationZ",get:function get(){return n.tils.Get(this._transforms,"rotationZ",0)},set:function set(e){this._transforms.rotationZ!=e&&(this._transforms.rotationZ=e,this._DirtyTransform())}},{key:"scale",get:function get(){return n.tils.Get(this._transforms,"scale",0)},set:function set(e){this._transforms.scale!=e&&(this._transforms.scale=e,this._DirtyTransform())}},{key:"scaleX",get:function get(){return n.tils.Get(this._transforms,"scaleX",0)},set:function set(e){this._transforms.scaleX!=e&&(this._transforms.scaleX=e,this._DirtyTransform())}},{key:"scaleY",get:function get(){return n.tils.Get(this._transforms,"scaleY",0)},set:function set(e){this._transforms.scaleY!=e&&(this._transforms.scaleY=e,this._DirtyTransform())}},{key:"scaleZ",get:function get(){return n.tils.Get(this._transforms,"scaleZ",0)},set:function set(e){this._transforms.scaleZ!=e&&(this._transforms.scaleZ=e,this._DirtyTransform())}},{key:"ApplyTransforms",value:function ApplyTransforms(){var e=this._transforms;if(e){var t=n.tils.Get(e,"rotation",0),i=n.tils.Get(e,"rotationX",0),s=n.tils.Get(e,"rotationY",0),a=n.tils.Get(e,"rotationZ",0),l="".concat(0===t?"":"rotate(".concat(t,"deg)")).concat(0===i?"":"rotateX(".concat(i,"deg)")).concat(0===s?"":"rotateX(".concat(s,"deg)")).concat(0===a?"":"rotateZ(".concat(a,"deg)")),c=n.tils.Get(e,"x",0),u=n.tils.Get(e,"y",0),h=n.tils.Get(e,"z",0),d="".concat(0===c?"":"translateX(".concat(c,"px)")).concat(0===u?"":"translateY(".concat(u,"px)")).concat(0===h?"":"translateZ(".concat(h,"px)")),p=n.tils.Get(e,"scale",1),m=n.tils.Get(e,"scaleX",1),y=n.tils.Get(e,"scaleY",1),g=n.tils.Get(e,"scaleZ",1),v="".concat(1===p?"":"scale(".concat(p,",").concat(p,")")).concat(1===m?"":"scaleX(".concat(m,")")).concat(1===y?"":"scaleX(".concat(y,")")).concat(1===g?"":"scaleZ(".concat(g,")"));this.style.transform="".concat(d).concat(l).concat(v),this._isTransformDirty=!1}else this.style.removeProperty("transform")}},{key:"size",set:function set(e){this.width=e,this.height=e}},{key:"width",set:function set(e){this.style.width=n.isEmpty(e)?"":"".concat(e,"px")}},{key:"height",set:function set(e){this.style.height=n.isEmpty(e)?"":"".concat(e,"px")}},{key:"sizeRel",set:function set(e){this.widthRel=e,this.heightRel=e}},{key:"widthRel",set:function set(e){this.style.width=n.isEmpty(e)?"":"".concat(e,"%")}},{key:"heightRel",set:function set(e){this.style.height=n.isEmpty(e)?"":"".concat(e,"%")}},{key:"_CleanUp",value:function _CleanUp(){this.visible=!0,this.parent=null,this.order=null,this._transforms={},this.style.removeProperty("transform"),_get(_getPrototypeOf(DisplayObject.prototype),"_CleanUp",this).call(this),n.dom.Detach(this)}},{key:"displayPath",get:function get(){for(var e=[],t=this._parent;null!=t;)e.push(t.constructor.name),t=t.parent;return e.reverse(),e.push(this.constructor.name),e.join(".")}}]),DisplayObject}(u);e.exports=d},{386:289,385:300,387:303,383:345,27:1,12:27,29:272,14:458}],289:[function(__r__,e,t){var n=__r__(12),i=__r__(14),s=__r__(163),a="unpainted",l=0,c=function(e){_inherits(DisposableHTMLElement,e);var t=_createSuper(DisposableHTMLElement);function DisposableHTMLElement(){var e;return _classCallCheck(this,DisposableHTMLElement),(e=t.call(this))._Init(),e._PostInit(),e}return _createClass(DisposableHTMLElement,[{key:"_Init",value:function _Init(){this._uinc=l++,this._releasing=!1,this._signals=new n.signals.SignalBox,this._released=!1,this._isPainted=!1,this._isFirstPaint=!0,this.constructor.__usePaintCallback&&this.classList.add(a)}},{key:"_PostInit",value:function _PostInit(){}},{key:"_Bind",value:function _Bind(e){return this[e.name]=e.bind(this)}},{key:"isPainted",get:function get(){return this._isPainted}},{key:"_OnPaintChange",value:function _OnPaintChange(){this._isPainted?(this._isFirstPaint&&this._signals.Broadcast(s.FIRST_PAINT,this),this._signals.Broadcast(s.PAINTED,this)):this._signals.Broadcast(s.UNPAINTED,this)}},{key:"_Broadcast",value:function _Broadcast(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return(t=this._signals).Broadcast.apply(t,[e].concat(i)),this}},{key:"Watch",value:function Watch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Add(e,t,n),this}},{key:"WatchOnce",value:function WatchOnce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.AddOnce(e,t,n),this}},{key:"Unwatch",value:function Unwatch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._signals.Remove(e,t,n),this}},{key:"isReleasing",get:function get(){return this._isReleasing}},{key:"PreventRelease",value:function PreventRelease(){this._releasePrevented=!0}},{key:"Release",value:function Release(){if(!this._releasing){if(this._releasing=!0,this._Broadcast(n.SIGNAL.RELEASING,this),this._releasePrevented)return this._releasing=!1,void delete this._releasePrevented;this._released=!0,this._Broadcast(n.SIGNAL.RELEASED,this),this._CleanUp(),i.dom.Detach(this),this._returnFn&&this._returnFn(this),this._releasing=!1}}},{key:"_CleanUp",value:function _CleanUp(){this._signals.Clear(),this._isFirstPaint=!0,this._isPainted&&(this._isPainted=!1,this.classList.add(a),this.constructor.__usePaintCallback&&this._OnPaintChange()),this.constructor.__paintingObserver.unobserve(this)}},{key:"Wake",value:function Wake(){this._released=!1,this._Wake(),this._PostWake(),this.constructor.__paintingObserver.observe(this)}},{key:"_Wake",value:function _Wake(){}},{key:"_PostWake",value:function _PostWake(){}},{key:"toString",value:function toString(){return"<".concat(this.constructor.name,">")}}]),DisposableHTMLElement}(_wrapNativeSuper(HTMLElement));_defineProperty(c,"__usePaintCallback",!1),_defineProperty(c,"__paintingObserver",new IntersectionObserver((function(e,t){for(var n=0,i=e.length;n<i;n++){var s=e[n],l=s.target;if(s.isIntersecting){if(l._isPainted)continue;l._isPainted=!0,l.classList.remove(a),l.constructor.__usePaintCallback&&l._OnPaintChange(),l._isFirstPaint=!1}else{if(!l._isPainted)continue;l._isPainted=!1,l.classList.add(a),l.constructor.__usePaintCallback&&l._OnPaintChange()}}}),{threshold:0})),e.exports=c},{163:344,12:27,14:458}],290:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(388),a=__r__(56),l="autoHide",c=function(){function DOMTemplate(){_classCallCheck(this,DOMTemplate)}return _createClass(DOMTemplate,[{key:"Render",value:function Render(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"_wrapper"in e&&(e=e._wrapper);var s=n.tils.Get(t,i.IDS.OWNER,this),l=this.constructor.__shelf,c=this.constructor.__shelfIDs;s||(s=this);var u=this.constructor.__HTMLtemplate,h=s===this;u||(this.constructor.__HTMLtemplate=[],this.constructor._CreateTemplate(),u=this.constructor.__HTMLtemplate);for(var d=0,p=u.length;d<p;d++){var m=u[d],y=m[a.UID],g=m.node.cloneNode(!0),v=t?t[y]:null,k=n.tils.Get(v,"write",n.tils.Get(m,"write",!0));if(l[y]=g,m.parent?l[m.parent].appendChild(g):e.appendChild(g),v){var O=v[a.CSS_CL];if(O&&g.classList.add(O),k){var S=v[a.UID],E=S||(h?y:m._id),C=m.fn;C&&(g=C(g,m,v)),s[E]=g,y&&(c[y]=E)}}else if(k&&y){var I=m.fn;I&&(g=I(g,m,v));var D=h?y:m._id;c[y]=D,s[D]=g}}return s}}],[{key:"AsIcon",value:function AsIcon(e,t,i){return(e=new s.Icon(e,n.tils.Get(t,l,!0))).Set(i),e}},{key:"AsIconStatic",value:function AsIconStatic(e,t,i){return(e=new s.Icon(e,n.tils.Get(t,l,!1))).Set(i),e}},{key:"AsText",value:function AsText(e,t,i){return(e=new s.Text(e,n.tils.Get(t,l,!0))).Set(i),e}},{key:"AsTextStatic",value:function AsTextStatic(e,t,i){return(e=new s.Text(e,n.tils.Get(t,l,!1))).Set(i),e}},{key:"AsBackground",value:function AsBackground(e,t,i){return(e=new s.Background(e,n.tils.Get(t,l,!0))).Set(i),e}},{key:"AsBackgroundStatic",value:function AsBackgroundStatic(e,t,i){return(e=new s.Background(e,n.tils.Get(t,l,!1))).Set(i),e}},{key:"AsImage",value:function AsImage(e,t,i){return(e=new s.Image(e,n.tils.Get(t,l,!0))).Set(i),e}},{key:"AsImageStatic",value:function AsImageStatic(e,t,i){return(e=new s.Image(e,n.tils.Get(t,l,!1))).Set(i),e}},{key:"_CreateTemplate",value:function _CreateTemplate(){}},{key:"_Add",value:function _Add(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_objectSpread({node:e},t);a.UID in t&&(n._id="_".concat(t[a.UID])),this.__HTMLtemplate.push(n)}},{key:"Render",value:function Render(e,t,n){var i=new e;return i.Render(t,n),i}}]),DOMTemplate}();_defineProperty(c,"__HTMLtemplate",null),_defineProperty(c,"__shelf",{}),_defineProperty(c,"__shelfIDs",{}),e.exports=c},{56:309,388:333,12:27,14:458}],291:[function(__r__,e,t){var n=__r__(389),i,s=function(e){_inherits(AnimControllerExtension,e);var t=_createSuper(AnimControllerExtension);function AnimControllerExtension(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,AnimControllerExtension),(e=t.call(this))._element=n,e._animations=[],e._animationsMap={},e._hooks={},e._Bind(e._aStart),e._Bind(e._aCancel),e._Bind(e._aIteration),e._Bind(e._aEnd),e}return _createClass(AnimControllerExtension,[{key:"animation",get:function get(){return this._animation},set:function set(e){this._animation!==e&&(this._animation=e)}},{key:"element",get:function get(){return this._element},set:function set(e){if(this._element!==e){var t=this._element;this._element=e,this._isEnabled&&(t&&t.removeEventListener("animationstart",this._aStart),this._element&&this._element.addEventListener("animationstart",this._aStart))}}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(AnimControllerExtension.prototype),"Enable",this).call(this)&&(this._element&&this._element.addEventListener("animationstart",this._aStart),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(AnimControllerExtension.prototype),"Disable",this).call(this)&&(this._element&&this._element.removeEventListener("animationstart",this._aStart),!0)}},{key:"_aStart",value:function _aStart(e){this._animationsMap.hasOwnProperty(e.animationName)&&(this._Trigger(e.animationName,n.A_START),this._element.addEventListener("animationcancel",this._aCancel),this._element.addEventListener("animationend",this._aEnd),this._element.addEventListener("animationiteration",this._aIteration))}},{key:"_aCancel",value:function _aCancel(e){this._animationsMap.hasOwnProperty(e.animationName)&&(this._ClearListeners(),this._Trigger(e.animationName,n.A_CANCEL),this._Trigger(e.animationName,n.A_ANY_END))}},{key:"_aIteration",value:function _aIteration(e){this._animationsMap.hasOwnProperty(e.animationName)&&this._Trigger(e.animationName,n.A_ITERATION)}},{key:"_aEnd",value:function _aEnd(e){this._animationsMap.hasOwnProperty(e.animationName)&&(this._ClearListeners(),this._Trigger(e.animationName,n.A_END),this._Trigger(e.animationName,n.A_ANY_END))}},{key:"_ClearListeners",value:function _ClearListeners(){this._element.removeEventListener("animationcancel",this._aCancel),this._element.removeEventListener("animationend",this._aEnd),this._element.removeEventListener("animationiteration",this._aIteration)}},{key:"Add",value:function Add(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";if(!this._animationsMap.hasOwnProperty(e)){var l={name:e,dur:t,ease:n,extras:a,delay:i,iterations:s};this._animationsMap[e]=l,this._animations.push(l),this._RefreshAnimationSerial()}}},{key:"Remove",value:function Remove(e){if(this._animationsMap.hasOwnProperty(e)){var t=this._animationsMap[e],n=this._animations.indexOf(t);delete this._animationsMap[e],this._animations.splice(n,1),this._RefreshAnimationSerial()}}},{key:"_RefreshAnimationSerial",value:function _RefreshAnimationSerial(){for(var e="",t=0,n=this._animations.length;t<n;t++){0!=t&&(e+=", ");var i=this._animations[t];e+="".concat(i.dur),e+=" ".concat(i.ease),i.delay>0&&(e+=" ".concat(i.delay)),i.iterations>0?e+=" ".concat(i.iterations):-1==i.iterations&&(e+=" infinite"),i.extras>0&&(e+=" ".concat(i.extras)),e+="".concat(i.name)}console.log(e),this._element.style.animation=e}},{key:"Hook",value:function Hook(e,t,n){var i=this._hooks[e];i||(i={},this._hooks[e]=i);var s=i[t];s||(s=[],i[t]=s),s.includes(n)||s.push(n)}},{key:"Unhook",value:function Unhook(e,t,n){var i=this._hooks[e];if(i){var s=i[t];if(s&&0!=s.length){var a=s.indexOf(n);-1!==a&&s.splice(a,1)}}}},{key:"_Trigger",value:function _Trigger(e,t){var n=this._hooks[e];if(n){var i=n[t];if(i)for(var s=0,a=i.length;s<a;s++)i[s](this._element,e)}}}]),AnimControllerExtension}(__r__(390));e.exports=s},{389:300,390:298}],292:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(391),a=__r__(389),l=__r__(79),c=__r__(392),u=__r__(390),h=[],d=function(e){_inherits(DragExtension,e);var t=_createSuper(DragExtension);function DragExtension(){return _classCallCheck(this,DragExtension),t.call(this)}return _createClass(DragExtension,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DragExtension.prototype),"_Init",this).call(this),this._isEnabled=!0,this._target=null,this._activator=null,this._feedbackHost=null,this._grabDataCallback=null,this._ownerObserver=new i.signals.Observer,this._ownerObserver.Hook(l.DRAG_STARTED,this._OnOwnerDragStarted,this),this._ownerObserver.Hook(l.DRAG_ENDED,this._OnOwnerDragEnded,this),this._ownerObserver.Hook(i.SIGNAL.RELEASED,this._OnOwnerReleased,this),this._Bind(this._mUp),this._Bind(this._mDown),this._Bind(this._mDragStart),this._Bind(this._mDrag),this._Bind(this._mDragEnd),this._hintElement=null}},{key:"_OnOwnerReleased",value:function _OnOwnerReleased(e){this.owner=null}},{key:"grabDataCallback",get:function get(){return this._grabDataCallback},set:function set(e){this._grabDataCallback=e}},{key:"activator",get:function get(){return this._activator},set:function set(e){if(this._activator!==e){var t=this._activator;this._activator=e,this._isEnabled&&(t&&t.removeEventListener("mousedown",this._mDown),e&&e.addEventListener("mousedown",this._mDown))}}},{key:"owner",get:function get(){return this._owner},set:function set(e){this._owner!==e&&(this._owner=e,this._ownerObserver.ObserveOnly(e))}},{key:"Setup",value:function Setup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this._target;this._target=e,this.activator=t||e,this._feedbackHost=n||e,i&&i.flags.Remove(i,a.DRAGGED),e&&e.flags.Add(e,a.DRAGGED)}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(DragExtension.prototype),"Enable",this).call(this)&&(this._activator&&this._activator.addEventListener("mousedown",this._mDown),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(DragExtension.prototype),"Disable",this).call(this)&&(this._activator&&this._activator.removeEventListener("mousedown",this._mDown),!0)}},{key:"_mDown",value:function _mDown(e){this._isEnabled&&e.button===c.MOUSE_LEFT&&(this._target.setAttribute("draggable",!0),this._target.addEventListener("dragstart",this._mDragStart),c.Watch(c.MOUSE_UP,this._mUp))}},{key:"_mUp",value:function _mUp(e){this._isEnabled&&e.button===c.MOUSE_LEFT&&(c.Unwatch(c.MOUSE_UP,this._mUp),this._EndDrag())}},{key:"_mDragStart",value:function _mDragStart(e){this._feedbackHost,c.Unwatch(c.MOUSE_UP,this._mUp),this._target.addEventListener("dragend",this._mDragEnd),this._target.addEventListener("drag",this._mDrag),h.length=0,this._OwnerBroadcast(l.DRAG_STARTED),c.DragStarted(h,this._target),this._ShowHint()}},{key:"_mDrag",value:function _mDrag(e){c.instance._mMove(e),this._OwnerBroadcast(l.DRAGGED)}},{key:"_mDragEnd",value:function _mDragEnd(e){this._EndDrag(),this._OwnerBroadcast(l.DRAG_ENDED),c.DragEnded()}},{key:"_GrabData",value:function _GrabData(){return this._grabDataCallback()}},{key:"_EndDrag",value:function _EndDrag(){this._target.removeAttribute("draggable"),this._target.removeEventListener("dragstart",this._mDragStart),this._target.removeEventListener("dragend",this._mDragEnd),this._target.removeEventListener("drag",this._mDrag),this._HideHint()}},{key:"_OwnerBroadcast",value:function _OwnerBroadcast(e){this._owner._Broadcast(e,this._owner)}},{key:"_OnOwnerDragStarted",value:function _OnOwnerDragStarted(e){this._isEnabled&&(h.push(this._GrabData()),this._target.flags.Set(a.DRAGGED,!0))}},{key:"_OnOwnerDragEnded",value:function _OnOwnerDragEnded(e){this._isEnabled&&this._target.flags.Set(a.DRAGGED,!1)}},{key:"_ShowHint",value:function _ShowHint(){this._feedbackHost&&(this._hintElement?n.dom.Attach(this._hintElement,this._feedbackHost):this._hintElement=n.dom.El("div",{class:"ext-overlay drag-overlay"},this._feedbackHost))}},{key:"_HideHint",value:function _HideHint(){this._hintElement&&n.dom.Detach(this._hintElement)}},{key:"_CleanUp",value:function _CleanUp(){this._HideHint(),this._hintElement=null,this._EndDrag(),_get(_getPrototypeOf(DragExtension.prototype),"_CleanUp",this).call(this)}}]),DragExtension}(u);e.exports=d},{389:300,391:310,392:342,79:344,390:298,12:27,14:458}],293:[function(__r__,e,t){var n=__r__(14),i=__r__(392),s=__r__(389),a=__r__(79),l=__r__(390),c=null,u=function(e){_inherits(DropExtension,e);var t=_createSuper(DropExtension);function DropExtension(){return _classCallCheck(this,DropExtension),t.call(this)}return _createClass(DropExtension,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DropExtension.prototype),"_Init",this).call(this),this._target=null,this._feedbackHost=null,this._hooks=[],this._candidatesHooks=[],this._allowedHooks=[],this._onDragOverHooks=[],this._onLeaveHooks=[],this._isAcceptingCurrentData=!1,this._isActive=!1,this._watchGlobalBroadcasts=!1,this._draggingOver=!1,this._Bind(this._OnPointerDragStarted),this._Bind(this._OnPointerDragEnded),this._Bind(this._mDragEnter),this._Bind(this._mDragLeave),this._Bind(this._mDragOver),this._Bind(this._mDrop),this._hintElement=null}},{key:"target",get:function get(){return this._target},set:function set(e){if(this._target!==e){var t=this._target;this._target=e,this._isEnabled&&(t&&t.removeEventListener("dragenter",this._mDragEnter),e&&e.addEventListener("dragenter",this._mDragEnter))}}},{key:"watchGlobalBroadcasts",get:function get(){return this._watchGlobalBroadcasts},set:function set(e){this._watchGlobalBroadcasts!=e&&(this._watchGlobalBroadcasts=e,this._isEnabled&&(e?i.Watch(a.DRAG_STARTED,this._OnPointerDragStarted):i.Unwatch(a.DRAG_STARTED,this._OnPointerDragStarted)))}},{key:"Setup",value:function Setup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._target;this.target=e,this._feedbackHost=t||e,n&&n.flags.Remove(n,s.ALLOW_DROP),e&&e.flags.Add(e,s.ALLOW_DROP)}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(DropExtension.prototype),"Enable",this).call(this)&&(this._target&&this._target.addEventListener("dragenter",this._mDragEnter),this._watchGlobalBroadcasts&&i.Watch(a.DRAG_STARTED,this._OnPointerDragStarted),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(DropExtension.prototype),"Disable",this).call(this)&&(this._target&&this._target.removeEventListener("dragenter",this._mDragEnter),this._watchGlobalBroadcasts&&i.Unwatch(a.DRAG_STARTED,this._OnPointerDragStarted),!0)}},{key:"_OnPointerDragStarted",value:function _OnPointerDragStarted(e){this._candidatesHooks.length=0;for(var t=0,n=this._hooks.length;t<n;t++){var s=this._hooks[t],a=!1;if(s.check&&s.dropCandidate)if(i.DRAG_MULTIPLE>0){var l=i.dragLength;e:for(var c=0,u=e.length;c<u;c++){var h=e[c];if(a=s.check.thisArg?s.check.fn.call(s.check.thisArg,h):s.check.fn(h))break e}}else a=s.check.thisArg?s.check.fn.call(s.check.thisArg,e):s.check.fn(e);a&&this._candidatesHooks.push(s)}this._ToggleDropCandidate(!0)}},{key:"_OnPointerDragEnded",value:function _OnPointerDragEnded(){i.Unwatch(a.DRAG_ENDED,this._OnPointerDragEnded),this._ToggleDropCandidate(!1)}},{key:"_ToggleDropCandidate",value:function _ToggleDropCandidate(e){if(this._candidatesHooks.length>0){i.Watch(a.DRAG_ENDED,this._OnPointerDragEnded);for(var t=0,n=this._candidatesHooks.length;t<n;t++){var s=this._candidatesHooks[t].dropCandidate;s.fn&&s.fn(e),s.flag&&this._target.flags.Set(s.flag,e)}}}},{key:"_getDragData",value:function _getDragData(e){return i.DRAG_DATA?(i.EXTERNAL_DRAG=!1,i.DRAG_DATA):(i.EXTERNAL_DRAG=!0,e.dataTransfer)}},{key:"_mDragEnter",value:function _mDragEnter(e){this._allowedHooks.length=0,this._onDragOverHooks.length=0,this._onLeaveHooks.length=0;var t=this._getDragData(e);if(t)for(var n=0,s=this._hooks.length;n<s;n++){var a=this._hooks[n],l=!1;if(a.check)if(i.DRAG_MULTIPLE){var c=i.dragLength;e:for(var u=0;u<c;u++){var h=t[u];if(l=a.check.thisArg?a.check.fn.call(a.check.thisArg,h):a.check.fn(h))break e}}else l=a.check.thisArg?a.check.fn.call(a.check.thisArg,t):a.check.fn(t);else l=!0;l&&(this._allowedHooks.push(a),a.dragOver&&this._onDragOverHooks.push(a.dragOver),a.dragLeave&&this._onLeaveHooks.push(a.dragLeave))}0===this._allowedHooks.length?(this._isAcceptingCurrentData=!1,this._Clear()):(this._isAcceptingCurrentData=!0,this._target.addEventListener("dragleave",this._mDragLeave),this._target.addEventListener("dragover",this._mDragOver))}},{key:"_dragEnd",value:function _dragEnd(e){this._Clear(),this._ToggleDropCandidate(!1)}},{key:"_mDragLeave",value:function _mDragLeave(e){this._Clear(),this._ToggleDropCandidate(!0)}},{key:"_mDragOver",value:function _mDragOver(e){if(this._draggingOver=!0,e.defaultPrevented)this._Activate(!1);else if(this._isAcceptingCurrentData){e.preventDefault(),this._Activate(!0);for(var t=this._getDragData(e),n=0,i=this._onDragOverHooks.length;n<i;n++){var s=this._onDragOverHooks[n];s.thisArg?s.fn.call(s.thisArg,t):s.fn(t)}}}},{key:"_mDrop",value:function _mDrop(e){var t=this._getDragData(e);if(i.DRAG_MULTIPLE)for(var n=0,s=t.length;n<s;n++)this._DropSingleDataItem(t[n]);else this._DropSingleDataItem(t);i.DRAG_TARGET&&i.DRAG_TARGET._Broadcast(a.DROPPED,i.DRAG_TARGET),this._Clear()}},{key:"_DropSingleDataItem",value:function _DropSingleDataItem(e){for(var t=0,n=this._allowedHooks.length;t<n;t++){var i=this._allowedHooks[t],s=!1;(s=i.check.thisArg?i.check.fn.call(i.check.thisArg,e):i.check.fn(e))&&(i.drop.thisArg?i.drop.fn.call(i.drop.thisArg,e):i.drop.fn(e))}}},{key:"_Activate",value:function _Activate(e){if(this._isActive!==e){if(this._isActive=e,this._feedbackHost){this._feedbackHost.flags.Set(s.ALLOW_DROP,e);for(var t=0,n=this._allowedHooks.length;t<n;t++){var l,c=this._allowedHooks[t].flag;if(c)if(Array.isArray(c))for(var u=0,h=c.length;u<h;u++)this._feedbackHost.flags.Set(c[u],e);else this._feedbackHost.flags.Set(c,e)}}e?(DropExtension.ACTIVE_TARGET=this,this._target.addEventListener("drop",this._mDrop),i.instance.Unwatch(a.DRAG_ENDED,this._dragEnd,this)):(DropExtension.ACTIVE_TARGET===this&&(DropExtension.ACTIVE_TARGET=null),this._target.removeEventListener("drop",this._mDrop),i.instance.Watch(a.DRAG_ENDED,this._dragEnd,this))}}},{key:"_Clear",value:function _Clear(){this._draggingOver=!1;for(var e=i.DRAG_DATA,t=0,n=this._onLeaveHooks.length;t<n;t++){var s=this._onLeaveHooks[t];s.thisArg?s.fn.call(s.thisArg,e):s.fn(e)}this._target.removeEventListener("dragleave",this._mDragLeave),this._target.removeEventListener("dragover",this._mDragOver),this._Activate(!1),this._allowedHooks.length=0,this._onDragOverHooks.length=0,this._onLeaveHooks.length=0}},{key:"_ShowHint",value:function _ShowHint(){this._feedbackHost&&(this._hintElement?n.dom.Attach(this._hintElement,this._feedbackHost):this._hintElement=n.dom.El("div",{class:"ext-overlay drag-overlay"},this._feedbackHost))}},{key:"_HideHint",value:function _HideHint(){this._hintElement&&n.dom.Detach(this._hintElement)}},{key:"Hook",value:function Hook(e){return this._hooks.push(e),e.dropCandidate&&(this.watchGlobalBroadcasts=!0),this}},{key:"_CleanUp",value:function _CleanUp(){this.watchGlobalBroadcasts=!1,this._hooks.length=0,this._allowedHooks.length=0,this._onDragOverHooks.length=0,this._onLeaveHooks.length=0,this._candidatesHooks.length=0,_get(_getPrototypeOf(DropExtension.prototype),"_CleanUp",this).call(this)}}],[{key:"ACTIVE_TARGET",get:function get(){return c},set:function set(e){var t=c;c=e,t&&t._Activate(!1),c&&c._Activate(!0)}}]),DropExtension}(l);e.exports=u},{389:300,392:342,79:344,390:298,14:458}],294:[function(__r__,e,t){var n=__r__(14),i=__r__(389),s=__r__(79),a=__r__(393),l,c=function(e){_inherits(ExpandExtension,e);var t=_createSuper(ExpandExtension);function ExpandExtension(){return _classCallCheck(this,ExpandExtension),t.call(this)}return _createClass(ExpandExtension,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ExpandExtension.prototype),"_Init",this).call(this),this._target=null,this._wrapper=null,this._isExpanded=!1,this._activator=null,this._activateOnAlt=!1,this._Bind(this._mClick)}},{key:"isExpanded",get:function get(){return this._isExpanded}},{key:"activateOnAlt",get:function get(){return this._activateOnAlt},set:function set(e){this._activateOnAlt=e}},{key:"activator",get:function get(){return this._activator},set:function set(e){var t=this._activator;this._activator=e,this._isEnabled&&(t&&(n.isInstanceOf(t,a)?t.Unwatch(s.ACTIVATED,this._OnWidgetActivated,this):t.removeEventListener("click",this._mClick)),e&&(n.isInstanceOf(e,a)?e.Watch(s.ACTIVATED,this._OnWidgetActivated,this):e.addEventListener("click",this._mClick)))}},{key:"Setup",value:function Setup(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._target=e,this._wrapper=t,e&&(e.flags.Add(e,i.EXPANDED,i.COLLAPSED),t&&e.flags.Add(t,i.EXPANDED,i.COLLAPSED),this._UpdateFlags(),this._Broadcast(this._isExpanded?s.EXPANDED:s.COLLAPSED),n&&(this.activator=n,this._activateOnAlt=a))}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(ExpandExtension.prototype),"Enable",this).call(this)&&(this._activator&&(n.isInstanceOf(this._activator,a)?this._activator.Watch(s.ACTIVATED,this._OnWidgetActivated,this):this._activator.addEventListener("click",this._mClick)),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(ExpandExtension.prototype),"Disable",this).call(this)&&(this._activator&&(n.isInstanceOf(this._activator,a)?this._activator.Unwatch(s.ACTIVATED,this._OnWidgetActivated,this):this._activator.removeEventListener("click",this._mClick)),!0)}},{key:"_OnWidgetActivated",value:function _OnWidgetActivated(e,t){this.Toggle()}},{key:"_mClick",value:function _mClick(e){e.detail>1?this._activateOnAlt&&this.Toggle():this._activateOnAlt||this.Toggle()}},{key:"Toggle",value:function Toggle(){this._isExpanded?this.Collapse():this.Expand()}},{key:"Expand",value:function Expand(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isExpanded||(this._isExpanded=!0,this._UpdateFlags(),e&&this._target.scrollIntoView({behavior:"auto",block:"nearest",inline:"start"}),this._Broadcast(s.EXPANDED))}},{key:"Collapse",value:function Collapse(){this._isExpanded&&(this._isExpanded=!1,this._UpdateFlags(),this._Broadcast(s.COLLAPSED))}},{key:"_UpdateFlags",value:function _UpdateFlags(){this._target&&(this._target.flags.Set(i.EXPANDED,this._isExpanded),this._target.flags.Set(i.COLLAPSED,!this._isExpanded))}},{key:"_CleanUp",value:function _CleanUp(){this._HideHint(),this._hintElement=null,this._target=null,_get(_getPrototypeOf(ExpandExtension.prototype),"_CleanUp",this).call(this)}}]),ExpandExtension}(__r__(390));e.exports=c},{393:288,389:300,79:344,390:298,14:458}],295:[function(__r__,e,t){var n,i=function(e){_inherits(PointerMoveExtension,e);var t=_createSuper(PointerMoveExtension);function PointerMoveExtension(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,PointerMoveExtension),(e=t.call(this))._element=n,e._isMouseOver=!1,e._Bind(e._mOver),e._Bind(e._mOut),e._Bind(e._mMove),e._moveFn=null,e._startPos=null,e._currentPos=null,e._currentOffset=null,e}return _createClass(PointerMoveExtension,[{key:"element",get:function get(){return this._element},set:function set(e){if(this._element!==e){var t=this._element;this._element=e,this._isEnabled&&(t&&t.removeEventListener("mouseenter",this._mOver),this._element&&this._element.addEventListener("mouseenter",this._mOver))}}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(PointerMoveExtension.prototype),"Enable",this).call(this)&&(this._element&&this._element.addEventListener("mouseenter",this._mOver),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(PointerMoveExtension.prototype),"Disable",this).call(this)&&(this._element&&this._element.removeEventListener("mouseenter",this._mOver),!0)}},{key:"isMouseOver",get:function get(){return this._isMouseOver}},{key:"startPos",get:function get(){return this._startPos}},{key:"currentPos",get:function get(){return this._currentPos}},{key:"currentOffset",get:function get(){return this._currentOffset}},{key:"PinStart",value:function PinStart(){this._startPos.x=this._currentPos.x,this._startPos.y=this._currentPos.y}},{key:"distanceToStart",get:function get(){var e=this._startPos.x-this._currentPos.x,t=this._startPos.y-this._currentPos.y;return Math.sqrt(e*e+t*t)}},{key:"distanceOffset",get:function get(){var e=this._currentOffset.x,t=this._currentOffset.y;return Math.sqrt(e*e+t*t)}},{key:"moveFn",set:function set(e){this._moveFn=e}},{key:"_mOver",value:function _mOver(e){this._isMouseOver||(this._isMouseOver=!0,this._startPos={x:e.clientX,y:e.clientY},this._currentPos={x:e.clientX,y:e.clientY},this._currentOffset={x:0,y:0},this._element.addEventListener("mousemove",this._mMove))}},{key:"_mOut",value:function _mOut(e){this._isMouseOver&&(this._isMouseOver=!1,this._element.removeEventListener("mousemove",this._mMove))}},{key:"_mMove",value:function _mMove(e){this._currentOffset.x=this._currentPos.x-e.clientX,this._currentOffset.y=this._currentPos.y-e.clientY,this._currentPos.x=e.clientX,this._currentPos.y=e.clientY,this._moveFn&&this._moveFn(this)}}]),PointerMoveExtension}(__r__(390));e.exports=i},{390:298}],296:[function(__r__,e,t){var n=__r__(14),i=__r__(394),s=__r__(392),a=__r__(79),l,c=function(e){_inherits(PointerStaticExtension,e);var t=_createSuper(PointerStaticExtension);function PointerStaticExtension(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,PointerStaticExtension),t.call(this,e)}return _createClass(PointerStaticExtension,[{key:"element",set:function set(e){if(this._element!==e){var t=this._element;this._element=e,this._isEnabled&&(t&&(t.removeEventListener("mouseenter",this._mOver),t.removeEventListener("mousedown",this._mDown),t.removeEventListener("mouseup",this._mUp),this._moveFn&&this._element.addEventListener("move",this._mMove),this._wheelFn&&t.removeEventListener("wheel",this._mWheel)),this._element&&(this._element.addEventListener("mouseenter",this._mOver),this._element.addEventListener("mousedown",this._mDown),this._element.addEventListener("mouseup",this._mUp),this._moveFn&&this._element.removeEventListener("move",this._mMove),this._wheelFn&&this._element.addEventListener("wheel",this._mWheel)))}}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(PointerStaticExtension.prototype),"Enable",this).call(this)&&(this._element&&(this._element.addEventListener("mouseenter",this._mOver),this._element.addEventListener("mousedown",this._mDown),this._element.addEventListener("mouseup",this._mUp),this._moveFn&&this._element.addEventListener("move",this._mMove),this._wheelFn&&this._element.addEventListener("wheel",this._mWheel)),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(PointerStaticExtension.prototype),"Disable",this).call(this)&&(this._element&&(this._element.removeEventListener("mouseenter",this._mOver),this._element.removeEventListener("mousedown",this._mDown),this._element.removeEventListener("mouseup",this._mUp),this._moveFn&&this._element.removeEventListener("move",this._mMove),this._wheelFn&&this._element.removeEventListener("wheel",this._mWheel)),!0)}},{key:"_mOver",value:function _mOver(e){this._isMouseOver||(this._isMouseOver=!0,this._element.addEventListener("mouseleave",this._mOut),this._isAnyBtnDown&&s.Unwatch(s.MOUSE_UP,this._mUpOutside),this._focusFn&&this._focusFn(!0))}},{key:"_mOut",value:function _mOut(e){this._isMouseOver&&(this._isMouseOver=!1,this._element.removeEventListener("mouseleave",this._mOut),this._isAnyBtnDown?s.Watch(s.MOUSE_UP,this._mUpOutside):this._focusFn&&this._focusFn(!1))}}]),PointerStaticExtension}(__r__(395));e.exports=c},{392:342,79:344,394:345,395:297,14:458}],297:[function(__r__,e,t){var n=__r__(14),i=__r__(394),s=__r__(392),a=__r__(79),l,c=function(e){_inherits(PointerExtension,e);var t=_createSuper(PointerExtension);function PointerExtension(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,PointerExtension),(e=t.call(this))._element=n,e._hooks={},e._using={},e._buttons={},e._position={x:0,y:0},e._isMouseOver=!1,e._isAnyBtnDown=!1,e._Bind(e._mOver),e._Bind(e._mOut),e._Bind(e._mDown),e._Bind(e._mUp),e._Bind(e._mUpOutside),e._Bind(e._mWheel),e._Bind(e._mMove),e._focusFn=null,e._moveFn=null,e}return _createClass(PointerExtension,[{key:"wheelFn",set:function set(e){this._wheelFn=e}},{key:"focusFn",set:function set(e){this._focusFn=e}},{key:"element",get:function get(){return this._element},set:function set(e){if(this._element!==e){var t=this._element;this._element=e,this._isEnabled&&(t&&t.removeEventListener("mouseenter",this._mOver),this._element&&this._element.addEventListener("mouseenter",this._mOver))}}},{key:"Enable",value:function Enable(){return!!_get(_getPrototypeOf(PointerExtension.prototype),"Enable",this).call(this)&&(this._element&&this._element.addEventListener("mouseenter",this._mOver),!0)}},{key:"Disable",value:function Disable(){return!!_get(_getPrototypeOf(PointerExtension.prototype),"Disable",this).call(this)&&(this._element&&this._element.removeEventListener("mouseenter",this._mOver),!0)}},{key:"isMouseOver",get:function get(){return this._isMouseOver}},{key:"isMouseDown",value:function isMouseDown(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e){for(var t in this._buttons)if(this._buttons[t]===s.DOWN)return!0;return!1}return e in this._buttons&&this._buttons[e]===s.DOWN}},{key:"_mOver",value:function _mOver(e){this._isMouseOver||(this._isMouseOver=!0,this._element.addEventListener("mousedown",this._mDown),this._element.addEventListener("mouseup",this._mUp),this._element.addEventListener("mouseleave",this._mOut),this._isAnyBtnDown&&s.Unwatch(s.MOUSE_UP,this._mUpOutside),this._focusFn&&this._focusFn(!0),this._wheelFn&&this._element.addEventListener("wheel",this._mWheel),this._moveFn&&this._element.addEventListener("move",this._mMove))}},{key:"_mOut",value:function _mOut(e){this._isMouseOver&&(this._isMouseOver=!1,this._element.removeEventListener("mousedown",this._mDown),this._element.removeEventListener("mouseup",this._mUp),this._element.removeEventListener("mouseleave",this._mOut),this._isAnyBtnDown?s.Watch(s.MOUSE_UP,this._mUpOutside):this._focusFn&&this._focusFn(!1),this._wheelFn&&this._element.removeEventListener("wheel",this._mWheel),this._moveFn&&this._element.removeEventListener("move",this._mMove))}},{key:"_mDown",value:function _mDown(e){s.instance.StartUsing(this._using),this._position.x=e.clientX,this._position.y=e.clientY,this._isAnyBtnDown=!0;var t=e.button;this._buttons[t]=s.DOWN,this._Trigger("".concat(t,"_").concat(s.DOWN)),i.Watch(a.DRAG_ENDED,this._mUpOutside)}},{key:"_mUp",value:function _mUp(e){var t=e.button;this._buttons[t]===s.DOWN?(this._buttons[t]=s.UP,this._Trigger("".concat(t,"_").concat(s.UP)),1===e.detail?this._Trigger("".concat(t,"_").concat(s.RELEASE)):2===e.detail&&this._Trigger("".concat(t,"_").concat(s.RELEASE_TWICE))):(this._buttons[t]=s.UP,this._Trigger("".concat(t,"_").concat(s.UP))),delete this._buttons[t],this._isAnyBtnDown=this.isMouseDown(),this._isAnyBtnDown||(i.Unwatch(a.DRAG_ENDED,this._mUpOutside),s.instance.StopUsing(this._using))}},{key:"_mUpOutside",value:function _mUpOutside(e){if(e){var t=e.button;this._buttons[t]===s.DOWN&&this._Trigger("".concat(t,"_").concat(s.RELEASE_OUTSIDE)),delete this._buttons[t]}else{for(var n in this._buttons)this._Trigger("".concat(this._buttons[n],"_").concat(s.RELEASE_OUTSIDE));this._buttons={}}this._isAnyBtnDown=this.isMouseDown(),this._isAnyBtnDown||(this._focusFn&&this._focusFn(!1),s.Unwatch(s.MOUSE_UP,this._mUpOutside),i.Unwatch(a.DRAG_ENDED,this._mUpOutside),s.instance.StopUsing(this._using))}},{key:"_mWheel",value:function _mWheel(e){this._wheelFn&&this._wheelFn(e)}},{key:"_mMove",value:function _mMove(e){this._moveFn&&this._moveFn(e)}},{key:"Hook",value:function Hook(e,t,n){var i="".concat(e,"_").concat(t),s=this._hooks[i];return this._using[e]?this._using[e]++:this._using[e]=1,(s=s?this._hooks[i]:this._hooks[i]=[]).includes(n)||s.push(n),this}},{key:"Unhook",value:function Unhook(e,t,n){var i="".concat(e,"_").concat(t),s=this._hooks[i];if(!s)return this;this._using[e]&&(this._using[e]--,this._using[e]<=0&&delete this._using[e]);var a=s.indexOf(n);return-1===a||s.splice(a,1),this}},{key:"_Trigger",value:function _Trigger(e,t){if(this._isEnabled){var n=this._hooks[e];if(n)for(var i=0,s=n.length;i<s;i++)n[i](t)}}},{key:"CleanUp",value:function CleanUp(){_get(_getPrototypeOf(PointerExtension.prototype),"CleanUp",this).call(this),this._isMouseOver&&this._mOut(null),this._buttons={}}}]),PointerExtension}(__r__(390));e.exports=c},{392:342,79:344,394:345,390:298,14:458}],298:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=function(e){_inherits(Extension,e);var t=_createSuper(Extension);function Extension(){var e;return _classCallCheck(this,Extension),(e=t.call(this))._isEnabled=!1,e._childExtensions=null,e}return _createClass(Extension,[{key:"Add",value:function Add(e){return this._childExtensions||(this._childExtensions=[]),this._childExtensions.includes(e)||(n.isFunc(e)&&(e=i.Rent(e)),this._childExtensions.push(e),e.enabled=this._isEnabled),e}},{key:"Remove",value:function Remove(e){return!this._childExtensions||this._childExtensions.includes(e)?null:(this._childExtensions.push(e),e.Disable(),e)}},{key:"CleanUp",value:function CleanUp(){if(this._childExtensions)for(var e=0,t=this._childExtensions.length;e<t;e++)this._childExtensions[e].CleanUp()}},{key:"isEnabled",get:function get(){return this._isEnabled}},{key:"enabled",set:function set(e){e?this.Enable():this.Disable()}},{key:"Enable",value:function Enable(){if(this._isEnabled)return!1;if(this._isEnabled=!0,this._childExtensions)for(var e=0,t=this._childExtensions.length;e<t;e++)this._childExtensions[e].Enable();return!0}},{key:"Disable",value:function Disable(){if(!this._isEnabled)return!1;if(this._isEnabled=!1,this._childExtensions)for(var e=0,t=this._childExtensions.length;e<t;e++)this._childExtensions[e].Disable();return!0}},{key:"_CleanUp",value:function _CleanUp(){this.Disable(),this._childExtensions.length=0,this._childExtensions=null,_get(_getPrototypeOf(Extension.prototype),"_CleanUp",this).call(this)}}]),Extension}(i.pool.DisposableObjectEx);e.exports=s},{12:27,14:458}],299:[function(__r__,e,t){e.exports={Extension:__r__(390),AnimController:__r__(396),Drag:__r__(397),Drop:__r__(398),Expand:__r__(399),Pointer:__r__(395),PointerStatic:__r__(400),PointerMove:__r__(401)}},{396:291,397:292,398:293,399:294,395:297,401:295,400:296,390:298}],300:[function(__r__,e,t){var n=__r__(12),i=function(){function FLAGS(){_classCallCheck(this,FLAGS)}return _createClass(FLAGS,null,[{key:"Opposite",value:function Opposite(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t&&(e=this.SimplifyPlacement(e,n)),e){case this.LEFT:return this.RIGHT;case this.RIGHT:return this.LEFT;case this.TOP:return this.BOTTOM;case this.BOTTOM:return this.TOP;case this.TOP_LEFT:return this.BOTTOM_RIGHT;case this.TOP_RIGHT:return this.BOTTOM_LEFT;case this.BOTTOM_LEFT:return this.TOP_RIGHT;case this.BOTTOM_RIGHT:return this.TOP_LEFT;default:return null}}},{key:"SimplifyPlacement",value:function SimplifyPlacement(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e){case this.TOP_LEFT:return t?this.TOP:this.LEFT;case this.TOP_RIGHT:return t?this.TOP:this.RIGHT;case this.BOTTOM_LEFT:return t?this.BOTTOM:this.LEFT;case this.BOTTOM_RIGHT:return t?this.BOTTOM:this.RIGHT}return e}},{key:"Orientation",value:function Orientation(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e){case this.LEFT:case this.RIGHT:return this.HORIZONTAL;case this.TOP:case this.BOTTOM:return this.VERTICAL;case this.TOP_LEFT:case this.TOP_RIGHT:case this.BOTTOM_LEFT:case this.BOTTOM_RIGHT:return t?this.VERTICAL:null===t?this.HORIZONTAL:this.VERTICAL_AND_HORIZONTAL}return t?this.VERTICAL:null===t?this.HORIZONTAL:this.VERTICAL_AND_HORIZONTAL}}]),FLAGS}();_defineProperty(i,"NONE","none"),_defineProperty(i,"SELF","self"),_defineProperty(i,"INSIDE","inside"),_defineProperty(i,"OUTSIDE","outside"),_defineProperty(i,"VERTICAL","vertical"),_defineProperty(i,"HORIZONTAL","horizontal"),_defineProperty(i,"VERTICAL_AND_HORIZONTAL","".concat(i.VERTICAL," ").concat(i.HORIZONTAL)),_defineProperty(i,"orientations",[i.VERTICAL,i.HORIZONTAL,i.VERTICAL_AND_HORIZONTAL]),_defineProperty(i,"EXPANDED","expanded"),_defineProperty(i,"COLLAPSED","collapsed"),_defineProperty(i,"DISABLED","disabled"),_defineProperty(i,"IDLE","idle"),_defineProperty(i,"FOCUSED","focused"),_defineProperty(i,"istates",[i.DISABLED,i.IDLE,i.FOCUSED]),_defineProperty(i,"ACTIVATED","activated"),_defineProperty(i,"SELECTED","selected"),_defineProperty(i,"TOGGLED","toggled"),_defineProperty(i,"TOGGLABLE","togglable"),_defineProperty(i,"LEFT","left"),_defineProperty(i,"RIGHT","right"),_defineProperty(i,"TOP","top"),_defineProperty(i,"BOTTOM","bottom"),_defineProperty(i,"TOP_LEFT","".concat(i.TOP," ").concat(i.LEFT)),_defineProperty(i,"TOP_RIGHT","".concat(i.TOP," ").concat(i.RIGHT)),_defineProperty(i,"BOTTOM_LEFT","".concat(i.BOTTOM," ").concat(i.LEFT)),_defineProperty(i,"BOTTOM_RIGHT","".concat(i.BOTTOM," ").concat(i.RIGHT)),_defineProperty(i,"placement",[i.LEFT,i.RIGHT,i.TOP,i.BOTTOM,i.TOP_LEFT,i.TOP_RIGHT,i.BOTTOM_LEFT,i.BOTTOM_RIGHT]),_defineProperty(i,"placementSimplified",[i.LEFT,i.RIGHT,i.TOP,i.BOTTOM]),_defineProperty(i,"SHOWN","shown"),_defineProperty(i,"NO_ICON","no-icon"),_defineProperty(i,"NO_LABEL","no-label"),_defineProperty(i,"NO_SCALE","no-scale"),_defineProperty(i,"FIXED_SIZE","fixed-size"),_defineProperty(i,"SIZE_XS","size-xs"),_defineProperty(i,"SIZE_S","size-s"),_defineProperty(i,"SIZE_M","size-m"),_defineProperty(i,"SIZE_L","size-l"),_defineProperty(i,"SIZE_XL","size-xl"),_defineProperty(i,"sizes",[i.SIZE_XS,i.SIZE_S,i.SIZE_M,i.SIZE_L,i.SIZE_XL]),_defineProperty(i,"CTA","cta"),_defineProperty(i,"flavors",[n.FLAGS.INFOS,n.FLAGS.WARNING,n.FLAGS.ERROR,i.CTA]),_defineProperty(i,"flavorsExtended",[n.FLAGS.INFOS,n.FLAGS.WARNING,n.FLAGS.ERROR,n.FLAGS.READY,n.FLAGS.DIRTY,n.FLAGS.LOADING,n.FLAGS.PROCESSING,n.FLAGS.WAITING,n.FLAGS.active,i.CTA]),_defineProperty(i,"MINIMAL","minimal"),_defineProperty(i,"FRAME","frame"),_defineProperty(i,"variants",[i.MINIMAL,i.FRAME]),_defineProperty(i,"A_START","start"),_defineProperty(i,"A_END","end"),_defineProperty(i,"A_ITERATION","iteration"),_defineProperty(i,"A_CANCEL","cancel"),_defineProperty(i,"A_ANY_END","any-end"),_defineProperty(i,"DRAGGED","dragged"),_defineProperty(i,"ALLOW_DROP","allow-drop"),_defineProperty(i,"ALLOW_DROP_TOP","allow-drop-top"),_defineProperty(i,"ALLOW_DROP_BOTTOM","allow-drop-bottom"),_defineProperty(i,"ALLOW_DROP_LEFT","allow-drop-left"),_defineProperty(i,"ALLOW_DROP_RIGHT","allow-drop-right"),_defineProperty(i,"EMPTY","empty"),e.exports=i},{12:27}],301:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=function(e){_inherits(CatalogBuilder,e);var t=_createSuper(CatalogBuilder);function CatalogBuilder(){return _classCallCheck(this,CatalogBuilder),t.call(this)}return _createClass(CatalogBuilder,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogBuilder.prototype),"_Init",this).call(this),this._defaultItemClass=null,this._defaultGroupClass=null,this._host=null}},{key:"host",get:function get(){return this._host},set:function set(e){this._host=e}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t){if(!_get(_getPrototypeOf(CatalogBuilder.prototype),"_OnCatalogItemAdded",this).call(this,e,t))return!1;var a=null;return a=n.isInstanceOf(t,s.catalogs.Catalog)?this._owner.Add(i.BINDINGS.Get(this._owner,t,this._defaultGroupClass),"item group",this._host):this._owner.Add(i.BINDINGS.Get(this._owner,t,this._defaultItemClass),"item",this._host),this._map.set(t,a),a.data=t,this._Broadcast(i.SIGNAL.ITEM_ADDED,this,t,a),!0}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,n){var s=_get(_getPrototypeOf(CatalogBuilder.prototype),"_OnCatalogItemRemoved",this).call(this,e,t,n);return!1!==s&&(this._Broadcast(i.SIGNAL.ITEM_REMOVED,this,t,s,n),s&&s.Release(),s)}},{key:"_OnCatalogSorted",value:function _OnCatalogSorted(e){for(var t,n=0,i=0,s=this._catalog._items.length;i<s;i++){var a=this._items[i],l=this._map.get(a);l&&(a.isDir?l.order=n:l.order=this._itemCount+n,n++)}_get(_getPrototypeOf(CatalogBuilder.prototype),"_OnCatalogSorted",this).call(this,e)}},{key:"_CleanUp",value:function _CleanUp(){this._defaultItemClass=null,this._defaultGroupClass=null,this._host=null,_get(_getPrototypeOf(CatalogBuilder.prototype),"_CleanUp",this).call(this)}}]),CatalogBuilder}(s.catalogs.CatalogWatcher);e.exports=a},{12:27,31:66,14:458}],302:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(394),l=__r__(114),c=__r__(402),u=function(e){_inherits(CatalogViewBuilder,e);var t=_createSuper(CatalogViewBuilder);function CatalogViewBuilder(){return _classCallCheck(this,CatalogViewBuilder),t.call(this)}return _createClass(CatalogViewBuilder,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(CatalogViewBuilder.prototype),"_Init",this).call(this),this._reverseMap=new Map}},{key:"Owns",value:function Owns(e){return!!e&&this._reverseMap.has(e)}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t){if(!_get(_getPrototypeOf(CatalogViewBuilder.prototype),"_OnCatalogItemAdded",this).call(this,e,t))return!1;var s=t.GetOption(l.VIEW,null);if(s){if(!n.isInstanceOf(s,c))throw new Error("view is not of type View.")}else{var u=t.GetOption(l.VIEW_CLASS,null);if(!u)throw console.log(t),new Error("Shelf's item has neither a [ui.IDS.VIEW] or [ui.IDS.VIEW_CLASS] property.");if(!n.isInstanceOf(u,c))throw new Error("[ui.IDS.VIEW_CLASS] (".concat(u.name,") is not of type View"));s=a.Rent(u),t.SetOption(l.VIEW,s)}return this._map.set(t,s),this._reverseMap.set(s,t),t.data?s.data=t.data:s.data=t,this._Broadcast(i.SIGNAL.ITEM_ADDED,this,t,s),!0}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,n){var s=_get(_getPrototypeOf(CatalogViewBuilder.prototype),"_OnCatalogItemRemoved",this).call(this,e,t,n);return!1!==s&&(this._reverseMap.delete(s),this._Broadcast(i.SIGNAL.ITEM_REMOVED,this,t,s,n),s.Release(),s)}}]),CatalogViewBuilder}(s.catalogs.CatalogWatcher);e.exports=u},{114:309,394:345,402:350,12:27,31:66,14:458}],303:[function(__r__,e,t){var n=__r__(18),i=Symbol("null"),s=function(){function FlagBox(){_classCallCheck(this,FlagBox),this._elements=null,this._flags=new n.Dictionary}return _createClass(FlagBox,[{key:"Set",value:function Set(e,t){return t?(this._flags.Set(e,!0),this.Apply(e,!0)):(this._flags.Set(e,!1),this.Apply(e,!1)),t}},{key:"IsSet",value:function IsSet(e){var t=this._flags.Get(e);return t||!1}},{key:"Toggle",value:function Toggle(e){this.Set(e,!this.IsSet(e))}},{key:"Add",value:function Add(e){this._elements||(this._elements=new n.DictionaryList);for(var t=0,i=arguments.length<=1?0:arguments.length-1;t<i;t++)this._elements.Set(t+1<1||arguments.length<=t+1?void 0:arguments[t+1],e)}},{key:"Remove",value:function Remove(e){if(this._elements)for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t++)this._elements.Remove(t+1<1||arguments.length<=t+1?void 0:arguments[t+1],e)}},{key:"Apply",value:function Apply(e,t){if(this._elements){var n=this._elements.Get(e);if(n)if(t)for(var i=0,s=n.length;i<s;i++)n[i].classList.add(e);else for(var a=0,l=n.length;a<l;a++)n[a].classList.remove(e)}}},{key:"ApplyAll",value:function ApplyAll(e){if(this._elements)for(var t=this._elements.keys,n=0,i=t.length;n<i;n++)for(var s=t[n],a=this._elements.Get(s),l=0,c=a.length;l<c;l++)e?a[l].classList.add(s):a[l].classList.remove(s)}},{key:"Clear",value:function Clear(){this._flags.Clear(),this._elements&&this._elements.Clear()}}]),FlagBox}();e.exports=s},{18:21}],304:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=function(){function FlagEnum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,FlagEnum),this._elements=[],this._managed=[],this._prefix=n,this._isStaticEnum=t,this._enum=e||[],this._currentFlag=null,this._onFlagChanged=i.Rent(i.signals.SignalBroadcaster)}return _createClass(FlagEnum,[{key:"currentFlag",get:function get(){return this._currentFlag}},{key:"onFlagChanged",get:function get(){return this._onFlagChanged}},{key:"AddEnum",value:function AddEnum(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this._isStaticEnum)throw new Error("FlagEnum is using a static enum.");1===t.length&&n.isArray(t[0])&&(t=t[0]);for(var s=0,a=t.length;s<a;s++)this._enum.includes(t[s])||this._enum.push(t[s])}},{key:"RemoveEnum",value:function RemoveEnum(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this._isStaticEnum)throw new Error("FlagEnum is using a static enum.");var s;1===t.length&&n.isArray(t[0])&&(t=t[0]);for(var a=0,l=t.length;a<l;a++)-1!=(s=this._enum.indexOf(t[a]))&&this._enum.slice(s,1)}},{key:"Add",value:function Add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,s=t.length;i<s;i++)this._elements.includes(t[i])||this._elements.push(t[i])}},{key:"Remove",value:function Remove(){for(var e=0,t=arguments.length;e<t;e++){var n=this._elements.indexOf(e<0||arguments.length<=e?void 0:arguments[e]);-1!=n&&this._elements.slice(n,1)}}},{key:"AddManaged",value:function AddManaged(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,s=t.length;i<s;i++)this._managed.includes(t[i])||this._managed.push(t[i])}},{key:"RemoveManaged",value:function RemoveManaged(){for(var e=0,t=arguments.length;e<t;e++){var n=this._managed.indexOf(e<0||arguments.length<=e?void 0:arguments[e]);-1!=n&&this._managed.slice(n,1)}}},{key:"Apply",value:function Apply(e,t){for(var n=0,i=t.length;n<i;n++){var s=t[n];e in s&&(s[e]=this._currentFlag)}}},{key:"Set",value:function Set(e){if(e&&!this._enum.includes(e))throw new Error("flag '".concat(e,"' not part of enum ").concat(this._enum));for(var t=0,n=this._managed.length;t<n;t++)this._managed[t].Set(e);if(this._currentFlag!==e){var i=this._currentFlag,s=i?this._prefix?"".concat(this._prefix,"-").concat(i):i:null,a=e?this._prefix?"".concat(this._prefix,"-").concat(e):e:null,l;if(this._currentFlag=e,!i&&e)for(var c=0,u=this._elements.length;c<u;c++)this._elements[c].classList.add(a);else if(i&&!e)for(var h=0,d=this._elements.length;h<d;h++)this._elements[h].classList.remove(s);else for(var p=0,m=this._elements.length;p<m;p++)(l=this._elements[p]).classList.add(a),l.classList.remove(s);this._onFlagChanged.Broadcast(e,i)}}},{key:"Bump",value:function Bump(e){var t=this._enum.indexOf(this._currentFlag),n;this._enum.indexOf(e)>t&&this.Set(e)}},{key:"Clear",value:function Clear(){this.Set(null),this._flags.Clear(),this._elements.length=0,this._enum.length=0}}]),FlagEnum}();e.exports=s},{12:27,14:458}],305:[function(__r__,e,t){var n=__r__(394),i=__r__(389),s=__r__(403),a,l=function(e){_inherits(Frame,e);var t=_createSuper(Frame);function Frame(){return _classCallCheck(this,Frame),t.call(this)}return _createClass(Frame,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Frame.prototype),"_Init",this).call(this),this._imgManipulator=new s.Image(this,!1)}},{key:"_Style",value:function _Style(){return{":host":{position:"relative","min-width":0,"@":["cover"]},":host(.focused)":{},":host(.focused) .toolbar":{},":host(.selected)":{},":host(.selected.focused)":{}}}},{key:"Set",value:function Set(e){return this._imgManipulator.Set(e)}},{key:"_CleanUp",value:function _CleanUp(){this._imgManipulator.Set(null),_get(_getPrototypeOf(Frame.prototype),"_CleanUp",this).call(this)}}]),Frame}(__r__(393));e.exports=l,n.Register("nkmjs-frame",l)},{393:288,389:300,403:333,394:345}],306:[function(__r__,e,t){e.exports={CatalogBuilder:__r__(404),CatalogViewBuilder:__r__(405),FlagBox:__r__(406),FlagEnum:__r__(407),Frame:__r__(408),PopIn:__r__(409),WidgetSelection:__r__(410)}},{404:301,405:302,406:303,407:304,408:305,409:307,410:308}],307:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(394),l=__r__(389),c=__r__(79),u=__r__(392),h=__r__(411),d=__r__(412),p=__r__(413),m=__r__(407),y=function(e){_inherits(PopIn,e);var t=_createSuper(PopIn);function PopIn(){return _classCallCheck(this,PopIn),t.call(this)}return _createClass(PopIn,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(PopIn.prototype),"_Init",this).call(this),this._content=null,this._options=null,this._placement=null,this._placementEnum=new m(l.placements),this._placementEnum.Add(this),this._modeEnum=new m(this.constructor.modes,!0),this._modeEnum.Add(this),this._optionsHandler=new s.helpers.OptionsHandler(this._Bind(this._OnOptionsUpdated),this._Bind(this._OnOptionsWillUpdate)),this._optionsHandler.Hook("mode"),this._optionsHandler.Hook("context",null,document.body),this._optionsHandler.Hook("anchor"),this._optionsHandler.Hook("static",null,!1),this._optionsHandler.Hook("placement",null,PopIn.CENTER),this._optionsHandler.Hook("origin",null,PopIn.CENTER),this._pointer=new h.PointerStatic(this),this._ownsContent=!1,this._Bind(this._mUp),this._Bind(this._mDown),this._Bind(this.Close),this._Bind(this._UpdateAnchoredPosition),this._parentPopin=null,this._subPopins=new i.List}},{key:"_Wake",value:function _Wake(){_get(_getPrototypeOf(PopIn.prototype),"_Wake",this).call(this),u.Watch(u.MOUSE_DOWN,this._mDown),this._pointer.Enable(),this.constructor.popinStack.Add(this)}},{key:"parentPopin",get:function get(){return this._parentPopin},set:function set(e){if(this._parentPopin!=e){var t=this._parentPopin;this._parentPopin=e,t&&t._subPopins.Remove(this),this._parentPopin&&this._parentPopin._subPopins.Add(this)}}},{key:"options",get:function get(){return this._options},set:function set(e){if(this._options=e,this.content=e.content,!this._content)throw new Error("PopIn options has no content set.");this._optionsHandler.Process(this,this._options)}},{key:"mode",get:function get(){return this._modeEnum.currentFlag},set:function set(e){this._modeEnum.Set(e)}},{key:"placement",get:function get(){return this._placement},set:function set(e){this._placement=e}},{key:"origin",get:function get(){return this._placement},set:function set(e){this._placement=e}},{key:"static",get:function get(){return this._static},set:function set(e){this._static!==e&&(this._static=e)}},{key:"content",get:function get(){return this._content},set:function set(e){this._content!==e&&(this._content&&(this._content.Unwatch(c.CLOSE_REQUESTED,this.Close),this._ownsContent&&this._content.Release(),this._content=null),e?(this._ownsContent=n.isFunc(e),this._content=this.Add(e,"content"),this._content.Watch(c.CLOSE_REQUESTED,this.Close)):this._ownsContent=!1)}},{key:"context",get:function get(){return this._context},set:function set(e){this._context!==e&&(this._context&&n.dom.Detach(this),this._context=e,this._context&&n.dom.Attach(this,this._context))}},{key:"anchor",get:function get(){return this._anchor},set:function set(e){this._anchor!==e&&(this._anchor=e,this._anchor?s.time.TIME.Watch(s.SIGNAL.TICK,this._UpdateAnchoredPosition):s.time.TIME.Unwatch(s.SIGNAL.TICK,this._UpdateAnchoredPosition))}},{key:"_OnOptionsWillUpdate",value:function _OnOptionsWillUpdate(e,t,n){e.parent&&(this.parentPopin=e.parent)}},{key:"_OnOptionsUpdated",value:function _OnOptionsUpdated(e,t,n){var i=e.callback;i&&(i.thisArg?i.fn.apply(i.thisArg,this):i.fn(this))}},{key:"_Style",value:function _Style(){return{":host":{position:"absolute",border:"2px solid #ff0000",display:"flex"},":host(.mode-float-inside)":{},":host(.mode-anchor)":{}}}},{key:"_UpdateAnchoredPosition",value:function _UpdateAnchoredPosition(){var e=n.dom.Rect(this._anchor,this.parentElement),t=e.x+.5*e.width,i=e.y+.5*e.height,s=t+e.width*this._placement.x,a=i+e.height*this._placement.y;this._placement.x,this._placement.y,this.style.transform="translateX(".concat(s,"px) translateY(").concat(a,"px)")}},{key:"_mDown",value:function _mDown(e){u.Watch(u.MOUSE_UP,this._mUp)}},{key:"_mUp",value:function _mUp(e){if(u.Unwatch(u.MOUSE_UP,this._mUp),!this._static&&!this._pointer.isMouseOver&&!this._pointer.isMouseDown()){for(var t=0,n=this._subPopins.count;t<n;t++){var i;if(this._subPopins.At(t)._pointer.isMouseOver||this._pointer.isMouseDown())return}this.Close()}}},{key:"Close",value:function Close(){for(;!this._subPopins.isEmpty;){var e;this._subPopins.Pop().Close()}this.Release()}},{key:"_CleanUp",value:function _CleanUp(){this.constructor.popinStack.Remove(this),u.Unwatch(u.MOUSE_DOWN,this._mDown),u.Unwatch(u.MOUSE_UP,this._mUp),this._pointer.Disable(),this.parentPopin=null,this.context=null,this.content=null,this.anchor=null,this.mode=null,this.static=!1,this._options=null,this._ownsContent=!1,_get(_getPrototypeOf(PopIn.prototype),"_CleanUp",this).call(this)}}],[{key:"Pop",value:function Pop(e){var t=a.Rent(PopIn);return t.options=e,t}},{key:"PopChild",value:function PopChild(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||(t=this.popinStack.last),t?(e.parent=t,this.Pop(e)):this.Pop(e)}}]),PopIn}(d);_defineProperty(y,"popinStack",new i.List),_defineProperty(y,"MODE_ANCHOR","mode-anchor"),_defineProperty(y,"MODE_FLOAT_INSIDE","mode-float-inside"),_defineProperty(y,"MODE_FLOAT_OUTSIDE","mode-float-outside"),_defineProperty(y,"modes",[y.MODE_ANCHOR,y.MODE_FLOAT_INSIDE,y.MODE_FLOAT_OUTSIDE]),_defineProperty(y,"LEFT",{x:-.5,y:0}),_defineProperty(y,"RIGHT",{x:.5,y:0}),_defineProperty(y,"TOP",{x:0,y:-.5}),_defineProperty(y,"BOTTOM",{x:0,y:.5}),_defineProperty(y,"TOP_LEFT",{x:-.5,y:-.5}),_defineProperty(y,"TOP_RIGHT",{x:.5,y:-.5}),_defineProperty(y,"BOTTOM_LEFT",{x:-.5,y:.5}),_defineProperty(y,"BOTTOM_RIGHT",{x:.5,y:.5}),_defineProperty(y,"CENTER",{x:0,y:0}),e.exports=y,a.Register("nkmjs-pop-in",y)},{412:287,411:299,389:300,392:342,79:344,394:345,413:355,407:304,18:21,12:27,14:458}],308:[function(__r__,e,t){var n=__r__(12),i=__r__(18),s=__r__(79),a=__r__(391),l=function(e){_inherits(WidgetSelection,e);var t=_createSuper(WidgetSelection);function WidgetSelection(){return _classCallCheck(this,WidgetSelection),t.call(this)}return _createClass(WidgetSelection,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(WidgetSelection.prototype),"_Init",this).call(this),this._stack=new i.List,this._shareSignals=!0,this._allowMultiple=!0,this._clearing=!1,this._sharingEvent=!1}},{key:"shareSignals",get:function get(){return this._shareSignals},set:function set(e){this._shareSignals=e}},{key:"allowMultiple",get:function get(){return this._allowMultiple},set:function set(e){this._allowMultiple=e,e||this.Clear()}},{key:"Add",value:function Add(e){return this._stack.Contains(e)?(a.ctrl&&this.Remove(e),!1):(this._allowMultiple&&a.ctrl||this.Clear(),this._stack.Add(e),e.Watch(s.SELECTION_LOST,this._OnItemSelectionLost,this).Watch(s.DRAG_STARTED,this._OnItemDragStarted,this).Watch(s.DRAG_ENDED,this._OnItemDragEnded,this).Watch(n.SIGNAL.RELEASED,this._OnItemReleased,this),e.Select(!0),this._Broadcast(n.SIGNAL.ITEM_ADDED,e),!0)}},{key:"Remove",value:function Remove(e){this._stack.Remove(e)&&(e.Select(!1),e.Unwatch(s.SELECTION_LOST,this._OnItemSelectionLost,this).Unwatch(s.DRAG_STARTED,this._OnItemDragStarted,this).Unwatch(s.DRAG_ENDED,this._OnItemDragEnded,this).Unwatch(n.SIGNAL.RELEASED,this._OnItemReleased,this),this._Broadcast(n.SIGNAL.ITEM_REMOVED,e))}},{key:"_OnItemSelectionLost",value:function _OnItemSelectionLost(e){this.Remove(e)}},{key:"_OnItemReleased",value:function _OnItemReleased(e){this.Remove(e)}},{key:"_OnItemDragStarted",value:function _OnItemDragStarted(e){this._SpreadEvent(s.DRAG_STARTED,e)}},{key:"_OnItemDragEnded",value:function _OnItemDragEnded(e){this._SpreadEvent(s.DRAG_ENDED,e)}},{key:"_SpreadEvent",value:function _SpreadEvent(e,t){if(this._shareSignals&&!this._sharingEvent){this._sharingEvent=!0;for(var n=this._stack.internalArray,i=0,s=n.length;i<s;i++){var a=n[i];a!=t&&a._Broadcast(e,a)}this._sharingEvent=!1}}},{key:"Clear",value:function Clear(){for(var e=this._stack;!e.isEmpty;)this.Remove(e.last)}}]),WidgetSelection}(n.pool.DisposableObjectEx);e.exports=l},{391:310,79:344,18:21,12:27}],309:[function(__r__,e,t){var n=__r__(12),i=function IDS(){_classCallCheck(this,IDS)};_defineProperty(i,"UID",n.IDS.UID),_defineProperty(i,"STATIC",n.IDS.STATIC),_defineProperty(i,"NAME",n.IDS.NAME),_defineProperty(i,"TITLE",n.IDS.TITLE),_defineProperty(i,"MESSAGE",n.IDS.MESSAGE),_defineProperty(i,"ICON",n.IDS.ICON),_defineProperty(i,"IMG","img"),_defineProperty(i,"FLAVOR","flavor"),_defineProperty(i,"VARIANT","variant"),_defineProperty(i,"PATH",n.IDS.PATH),_defineProperty(i,"DATA",n.IDS.DATA),_defineProperty(i,"CMD_PRIMARY",n.IDS.CMD_PRIMARY),_defineProperty(i,"CMD_SECONDARY",n.IDS.CMD_SECONDARY),_defineProperty(i,"CMD_LIST",n.IDS.CMD_LIST),_defineProperty(i,"OWNER",n.IDS.OWNER),_defineProperty(i,"LABEL","label"),_defineProperty(i,"SUBTITLE","subtitle"),_defineProperty(i,"HEADER","header"),_defineProperty(i,"BODY","body"),_defineProperty(i,"FOOTER","footer"),_defineProperty(i,"VIEW","view"),_defineProperty(i,"VIEW_CLASS","viewClass"),_defineProperty(i,"CONTROLS","controls"),_defineProperty(i,"CSS_CL","csscl"),_defineProperty(i,"TRIGGER","trigger"),e.exports=i},{12:27}],310:[function(__r__,e,t){var n=__r__(18),i=__r__(12),s=__r__(21),a=__r__(414),l=__r__(383),c=function(e){_inherits(INPUT,e);var t=_createSuper(INPUT);function INPUT(){return _classCallCheck(this,INPUT),t.call(this)}return _createClass(INPUT,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(INPUT.prototype),"_Init",this).call(this),this._running=!1,this._down=new n.Dictionary,this._Bind(this._KHandle),this._Bind(this._KBlur),this._shiftKey=!1,this._ctrlKey=!1,this._altKey=!1,this._currentKeyEvent=null,this._isBrowser&&(this._Start(),this._pointer=a.instance)}},{key:"_Prepare",value:function _Prepare(){s.features.doMState===s.DOM_STATE.INTERACTIVE?this._OnDomInteractive():s.features.WatchOnce(s.SIGNAL.DOMSTATE_CHANGED,this._OnDomInteractive,this)}},{key:"_OnDomInteractive",value:function _OnDomInteractive(){this._Start()}},{key:"_Start",value:function _Start(){this._running||(console.log("INPUT START"),window.addEventListener("keydown",this._KHandle),window.addEventListener("keyup",this._KHandle),window.addEventListener("keypress",this._KHandle),window.addEventListener("blur",this._KBlur),a.instance._Start(),this._running=!0)}},{key:"_Stop",value:function _Stop(){this._running&&(window.removeEventListener("keydown",this._KHandle),window.removeEventListener("keyup",this._KHandle),window.removeEventListener("keypress",this._KHandle),window.removeEventListener("blur",this._KBlur),a.instance._Stop(),this._running=!1)}},{key:"running",get:function get(){return this._running}},{key:"currentKeyEvent",get:function get(){return this._currentKeyEvent}},{key:"shiftKey",get:function get(){return this._shiftKey}},{key:"ctrlKey",get:function get(){return this._ctrlKey}},{key:"altKey",get:function get(){return this._altKey}},{key:"mouse",get:function get(){return this._pointer}},{key:"_KHandle",value:function _KHandle(e){this._currentKeyEvent=e,this._shiftKey=e.shiftKey,this._ctrlKey=e.ctrlKey,this._altKey=e.altKey;var t=e.type,n=e.key,i=e.code,s=e.which;"keydown"===t?e.repeat?(this._Broadcast(INPUT.KEY_REPEAT),this._Broadcast("R_".concat(s))):(this._down.Set(s,!0),this._Broadcast(INPUT.KEY_DOWN),this._Broadcast("D_".concat(s))):"keyup"===t&&(this._down.Remove(s),this._Broadcast(INPUT.KEY_UP,s),this._Broadcast("U_".concat(s))),this._currentKeyEvent=null}},{key:"_KBlur",value:function _KBlur(e){for(var t=this._down.keys,n=0,i=t.length;n<i;n++)this._Broadcast(INPUT.KEY_UP,null),this._Broadcast("U_".concat(t[n]),null);this._down.Clear()}}],[{key:"shift",get:function get(){return this.instance.shiftKey}},{key:"ctrl",get:function get(){return this.instance.ctrlKey}},{key:"alt",get:function get(){return this.instance.altKey}},{key:"ONKeyUp",value:function ONKeyUp(e,t){this.Watch("U_".concat(e),t)}},{key:"OFFKeyUp",value:function OFFKeyUp(e,t){this.Unwatch("U_".concat(e),t)}},{key:"ONKeyDown",value:function ONKeyDown(e,t){this.Watch("D_".concat(e),t)}},{key:"OFFKeyDown",value:function OFFKeyDown(e,t){this.Unwatch("D_".concat(e),t)}},{key:"ONKeyRepeat",value:function ONKeyRepeat(e,t){this.Watch("R_".concat(e),t)}},{key:"OFFKeyRepeat",value:function OFFKeyRepeat(e,t){this.Unwatch("R_".concat(e),t)}},{key:"POINTER",get:function get(){return this.instance._mouse}}]),INPUT}(i.helpers.SingletonEx);_defineProperty(c,"KEY_UP",Symbol("keyUp")),_defineProperty(c,"KEY_DOWN",Symbol("keyDown")),_defineProperty(c,"KEY_REPEAT",Symbol("keyRepeat")),e.exports=c},{414:342,383:345,18:21,12:27,21:190}],311:[function(__r__,e,t){e.exports={SIGNAL:__r__(415),UNITS:__r__(416),KEYS:__r__(417),InputHandler:__r__(418),InputBase:__r__(419),InputField:__r__(420),InputFormHandler:__r__(421),InputListHandler:__r__(422),InputGroup:__r__(423),MovableHandle:__r__(424)}},{419:312,420:313,421:314,423:315,418:316,422:317,415:318,417:319,424:320,416:321}],312:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(389),l=__r__(413),c=__r__(425),u=__r__(415),h=__r__(418),d=function(e){_inherits(BaseInput,e);var t=_createSuper(BaseInput);function BaseInput(){return _classCallCheck(this,BaseInput),t.call(this)}return _createClass(BaseInput,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(BaseInput.prototype),"_Init",this).call(this),this._handler=new h,this._handler.owner=this,this._handler._updatePreviewFn=this._Bind(this._UpdatePreview),this._handler._onInputErrorFn=this._Bind(this._OnInputErrors),this._sizeEnum=new c(a.sizes,!0),this._sizeEnum.Add(this),this._flavorEnum=new c(a.flavorsExtended,!0),this._flavorEnum.Add(this)}},{key:"handler",get:function get(){return this._handler}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(e){this._sizeEnum.Set(e)}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(e){this._flavorEnum.Set(e)}},{key:"currentValue",get:function get(){return this._handler.currentValue},set:function set(e){this._handler.currentValue=e}},{key:"changedValue",get:function get(){return this._handler.changedValue},set:function set(e){this._handler.changedValue=e}},{key:"inputId",get:function get(){return this._handler.inputId},set:function set(e){this._handler.inputId=e}},{key:"_OnInputErrors",value:function _OnInputErrors(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],s=this._RequestFeedback(i);this._flavorEnum.Bump(i.type),s&&this._handler._AddFeedback(s)}}},{key:"_RequestFeedback",value:function _RequestFeedback(e){return null}},{key:"_UpdatePreview",value:function _UpdatePreview(){}},{key:"_SelectionLost",value:function _SelectionLost(){_get(_getPrototypeOf(BaseInput.prototype),"_SelectionLost",this).call(this),this._handler.changedValue=this._GrabValue(),this._handler.SubmitValue()}},{key:"_GrabValue",value:function _GrabValue(){return null}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(BaseInput.prototype),"_CleanUp",this).call(this),this._sizeEnum.Set(null),this._flavorEnum.Set(null),this._handler.Clear()}}]),BaseInput}(l);_defineProperty(d,"__NFO__",s.NFOS.Ext({css:["@/inputs/global-input.css"]},l,["css"])),e.exports=d},{389:300,425:304,413:355,418:316,415:318,18:21,12:27,14:458}],313:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(394),l=__r__(391),c=__r__(426),u=__r__(419),h=function(e){_inherits(InputField,e);var t=_createSuper(InputField);function InputField(){return _classCallCheck(this,InputField),t.call(this)}return _createClass(InputField,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputField.prototype),"_Init",this).call(this),this._inputField=null,this._Bind(this._onInput),this._Bind(this._onChange),this._Bind(this._onFocusIn),this._Bind(this._onFocusOut),this._Bind(this._FOut),this._Bind(this._FIn)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(InputField.prototype),"_PostInit",this).call(this),this._inputField.addEventListener("focus",this._onFocusIn),this._inputField.addEventListener("focusout",this._onFocusOut),this._inputField.addEventListener("input",this._onInput),this._inputField.addEventListener("change",this._onChange)}},{key:"_Style",value:function _Style(){return s.Extends({":host":{position:"relative",display:"flex","align-content":"stretch","align-items":"stretch"},".field":{flex:"1 1 auto","min-width":0}},_get(_getPrototypeOf(InputField.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._inputField=n.dom.El("input",{class:"field"},this._host)}},{key:"placeholderValue",set:function set(e){this._inputField.setAttribute("placeholder",e)}},{key:"_onInput",value:function _onInput(e){this._handler.changedValue=this._GrabValue()}},{key:"_onChange",value:function _onChange(e){this._handler.changedValue=this._GrabValue()}},{key:"_GrabValue",value:function _GrabValue(){return this._inputField.value}},{key:"_FIn",value:function _FIn(){this._inputField.focus()}},{key:"_FOut",value:function _FOut(e){l.shift||(e&&e.preventDefault(),this._inputField.blur())}},{key:"_onFocusIn",value:function _onFocusIn(e){l.ONKeyDown(c._enter,this._FOut)}},{key:"_onFocusOut",value:function _onFocusOut(e){l.OFFKeyDown(c._enter,this._FOut),this._handler.SubmitValue()}},{key:"_UpdatePreview",value:function _UpdatePreview(){this._inputField.value=this.changedValue}}]),InputField}(u);_defineProperty(h,"__NFO__",i.NFOS.Ext({css:["@/inputs/field.css"]},u,["css"])),e.exports=h,a.Register("nkmjs-input-field",h)},{391:310,426:322,394:345,419:312,12:27,29:272,14:458}],314:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(18),a=__r__(415),l=__r__(419),c=function(e){_inherits(InputFormHandler,e);var t=_createSuper(InputFormHandler);function InputFormHandler(){return _classCallCheck(this,InputFormHandler),t.call(this)}return _createClass(InputFormHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputFormHandler.prototype),"_Init",this).call(this),this._inputList=new s.List,this._inputValues={},this._errorCount=0,this._invalidForm=!1}},{key:"inputValues",get:function get(){return this._inputValues}},{key:"invalidForm",get:function get(){return this._invalidForm}},{key:"Register",value:function Register(e){if(!n.isInstanceOf(e,l))throw new Error("InputFormHandler cannot register non-input items.");this._inputList.Add(e)&&(this._inputValues[e.inputId]=e.currentValue,e._internalValidateChangedValue(),e.invalidInput?(this._invalidForm=!0,this._Broadcast(a.FORM_INVALID,this)):this._invalidForm||this._Broadcast(a.FORM_READY,this),e._handler.Watch(a.VALUE_SUBMITTED,this._OnInputSubmit,this).Watch(a.VALUE_CHANGED,this._OnInputChanged,this).Watch(a.INPUT_ERROR,this._OnInputError,this))}},{key:"Unregister",value:function Unregister(e){this._inputList.Remove(e)&&(delete this._inputValues[e.inputId],e._handler.Unwatch(a.VALUE_SUBMITTED,this._OnInputSubmit,this).Unwatch(a.VALUE_CHANGED,this._OnInputChanged,this).Unwatch(a.INPUT_ERROR,this._OnInputError,this))}},{key:"ValidateForm",value:function ValidateForm(){var e=this._invalidForm;return this._invalidForm=!1,this._errorCount=0,this._inputList.ForEach(this._CheckInput,this),this._invalidForm!=e&&(this._invalidForm?this._Broadcast(a.FORM_INVALID,this):this._Broadcast(a.FORM_READY,this)),this._invalidForm}},{key:"_CheckInput",value:function _CheckInput(e){e.invalidInput&&(this._invalidForm=!0,this._errorCount+=e._inputErrors.length)}},{key:"Clear",value:function Clear(){for(var e=0,t=this._inputList.count;e<t;e++)this.Unregister(this._inputList.last)}},{key:"_OnInputSubmit",value:function _OnInputSubmit(e,t){this.ValidateForm(),this._inputValues[e.inputId]=t}},{key:"_OnInputChanged",value:function _OnInputChanged(e,t){this.ValidateForm(),this._inputValues[e.inputId]=t}},{key:"_OnInputError",value:function _OnInputError(e,t){this.ValidateForm()}}]),InputFormHandler}(i.pool.DisposableObjectEx);e.exports=c},{419:312,415:318,18:21,12:27,14:458}],315:[function(__r__,e,t){var n=__r__(394),i,s=function(e){_inherits(InputGroup,e);var t=_createSuper(InputGroup);function InputGroup(){return _classCallCheck(this,InputGroup),t.call(this)}return InputGroup}(__r__(419));e.exports=s,n.Register("nkmjs-input-group",s)},{394:345,419:312}],316:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(389),l=__r__(413),c=__r__(425),u=__r__(415),h=function(e){_inherits(InputHandler,e);var t=_createSuper(InputHandler);function InputHandler(){return _classCallCheck(this,InputHandler),t.call(this)}return _createClass(InputHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputHandler.prototype),"_Init",this).call(this),this._owner=null,this._currentValue=null,this._changedValue=null,this._invalidInput=!1,this._inputErrors=[],this._externalValidationStack=new i.List,this._externalSanitizationStack=new i.List,this._errorFeedbacks=[],this._updatePreviewOnChange=!0,this._submitOnChange=!0,this._inputId="",this._updatePreviewFn=null,this._onInputErrorFn=null}},{key:"owner",set:function set(e){if(this._owner!=e){var t=this._owner;this._owner=e}}},{key:"submitOnChange",get:function get(){return this._submitOnChange},set:function set(e){this._submitOnChange=e}},{key:"currentValue",get:function get(){return this._currentValue},set:function set(e){if(this._currentValue!==e){var t=this._currentValue;this._currentValue=e,this._changedValue=e,this._OnCurrentValueChanged(t)}else this.changedValue=e}},{key:"invalidInput",get:function get(){return this._invalidInput}},{key:"inputId",get:function get(){return this._inputId},set:function set(e){this._inputId=e}},{key:"_OnCurrentValueChanged",value:function _OnCurrentValueChanged(e){this._RequestPreviewUpdate()}},{key:"changedValue",get:function get(){return this._changedValue},set:function set(e){if(this._changedValue!==e){var t=this._changedValue;this._changedValue=e,this._OnValueChanged(t)}}},{key:"_OnValueChanged",value:function _OnValueChanged(e){this._internalValidateChangedValue(),this._Broadcast(u.VALUE_CHANGED,this,this._changedValue),this._updatePreviewOnChange&&this._RequestPreviewUpdate(),this._submitOnChange&&this.SubmitValue()}},{key:"_IsValueChanged",value:function _IsValueChanged(){return this._currentValue!=this._changedValue}},{key:"_SanitizeValue",value:function _SanitizeValue(e){for(var t=null,n=0,i=this._externalSanitizationStack.count;n<i;n++)if((t=this._externalSanitizationStack.At(n)).arg)e=t.fn.call(t.thisArg,e,t.arg);else if(t.args){var s;e=(s=t.fn).call.apply(s,[t.thisArg,e].concat(_toConsumableArray(t.args)))}else e=t.fn.call(t.thisArg,e);return e}},{key:"_ClearErrors",value:function _ClearErrors(){this._ClearFeedbacks(),this._invalidInput=!1,this._inputErrors.length=0}},{key:"_internalValidateChangedValue",value:function _internalValidateChangedValue(){var e=this._changedValue;this._ClearErrors();for(var t=0,n=this._externalValidationStack.count;t<n;t++){var i=this._externalValidationStack.At(t),s=null;if(i.arg)s=i.fn.call(i.thisArg,e,i.arg);else if(i.args){var a;s=(a=i.fn).call.apply(a,[i.thisArg,e].concat(_toConsumableArray(i.args)))}else s=i.fn.call(i.thisArg,e);s&&this._PushError(s)}return this._invalidInput=this._inputErrors.length>0,this._invalidInput&&this._internalOnInputError(),!this._invalidInput}},{key:"AddSanitization",value:function AddSanitization(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null;i=n.isObject(e)?e:{fn:e,thisArg:t},this._externalSanitizationStack.Add(i)}},{key:"AddValidation",value:function AddValidation(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null;i=n.isObject(e)?e:{fn:e,thisArg:t},this._externalValidationStack.Add(i)}},{key:"_PushError",value:function _PushError(e){if(n.isString(e)){for(var t=0,i=this._inputErrors.length;t<i;t++)if(this._inputErrors.message===e)return;e={type:s.FLAGS.ERROR,message:e}}else e.type||(e.type=s.FLAGS.ERROR);this._inputErrors.includes(e)||(this._inputErrors.push(e),this._invalidInput=!0)}},{key:"_internalOnInputError",value:function _internalOnInputError(){this._OnInputErrors(),this._Broadcast(u.INPUT_ERROR,this,this._inputErrors)}},{key:"_OnInputErrors",value:function _OnInputErrors(){this._onInputErrorFn&&this._onInputErrorFn(this._inputErrors)}},{key:"_AddFeedback",value:function _AddFeedback(e){this._errorFeedbacks.push(feedback)}},{key:"_RequestPreviewUpdate",value:function _RequestPreviewUpdate(){this._updatePreviewFn&&this._updatePreviewFn()}},{key:"_ConcatErrors",value:function _ConcatErrors(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"<br/>",n="",i=0,s=this._inputErrors.length,a=s-1;i<s;i++){var l=this._inputErrors[i];l.type==e&&(n+=l.message,i!=a&&(n+=t))}return n}},{key:"_ClearFeedbacks",value:function _ClearFeedbacks(){this._owner.flavor=null;for(var e=0,t=this._errorFeedbacks.length;e<t;e++)this._errorFeedbacks[e].Release();this._errorFeedbacks.length=0}},{key:"SubmitValue",value:function SubmitValue(){return this._changedValue=this._SanitizeValue(this._changedValue),this._IsValueChanged()?this._internalValidateChangedValue()?(this.currentValue=this._changedValue,this._changedValue=this._currentValue,this._Broadcast(u.VALUE_SUBMITTED,this,this._changedValue),this._RequestPreviewUpdate(),!0):(this.changedValue=this._currentValue,this.SoftReset(),!1):(this.SoftReset(),!1)}},{key:"SoftReset",value:function SoftReset(){this.changedValue=this.currentValue,this._ClearErrors(),this._RequestPreviewUpdate()}},{key:"Clear",value:function Clear(){this._ClearErrors(),this._ClearFeedbacks(),this._inputId="",this._changedValue=null,this._currentValue=null}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(InputHandler.prototype),"_CleanUp",this).call(this),this._externalValidationStack.Clear(),this._externalSanitizationStack.Clear(),this.Clear()}}]),InputHandler}(s.pool.DisposableObjectEx);e.exports=h},{389:300,425:304,413:355,415:318,18:21,12:27,14:458}],317:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(415),l=function(e){_inherits(InputListHandler,e);var t=_createSuper(InputListHandler);function InputListHandler(e){var n;return _classCallCheck(this,InputListHandler),(n=t.call(this))._owner=e,n._inputs=[],n._map=new i.Dictionary,n._Bind(n._OnInputSubmit),n._Bind(n._OnInputChanged),n._Bind(n._OnInputError),n}return _createClass(InputListHandler,[{key:"Build",value:function Build(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],s=this._owner.Add(i.cl);if(i.member&&(this._owner[i.member]=s),i.value&&(s.currentValue=i.value),i.validations)for(var l=0,c=i.validations.length;l<c;l++)s.AddValidation(i.validations[l]);if(i.validation&&s.AddValidation(i.validation),i.sanitizations)for(var u=0,h=i.sanitizations.length;u<h;u++)s.AddSanitization(i.sanitizations[u]);i.sanitization&&s.AddSanitization(i.sanitization),this._inputs.push(s),this._map.Set(s,i),s._handler.Watch(a.VALUE_SUBMITTED,this._OnInputSubmit).Watch(a.VALUE_CHANGED,this._OnInputChanged).Watch(a.INPUT_ERROR,this._OnInputError)}}},{key:"Clear",value:function Clear(){for(var e=0,t=this._inputs.length;e<t;e++)this._inputs[e].Release();this._inputs.length=0,this._map.Clear()}},{key:"_OnInputSubmit",value:function _OnInputSubmit(e,t){var n=this._map.Get(e);n.onSubmit&&(n.onSubmit.thisArg?n.onSubmit.call(n.onSubmit.thisArg,e,t):n.onSubmit(e,t))}},{key:"_OnInputChanged",value:function _OnInputChanged(e,t){var n=this._map.Get(e);n.onChange&&(n.onChange.thisArg?n.onChange.call(n.onChange.thisArg,e,t):n.onChange(e,t))}},{key:"_OnInputError",value:function _OnInputError(e,t){var n=this._map.Get(e);n.onError&&(n.onError.thisArg?n.onError.call(n.onError.thisArg,e,p_newValue):n.onError(e,p_newValue))}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(InputListHandler.prototype),"_CleanUp",this).call(this),this.Clear()}}]),InputListHandler}(s.pool.DisposableObjectEx);e.exports=l},{415:318,18:21,12:27,14:458}],318:[function(__r__,e,t){var n=function INPUT_SIGNAL(){_classCallCheck(this,INPUT_SIGNAL)};_defineProperty(n,"VALUE_CHANGED",Symbol("valueChanged")),_defineProperty(n,"VALUE_SUBMITTED",Symbol("valueCommitted")),_defineProperty(n,"INPUT_ERROR",Symbol("inputError")),_defineProperty(n,"FORM_READY",Symbol("formReady")),_defineProperty(n,"FORM_INVALID",Symbol("formInvalid")),e.exports=n},{}],319:[function(__r__,e,t){var n,i,s=function(e){_inherits(INPUT_KEY,e);var t=_createSuper(INPUT_KEY);function INPUT_KEY(){return _classCallCheck(this,INPUT_KEY),t.call(this)}return INPUT_KEY}(__r__(12).helpers.CKEY),a=function(e){_inherits(STRING,e);var t=_createSuper(STRING);function STRING(){return _classCallCheck(this,STRING),t.call(this)}return STRING}(s),l=function(e){_inherits(STRING_PATH,e);var t=_createSuper(STRING_PATH);function STRING_PATH(){return _classCallCheck(this,STRING_PATH),t.call(this)}return STRING_PATH}(a),c=function(e){_inherits(STRING_PATH_DIR,e);var t=_createSuper(STRING_PATH_DIR);function STRING_PATH_DIR(){return _classCallCheck(this,STRING_PATH_DIR),t.call(this)}return STRING_PATH_DIR}(l),u=function(e){_inherits(STRING_IDENTIFIER,e);var t=_createSuper(STRING_IDENTIFIER);function STRING_IDENTIFIER(){return _classCallCheck(this,STRING_IDENTIFIER),t.call(this)}return STRING_IDENTIFIER}(a),h=function(e){_inherits(STRING_TEXT,e);var t=_createSuper(STRING_TEXT);function STRING_TEXT(){return _classCallCheck(this,STRING_TEXT),t.call(this)}return STRING_TEXT}(a),d=function(e){_inherits(FS_INPUT,e);var t=_createSuper(FS_INPUT);function FS_INPUT(){return _classCallCheck(this,FS_INPUT),t.call(this)}return FS_INPUT}(s),p=function(e){_inherits(FILE,e);var t=_createSuper(FILE);function FILE(){return _classCallCheck(this,FILE),t.call(this)}return FILE}(d),m=function(e){_inherits(DIRECTORY,e);var t=_createSuper(DIRECTORY);function DIRECTORY(){return _classCallCheck(this,DIRECTORY),t.call(this)}return DIRECTORY}(d),y=function(e){_inherits(NUMBER,e);var t=_createSuper(NUMBER);function NUMBER(){return _classCallCheck(this,NUMBER),t.call(this)}return NUMBER}(s),g=function(e){_inherits(NUMBER_SLIDER,e);var t=_createSuper(NUMBER_SLIDER);function NUMBER_SLIDER(){return _classCallCheck(this,NUMBER_SLIDER),t.call(this)}return NUMBER_SLIDER}(y),v=function(e){_inherits(NUMBER_ANGLE,e);var t=_createSuper(NUMBER_ANGLE);function NUMBER_ANGLE(){return _classCallCheck(this,NUMBER_ANGLE),t.call(this)}return NUMBER_ANGLE}(y),k=function(e){_inherits(COLOR,e);var t=_createSuper(COLOR);function COLOR(){return _classCallCheck(this,COLOR),t.call(this)}return COLOR}(s),O=function(e){_inherits(BOOLEAN,e);var t=_createSuper(BOOLEAN);function BOOLEAN(){return _classCallCheck(this,BOOLEAN),t.call(this)}return BOOLEAN}(s),S=function(e){_inherits(BOOLEAN_CHECK,e);var t=_createSuper(BOOLEAN_CHECK);function BOOLEAN_CHECK(){return _classCallCheck(this,BOOLEAN_CHECK),t.call(this)}return BOOLEAN_CHECK}(O);e.exports=(_defineProperty(n={INPUT_KEY:s,STRING:a,STRING_PATH:l,STRING_PATH_DIR:c,STRING_IDENTIFIER:u,STRING_TEXT:h,FS_INPUT:d,FILE:p,DIRECTORY:m,NUMBER:y,NUMBER_SLIDER:g},"NUMBER_SLIDER",g),_defineProperty(n,"NUMBER_ANGLE",v),_defineProperty(n,"COLOR",k),_defineProperty(n,"BOOLEAN",O),_defineProperty(n,"BOOLEAN_CHECK",S),n)},{12:27}],320:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(18),a=__r__(29),l=__r__(394),c=__r__(425),u=__r__(392),h=__r__(389),d=__r__(427),p=__r__(416),m=[p.PIXEL,p.PERCENTAGE],y=function(e){_inherits(MovableHandle,e);var t=_createSuper(MovableHandle);function MovableHandle(){return _classCallCheck(this,MovableHandle),t.call(this)}return _createClass(MovableHandle,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MovableHandle.prototype),"_Init",this).call(this),this._Bind(this._PointerDown),this._Bind(this._OnPointerMove),this._Bind(this._OnPointerUp),this._pointer.Unhook(u.MOUSE_LEFT,u.RELEASE,this.Activate).Hook(u.MOUSE_LEFT,u.DOWN,this._PointerDown),this._unitsFlagEnum=new c(m),this._unitsFlagEnum.Add(this),this._movement=new n.helpers.Movement}},{key:"_PointerDown",value:function _PointerDown(e){this._movement.Pin(u.position.y,u.position.y),u.Watch(u.MOUSE_MOVE,this._OnPointerMove,this).Watch(u.MOUSE_UP,this._OnPointerUp,this)}},{key:"_OnPointerMove",value:function _OnPointerMove(e){if(this._movement.Update(u.position.y,u.position.y),this._orientation.currentFlag===h.VERTICAL_AND_HORIZONTAL);else{var t=0;this._orientation.currentFlag===h.VERTICAL||(this._orientation.currentFlag,h.HORIZONTAL)}}},{key:"_OnPointerUp",value:function _OnPointerUp(e){u.Unwatch(u.MOUSE_MOVE,this._OnPointerMove,this).Unwatch(u.MOUSE_UP,this._OnPointerUp,this)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{"background-color":"#ff0000"},":host(.horizontal:hover)":{cursor:"ns-resize"},":host(.vertical:hover)":{cursor:"ew-resize"},":host(.vertical.horizontal:hover)":{cursor:"move"}},_get(_getPrototypeOf(MovableHandle.prototype),"_Style",this).call(this))}}]),MovableHandle}(d);e.exports=y,l.Register("nkmjs-edge-resize-handle",y)},{389:300,425:304,392:342,394:345,427:354,416:321,18:21,12:27,29:272,14:458}],321:[function(__r__,e,t){var n=__r__(12),i=function UNITS(){_classCallCheck(this,UNITS)};_defineProperty(i,"PIXEL","px"),_defineProperty(i,"PERCENTAGE","%"),e.exports=i},{12:27}],322:[function(__r__,e,t){var n=function KEYBOARD(){_classCallCheck(this,KEYBOARD)};_defineProperty(n,"_backspace",8),_defineProperty(n,"_tab",9),_defineProperty(n,"_enter",13),_defineProperty(n,"_shift",16),_defineProperty(n,"_ctrl",17),_defineProperty(n,"_alt",18),_defineProperty(n,"_pause",19),_defineProperty(n,"_capsLock",20),_defineProperty(n,"_escape",27),_defineProperty(n,"_pageUp",33),_defineProperty(n,"_space",32),_defineProperty(n,"_pageDown",34),_defineProperty(n,"_end",35),_defineProperty(n,"_home",36),_defineProperty(n,"_arrowLeft",37),_defineProperty(n,"_arrowUp",38),_defineProperty(n,"_arrowRight",39),_defineProperty(n,"_arrowDown",40),_defineProperty(n,"_printScreen",44),_defineProperty(n,"_insert",45),_defineProperty(n,"_delete",46),_defineProperty(n,"_0",48),_defineProperty(n,"_1",49),_defineProperty(n,"_2",50),_defineProperty(n,"_3",51),_defineProperty(n,"_4",52),_defineProperty(n,"_5",53),_defineProperty(n,"_6",54),_defineProperty(n,"_7",55),_defineProperty(n,"_8",56),_defineProperty(n,"_9",57),_defineProperty(n,"_a",65),_defineProperty(n,"_b",66),_defineProperty(n,"_c",67),_defineProperty(n,"_d",68),_defineProperty(n,"_e",69),_defineProperty(n,"_f",70),_defineProperty(n,"_g",71),_defineProperty(n,"_h",72),_defineProperty(n,"_i",73),_defineProperty(n,"_j",74),_defineProperty(n,"_k",75),_defineProperty(n,"_l",76),_defineProperty(n,"_m",77),_defineProperty(n,"_n",78),_defineProperty(n,"_o",79),_defineProperty(n,"_p",80),_defineProperty(n,"_q",81),_defineProperty(n,"_r",82),_defineProperty(n,"_s",83),_defineProperty(n,"_t",84),_defineProperty(n,"_u",85),_defineProperty(n,"_v",86),_defineProperty(n,"_w",87),_defineProperty(n,"_x",88),_defineProperty(n,"_y",89),_defineProperty(n,"_z",90),_defineProperty(n,"_leftWindowKey",91),_defineProperty(n,"_rightWindowKey",92),_defineProperty(n,"_selectKey",93),_defineProperty(n,"_numpad0",96),_defineProperty(n,"_numpad1",97),_defineProperty(n,"_numpad2",98),_defineProperty(n,"_numpad3",99),_defineProperty(n,"_numpad4",100),_defineProperty(n,"_numpad5",101),_defineProperty(n,"_numpad6",102),_defineProperty(n,"_numpad7",103),_defineProperty(n,"_numpad8",104),_defineProperty(n,"_numpad9",105),_defineProperty(n,"_multiply",106),_defineProperty(n,"_add",107),_defineProperty(n,"_subtract",109),_defineProperty(n,"_decimalPoint",110),_defineProperty(n,"_divide",111),_defineProperty(n,"_f1",112),_defineProperty(n,"_f2",113),_defineProperty(n,"_f3",114),_defineProperty(n,"_f4",115),_defineProperty(n,"_f5",116),_defineProperty(n,"_f6",117),_defineProperty(n,"_f7",118),_defineProperty(n,"_f8",119),_defineProperty(n,"_f9",120),_defineProperty(n,"_f10",121),_defineProperty(n,"_f11",122),_defineProperty(n,"_f12",123),_defineProperty(n,"_numLock",144),_defineProperty(n,"_scrollLock",145),_defineProperty(n,"_myComputer",182),_defineProperty(n,"_myCalculator",183),_defineProperty(n,"_semiColon",186),_defineProperty(n,"_equalSign",187),_defineProperty(n,"_comma",188),_defineProperty(n,"_dash",189),_defineProperty(n,"_period",190),_defineProperty(n,"_forwardSlash",191),_defineProperty(n,"_openBracket",219),_defineProperty(n,"_backSlash",220),_defineProperty(n,"_closeBraket",221),_defineProperty(n,"_singleQuote",222),e.exports=n},{}],323:[function(__r__,e,t){e.exports={Item:__r__(428),ItemGroup:__r__(429),Root:__r__(430)}},{428:325,429:324,430:326}],324:[function(__r__,e,t){var n=__r__(12),i=__r__(79),s=__r__(411),a=__r__(431),l=__r__(428),c=function(e){_inherits(ItemGroup,e);var t=_createSuper(ItemGroup);function ItemGroup(){return _classCallCheck(this,ItemGroup),t.call(this)}return _createClass(ItemGroup,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ItemGroup.prototype),"_Init",this).call(this),this._extExpand=this._extensions.Add(s.Expand),this._extExpand._toggled=!1,this._extExpand.Watch(i.EXPANDED,this._Expand,this).Watch(i.COLLAPSED,this._Collapse,this),this._builder=n.Rent(a),this._builder.owner=this,this._builder._defaultItemClass=l,this._builder._defaultGroupClass=ItemGroup,this._builder.Watch(n.SIGNAL.ITEM_ADDED,this._OnBuilderItemAdded,this).Watch(n.SIGNAL.ITEM_REMOVED,this._OnBuilderItemRemoved,this)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(ItemGroup.prototype),"_PostInit",this).call(this),this._SetupBuilder(this._builder),this.order=0}},{key:"depth",set:function set(e){_set(_getPrototypeOf(ItemGroup.prototype),"depth",e,this,!0);for(var t=e+1,n=this._builder._map.keys,i=0,s=n.length;i<s;i++)this._builder._map.get(n[i]).depth=t}},{key:"_SetupBuilder",value:function _SetupBuilder(e){}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch"},":host(.expanded)":{height:"auto"},".header":{position:"relative",flex:"0 0 auto"},".body":{position:"relative",flex:"1 0 auto",display:"none","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch","min-width":0},":host(.expanded) .body":{display:"flex"},".item":{flex:"1 1 auto"}}}},{key:"Activate",value:function Activate(e){this._toolbar&&this._toolbar.focused||_get(_getPrototypeOf(ItemGroup.prototype),"Activate",this).call(this,e)}},{key:"AltActivate",value:function AltActivate(e){if(!this._toolbar||!this._toolbar.focused)return!!_get(_getPrototypeOf(ItemGroup.prototype),"AltActivate",this).call(this,e)&&void this._extExpand.Toggle()}},{key:"Expand",value:function Expand(){this._extExpand.Expand()}},{key:"_Expand",value:function _Expand(){this._data&&(this._data.expanded=!0,this._builder.Enable())}},{key:"Collapse",value:function Collapse(){this._extExpand.Collapse()}},{key:"_Collapse",value:function _Collapse(){this._data&&(this._data.expanded=!1),this._builder.Disable()}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(ItemGroup.prototype),"_OnDataChanged",this).call(this,e),this._builder.catalog=this._data,this._data?this._extExpand.isExpanded&&(this._data.expanded=!0):this._extExpand.Collapse()}},{key:"_OnBuilderItemAdded",value:function _OnBuilderItemAdded(e,t,n){n.classList.add("item"),n.depth=this._depth+1}},{key:"_OnBuilderItemRemoved",value:function _OnBuilderItemRemoved(e,t,n){n.classList.remove("item")}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(ItemGroup.prototype),"_CleanUp",this).call(this),this.Collapse()}}]),ItemGroup}(l);_defineProperty(c,"__NFO__",n.NFOS.Ext({},l,["css"])),e.exports=c},{411:299,431:301,79:344,428:325,12:27}],325:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(432),l=__r__(433),c=function(e){_inherits(Item,e);var t=_createSuper(Item);function Item(){var e;return _classCallCheck(this,Item),(e=t.call(this)).depth=0,e}return _createClass(Item,[{key:"_Init",value:function _Init(){this.default_SelectOnActivation=n.tils.Default(this.default_SelectOnActivation,!0),_get(_getPrototypeOf(Item.prototype),"_Init",this).call(this),this._notifiesSelectionStack=!0,this._toolbarClass=a,this._toolbar=null,this._toolbarCtnr=this,this._depth=0}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Item.prototype),"_PostInit",this).call(this),this.order=1}},{key:"depth",get:function get(){return this._depth},set:function set(e){this._depth=e,this.style.setProperty("--depth",this._depth)}},{key:"_Style",value:function _Style(){return s.Extends({":host":{position:"relative","min-width":0},".toolbar":{flex:"0 0 auto"}},_get(_getPrototypeOf(Item.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._toolbarCtnr=this,this.focusArea=this}},{key:"_BuildCommand",value:function _BuildCommand(e){this._toolbarClass&&(this._toolbar||(this._toolbar=this.Add(this._toolbarClass,"toolbar",this._toolbarCtnr)),this._toolbar.CreateHandle({command:e,isCommandTrigger:!1,trigger:{thisArg:this,fn:this._ExecuteCommand,arg:e}}))}},{key:"_ClearCommandHandles",value:function _ClearCommandHandles(){_get(_getPrototypeOf(Item.prototype),"_ClearCommandHandles",this).call(this),this._toolbar&&(this._toolbar.Release(),this._toolbar=null)}},{key:"_CleanUp",value:function _CleanUp(){this._depth=0,_get(_getPrototypeOf(Item.prototype),"_CleanUp",this).call(this)}}]),Item}(l);_defineProperty(c,"__NFO__",i.NFOS.Ext({},l,["css"])),e.exports=c},{432:351,433:353,12:27,29:272,14:458}],326:[function(__r__,e,t){var n=__r__(12),i=__r__(394),s=__r__(429),a=function(e){_inherits(Root,e);var t=_createSuper(Root);function Root(){return _classCallCheck(this,Root),t.call(this)}return _createClass(Root,[{key:"_Init",value:function _Init(){this.default_SelectOnActivation=!1,_get(_getPrototypeOf(Root.prototype),"_Init",this).call(this),this._selectOnActivation=!1,this._searchBtn=null,this._InitSelectionStack(),this.style.setProperty("--tree_size","var(--size_s)")}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Root.prototype),"_PostInit",this).call(this)}},{key:"_OpenFind",value:function _OpenFind(){}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(Root.prototype),"_CleanUp",this).call(this)}}]),Root}(s);_defineProperty(a,"__NFO__",n.NFOS.Ext({},s,["css"])),e.exports=a},{394:345,429:324,12:27}],327:[function(__r__,e,t){var n,i=function(e){_inherits(BackgroundHandler,e);var t=_createSuper(BackgroundHandler);function BackgroundHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,BackgroundHandler),t.call(this,e,n,i)}return _createClass(BackgroundHandler,[{key:"content",get:function get(){return this._element?this._element.style.backgroundImage:null}},{key:"_ApplyPath",value:function _ApplyPath(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?e.style.backgroundImage="url(".concat(t,")"):e.style.removeProperty("backgroundImage")}}]),BackgroundHandler}(__r__(434));e.exports=i},{434:334}],328:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(389),a=__r__(425),l=__r__(394),c,u=function(e){_inherits(GridItemHandler,e);var t=_createSuper(GridItemHandler);function GridItemHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return _classCallCheck(this,GridItemHandler),t.call(this,e,n,i,s,a)}return _createClass(GridItemHandler,[{key:"_Init",value:function _Init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=0===e?e=1:-1===e?0:e,this._y=0===t?t=1:-1===t?0:t,this._width=0===n?n=1:-1===n?0:n,this._height=0===i?i=1:-1===i?0:i}},{key:"_OnElementChanged",value:function _OnElementChanged(e){this._element&&this._Apply(this._element)}},{key:"Set",value:function Set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this._x=0===e?e=1:-1===e?0:e,this._y=0===t?t=1:-1===t?0:t,this._width=0===n?n=1:-1===n?0:n,this._height=0===i?i=1:-1===i?0:i,this._Apply(this._element)}},{key:"_Apply",value:function _Apply(e){return e.style.setProperty("grid-column-start",this._x),this._width>0?e.style.setProperty("grid-column-end",this._x+this._width):e.style.removeProperty("grid-column-end"),e.style.setProperty("grid-row-start",this._y),this._height>0?e.style.setProperty("grid-row-end",this._y+this._height):e.style.removeProperty("grid-row-end"),!0}}]),GridItemHandler}(__r__(435));e.exports=u},{389:300,425:304,394:345,435:336,12:27,14:458}],329:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(389),a=__r__(425),l=__r__(394),c,u=function(e){_inherits(GridHandler,e);var t=_createSuper(GridHandler);function GridHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"auto";return _classCallCheck(this,GridHandler),t.call(this,e,n,i,s)}return _createClass(GridHandler,[{key:"_Init",value:function _Init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";this._ProcessValue=this._ProcessValue.bind(this),this._default=n,this._ConvertParams(e,t)}},{key:"_OnElementChanged",value:function _OnElementChanged(e){e&&(e.style.removeProperty("grid-template-columns"),e.style.removeProperty("grid-template-rows"),e.style.removeProperty("justify-items"),e.style.removeProperty("align-items"),e.style.removeProperty("display")),this._element&&(this._element.style.display="grid",this._element.style.setProperty("justify-items","stretch"),this._element.style.setProperty("align-items","stretch"),this._Apply(this._element))}},{key:"_ConvertParams",value:function _ConvertParams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._width=e,e&&(e.forEach(this._ProcessValue),this._width=e.join(" ")),this._height=t,t&&(t.forEach(this._ProcessValue),this._height=t.join(" "))}},{key:"Set",value:function Set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._ConvertParams(e,t),this._Apply(this._element)}},{key:"_ProcessValue",value:function _ProcessValue(e,t,i){n.isNumber(e)?0===e?i[t]=this._default:e<=1?i[t]="".concat(100*e,"%"):e>1&&(i[t]="".concat(e,"px")):n.isEmpty(e)&&(i[t]=this._default)}},{key:"_Apply",value:function _Apply(e){return this._width?e.style.setProperty("grid-template-columns",this._width):e.style.removeProperty("grid-template-columns"),this._height?e.style.setProperty("grid-template-rows",this._height):e.style.removeProperty("grid-template-rows"),!0}}]),GridHandler}(__r__(435));e.exports=u},{389:300,425:304,394:345,435:336,12:27,14:458}],330:[function(__r__,e,t){var n=__r__(14),i=__r__(114),s=__r__(436),a="data-icon",l="data-variant",c="data-flavor",u=function(e){_inherits(IconHandler,e);var t=_createSuper(IconHandler);function IconHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,IconHandler),t.call(this,e,n,i)}return _createClass(IconHandler,[{key:"content",get:function get(){return this._element?this._element.getAttribute(a):null}},{key:"flavor",get:function get(){return this._element?this._element.icon:null}},{key:"variant",get:function get(){return this._element?this._element.icon:null}},{key:"Set",value:function Set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.isString(e)&&""===(e=e.trim())&&(e=null),n.isObject(e)&&(e=i.ICON in e?e[i.ICON]:i.IMG in e?e[i.IMG]:null),e?this._element.setAttribute(a,e):this._element.removeAttribute(a),n.isObject(t)&&(t=i.FLAVOR in t?t[i.FLAVOR]:null),t?this._element.setAttribute(c,t):this._element.removeAttribute(c),n.isObject(s)&&(s=i.VARIANT in s?s[i.VARIANT]:null),s?this._element.setAttribute(l,s):this._element.removeAttribute(l),this._Toggle(!!e)}}]),IconHandler}(s);e.exports=u},{114:309,436:335,14:458}],331:[function(__r__,e,t){var n,i=function(e){_inherits(ImageHandler,e);var t=_createSuper(ImageHandler);function ImageHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,ImageHandler),t.call(this,e,n,i)}return _createClass(ImageHandler,[{key:"content",get:function get(){return this._element?this._element.src:null}},{key:"_ApplyPath",value:function _ApplyPath(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.src=t||""}}]),ImageHandler}(__r__(434));e.exports=i},{434:334}],332:[function(__r__,e,t){var n=__r__(14),i,s=function(e){_inherits(TextHandler,e);var t=_createSuper(TextHandler);function TextHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,TextHandler),t.call(this,e,n,i)}return _createClass(TextHandler,[{key:"content",get:function get(){return this._element?this._element.innerHTML:null}},{key:"uppercase",set:function set(e){e?this._element.style.setProperty("text-transform","uppercase"):this._element.style.removeProperty("text-transform")}},{key:"ellipsis",set:function set(e){e?(this._element.style.setProperty("white-space","nowrap"),this._element.style.setProperty("overflow","hidden"),this._element.style.setProperty("text-overflow","ellipsis")):(this._element.style.removeProperty("white-space"),this._element.style.removeProperty("overflow"),this._element.style.removeProperty("text-overflow"))}},{key:"selectable",set:function set(e){e?this._element.style.setProperty("user-select","text"):this._element.style.removeProperty("user-select")}},{key:"bold",set:function set(e){e?this._element.style.setProperty("font-weight","bolder"):this._element.style.removeProperty("font-weight")}},{key:"italic",set:function set(e){e?this._element.style.setProperty("font-style","italic"):this._element.style.removeProperty("font-style")}},{key:"color",set:function set(e){e?this._element.style.setProperty("color",e):this._element.style.removeProperty("color")}},{key:"_Apply",value:function _Apply(e,t){if(n.isVoid(t))return e.innerHTML="",!1;var i="";return n.isString(t)?i=t:"name"in t?i=t.name:"title"in t?i=t.title:"objectURL"in t&&(i=t.objectURL),""!==i&&(e.innerHTML=i,!0)}}]),TextHandler}(__r__(436));e.exports=s},{436:335,14:458}],333:[function(__r__,e,t){e.exports={Manipulator:__r__(435),ContentManipulator:__r__(436),ContentURLManipulator:__r__(434),Background:__r__(437),Image:__r__(438),Icon:__r__(439),Text:__r__(440),Grid:__r__(441),GridItem:__r__(442)}},{437:327,441:329,442:328,439:330,438:331,440:332,435:336,436:335,434:334}],334:[function(__r__,e,t){var n=__r__(14),i=__r__(114),s,a=function(e){_inherits(ContentURLManipulator,e);var t=_createSuper(ContentURLManipulator);function ContentURLManipulator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,ContentURLManipulator),t.call(this,e,n,i)}return _createClass(ContentURLManipulator,[{key:"_Apply",value:function _Apply(e,t){if(n.isVoid(t))return this._ApplyPath(e,!1),!1;var s="";return n.isString(t)?s=t:i.ICON in t?s=t[i.ICON]:i.PATH in t?s=t[i.PATH]:"img"in t?s=t.img:"objectURL"in t&&(s=t.objectURL),!(""===s||!n.isString(s))&&(s=n.PATH.FULL(s),this._ApplyPath(e,s),!0)}},{key:"_ApplyPath",value:function _ApplyPath(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),ContentURLManipulator}(__r__(436));e.exports=a},{114:309,436:335,14:458}],335:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(389),a=__r__(425),l,c=function(e){_inherits(ContentManipulator,e);var t=_createSuper(ContentManipulator);function ContentManipulator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,ContentManipulator),t.call(this,e,n,i)}return _createClass(ContentManipulator,[{key:"_Init",value:function _Init(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._content=null,this._autoHide=e,this._isVisible=!0,this._sizeFlags=t?new a(s.sizes,!0):null}},{key:"isVisible",get:function get(){return this._isVisible}},{key:"_OnElementChanged",value:function _OnElementChanged(e){if(this._sizeFlags)if(e){this._sizeFlags.Set(null),this._sizeFlags.Remove(e);var t=this._sizeFlags._currentFlag;this._element&&this._sizeFlags.Add(this._element),this._sizeFlags.Set(t)}else this._element&&this._sizeFlags.Add(this._element)}},{key:"content",get:function get(){return this._content}},{key:"size",get:function get(){return this._sizeFlags}},{key:"Set",value:function Set(e){var t=this._Apply(this._element,e),s=this._content;return s&&n.isInstanceOf(s,i.pool.DisposableObjectEx)&&s.Unwatch(i.SIGNAL.UPDATED,this._OnContentUpdate,this).Unwatch(i.SIGNAL.RENAMED,this._OnContentUpdate,this).Unwatch(i.SIGNAL.RELEASED,this._OnContentReleased,this),e&&n.isInstanceOf(this._content,i.pool.DisposableObjectEx)?(this._content=e,this._content.Watch(i.SIGNAL.UPDATED,this._OnContentUpdate,this).Watch(i.SIGNAL.RENAMED,this._OnContentUpdate,this).Watch(i.SIGNAL.RELEASED,this._OnContentReleased,this)):this._content=null,this._Toggle(t)}},{key:"TryReplace",value:function TryReplace(e){var t=this.content,n=this._Apply(this._element,e);return n?(this._Toggle(n),!0):(this._Apply(this._element,t),!1)}},{key:"_OnContentUpdate",value:function _OnContentUpdate(){this._Toggle(this._Apply(this._element,this._content))}},{key:"_Toggle",value:function _Toggle(e){return this._isVisible!=e&&this._autoHide&&(this._isVisible=e,e?this._element.style.removeProperty("display"):this._element.style.setProperty("display","none")),e}},{key:"_OnContentReleased",value:function _OnContentReleased(e){this._content=null}}]),ContentManipulator}(__r__(435));e.exports=c},{389:300,425:304,435:336,12:27,14:458}],336:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(389),a=__r__(425),l=__r__(394),c=function(){function Manipulator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,Manipulator);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._Init.apply(this,n),this.element=e}return _createClass(Manipulator,[{key:"_Init",value:function _Init(){}},{key:"element",get:function get(){return this._element},set:function set(e){if(this._element!==e){var t=this._element;this._element=e,this._OnElementChanged(t)}}},{key:"_OnElementChanged",value:function _OnElementChanged(e){}},{key:"order",get:function get(){return this._element.style.order},set:function set(e){this._element.style.order=e}},{key:"Set",value:function Set(e){return this._Apply(this._element,e)}},{key:"_Apply",value:function _Apply(e,t){return!0}}]),Manipulator}();e.exports=c},{389:300,425:304,394:345,12:27,14:458}],337:[function(__r__,e,t){e.exports={OverlayOptions:__r__(443),Overlay:__r__(444),OverlayHandler:__r__(445),CONTEXT:__r__(446)}},{444:341,446:338,445:339,443:340}],338:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(OVERLAY,e);var t=_createSuper(OVERLAY);function OVERLAY(){return _classCallCheck(this,OVERLAY),t.call(this)}return OVERLAY}(n.helpers.CSYMBOL),s=function(e){_inherits(CONTENT,e);var t=_createSuper(CONTENT);function CONTENT(){return _classCallCheck(this,CONTENT),t.call(this)}return CONTENT}(n.helpers.CSYMBOL);e.exports={OVERLAY:i,CONTENT:s}},{12:27}],339:[function(__r__,e,t){var n=__r__(18),i=__r__(14),s=__r__(12),a=__r__(29),l=__r__(394),c=__r__(447),u=__r__(448),h=__r__(446),d=__r__(443),p=__r__(444),m=function(e){_inherits(OverlayHandler,e);var t=_createSuper(OverlayHandler);function OverlayHandler(){return _classCallCheck(this,OverlayHandler),t.call(this)}return _createClass(OverlayHandler,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(OverlayHandler.prototype),"_Init",this).call(this),this._overlayMap=new n.Dictionary,this._overlayList=new n.List(0),this._Bind(this._OnOverlayOptionsConsumed),this.CaptureLocalRequest(c.OVERLAY),this.visible=!1}},{key:"_Style",value:function _Style(){return a.Extends(_defineProperty({":host":{"pointer-events":"none"},".overlay":{"pointer-events":"auto"}},this._layerClassName,{"pointer-events":"auto"}),_get(_getPrototypeOf(OverlayHandler.prototype),"_Style",this).call(this))}},{key:"CaptureLocalRequest",value:function CaptureLocalRequest(e){return this._RegisterLocalRequestHandler(e,this.HandleOverlayRequest),this}},{key:"HandleOverlayRequest",value:function HandleOverlayRequest(e){if(!e.isHandled){var t=e.options;if(!t)throw new Error("Cannot build overlay without valid options.");i.isInstanceOf(t,d)||(t=d.Create(t)),t.request=e;var n=this._overlayMap.Get(t);if(n)n.RequestDisplay();else{this.BringToFront(),this.visible=!0;var a=s.BINDINGS.Get(h.OVERLAY,e.requestType,this.constructor.__default_overlayClass),l=i.tils.Get(t,"overlayClass",a),c=this.Add(l,"overlay");this._overlayMap.Set(t,c),t.Watch(s.SIGNAL.CONSUMED,this._OnOverlayOptionsConsumed),c.data=t,e.HandleSuccess(this)}}}},{key:"_OnOverlayOptionsConsumed",value:function _OnOverlayOptionsConsumed(e){var t=this._overlayMap.Get(e);this._overlayMap.Remove(e),this._overlayList.Remove(t),t.Release(),e.Release(),0===this._overlayMap.count&&(this.visible=!1)}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(OverlayHandler.prototype),"_CleanUp",this).call(this),this.visible=!1}}]),OverlayHandler}(u);_defineProperty(m,"__default_overlayClass",p),e.exports=m},{447:343,394:345,448:348,444:341,446:338,443:340,18:21,12:27,29:272,14:458}],340:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=0,a=function(e){_inherits(OverlayOptions,e);var t=_createSuper(OverlayOptions);function OverlayOptions(){return _classCallCheck(this,OverlayOptions),t.call(this)}return _createClass(OverlayOptions,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(OverlayOptions.prototype),"_Init",this).call(this),this._optionsHandler=new i.helpers.OptionsHandler,this._optionsHandler.Hook("overlayClass","_overlayClass"),this._optionsHandler.Hook("contentClass","_contentClass"),this._optionsHandler.Hook("origin","_origin")}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(OverlayOptions.prototype),"_PostInit",this).call(this),this._Reset()}},{key:"_Reset",value:function _Reset(){this._overlayClass=null,this._contentClass=null,this._origin=null,this._request=null,this._consumed=!1}},{key:"options",get:function get(){return this._options},set:function set(e){this._options=e,this._optionsHandler.Process(this,e),this._Broadcast(i.SIGNAL.UPDATED,this)}},{key:"overlayClass",get:function get(){return this._overlayClass},set:function set(e){this._overlayClass=e}},{key:"contentClass",get:function get(){return this._contentClass},set:function set(e){this._contentClass=e}},{key:"origin",get:function get(){return this._origin},set:function set(e){this._origin=e}},{key:"request",get:function get(){return this._request},set:function set(e){this._request=e}},{key:"GetOption",value:function GetOption(e,t){return n.tils.Get(this._options,e,t)}},{key:"Consume",value:function Consume(){this._consumed||(this._consumed=!0,this._Broadcast(i.SIGNAL.CONSUMED,this))}},{key:"_CleanUp",value:function _CleanUp(){this._Reset(),_get(_getPrototypeOf(OverlayOptions.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return"<? ".concat(this._title," : ").concat(this._message," />")}}],[{key:"Create",value:function Create(e){var t=i.Rent(OverlayOptions);return t.options=e,t}}]),OverlayOptions}(i.pool.DisposableObjectEx);e.exports=a},{12:27,14:458}],341:[function(__r__,e,t){var n=__r__(14),i=__r__(29),s=__r__(12),a=__r__(394),l=__r__(389),c=__r__(392),u=__r__(449),h=__r__(411),d=__r__(446),p=__r__(443),m=function(e){_inherits(Overlay,e);var t=_createSuper(Overlay);function Overlay(){return _classCallCheck(this,Overlay),t.call(this)}return _createClass(Overlay,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Overlay.prototype),"_Init",this).call(this),this._background=null,this._content=null,this._contentPlacement=null,this._dataObserver.Hook(s.SIGNAL.CONSUMED,this._Bind(this._OnDataConsumed)),this._transitions=new h.AnimController,this._closeBg=this._pointer.Add(h.PointerStatic),this._closeBg.Hook(c.MOUSE_LEFT,c.RELEASE,this._Bind(this._CloseRequest)),this._options=null,this._optionsHandler=new s.helpers.OptionsHandler(this._Bind(this._OnOptionsUpdated),this._Bind(this._OnOptionsWillUpdate)),this._optionsHandler.Hook("orientation"),this._optionsHandler.Hook("placement","contentPlacement",this.constructor.__default_contentPlacement),this._optionsHandler.Hook("flavor","contentFlavor")}},{key:"_Style",value:function _Style(){return i.Extends({":host":{transform:"translateX(-100%)",transition:"transform 0s linear"},".bg":{"@":["layer"],transform:"translateY(-100%)",transition:"transform 0s linear"}},_get(_getPrototypeOf(Overlay.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(Overlay.prototype),"_Render",this).call(this),this._bg=n.dom.El("div",{class:"bg"},this),this._closeBg.element=this._bg}},{key:"options",get:function get(){return this._options},set:function set(e){this._options!=e&&e&&(this._options=e,this._optionsHandler.Process(this,e))}},{key:"_OnOptionsWillUpdate",value:function _OnOptionsWillUpdate(e,t,n){}},{key:"contentPlacement",set:function set(e){this._contentPlacement&&this.classList.remove("content-".concat(this._contentPlacement));var t=l.SimplifyPlacement(e,this._orientation.currentFlag==l.VERTICAL);t&&(this._contentPlacement=t,this.classList.add("content-".concat(this._contentPlacement))),"placement"in this._content&&(this._content.placement=t)}},{key:"contentFlavor",set:function set(e){"flavor"in this._content&&(this._content.flavor=e)}},{key:"_OnOptionsUpdated",value:function _OnOptionsUpdated(e,t,n){}},{key:"_OnDataChanged",value:function _OnDataChanged(e){if(_get(_getPrototypeOf(Overlay.prototype),"_OnDataChanged",this).call(this,e),this._content&&(this._content.Release(),this._content=null),this._data){if(!n.isInstanceOf(this._data,p))throw new Error("Overlay expect data of type OverlayOptions, got ".concat(this._data.constructor.name," instead."));var t=this._ExtractData(this._data),i=this._FindContentClass(this._data,t);if(!i)throw new Error("Invalid overlay contentClass : ".concat(i));this._content=this.Add(i,"content"),this._content.classList.add(l.SHOWN),this._content.data=t,this.options=this._data.options}}},{key:"_FindContentClass",value:function _FindContentClass(e,t){var n=e.GetOption("contentClass",null);return n||(n=s.BINDINGS.Get(d.CONTENT,e.request.requestType,null),t&&!n&&(n=s.BINDINGS.Get(d.CONTENT,t,null)),n||(n=this.constructor.__default_overlayContentClass)),n}},{key:"_ExtractData",value:function _ExtractData(e){return e}},{key:"_CloseRequest",value:function _CloseRequest(){"_CloseRequest"in this._content&&this._content._CloseRequest()}},{key:"DisplayGranted",value:function DisplayGranted(){this.style.setProperty("transform","translateX(0%)"),this._bg.style.setProperty("transform","translateY(0%)"),_get(_getPrototypeOf(Overlay.prototype),"DisplayGranted",this).call(this),this.classList.add(l.SHOWN)}},{key:"_OnDataConsumed",value:function _OnDataConsumed(e){}},{key:"_CleanUp",value:function _CleanUp(){this.style.removeProperty("transform"),this._bg.style.removeProperty("transform"),this.classList.remove(l.SHOWN),_get(_getPrototypeOf(Overlay.prototype),"_CleanUp",this).call(this)}}]),Overlay}(u);_defineProperty(m,"__NFO__",s.NFOS.Ext({css:["@/views/overlay.css"]},u,["css"])),_defineProperty(m,"__default_overlayContentClass",null),_defineProperty(m,"__default_contentPlacement",null),_defineProperty(m,"__content_context",d.CONTENT),e.exports=m,a.Register("nkmjs-overlay",m)},{411:299,389:300,392:342,394:345,449:349,446:338,443:340,12:27,29:272,14:458}],342:[function(__r__,e,t){var n=__r__(12),i=__r__(163),s=function(e){_inherits(POINTER,e);var t=_createSuper(POINTER);function POINTER(){return _classCallCheck(this,POINTER),t.call(this)}return _createClass(POINTER,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(POINTER.prototype),"_Init",this).call(this),this._running=!1,this._using=[],this._usingDeprecated=[],this._position={x:0,y:0},this._clearUsing=new n.time.DelayedCall(this._Bind(this._ClearUsing)),this._Bind(this._mExternalDragEnter),this._Bind(this._mExternalDragOver),this._Bind(this._mExternalDragLeave),this._Bind(this._mExternalDrop),this._Bind(this._mDown),this._Bind(this._mUp),this._Bind(this._mMove),this._Bind(this._tStart),this._Bind(this._tMove),this._Bind(this._tEnd),this._Bind(this._tCancel),this._Bind(this._gStart),this._Bind(this._gChange),this._Bind(this._gEnd),this._isBrowser&&this._Start()}},{key:"_Start",value:function _Start(){this._running||(document.addEventListener("mousedown",this._mDown),document.addEventListener("mouseup",this._mUp),document.addEventListener("mousemove",this._mMove),document.addEventListener("touchstart",this._tStart),document.addEventListener("gesturestart",this._gStart),document.addEventListener("dragenter",this._mExternalDragEnter),this._running=!0)}},{key:"_Stop",value:function _Stop(){this._running&&(document.removeEventListener("mousedown",this._mDown),document.removeEventListener("mouseup",this._mUp),document.removeEventListener("mousemove",this._mMove),document.removeEventListener("touchstart",this._tStart),document.removeEventListener("gesturestart",this._gStart),document.removeEventListener("dragenter",this._mExternalDragEnter),this._running=!1)}},{key:"running",get:function get(){return this._running}},{key:"position",get:function get(){return this._position}},{key:"StartUsing",value:function StartUsing(e){var t=this._usingDeprecated.indexOf(e);-1!=t&&this._usingDeprecated.splice(t,1),this._using.includes(e)||this._using.push(e)}},{key:"StopUsing",value:function StopUsing(e){this._usingDeprecated.includes(e)||(this._usingDeprecated.push(e),this._clearUsing.Schedule())}},{key:"_IsUsing",value:function _IsUsing(e){if(e===POINTER.MOUSE_LEFT)return!1;for(var t=0,n=this._using.length;t<n;t++)if(e in this._using[t])return!0;return!1}},{key:"_ClearUsing",value:function _ClearUsing(){for(var e=0,t=this._usingDeprecated.length;e<t;e++){var n=this._usingDeprecated[e],i=this._using.indexOf(n);-1!=i&&this._using.splice(i,1)}}},{key:"_mDown",value:function _mDown(e){this._Broadcast(POINTER.MOUSE_DOWN,e),this._IsUsing(e.button)&&e.preventDefault()}},{key:"_mUp",value:function _mUp(e){this._Broadcast(POINTER.MOUSE_UP,e),this._IsUsing(e.button)&&e.preventDefault()}},{key:"_mMove",value:function _mMove(e){this._position.x=e.clientX,this._position.y=e.clientY,this._Broadcast(POINTER.MOUSE_MOVE,e)}},{key:"_tStart",value:function _tStart(e){e.cancelable&&e.preventDefault(),document.addEventListener("touchmove",this._tMove),document.addEventListener("touchend",this._tEnd),document.addEventListener("touchcancel",this._tCancel)}},{key:"_tMove",value:function _tMove(e){}},{key:"_tEnd",value:function _tEnd(e){this._clearTouchListeners()}},{key:"_tCancel",value:function _tCancel(e){this._clearTouchListeners()}},{key:"_clearTouchListeners",value:function _clearTouchListeners(){document.removeEventListener("touchmove",this._tMove),document.removeEventListener("touchend",this._tEnd),document.removeEventListener("touchcancel",this._tCancel)}},{key:"_gStart",value:function _gStart(e){e.cancelable&&e.preventDefault(),document.addEventListener("gesturechange",this._gChange),document.addEventListener("gestureend",this._gEnd)}},{key:"_gChange",value:function _gChange(e){e.cancelable&&e.preventDefault()}},{key:"_gEnd",value:function _gEnd(e){e.cancelable&&e.preventDefault(),document.removeEventListener("gesturechange",this._gChange),document.removeEventListener("gestureend",this._gEnd)}},{key:"_mExternalDragEnter",value:function _mExternalDragEnter(e){POINTER.DRAG_DATA||(POINTER.DragStarted(e.dataTransfer,null,!1,!0),document.addEventListener("dragleave",this._mExternalDragLeave),document.addEventListener("dragover",this._mExternalDragOver),document.addEventListener("drop",this._mExternalDrop))}},{key:"_mExternalDragLeave",value:function _mExternalDragLeave(e){e.preventDefault(),this._ClearExternalDragDrop()}},{key:"_mExternalDragOver",value:function _mExternalDragOver(e){e.preventDefault()}},{key:"_mExternalDrop",value:function _mExternalDrop(e){e.preventDefault(),this._ClearExternalDragDrop()}},{key:"_ClearExternalDragDrop",value:function _ClearExternalDragDrop(){POINTER.DragEnded(),POINTER.EXTERNAL_DRAG=!1,POINTER.DRAG_DATA=null,document.removeEventListener("dragleave",this._mExternalDragLeave),document.removeEventListener("dragover",this._mExternalDragOver),document.removeEventListener("drop",this._mExternalDrop)}}],[{key:"POINTER",get:function get(){return this.instance.mouse}},{key:"LocalMouse",value:function LocalMouse(e){var t=e.getBoundingClientRect(),n=this.instance._position,i=n.x-t.left,s=n.y-t.top;return{x:i,y:s,normalized:{x:i/t.width,y:s/t.height}}}},{key:"DRAG_DATA",get:function get(){return this._dragData},set:function set(e){this._dragData=e}},{key:"EXTERNAL_DRAG",get:function get(){return this._dragDataExternal},set:function set(e){this._dragDataExternal=e}},{key:"DRAG_MULTIPLE",get:function get(){return this._dragLength>-1}},{key:"DRAG_TARGET",get:function get(){return this._dragTarget},set:function set(e){this._dragTarget=e}},{key:"dragLength",get:function get(){return this._dragLength}},{key:"DragStarted",value:function DragStarted(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.DRAG_DATA=null,this.EXTERNAL_DRAG=s,this._dragMultiple=n;var a=-1;s||(e&&n&&Array.isArray(e)&&(a=e.length),this.DRAG_DATA=e),this._dragLength=a,this.DRAG_TARGET=t,this.instance._Broadcast(i.DRAG_STARTED,e)}},{key:"DragEnded",value:function DragEnded(){this.instance._Broadcast(i.DRAG_ENDED),this.DRAG_DATA=null,this.DRAG_TARGET=null,this._dragLength=-1}}]),POINTER}(n.helpers.SingletonEx);_defineProperty(s,"MOUSE_LEFT",0),_defineProperty(s,"MOUSE_MIDDLE",1),_defineProperty(s,"MOUSE_RIGHT",2),_defineProperty(s,"MOUSE_PREV",3),_defineProperty(s,"MOUSE_NEXT",4),_defineProperty(s,"DOWN",0),_defineProperty(s,"UP",1),_defineProperty(s,"RELEASE",2),_defineProperty(s,"RELEASE_TWICE",3),_defineProperty(s,"RELEASE_OUTSIDE",4),_defineProperty(s,"MOUSE_WHEEL",5),_defineProperty(s,"MOUSE_UP",Symbol("mouseUp")),_defineProperty(s,"MOUSE_DOWN",Symbol("mouseDown")),_defineProperty(s,"MOUSE_MOVE",Symbol("mouseMove")),_defineProperty(s,"_dragLength",-1),_defineProperty(s,"_dragData",null),_defineProperty(s,"_dragDataExternal",null),_defineProperty(s,"_dragTarget",null),e.exports=s},{163:344,12:27}],343:[function(__r__,e,t){var n=__r__(12);e.exports={OVERLAY:function(e){_inherits(OVERLAY,e);var t=_createSuper(OVERLAY);function OVERLAY(){var e;return _classCallCheck(this,OVERLAY),_possibleConstructorReturn(e)}return OVERLAY}(n.helpers.CSYMBOL)}},{12:27}],344:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"PAINTED",Symbol("painted")),_defineProperty(n,"UNPAINTED",Symbol("unpainted")),_defineProperty(n,"FIRST_PAINT",Symbol("first-paint")),_defineProperty(n,"CHILD_ADDED",Symbol("childAdded")),_defineProperty(n,"CHILD_MOVED",Symbol("childMoved")),_defineProperty(n,"CHILD_REMOVED",Symbol("childRemoved")),_defineProperty(n,"SELECTION_GAIN",Symbol("selectionGain")),_defineProperty(n,"SELECTION_LOST",Symbol("selectionLost")),_defineProperty(n,"FOCUS_GAIN",Symbol("focusGain")),_defineProperty(n,"FOCUS_LOST",Symbol("focusLost")),_defineProperty(n,"ACTIVATED",Symbol("activated")),_defineProperty(n,"ALT_ACTIVATED",Symbol("altActivated")),_defineProperty(n,"TRIGGERED",Symbol("triggered")),_defineProperty(n,"DEACTIVATED",Symbol("deactivated")),_defineProperty(n,"DATA_CHANGED",Symbol("dataChanged")),_defineProperty(n,"DISPLAY_REQUESTED",Symbol("displayRequested")),_defineProperty(n,"CLOSE_REQUESTED",Symbol("closeRequested")),_defineProperty(n,"EXPANDED",Symbol("expanded")),_defineProperty(n,"COLLAPSED",Symbol("collapsed")),_defineProperty(n,"DRAG_STARTED",Symbol("dragStarted")),_defineProperty(n,"DRAGGED",Symbol("dragged")),_defineProperty(n,"DRAG_ENDED",Symbol("dragEnded")),_defineProperty(n,"VIEW_ADDED",Symbol("viewAdded")),_defineProperty(n,"EMPTY",Symbol("empty")),_defineProperty(n,"NON_EMPTY",Symbol("non-empty")),e.exports=n},{}],345:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(163),l=__r__(386),c=function(e){_inherits(UI,e);var t=_createSuper(UI);function UI(){return _classCallCheck(this,UI),t.call(this)}return _createClass(UI,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(UI.prototype),"_Init",this).call(this),this._uiPool=new i.DictionaryList,this._uiTypes=new i.Dictionary,this._dirtyElements=new i.List(0),this._Bind(this._Return),this._delayedUpdate=new s.time.DelayedCall(this._Bind(this._UpdateDirty))}},{key:"_Register",value:function _Register(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div";if(!n.isFunc(t))throw new Error("Register used with invalid constructor : ".concat(t));console.log(e),this._uiTypes.Set(t,e),customElements.define(e,t)}},{key:"_Return",value:function _Return(e){if(!n.isObject(e)||!n.isInstanceOf(e,l))throw new Error("Return used with invalid object : ".concat(e));var t=e.constructor;if(!this._uiTypes.Contains(t))throw new Error("Return used with a never-registered object type : ".concat(t));this._uiPool.Set(t,e)}},{key:"_Rent",value:function _Rent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._uiTypes.Contains(e)){if(!n.isInstanceOf(e,l))throw new Error("".concat(e," could not be found."));this._Register(n.tils.ToCustomElementID(e.name,!0),e)}var i=this._uiPool.Pop(e);return i||((i=new e)._returnFn=this._Return),i.Wake(),t&&t.Add(i),i}},{key:"_AddDirty",value:function _AddDirty(e){this._dirtyElements.Add(e)&&this._delayedUpdate.Schedule()}},{key:"_UpdateDirty",value:function _UpdateDirty(e){this._dirtyElements.ForEach((function(e,t){e.ApplyTransforms()})),this._dirtyElements.Clear()}}],[{key:"Register",value:function Register(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div";this.instance._Register(e,t,n)}},{key:"RegisterGroup",value:function RegisterGroup(e){for(var t in e)this.instance._Register(t,e[t])}},{key:"Rent",value:function Rent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.instance._Rent(e,t)}},{key:"AddDirty",value:function AddDirty(e){e&&this.instance._AddDirty(e)}}]),UI}(s.helpers.SingletonEx);e.exports=c},{386:289,163:344,18:21,12:27,14:458}],346:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(27),a=__r__(394),l=__r__(79),c=__r__(389),u,h=function(e){_inherits(Flow,e);var t=_createSuper(Flow);function Flow(){return _classCallCheck(this,Flow),t.call(this)}return _createClass(Flow,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Flow.prototype),"_Init",this).call(this),this._chain=new i.List,this._currentView=null}},{key:"Next",value:function Next(e){}},{key:"Previous",value:function Previous(){}},{key:"_OnCurrentViewRequestClose",value:function _OnCurrentViewRequestClose(e){this._currentView===e&&this.Previous()}}]),Flow}(__r__(450));e.exports=h},{389:300,79:344,394:345,450:350,27:1,18:21,14:458}],347:[function(__r__,e,t){e.exports={View:__r__(450),Flow:__r__(451),Layer:__r__(452),LayerContainer:__r__(453)}},{451:346,452:349,453:348,450:350}],348:[function(__r__,e,t){var n=__r__(14),i=__r__(29),s=__r__(18),a=__r__(12),l=__r__(394),c=__r__(79),u=__r__(452),h="layer-top",d="layer-covered",p=function(e){_inherits(LayerContainer,e);var t=_createSuper(LayerContainer);function LayerContainer(){return _classCallCheck(this,LayerContainer),t.call(this)}return _createClass(LayerContainer,[{key:"_Init",value:function _Init(){this._layerClassName="layer",_get(_getPrototypeOf(LayerContainer.prototype),"_Init",this).call(this),this._updateDepths=new a.time.DelayedCall(this._Bind(this._UpdateLayerDepth)),this._layerList=new s.List(0)}},{key:"_Style",value:function _Style(){var e=i.Extends({":host":{}},_get(_getPrototypeOf(LayerContainer.prototype),"_Style",this).call(this));return e[".".concat(this._layerClassName)]={"@":["layer"]},e}},{key:"_OnChildAdded",value:function _OnChildAdded(e,t){_get(_getPrototypeOf(LayerContainer.prototype),"_OnChildAdded",this).call(this,e,t);var i=n.isInstanceOf(e,u)?e:null;i&&(this._layerList.Add(i),i.classList.add(this._layerClassName),i.Watch(c.DISPLAY_REQUESTED,this._OnLayerDisplayRequested,this),this._updateDepths.Schedule())}},{key:"_OnChildRemoved",value:function _OnChildRemoved(e,t){_get(_getPrototypeOf(LayerContainer.prototype),"_OnChildRemoved",this).call(this,e,t);var i=n.isInstanceOf(e,u)?e:null;i&&(this._layerList.Remove(i),i.classList.remove(this._layerClassName),i.classList.remove(h),i.classList.remove(d),i.Unwatch(c.DISPLAY_REQUESTED,this._OnLayerDisplayRequested,this),this._updateDepths.Schedule())}},{key:"_OnLayerDisplayRequested",value:function _OnLayerDisplayRequested(e){if(!n.isInstanceOf(e,u))throw new Error("WTF");e.BringToFront(),this._updateDepths.Schedule()}},{key:"_UpdateLayerDepth",value:function _UpdateLayerDepth(){var e=0,t=this._layerList.count,n=null;this._layerList;for(var i=0;i<t;i++){var s=this._layerList.At(i);n=s,s.layerSiblingsCount=t,s.layerIndex=e++,i==t-1?(s.classList.remove(d),s.classList.add(h),s.DisplayGranted()):(s.classList.remove(d),s.classList.add(h))}return n}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(LayerContainer.prototype),"_CleanUp",this).call(this)}}]),LayerContainer}(u);e.exports=p,l.Register("nkmjs-layer-container",p)},{79:344,394:345,452:349,18:21,12:27,29:272,14:458}],349:[function(__r__,e,t){var n=__r__(394),i,s=function(e){_inherits(Layer,e);var t=_createSuper(Layer);function Layer(){return _classCallCheck(this,Layer),t.call(this)}return _createClass(Layer,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Layer.prototype),"_Init",this).call(this),this._layerIndex=0,this._layerSiblingsCount=0}},{key:"layerSiblingsCount",get:function get(){return this._layerSiblingsCount},set:function set(e){this._layerSiblingsCount=e}},{key:"layerIndex",get:function get(){return this._layerIndex},set:function set(e){this._layerIndex=e,this.style.setProperty("--layer-depth",e)}},{key:"isBackLayer",get:function get(){return 0==this._layerIndex}},{key:"isFrontLayer",get:function get(){return this._layerIndex==this._layerSiblingsCount-1}},{key:"_Style",value:function _Style(){return{":host":{"@":["layer"],overflow:"hidden"}}}},{key:"_CleanUp",value:function _CleanUp(){this.layerIndex=0,this.layerSiblingsCount=0,_get(_getPrototypeOf(Layer.prototype),"_CleanUp",this).call(this)}}]),Layer}(__r__(450));e.exports=s,n.Register("nkmjs-layer",s)},{394:345,450:350}],350:[function(__r__,e,t){var n=__r__(14),i=__r__(29),s=__r__(27),a=__r__(394),l=__r__(79),c=__r__(389),u,h=function(e){_inherits(View,e);var t=_createSuper(View);function View(){return _classCallCheck(this,View),t.call(this)}return _createClass(View,[{key:"_Style",value:function _Style(){return i.Extends({":host":{"min-width":"0","min-height":"0"}},_get(_getPrototypeOf(View.prototype),"_Style",this).call(this))}},{key:"_OnSizeChange",value:function _OnSizeChange(e){}},{key:"_Init",value:function _Init(){_get(_getPrototypeOf(View.prototype),"_Init",this).call(this),this._commands=new s.CommandBox(this._Bind(this._OnCmdRegister))}},{key:"RequestDisplay",value:function RequestDisplay(){this._Broadcast(l.DISPLAY_REQUESTED,this)}},{key:"RequestClose",value:function RequestClose(){this._Broadcast(l.CLOSE_REQUESTED,this)}},{key:"DisplayGranted",value:function DisplayGranted(){}},{key:"_OnCmdRegister",value:function _OnCmdRegister(e){}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(View.prototype),"_CleanUp",this).call(this),this.constructor.__useResizeCallback&&this.constructor.__resizeObserver.unobserve(this)}},{key:"Wake",value:function Wake(){_get(_getPrototypeOf(View.prototype),"Wake",this).call(this),this.constructor.__useResizeCallback&&this.constructor.__resizeObserver.observe(this)}}]),View}(__r__(427));_defineProperty(h,"__useResizeCallback",!0),_defineProperty(h,"__resizeObserver",new ResizeObserver((function(e,t){for(var n=0,i=e.length;n<i;n++){var s=e[n],a=s.target;a.constructor.__useResizeCallback&&a._OnSizeChange(s.contentRect)}}))),_defineProperty(h,"__default_iState",null),e.exports=h,a.Register("nkmjs-view",h)},{389:300,79:344,394:345,427:354,27:1,29:272,14:458}],351:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(18),a=__r__(454),l=__r__(385),c=__r__(163),u=__r__(455),h=__r__(456),d=__r__(457),p=__r__(458),m="stretch",y="stretch-same",g=function(e){_inherits(WidgetBar,e);var t=_createSuper(WidgetBar);function WidgetBar(){return _classCallCheck(this,WidgetBar),t.call(this)}return _createClass(WidgetBar,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(WidgetBar.prototype),"_Init",this).call(this),this._defaultWidgetClass=h,this._defaultWidgetOptions=null,this._optionsMap=new s.Dictionary,this._handles=[],this._groups={},this._radioMap={},this._flags.Add(this,WidgetBar.FLAG_STRETCH,WidgetBar.FLAG_STRETCH_SAME),this._stretchEnum=new d(this.constructor.__stretchENUMs,!0),this._stretchEnum.Add(this),this._sizeEnum=new d(l.sizes,!0),this._sizeEnum.Add(this),this._sizeEnum.onFlagChanged.Add(this._Bind(this._OnSizeChanged))}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(WidgetBar.prototype),"_PostInit",this).call(this),this._sizeEnum.Set(this.constructor.__default_size)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(e){this._sizeEnum.Set(e)}},{key:"defaultWidgetOptions",get:function get(){return this._defaultWidgetOptions},set:function set(e){this._defaultWidgetOptions=e}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex","justify-content":"flex-start","align-items":"center"},":host(.vertical)":{"flex-flow":"column nowrap"},":host(.horizontal)":{"flex-flow":"row nowrap"},".group":{position:"relative",flex:"0 0 auto",display:"flex","justify-content":"flex-start","align-items":"center"},".item":{position:"relative",flex:"0 0 auto","min-width":"0","min-height":"0"},":host(.stretch), :host(.stretch-same)":{"align-items":"stretch","align-content":"stretch",flex:"1 1 auto"}}}},{key:"stretch",set:function set(e){this._stretchEnum.Set(e)}},{key:"_Render",value:function _Render(){this.focusArea=this}},{key:"_OnSizeChanged",value:function _OnSizeChanged(e,t){this._sizeEnum.Apply("size",this._handles)}},{key:"_OnPlacementChanged",value:function _OnPlacementChanged(e,t){_get(_getPrototypeOf(WidgetBar.prototype),"_OnPlacementChanged",this).call(this,e,t);for(var n=0,i=this._handles.length;n<i;n++){var s=this._handles[n];"placement"in s&&(s.placement=e)}}},{key:"CreateHandle",value:function CreateHandle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=t||e.cl||this._defaultWidgetClass,a,l=n.tils.Get(e,"group",null),u=l?n.tils.Get(e,"toggle",null):null;if(l?(l=this.GetGroup(l,!0),a=this.Add(s,"item",l.element),l.handles.push(a),u&&a.Watch(c.ACTIVATED,this._OnRadioActivated,this).Watch(c.DEACTIVATED,this._OnRadioDeactivated,this)):a=this.Add(s,"item"),this._optionsMap.Set(a,e),a.Watch(i.SIGNAL.RELEASED,this._OnHandleReleased,this),n.isInstanceOf(a,h)){if(e&&this._defaultWidgetOptions)for(var d in this._defaultWidgetOptions)e.hasOwnProperty(d)||(e[d]=this._defaultWidgetOptions[d],this.__tempKeys||(this.__tempKeys=[]),this.__tempKeys.push(d));if(a.options=e,this.__tempKeys){for(var m=0,y=this.__tempKeys.length;m<y;m++)delete e[this.__tempKeys[m]];this.__tempKeys.length=0,this.__tempKeys=null}}if(n.isInstanceOf(a,p)&&e&&("currentValue"in e&&(a.currentValue=e.currentValue),"inputId"in e&&(a.inputId=e.inputId),e.inputWatchers&&Array.isArray(e.inputWatchers)))for(var g=0;g<e.inputWatchers.length;g++){var v=e.inputWatchers[g];a.handler.Watch(v.signal,v.fn,v.thisArg)}if(e){if(e.member){var k=e.member;k.owner[k.id]=a}if(e.watchers&&Array.isArray(e.watchers))for(var g=0;g<e.watchers.length;g++){var O=e.watchers[g];a.Watch(O.signal,O.fn,O.thisArg)}}return a.flags.Set(this._orientation,!0),"size"in a&&(a.size=this._sizeEnum.currentFlag),"placement"in a&&(a.placement=this._placement.currentFlag),this._handles.push(a),a}},{key:"CreateHandles",value:function CreateHandles(){for(var e=[],t=0,n=arguments.length;t<n;t++)e.push(this.CreateHandle(t<0||arguments.length<=t?void 0:arguments[t]));return e}},{key:"GetGroup",value:function GetGroup(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e in this._groups)return this._groups[e];if(!t)return null;var i={element:n.dom.El("span",{class:"group"},this),handles:[]};return this._groups[e]=i,i}},{key:"_OnRadioActivated",value:function _OnRadioActivated(e){var t,n=this._optionsMap.Get(e).radio,i;n in this._radioMap&&this._radioMap[n].Deactivate();this._radioMap[n]=e}},{key:"_OnRadioDeactivated",value:function _OnRadioDeactivated(e){var t,n=this._optionsMap.Get(e).radio,i;n in this._radioMap&&(this._radioMap[n]===e&&delete this._radioMap[n])}},{key:"_OnHandleReleased",value:function _OnHandleReleased(e){var t=this._optionsMap.Get(e),i=n.tils.Get(t,"group",null);if(i){var s=this.GetGroup(i);s.handles.splice(s.handles.indexOf(e),1),0===s.handles.length&&(n.dom.Detach(s.element),s.element=null,s.handles.length=0,delete this._groups[i])}e.classList.remove("item"),this._optionsMap.Remove(e);var a=this._handles.indexOf(e);-1!=a&&this._handles.splice(a,1)}},{key:"Clear",value:function Clear(){for(;0!=this._handles.length;)this._handles.pop().Release()}},{key:"_CleanUp",value:function _CleanUp(){this.Clear(),this._sizeEnum.Set(this.constructor.__default_size),_get(_getPrototypeOf(WidgetBar.prototype),"_CleanUp",this).call(this)}}],[{key:"FLAG_STRETCH",get:function get(){return m}},{key:"FLAG_STRETCH_SAME",get:function get(){return y}}]),WidgetBar}(u);_defineProperty(g,"__NFO__",i.NFOS.Ext({css:["@/widgets/widget-bar.css"]},u,["css"])),_defineProperty(g,"__stretchENUMs",[m,y]),_defineProperty(g,"__default_size",l.SIZE_M),e.exports=g},{385:300,457:304,458:312,163:344,454:345,456:352,455:354,18:21,12:27,14:458}],352:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(27),a=__r__(383),l=__r__(163),c=__r__(385),u=__r__(56),h=__r__(459),d=__r__(457),p=function(e){_inherits(WidgetButton,e);var t=_createSuper(WidgetButton);function WidgetButton(){return _classCallCheck(this,WidgetButton),t.call(this)}return _createClass(WidgetButton,[{key:"_Init",value:function _Init(){var e=this;_get(_getPrototypeOf(WidgetButton.prototype),"_Init",this).call(this),this._Bind(this._OnRippleAnimationEnd),this._alwaysDisplayCommand=this._alwaysDisplayCommand||!1,this._command=null,this._isCommandTrigger=!0,this._isCommandContext=!0,this._isToggled=!1,this._commandObserver=new i.signals.Observer,this._commandObserver.Hook(i.SIGNAL.UPDATED,this._OnCommandUpdated,this),this._flags.Add(this,c.TOGGLABLE,c.TOGGLED),this._sizeEnum=new d(c.sizes,!0),this._sizeEnum.Add(this),this._flavorEnum=new d(c.flavorsExtended,!0),this._flavorEnum.Add(this),this._variantEnum=new d(c.variants,!0),this._variantEnum.Add(this),this._optionsHandler=new i.helpers.OptionsHandler(null,this._Bind(this._OnOptionsWillUpdate)),this._optionsHandler.Hook(u.DATA),this._optionsHandler.Hook("htitle"),this._optionsHandler.Hook("trigger"),this._optionsHandler.Hook("toggle",null,null),this._optionsHandler.Hook("request"),this._optionsHandler.Hook("command"),this._optionsHandler.Hook("isCommandTrigger"),this._optionsHandler.Hook("isCommandContext"),this._optionsHandler.Hook("alwaysVisible","alwaysDisplayCommand"),this._optionsHandler.Hook("flagOn",(function(t){for(var n=0,i=t.length;n<i;n++)e._flags.Set(t[n],!0)})),this._optionsHandler.Hook("flagOff",(function(t){for(var n=0,i=t.length;n<i;n++)e._flags.Set(t[n],!1)})),this._optionsHandler.Hook("size"),this._optionsHandler.Hook(u.FLAVOR),this._optionsHandler.Hook(u.VARIANT)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(WidgetButton.prototype),"_PostInit",this).call(this),this._sizeEnum.Set(this.constructor.__default_size),this._flavorEnum.Set(this.constructor.__default_flavor),this._variantEnum.Set(this.constructor.__default_variant)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(e){this._sizeEnum.Set(e)}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(e){this._flavorEnum.Set(e)}},{key:"variant",get:function get(){return this._variantEnum.currentFlag},set:function set(e){this._variantEnum.Set(e)}},{key:"isToggled",get:function get(){return this._isToggled}},{key:"isActivable",set:function set(e){_set(_getPrototypeOf(WidgetButton.prototype),"isActivable",e,this,!0),this._flags.Set(c.DISABLED,!this._isActivable)}},{key:"isCommandTrigger",get:function get(){return this._isCommandTrigger},set:function set(e){this._isCommandTrigger=e}},{key:"isCommandContext",get:function get(){return this._isCommandContext},set:function set(e){this._isCommandContext=e}},{key:"alwaysDisplayCommand",get:function get(){return this._alwaysDisplayCommand},set:function set(e){this._alwaysDisplayCommand=e,e&&this._command&&(this.visible=!0)}},{key:"_Render",value:function _Render(){this.focusArea=this}},{key:"CreateRipple",value:function CreateRipple(){this._rippleWrapper||(this._rippleWrapper=n.dom.El("div",{class:"ripple-wrapper"}),n.dom.AttachFirst(this._rippleWrapper,this._wrapper,!1));var e=n.dom.Rect(this._rippleWrapper),t=n.dom.El("span",{},this._rippleWrapper),i=e.width,s=e.height,a=Math.max(i,s),l=a/2;t.style.width=t.style.height="".concat(a,"px"),t.style.left="".concat(this._pointer._position.x-(e.x+l),"px"),t.style.top="".concat(this._pointer._position.y-(e.y+l),"px"),t.classList.add("ripple"),t.addEventListener("animationend",this._OnRippleAnimationEnd)}},{key:"_OnRippleAnimationEnd",value:function _OnRippleAnimationEnd(e){var t=e.target;t.removeEventListener("animationend",this._OnRippleAnimationEnd),n.dom.Detach(t),this._rippleWrapper.hasChildNodes()||(n.dom.Detach(this._rippleWrapper),this._rippleWrapper=null)}},{key:"options",set:function set(e){e&&(this._optionsHandler.Process(this,e),this._flags.Set(c.NO_SCALE,!!e.noscale&&e.noscale))}},{key:"altOptions",set:function set(e){e&&this._optionsHandler.ProcessExistingOnly(this,e,null,!1,!1)}},{key:"_OnOptionsWillUpdate",value:function _OnOptionsWillUpdate(e,t,i){e&&(e.htitle=n.tils.Get(e,"htitle",e.label||""))}},{key:"command",get:function get(){return this._command},set:function set(e){if(this._command!==e){var t=this._command;this._command=e,t&&this._commandObserver.Unobserve(e),e?(this._commandObserver.Observe(e),this._OnCommandUpdated(e),this.htitle=e.name,this.order=e.order):this.order=0}}},{key:"_OnCommandUpdated",value:function _OnCommandUpdated(e){this.visible=!!this._alwaysDisplayCommand||e.isEnabled}},{key:"trigger",get:function get(){return this._trigger},set:function set(e){this._trigger=e}},{key:"toggle",get:function get(){return this._toggle},set:function set(e){this._toggle=e,this._flags.Set(c.TOGGLABLE,!!e)}},{key:"request",get:function get(){return this._request},set:function set(e){this._request=e}},{key:"Activate",value:function Activate(e){if(!_get(_getPrototypeOf(WidgetButton.prototype),"Activate",this).call(this,e))return!1;if(this.CreateRipple(),this._isCommandTrigger&&this._command&&(this._command.emitter=this,this._isCommandContext?this._command.Execute(this):this._command.Execute()),this._trigger){var t=n.tils.Get(this._trigger,"thisArg",null),i;if(this._trigger.args)(i=this._trigger.fn).call.apply(i,[t].concat(_toConsumableArray(this._trigger.args)));else this._trigger.arg?this._trigger.arg===c.SELF?this._trigger.fn.call(t,this):this._trigger.fn.call(t,this._trigger.arg):this._trigger.fn.call(t)}if(this._toggle)if(this._isToggled)this._toggle.yoyo&&this.Deactivate();else{this._isToggled=!0,this._flags.Set(c.TOGGLED,!0);var a=n.tils.Get(this._toggle,"thisArg",null),u;if(this._toggle.args)(u=this._toggle.fn).call.apply(u,[a].concat(_toConsumableArray(this._toggle.args)));else this._toggle.arg?this._toggle.arg===c.SELF?this._toggle.fn.call(a,this):this._toggle.fn.call(a,this._toggle.arg):this._toggle.fn.call(a)}if(this._request){if(!this._request.type)throw new Error("Cannot generate request of type 'null'");var h=n.tils.Get(this._request,"emitter",this),d=n.tils.Get(this._request,"options"),p=n.tils.Get(this._request,"proxy",null);if(p){var m=n.tils.Get(p,"thisArg",null);d=p.args?p.fn.apply(m,p.args):p.arg?p.fn.call(m,p.arg):p.fn.call(m)}h._EmitLocalRequest(opts.type,d,n.tils.Get(this._request,"onSuccess",null),n.tils.Get(this._request,"onFail",null),n.tils.Get(this._request,"timeout",0),n.tils.Get(this._request,"cl",s.Request))}return this._Broadcast(l.TRIGGERED,this),!0}},{key:"Deactivate",value:function Deactivate(){if(this._isToggled){if(this._isToggled=!1,this._flags.Set(c.TOGGLED,!1),this._toggle&&this._toggle.fnOff){var e=n.tils.Get(this._toggle,"thisArg",null),t;if(this._toggle.args)(t=this._toggle.fnOff).call.apply(t,[e].concat(_toConsumableArray(this._toggle.args)));else this._toggle.arg?this._toggle.arg===c.SELF?this._toggle.fnOff.call(e,this):this._toggle.fnOff.call(e,this._toggle.arg):this._toggle.fnOff.call(e)}this._Broadcast(l.DEACTIVATED,this)}}},{key:"_CleanUp",value:function _CleanUp(){this._rippleWrapper&&(n.dom.Detach(this._rippleWrapper),this._rippleWrapper=null),this.htitle="",this.command=null,this._isCommandTrigger=!0,this._isCommandContext=!0,this._isToggled=!1,this.toggle=null,this.trigger=null,this.request=null,this.isActivable=!0,this._flags.ApplyAll(!1),this._sizeEnum.Set(this.constructor.__default_size),this._flavorEnum.Set(this.constructor.__default_flavor),this._variantEnum.Set(this.constructor.__default_variant),_get(_getPrototypeOf(WidgetButton.prototype),"_CleanUp",this).call(this)}}]),WidgetButton}(h);_defineProperty(p,"__NFO__",i.NFOS.Ext({css:["@/buttons/global-button.css"]},h,["css"])),_defineProperty(p,"__default_size",null),_defineProperty(p,"__default_flavor",null),_defineProperty(p,"__default_variant",null),e.exports=p},{385:300,457:304,56:309,163:344,383:345,459:355,27:1,12:27,14:458}],353:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(383),l=__r__(414),c=__r__(385),u=__r__(460),h=__r__(457),d,p=function(e){_inherits(WidgetItem,e);var t=_createSuper(WidgetItem);function WidgetItem(){return _classCallCheck(this,WidgetItem),t.call(this)}return _createClass(WidgetItem,[{key:"_Init",value:function _Init(){var e=this;_get(_getPrototypeOf(WidgetItem.prototype),"_Init",this).call(this),this._Bind(this._ExecuteCommand),this._dataObserver.Hook(s.catalogs.SIGNAL.ITEM_DATA_CHANGED,this._OnCatalogItemDataChanged,this),this._itemData=null,this._flavorEnum=new h(c.flavorsExtended,!0),this._flavorEnum.Add(this),this._pointer.Hook(l.MOUSE_LEFT,l.RELEASE_TWICE,this._Bind(this.AltActivate)),this._extDrag=this._extensions.Add(u.Drag),this._extDrag.grabDataCallback=this._Bind(this._GrabDragData),this._dragActivator=null,this._dragFeedbackHost=this,this._optionsHandler=new i.helpers.OptionsHandler,this._optionsHandler.Setup(this),this._optionsHandler.Hook("flagOn",(function(t){for(var n=0,i=t.length;n<i;n++)e._flags.Set(t[n],!0)})),this._optionsHandler.Hook("flagOff",(function(t){for(var n=0,i=t.length;n<i;n++)e._flags.Set(t[n],!1)})),this._optionsHandler.Hook("flavor")}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(WidgetItem.prototype),"_PostInit",this).call(this),this._extDrag.Setup(this,this._dragActivator,this._dragFeedbackHost),this._optionsHandler.Hook("data","itemData")}},{key:"_Wake",value:function _Wake(){_get(_getPrototypeOf(WidgetItem.prototype),"_Wake",this).call(this),this._extDrag.owner=this}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(e){this._flavorEnum.Set(e)}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(WidgetItem.prototype),"_OnDataChanged",this).call(this,e),this._data||(this.itemData=null)}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){_get(_getPrototypeOf(WidgetItem.prototype),"_OnDataUpdated",this).call(this,e);var t=null;t=n.isInstanceOf(this._data,s.catalogs.CatalogItem)?this._data.options:this._data,this._optionsHandler.Process(this,t),this._isFocused&&this._BuildCommandHandles()}},{key:"_OnCatalogItemDataChanged",value:function _OnCatalogItemDataChanged(e,t,n){this.itemData=t}},{key:"_HookItemDataSignals",value:function _HookItemDataSignals(e,t){e.Hook(s.SIGNAL.DIRTY,this._OnItemDataDirty,this),e.Hook(s.SIGNAL.DIRTY_CLEARED,this._OnItemDataCleaned,this),e.Hook(i.SIGNAL.UPDATED,this._OnItemDataUpdated,this),t.isDirty?this._OnItemDataDirty(t):this._OnItemDataCleaned(t)}},{key:"itemData",get:function get(){return this._itemData},set:function set(e){if(this._itemData!==e){var t=this._itemData;this._itemData=e,t&&this._itemDataObserver.Flush(),i.signals.isObservable(this._itemData)?(this._itemDataObserver||(this._itemDataObserver=i.Rent(i.signals.Observer),this._HookItemDataSignals(this._itemDataObserver,this._itemData)),this._itemDataObserver.ObserveOnly(this._itemData)):this._itemDataObserver&&(this._itemDataObserver.Release(),this._itemDataObserver=null),this._OnItemDataChanged(t),this._itemData&&this._OnItemDataUpdated(this._itemData)}}},{key:"_OnItemDataChanged",value:function _OnItemDataChanged(e){}},{key:"_OnItemDataDirty",value:function _OnItemDataDirty(e){this._flavorEnum.Set(i.FLAGS.WARNING)}},{key:"_OnItemDataCleaned",value:function _OnItemDataCleaned(e){this._flavorEnum.Set(null)}},{key:"_OnItemDataUpdated",value:function _OnItemDataUpdated(e){e.isDirty?this._OnItemDataDirty(e):this._OnItemDataCleaned(e)}},{key:"_GrabDragData",value:function _GrabDragData(){return this._data}},{key:"_FocusGain",value:function _FocusGain(){_get(_getPrototypeOf(WidgetItem.prototype),"_FocusGain",this).call(this),this._data&&(this._BuildCommandHandles(),this._data.primaryCommand&&(this._data.primaryCommand.context=this),this._data.secondaryCommand&&(this._data.secondaryCommand.context=this))}},{key:"_FocusLost",value:function _FocusLost(){_get(_getPrototypeOf(WidgetItem.prototype),"_FocusLost",this).call(this),this._data&&this._ClearCommandHandles()}},{key:"AltActivate",value:function AltActivate(e){return!this._data.primaryCommand||(this._data.primaryCommand.Execute(),!1)}},{key:"_BuildCommandHandles",value:function _BuildCommandHandles(){if(this._ClearCommandHandles(),this._data){var e=this._data.commandList;if(e)for(var t=0,n=e.length;t<n;t++){var i=e[t];i.context=this,this._BuildCommand(i)}}}},{key:"_BuildCommand",value:function _BuildCommand(e){}},{key:"_ClearCommandHandles",value:function _ClearCommandHandles(){}},{key:"_ExecuteCommand",value:function _ExecuteCommand(e){e.emitter=this,e.Execute(this._data)}}]),WidgetItem}(__r__(459));e.exports=p},{460:299,385:300,457:304,414:342,383:345,459:355,12:27,31:66,14:458}],354:[function(__r__,e,t){var n=__r__(14),i=__r__(383),s=__r__(385),a=__r__(457),l,c=function(e){_inherits(WidgetOrientable,e);var t=_createSuper(WidgetOrientable);function WidgetOrientable(){return _classCallCheck(this,WidgetOrientable),t.call(this)}return _createClass(WidgetOrientable,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(WidgetOrientable.prototype),"_Init",this).call(this),this._isHorizontalScrollEnabled=!1,this._orientation=new a(s.orientations,!0),this._orientation.Add(this),this._orientation.onFlagChanged.Add(this._Bind(this._OnOrientationChanged)),this._Bind(this._HorizontalScroll)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(WidgetOrientable.prototype),"_PostInit",this).call(this),this._orientation.Set(this.constructor.__default_orientation)}},{key:"orientation",get:function get(){return this._orientation._currentFlag},set:function set(e){this._orientation.Set(e)}},{key:"_OnOrientationChanged",value:function _OnOrientationChanged(e,t){this._isHorizontalScrollEnabled&&(this._orientation.currentFlag===s.VERTICAL?this._pointer.wheelFn=null:this._pointer.wheelFn=this._HorizontalScroll)}},{key:"_HorizontalScroll",value:function _HorizontalScroll(e){if(n.dom.OverflowsX(this._wrapper)){var t=Math.sign(e.deltaY);this._wrapper.scrollBy({top:0,left:50*t}),e.preventDefault()}}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(WidgetOrientable.prototype),"_CleanUp",this).call(this),this._orientation.Set(this.constructor.__default_orientation)}}]),WidgetOrientable}(__r__(459));_defineProperty(c,"CONTROL_ACTIVATED",Symbol("controlActivated")),_defineProperty(c,"__default_orientation",s.HORIZONTAL),e.exports=c},{385:300,457:304,383:345,459:355,14:458}],355:[function(__r__,e,t){var n=__r__(12),i=__r__(383),s=__r__(163),a=__r__(385),l=__r__(461),c=__r__(414),u=__r__(462),h=__r__(463),d=__r__(457),p=__r__(460),m=function(e){_inherits(Widget,e);var t=_createSuper(Widget);function Widget(){return _classCallCheck(this,Widget),t.call(this)}return _createClass(Widget,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Widget.prototype),"_Init",this).call(this),this._data=null,this._notifiesSelectionStack=!1,this._isSelectable=!0,this._isSelected=!1,this._isFocusable=!0,this._isFocused=!1,this._isHighlighted=!1,this._isActivable=!0,this._extensions=new p.Extension,this._pointer=this._extensions.Add(p.Pointer),this._pointer.focusFn=this._Bind(this.Focus),this._pointer.Hook(c.MOUSE_LEFT,c.RELEASE,this._Bind(this.Activate)),this._focusArea=null,this._dataObserver=new n.signals.Observer,this._dataObserver.Hook(n.SIGNAL.UPDATED,this._OnDataUpdated,this),this._flags.Add(this,a.ACTIVATED,a.SELECTED),this._placement=new d(a.placement,!0),this._placement.Add(this),this._placement.onFlagChanged.Add(this._Bind(this._OnPlacementChanged)),this._istateEnum=new d(a.istates,!0),this._istateEnum.Add(this),this.default_SelectOnActivation=this.default_SelectOnActivation||!1,this._selectOnActivation=this.default_SelectOnActivation}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Widget.prototype),"_PostInit",this).call(this),this._istateEnum.Set(this.constructor.__default_iState),this._placement.Set(this.constructor.__default_placement)}},{key:"_OnPaintChange",value:function _OnPaintChange(){_get(_getPrototypeOf(Widget.prototype),"_OnPaintChange",this).call(this),this._extensions.enabled=this._isPainted}},{key:"extensions",get:function get(){return this._extensions}},{key:"pointer",get:function get(){return this._pointer}},{key:"placement",get:function get(){return this._placement},set:function set(e){this._placement.Set(e)}},{key:"_OnPlacementChanged",value:function _OnPlacementChanged(e,t){}},{key:"notifiesSelectionStack",get:function get(){return this._notifiesSelectionStack},set:function set(e){this._notifiesSelectionStack=e}},{key:"htitle",get:function get(){this.getAttribute("title")},set:function set(e){this.setAttribute("title",e)}},{key:"focusArea",get:function get(){return this._focusArea},set:function set(e){this._focusArea!==e&&(this._focusArea=e,this._pointer.element=this._focusArea)}},{key:"selectOnActivation",get:function get(){return this._selectOnActivation},set:function set(e){this._selectOnActivation=e}},{key:"_InitSelectionStack",value:function _InitSelectionStack(){if(!this._selectionStack){var e=new h;e.Watch(n.SIGNAL.ITEM_ADDED,this._OnSelectionStackAdd,this).Watch(n.SIGNAL.ITEM_REMOVED,this._OnSelectionStackRemove,this),this._selectionStack=e}}},{key:"_OnSelectionStackAdd",value:function _OnSelectionStackAdd(e){}},{key:"_OnSelectionStackRemove",value:function _OnSelectionStackRemove(e){}},{key:"isSelectable",get:function get(){return this._isSelectable},set:function set(e){this._isSelectable!==e&&(this._isSelectable=e,e||this.Select(!1))}},{key:"isSelected",get:function get(){return this._isSelected}},{key:"selectionStack",get:function get(){return this._selectionStack?this._selectionStack:this._parent?this._parent.selectionStack:null}},{key:"Select",value:function Select(e){if(this._isSelectable&&this._isSelected!==e){this._isSelected=e,this._flags.Set(a.SELECTED,e);var t=this._notifiesSelectionStack&&this._parent?this._parent.selectionStack:null;e?(this._SelectionGain(),this._Broadcast(s.SELECTION_GAIN,this),t&&t.Add(this),this._Highlight(!0)):(this._SelectionLost(),this._Broadcast(s.SELECTION_LOST,this),t&&t.Remove(this),this._isFocused||this._Highlight(!1))}}},{key:"_SelectionGain",value:function _SelectionGain(){}},{key:"_SelectionLost",value:function _SelectionLost(){}},{key:"isFocusable",get:function get(){return this._isFocusable},set:function set(e){this._isFocusable!==e&&(this._isFocusable=e,e?(this._istateEnum.Set(a.IDLE),this.style.removeProperty("pointer-events")):(this.Focus(!1),this._istateEnum.Set(a.DISABLED),this.style["pointer-events"]="none"))}},{key:"isFocused",get:function get(){return this._isFocused}},{key:"Focus",value:function Focus(e){this._isFocusable&&(e&&!this._isFocusable&&(e=!1),this._isFocused!==e&&(this._isFocused=e,e?this._istateEnum.Set(a.FOCUSED):this._istateEnum.Set(a.IDLE),e?(this._FocusGain(),this._Highlight(!0)):(this._FocusLost(),this._isSelected||this._Highlight(!1))))}},{key:"_FocusGain",value:function _FocusGain(){}},{key:"_FocusLost",value:function _FocusLost(){}},{key:"_Highlight",value:function _Highlight(e){if(e){if(this._isHighlighted)return;this._isHighlighted=e,this._HighlightGain()}else{if(!this._isHighlighted)return;this._isHighlighted=e,this._HighlightLost()}}},{key:"_HighlightGain",value:function _HighlightGain(){}},{key:"_HighlightLost",value:function _HighlightLost(){}},{key:"isActivable",get:function get(){return this._isActivable},set:function set(e){this._isActivable!==e&&(this._isActivable=e)}},{key:"Activate",value:function Activate(e){return!!this._isActivable&&(this._Broadcast(s.ACTIVATED,this,e),this._selectOnActivation&&this._isSelectable&&this.Select(!l.ctrl||!this._isSelected),!0)}},{key:"data",get:function get(){return this._data},set:function set(e){if("_PreprocessData"in this&&(e=this._PreprocessData(e)),this._data!==e){var t=this._data;this._data=e,t&&n.signals.isObservable(t)&&this._dataObserver.Unobserve(t),this._OnDataChanged(t),this._PostDataChanged(t),e&&(n.signals.isObservable(e)&&this._dataObserver.Observe(e),this._OnDataUpdated(e)),this._Broadcast(s.DATA_CHANGED,this,e,t)}}},{key:"_OnDataChanged",value:function _OnDataChanged(e){}},{key:"_PostDataChanged",value:function _PostDataChanged(e){}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){}},{key:"_CleanUp",value:function _CleanUp(){this._istateEnum.Set(this.constructor.__default_iState),this._placement.Set(this.constructor.__default_placement),this._selectionStack&&this._selectionStack.Clear(),this.data=null,this._selectOnActivation=this.default_SelectOnActivation,this.removeAttribute("title"),this._mouseOver?(this._mOut(null),this._mouseDown&&this._mUp(null)):this._mouseDown&&this._mUpOutside(null),this._extensions.CleanUp(),this.Select(!1),this.Focus(!1),_get(_getPrototypeOf(Widget.prototype),"_CleanUp",this).call(this)}},{key:"toString",value:function toString(){return this._data?"<".concat(this.constructor.name,"|").concat(this._uinc,":{").concat(this._data,"}>"):"<".concat(this.constructor.name,"|").concat(this._uinc,">")}}]),Widget}(u);_defineProperty(m,"__NFO__",{css:["@/global-host.css"]}),_defineProperty(m,"__fouc_hidden",!0),_defineProperty(m,"__usePaintCallback",!0),_defineProperty(m,"__default_iState",a.IDLE),_defineProperty(m,"__default_placement",null),e.exports=m,i.Register("nkmjs-widget",m)},{462:287,460:299,385:300,457:304,463:308,461:310,414:342,163:344,383:345,12:27}],356:[function(__r__,e,t){e.exports={CONTEXT:__r__(150),SIGNAL:__r__(47),IDS:__r__(49),META_IDS:__r__(464),ControlView:__r__(465),ControlWidget:__r__(466),Editor:__r__(467),InspectorShell:__r__(468),InspectorView:__r__(469),InspectorWidgetGroup:__r__(470),InspectorWidget:__r__(471),editors:__r__(472),helpers:__r__(51),inspectors:__r__(473)}},{150:357,465:358,466:359,467:360,472:361,51:363,49:364,468:365,469:366,471:368,470:367,473:370,464:387,47:388}],357:[function(__r__,e,t){var n,i=function(e){_inherits(EDITOR,e);var t=_createSuper(EDITOR);function EDITOR(){return _classCallCheck(this,EDITOR),t.call(this)}return EDITOR}(__r__(12).helpers.CSYMBOL);e.exports={EDITOR:i}},{12:27}],358:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(31),l=__r__(30),c=__r__(27),u=__r__(169),h=__r__(474),d=__r__(475),p=function(e){_inherits(ControlView,e);var t=_createSuper(ControlView);function ControlView(){return _classCallCheck(this,ControlView),t.call(this)}return _createClass(ControlView,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ControlView.prototype),"_Init",this).call(this),this._dataObserver.Hook(a.SIGNAL.DIRTY,this._OnDataDirty,this),this._builder=new u.ControlBuilder(this),this.constructor.__useMetaPresentation&&(this._metadataObserver=new a.helpers.MetadataObserver,this._metadataObserver.Hook(a.SIGNAL.META_MID_UPDATE,h.PRESENTATION,this._UpdateMetaPresentation,this),this._metadata=null)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(ControlView.prototype),"_PostInit",this).call(this),this._ResetMetaPresentation()}},{key:"context",get:function get(){return this._context},set:function set(e){if(this._context!==e){var t=this._context;this._context=e,this._OnContextChanged(t),this._builder.context=e}}},{key:"_OnContextChanged",value:function _OnContextChanged(e){}},{key:"editor",get:function get(){for(var e=this._parent;null!=e;){if(n.isInstanceOf(e,d))return e;e=e._parent}return null}},{key:"_Style",value:function _Style(){return s.Extends({":host":{}},_get(_getPrototypeOf(ControlView.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(ControlView.prototype),"_Render",this).call(this);var e=this.constructor.__controls;e&&this._builder.Build(e)}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(ControlView.prototype),"_OnDataChanged",this).call(this,e),this._metadataObserver&&(n.isInstanceOf(this._data,a.DataBlock)?(this._metadata=this._data.metadata,this._metadataObserver.target=this._metadata,this._UpdateMetaPresentation()):(this._metadata=null,this._metadataObserver.target=null,this._ResetMetaPresentation())),this._builder.data=this._data}},{key:"_OnDataDirty",value:function _OnDataDirty(e){this._OnDataUpdated(e)}},{key:"_ResetMetaPresentation",value:function _ResetMetaPresentation(){this.style.setProperty(h.P_PRES_COLOR.varname,"#000000"),this.style.setProperty(h.P_PRES_COLOR.varnameRGB,"0,0,0"),this.style.setProperty(h.P_PRES_WEIGHT.varname,0)}},{key:"_UpdateMetaPresentation",value:function _UpdateMetaPresentation(){var e=this._metadata.Get(h.P_PRES_COLOR.path,"#000000");this.style.setProperty(h.P_PRES_COLOR.varname,e),this.style.setProperty(h.P_PRES_COLOR.varnameRGB,s.colors.RGBA.HexToRGBString(e)),this.style.setProperty(h.P_PRES_WEIGHT.varname,this._metadata.Get(h.P_PRES_WEIGHT.path,0))}},{key:"_Do",value:function _Do(e,t){c.CommandAction.Do(this,e,t)}},{key:"_CleanUp",value:function _CleanUp(){this.constructor.__clearBuilderOnRelease&&this._builder.Clear(),this.context=null,_get(_getPrototypeOf(ControlView.prototype),"_CleanUp",this).call(this)}}]),ControlView}(l.views.View);_defineProperty(p,"__clearBuilderOnRelease",!1),_defineProperty(p,"__controls",null),_defineProperty(p,"__useMetaObserver",!1),e.exports=p},{475:360,169:363,474:387,27:1,12:27,31:66,29:272,30:285,14:458}],359:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(31),l=__r__(30),c=__r__(27),u=__r__(169),h=__r__(474),d=__r__(475),p=function(e){_inherits(ControlWidget,e);var t=_createSuper(ControlWidget);function ControlWidget(){return _classCallCheck(this,ControlWidget),t.call(this)}return _createClass(ControlWidget,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ControlWidget.prototype),"_Init",this).call(this),this._dataObserver.Hook(a.SIGNAL.DIRTY,this._OnDataDirty,this),this._builder=new u.ControlBuilder(this),this.constructor.__useMetaPresentation&&(this._metadataObserver=new a.helpers.MetadataObserver,this._metadataObserver.Hook(a.SIGNAL.META_MID_UPDATE,h.PRESENTATION,this._UpdateMetaPresentation,this),this._metadata=null)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(ControlWidget.prototype),"_PostInit",this).call(this),this._ResetMetaPresentation()}},{key:"context",get:function get(){return this._context},set:function set(e){if(this._context!==e){var t=this._context;this._context=e,this._OnContextChanged(t),this._builder.context=e}}},{key:"_OnContextChanged",value:function _OnContextChanged(e){}},{key:"editor",get:function get(){for(var e=this._parent;null!=e;){if(n.isInstanceOf(e,d))return e;e=e._parent}return null}},{key:"_Style",value:function _Style(){return s.Extends({":host":{}},_get(_getPrototypeOf(ControlWidget.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(ControlWidget.prototype),"_Render",this).call(this);var e=this.constructor.__controls;e&&this._builder.Build(e)}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(ControlWidget.prototype),"_OnDataChanged",this).call(this,e),this._metadataObserver&&(n.isInstanceOf(this._data,a.DataBlock)?(this._metadata=this._data.metadata,this._metadataObserver.target=this._metadata,this._UpdateMetaPresentation()):(this._metadata=null,this._metadataObserver.target=null,this._ResetMetaPresentation())),this._builder.data=this._data}},{key:"_OnDataDirty",value:function _OnDataDirty(e){this._OnDataUpdated(e)}},{key:"_ResetMetaPresentation",value:function _ResetMetaPresentation(){this.style.setProperty(h.P_PRES_COLOR.varname,"#000000"),this.style.setProperty(h.P_PRES_COLOR.varnameRGB,"0,0,0"),this.style.setProperty(h.P_PRES_WEIGHT.varname,0)}},{key:"_UpdateMetaPresentation",value:function _UpdateMetaPresentation(){this.style.setProperty(h.P_PRES_COLOR.varname,this._metadata.Get(h.P_PRES_COLOR.path,"#000000")),this.style.setProperty(h.P_PRES_COLOR.varnameRGB,"0,0,0"),this.style.setProperty(h.P_PRES_WEIGHT.varname,this._metadata.Get(h.P_PRES_WEIGHT.path,0))}},{key:"_Do",value:function _Do(e,t){c.CommandAction.Do(this,e,t)}},{key:"_CleanUp",value:function _CleanUp(){this.constructor.__clearBuilderOnRelease&&this._builder.Clear(),this.context=null,_get(_getPrototypeOf(ControlWidget.prototype),"_CleanUp",this).call(this)}}]),ControlWidget}(l.Widget);_defineProperty(p,"__clearBuilderOnRelease",!1),_defineProperty(p,"__useMetaObserver",!1),e.exports=p},{475:360,169:363,474:387,27:1,12:27,31:66,29:272,30:285,14:458}],360:[function(__r__,e,t){var n=__r__(12),i=__r__(27),s=__r__(31),a=__r__(30),l=function(e){_inherits(Editor,e);var t=_createSuper(Editor);function Editor(){return _classCallCheck(this,Editor),t.call(this)}return _createClass(Editor,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Editor.prototype),"_Init",this).call(this),this._actionStack=new i.ActionStack,this._dataObserver.Hook(s.SIGNAL.DIRTY,this._OnDataDirty,this),this._dataObserver.Hook(s.SIGNAL.DIRTY_CLEARED,this._OnDataCleaned,this),this._inspectedData=null,this._inspectedObserver=new n.signals.Observer,this._inspectedObserver.Hook(n.SIGNAL.RELEASED,this._OnInspectedDataReleased,this),this._flags.Add(this,n.FLAGS.WARNING),this._hasUnsavedModifications=!1,this._Bind(this.Inspect)}},{key:"hasUnsavedModifications",get:function get(){return this._hasUnsavedModifications}},{key:"_SetUnsavedModifications",value:function _SetUnsavedModifications(e){this._hasUnsavedModifications!==e&&(this._hasUnsavedModifications=e)}},{key:"_OnDataChanged",value:function _OnDataChanged(e){this._actionStack.Clear(),this._commands.context=this._data,_get(_getPrototypeOf(Editor.prototype),"_OnDataChanged",this).call(this,e),this.inspectedData=null}},{key:"_PostDataChanged",value:function _PostDataChanged(e){_get(_getPrototypeOf(Editor.prototype),"_PostDataChanged",this).call(this,e),this._data&&(this._data.isDirty?this._OnDataDirty(this._data):this._OnDataCleaned(this._data))}},{key:"_OnDataDirty",value:function _OnDataDirty(e){}},{key:"_OnDataCleaned",value:function _OnDataCleaned(e){}},{key:"inspectedData",get:function get(){return this._inspectedData},set:function set(e){if(this._inspectedData!==e){var t=this._inspectedData;this._inspectedData=e,t&&this._inspectedObserver.Unobserve(t),e&&this._inspectedObserver.Observe(e),this._OnInspectedDataChanged(t)}}},{key:"_OnInspectedDataChanged",value:function _OnInspectedDataChanged(e){}},{key:"_OnInspectedDataReleased",value:function _OnInspectedDataReleased(){this.inspectedData=null}},{key:"Inspect",value:function Inspect(e){this.inspectedData=e}},{key:"Do",value:function Do(e,t){this._actionStack.ToggleGrouping(a.POINTER.DRAG_MULTIPLE),this._actionStack.Do(e,t)}},{key:"Undo",value:function Undo(){this._actionStack.Undo()}},{key:"Redo",value:function Redo(){this._actionStack.Redo()}}]),Editor}(a.views.View);_defineProperty(l,"__NFO__",n.NFOS.Ext({css:["@/views/global-editor.css"]},a.views.View,["css"])),e.exports=l,a.Register("nkmjs-editor",l)},{27:1,12:27,31:66,30:285}],361:[function(__r__,e,t){e.exports={}},{}],362:[function(__r__,e,t){var n=__r__(12),i=function(){function ControlBuilder(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"group";_classCallCheck(this,ControlBuilder),this._owner=e,this._context=null,this._data=null,this._defaultCSS=t,this._controls=[]}return _createClass(ControlBuilder,[{key:"context",set:function set(e){this._context=e;for(var t=0,n=this._controls.length;t<n;t++)this._controls[t].context=e}},{key:"data",set:function set(e){this._data=e;for(var t=0,n=this._controls.length;t<n;t++)this._controls[t].data=e}},{key:"Set",value:function Set(e,t){this._context=e,this._data=t;for(var n=0,i=this._controls.length;n<i;n++){var s=this._controls[n];s.context=e,s.data=t}}},{key:"Build",value:function Build(e){for(var t=0,i=e.length;t<i;t++){var s=e[t],a=null,l=null;l=s.context?n.BINDINGS.Get(s.context,s.key||s.cl,s.cl):s.cl,a=this.Add(s.cl,s.css),s.name&&(this._owner[s.name]=a)}}},{key:"Add",value:function Add(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._owner.Add(e,t?"".concat(t," ").concat(this._defaultCSS):this._defaultCSS);return this._controls.push(n),n.context=this._context,n.data=this._data,n}},{key:"Fetch",value:function Fetch(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=n.BINDINGS.Get(e,t,i);return a?this.Add(a,s):null}},{key:"Remove",value:function Remove(e){var t=this._controls.indexOf(e);-1!=t&&this._controls.splice(t,1),e.Release()}},{key:"Clear",value:function Clear(){for(var e=0,t=this._controls.length;e<t;e++)this._controls[e].Release();this._controls.length=0}}]),ControlBuilder}();e.exports=i},{12:27}],363:[function(__r__,e,t){e.exports={ControlBuilder:__r__(476)}},{476:362}],364:[function(__r__,e,t){var n=function IDS(){_classCallCheck(this,IDS)};e.exports=n},{}],365:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(31),l=__r__(30),c=__r__(27),u=__r__(139),h,d=function(e){_inherits(InspectorShell,e);var t=_createSuper(InspectorShell);function InspectorShell(){return _classCallCheck(this,InspectorShell),t.call(this)}return _createClass(InspectorShell,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InspectorShell.prototype),"_Init",this).call(this),this._inspector=null}},{key:"_Style",value:function _Style(){return s.Extends({":host":{}},_get(_getPrototypeOf(InspectorShell.prototype),"_Style",this).call(this))}},{key:"_OnDataChanged",value:function _OnDataChanged(e){if(this._inspector=null,this._builder.Clear(),_get(_getPrototypeOf(InspectorShell.prototype),"_OnDataChanged",this).call(this,e),this._data){var t=i.BINDINGS.Get(u.INSPECTOR,this._data,null);t&&(this._inspector=this._builder.Add(t,"inspector"),this._inspector.Watch(l.SIGNAL.DISPLAY_REQUESTED,this._OnInspectorRequestDisplay,this))}}},{key:"_OnInspectorRequestDisplay",value:function _OnInspectorRequestDisplay(){this.RequestDisplay()}},{key:"DisplayGranted",value:function DisplayGranted(){this._inspector&&this._inspector.DisplayGranted()}},{key:"_CleanUp",value:function _CleanUp(){this._inspector=null,_get(_getPrototypeOf(InspectorShell.prototype),"_CleanUp",this).call(this)}}]),InspectorShell}(__r__(477));_defineProperty(d,"__clearBuilderOnRelease",!0),e.exports=d},{139:357,477:358,27:1,12:27,31:66,29:272,30:285,14:458}],366:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l=__r__(169),c=__r__(477),u=function(e){_inherits(InspectorView,e);var t=_createSuper(InspectorView);function InspectorView(){return _classCallCheck(this,InspectorView),t.call(this)}return _createClass(InspectorView,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InspectorView.prototype),"_Init",this).call(this)}},{key:"_Style",value:function _Style(){return s.Extends({":host":{}},_get(_getPrototypeOf(InspectorView.prototype),"_Style",this).call(this))}}]),InspectorView}(c);_defineProperty(u,"__NFO__",i.NFOS.Ext({css:["@/inspectors/inspector-view.css"]},c,["css"])),e.exports=u},{477:358,169:363,12:27,29:272,30:285,14:458}],367:[function(__r__,e,t){var n=__r__(14),i=__r__(29),s=__r__(30),a,l=function(e){_inherits(InspectorWidgetGroup,e);var t=_createSuper(InspectorWidgetGroup);function InspectorWidgetGroup(){return _classCallCheck(this,InspectorWidgetGroup),t.call(this)}return _createClass(InspectorWidgetGroup,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InspectorWidgetGroup.prototype),"_Init",this).call(this),this._extExpand=this._extensions.Add(extensions.Expand),this._extExpand._toggled=!1,this._extExpand.Watch(s.SIGNAL.EXPANDED,this._Expand,this).Watch(s.SIGNAL.COLLAPSED,this._Collapse,this)}},{key:"_Style",value:function _Style(){return i.Extends({":host":{}},_get(_getPrototypeOf(InspectorWidgetGroup.prototype),"_Style",this).call(this))}},{key:"Expand",value:function Expand(){this._extExpand.Expand()}},{key:"_Expand",value:function _Expand(){this._BuildContent()}},{key:"_BuildContent",value:function _BuildContent(){var e=this.constructor.__controls;e&&this._builder.Build(e)}},{key:"Collapse",value:function Collapse(){this._extExpand.Collapse()}},{key:"_Collapse",value:function _Collapse(){this._ClearContent()}},{key:"_ClearContent",value:function _ClearContent(){this._builder.Clear()}}]),InspectorWidgetGroup}(__r__(478));_defineProperty(l,"__controls",null),_defineProperty(l,"__clearBuilderOnRelease",!1),e.exports=l},{478:368,29:272,30:285,14:458}],368:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l=__r__(479),c=function(e){_inherits(InspectorWidget,e);var t=_createSuper(InspectorWidget);function InspectorWidget(){return _classCallCheck(this,InspectorWidget),t.call(this)}return _createClass(InspectorWidget,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InspectorWidget.prototype),"_Init",this).call(this)}},{key:"_Style",value:function _Style(){return s.Extends({":host":{}},_get(_getPrototypeOf(InspectorWidget.prototype),"_Style",this).call(this))}}]),InspectorWidget}(l);_defineProperty(c,"__NFO__",i.NFOS.Ext({css:["@/inspectors/inspector-widget.css"]},l,["css"])),e.exports=c},{479:359,12:27,29:272,30:285,14:458}],369:[function(__r__,e,t){var n=function INSPECTOR(){_classCallCheck(this,INSPECTOR)},i=function INSPECTOR_ITEM(){_classCallCheck(this,INSPECTOR_ITEM)},s=function META_INSPECTOR(){_classCallCheck(this,META_INSPECTOR)};e.exports={INSPECTOR:n,INSPECTOR_ITEM:i,META_INSPECTOR:s}},{}],370:[function(__r__,e,t){e.exports={CONTEXT:__r__(139),DataBlock:__r__(480),DataBlockExtendable:__r__(481),FieldSlot:__r__(482),FieldGroup:__r__(483),DataModel:__r__(484),DataEntry:__r__(485),Metadata:__r__(486),items:__r__(487)}},{139:369,480:372,481:371,485:373,484:374,483:375,482:376,486:377,487:378}],371:[function(__r__,e,t){var n=__r__(14),i=__r__(487),s=__r__(480),a=function(e){_inherits(DataBlockExtendableInspector,e);var t=_createSuper(DataBlockExtendableInspector);function DataBlockExtendableInspector(){return _classCallCheck(this,DataBlockExtendableInspector),t.call(this)}return DataBlockExtendableInspector}(s);_defineProperty(a,"__controls",n.tils.MergeArray([{cl:i.DataBase}],s.__controls)),e.exports=a},{480:372,487:378,14:458}],372:[function(__r__,e,t){var n=__r__(487),i=__r__(139),s,a=function(e){_inherits(DataBlockInspector,e);var t=_createSuper(DataBlockInspector);function DataBlockInspector(){return _classCallCheck(this,DataBlockInspector),t.call(this)}return DataBlockInspector}(__r__(488));_defineProperty(a,"__controls",[{context:i.INSPECTOR_ITEM,cl:n.Identifier}]),e.exports=a},{488:366,139:369,487:378}],373:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=__r__(481),a=function(e){_inherits(DataEntryInspector,e);var t=_createSuper(DataEntryInspector);function DataEntryInspector(){return _classCallCheck(this,DataEntryInspector),t.call(this)}return DataEntryInspector}(s);_defineProperty(a,"__controls",n.tils.MergeArray([],s.__controls)),e.exports=a,i.Register("nkmjs-data-entry-inspector",a)},{481:371,30:285,14:458}],374:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=__r__(481),a=function(e){_inherits(DataModelInspector,e);var t=_createSuper(DataModelInspector);function DataModelInspector(){return _classCallCheck(this,DataModelInspector),t.call(this)}return DataModelInspector}(s);_defineProperty(a,"__controls",n.tils.MergeArray([],s.__controls)),e.exports=a,i.Register("nkmjs-data-model-inspector",a)},{481:371,30:285,14:458}],375:[function(__r__,e,t){var n=__r__(12),i=__r__(30),s=__r__(487),a=__r__(145),l,c=function(e){_inherits(FieldGroupInspector,e);var t=_createSuper(FieldGroupInspector);function FieldGroupInspector(){return _classCallCheck(this,FieldGroupInspector),t.call(this)}return _createClass(FieldGroupInspector,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(FieldGroupInspector.prototype),"_Init",this).call(this),this._inputHandler=new i.inputs.InputListHandler(this)}},{key:"_PostInit",value:function _PostInit(){var e=this;_get(_getPrototypeOf(FieldGroupInspector.prototype),"_PostInit",this).call(this),this._inputHandler.Build([{member:"title",cl:n.BINDINGS.Get(i.CONTEXT.STANDALONE_INPUT,i.inputs.KEYS.STRING),onSubmit:{fn:function fn(t,n){e._data.title=n}}},{member:"comment",cl:n.BINDINGS.Get(i.CONTEXT.STANDALONE_INPUT,i.inputs.KEYS.STRING_TEXT),onSubmit:{fn:function fn(t,n){e._data.comment=n}}},{member:"order",cl:n.BINDINGS.Get(i.CONTEXT.STANDALONE_INPUT,i.inputs.KEYS.NUMBER),onSubmit:{fn:function fn(t,n){e._data.order=n}}}])}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){this.title.currentValue=e.title,this.comment.currentValue=e.comment,this.order.currentValue=e.order}}]),FieldGroupInspector}(__r__(488));e.exports=c,i.Register("nkmjs-field-group-inspector",c)},{145:357,488:366,487:378,12:27,30:285}],376:[function(__r__,e,t){var n=__r__(14),i=__r__(481),s=function(e){_inherits(FieldSlotInspector,e);var t=_createSuper(FieldSlotInspector);function FieldSlotInspector(){return _classCallCheck(this,FieldSlotInspector),t.call(this)}return FieldSlotInspector}(i);_defineProperty(s,"__controls",n.tils.MergeArray([],i.__controls)),e.exports=s},{481:371,14:458}],377:[function(__r__,e,t){var n=__r__(14),i=__r__(31),s=__r__(30),a=__r__(487),l,c=function(e){_inherits(MetadataInspector,e);var t=_createSuper(MetadataInspector);function MetadataInspector(){return _classCallCheck(this,MetadataInspector),t.call(this)}return _createClass(MetadataInspector,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MetadataInspector.prototype),"_Init",this).call(this),this._dataObserver.Hook(i.SIGNAL.META_ADDED,this._OnMetaAdded,this),this._mainMetadataObserver=new i.helpers.MetadataObserver}},{key:"_PreprocessData",value:function _PreprocessData(e){if(n.isInstanceOf(e,i.Metadata))return e;var t=e.metadata;return n.isInstanceOf(e,i.Metadata)?t:null}},{key:"_OnMetaAdded",value:function _OnMetaAdded(e,t,n){}}]),MetadataInspector}(__r__(488));e.exports=c,s.Register("nkmjs-metadata",c)},{488:366,487:378,31:66,30:285,14:458}],378:[function(__r__,e,t){e.exports={Identifier:__r__(489),DataBase:__r__(490),Slot:__r__(491),SlotSetting:__r__(492),SlotValue:__r__(493),MetaObject:__r__(494),MetaProperty:__r__(495),MetaInput:__r__(496)}},{490:379,489:380,496:381,494:382,495:383,491:386,492:384,493:385}],379:[function(__r__,e,t){var n,i=function(e){_inherits(IdentifierInspectorItem,e);var t=_createSuper(IdentifierInspectorItem);function IdentifierInspectorItem(){return _classCallCheck(this,IdentifierInspectorItem),t.call(this)}return IdentifierInspectorItem}(__r__(497));e.exports=i},{497:368}],380:[function(__r__,e,t){var n,i=function(e){_inherits(IdentifierInspectorItem,e);var t=_createSuper(IdentifierInspectorItem);function IdentifierInspectorItem(){return _classCallCheck(this,IdentifierInspectorItem),t.call(this)}return IdentifierInspectorItem}(__r__(497));e.exports=i},{497:368}],381:[function(__r__,e,t){var n,i=function(e){_inherits(MetaInputInspectorItem,e);var t=_createSuper(MetaInputInspectorItem);function MetaInputInspectorItem(){return _classCallCheck(this,MetaInputInspectorItem),t.call(this)}return _createClass(MetaInputInspectorItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MetaInputInspectorItem.prototype),"_Init",this).call(this),this._input=null}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(MetaInputInspectorItem.prototype),"_Render",this).call(this),this._input=this.Add(this.constructor.__inputClass,"input")}},{key:"_OnPropertyUpdated",value:function _OnPropertyUpdated(e,t,n,i){return!!_get(_getPrototypeOf(MetaInputInspectorItem.prototype),"_OnPropertyUpdated",this).call(this,e,t,n,i)&&(this._input.currentValue=this.dataValue,!0)}}]),MetaInputInspectorItem}(__r__(495));_defineProperty(i,"__inputClass",null),e.exports=i},{495:383}],382:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(145),a,l=function(e){_inherits(MetaObjectInspectorItem,e);var t=_createSuper(MetaObjectInspectorItem);function MetaObjectInspectorItem(){return _classCallCheck(this,MetaObjectInspectorItem),t.call(this)}return _createClass(MetaObjectInspectorItem,[{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(MetaObjectInspectorItem.prototype),"_OnDataChanged",this).call(this,e),this._data?this._BuildPropertyInspectors():this._builder.Clear()}},{key:"_OnPropertyUpdated",value:function _OnPropertyUpdated(e,t,n,i){}},{key:"_OnPropertyMidUpdate",value:function _OnPropertyMidUpdate(e,t){}},{key:"_BuildPropertyInspectors",value:function _BuildPropertyInspectors(){this._builder.Clear();var e=this.dataValue,t=n.isArray(this._metaPath)?this._metaPath.join("."):this._metaPath;for(var a in e){var l=e[a],c="".concat(t,".").concat(a),u=i.BINDINGS.Get(s.META_INSPECTOR,c,null),h=u?this._builder.Add(u):null;h&&(h.metaPath=c,h.data=this._data)}}}]),MetaObjectInspectorItem}(__r__(495));_defineProperty(l,"__watchMidUpdate",!0),e.exports=l},{145:369,495:383,12:27,14:458}],383:[function(__r__,e,t){var n=__r__(14),i=__r__(31),s=__r__(498),a=__r__(499),l,c=function(e){_inherits(MetaPropertyInspectorItem,e);var t=_createSuper(MetaPropertyInspectorItem);function MetaPropertyInspectorItem(){return _classCallCheck(this,MetaPropertyInspectorItem),t.call(this)}return _createClass(MetaPropertyInspectorItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MetaPropertyInspectorItem.prototype),"_Init",this).call(this),this._metaPath=null,this._metaID=null,this._mObserver=new i.helpers.MetadataObserver,this._Bind(this._OnPropertyUpdated),this.constructor.__watchMidUpdate&&this._Bind(this._OnPropertyMidUpdate)}},{key:"metaPath",get:function get(){return this._metaPath},set:function set(e){if(this._metaPath!==e){var t=this._metaPath;this._metaPath=e,t&&(this._mObserver.Unhook(i.SIGNAL.META_UPDATED,t,this._OnPropertyUpdated),this.constructor.__watchMidUpdate&&this._mObserver.Unhook(i.SIGNAL.META_MID_UPDATE,t,this._OnPropertyMidUpdate)),e?(n.isArray(e)?this._metaID=e[e.length-1]:this._metaID=this._metaPath.split(".").pop(),this._mObserver.Hook(i.SIGNAL.META_UPDATED,this._metaPath,this._OnPropertyUpdated),this.constructor.__watchMidUpdate&&this._mObserver.Hook(i.SIGNAL.META_MID_UPDATE,this._metaPath,this._OnPropertyMidUpdate),this._data&&this._OnPropertyUpdated(this._data,this._metaPath,this.dataValue,null)):this._metaID=null}}},{key:"metaID",get:function get(){return this._metaID}},{key:"dataValue",get:function get(){return this._data&&this._metaPath?this._data.Get(this._metaPath):null}},{key:"_PreprocessData",value:function _PreprocessData(e){if(n.isInstanceOf(e,i.Metadata))return e;var t=e.metadata;return n.isInstanceOf(e,i.Metadata)?t:null}},{key:"_OnDataChanged",value:function _OnDataChanged(e){this._data?(this._mObserver.target=this._data,this._metaPath&&this._OnPropertyUpdated(this._data,this._metaPath,this.dataValue,null)):this._mObserver.target=null}},{key:"_ValidateType",value:function _ValidateType(e,t){return!0}},{key:"_OnPropertyUpdated",value:function _OnPropertyUpdated(e,t,n,i){return!!this._ValidateType(n,i)||(this._Broadcast(s.META_PROPERTY_TYPE_CHANGED,this),!1)}},{key:"_OnPropertyMidUpdate",value:function _OnPropertyMidUpdate(e,t){}},{key:"_CleanUp",value:function _CleanUp(){this.metaPath=null,_get(_getPrototypeOf(MetaPropertyInspectorItem.prototype),"_CleanUp",this).call(this)}}]),MetaPropertyInspectorItem}(__r__(497));_defineProperty(c,"__watchMidUpdate",!1),e.exports=c},{497:368,499:387,498:388,31:66,14:458}],384:[function(__r__,e,t){var n,i=function(e){_inherits(SlotSettingsInspectorItem,e);var t=_createSuper(SlotSettingsInspectorItem);function SlotSettingsInspectorItem(){return _classCallCheck(this,SlotSettingsInspectorItem),t.call(this)}return SlotSettingsInspectorItem}(__r__(491));e.exports=i},{491:386}],385:[function(__r__,e,t){var n,i=function(e){_inherits(SlotValueInspectorItem,e);var t=_createSuper(SlotValueInspectorItem);function SlotValueInspectorItem(){return _classCallCheck(this,SlotValueInspectorItem),t.call(this)}return SlotValueInspectorItem}(__r__(491));e.exports=i},{491:386}],386:[function(__r__,e,t){var n=__r__(92),i,s=function(e){_inherits(SlotInspectorItem,e);var t=_createSuper(SlotInspectorItem);function SlotInspectorItem(){return _classCallCheck(this,SlotInspectorItem),t.call(this)}return _createClass(SlotInspectorItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(SlotInspectorItem.prototype),"_Init",this).call(this),this._descriptor=null,this._dataObserver.Hook(n.SIGNAL.DESCRIPTOR_CHANGED,this._OnSlotDescriptorChanged,this)}},{key:"_OnSlotDescriptorChanged",value:function _OnSlotDescriptorChanged(e,t,n){this._descriptor=t}},{key:"_OnDescriptorChanged",value:function _OnDescriptorChanged(){}}]),SlotInspectorItem}(__r__(497));e.exports=s},{497:368,92:110}],387:[function(__r__,e,t){var n=function META_IDS(){_classCallCheck(this,META_IDS)};_defineProperty(n,"PRESENTATION","presentation"),_defineProperty(n,"COLOR","color"),_defineProperty(n,"WEIGHT","weight"),_defineProperty(n,"ICON","icon"),_defineProperty(n,"P_PRES_COLOR",{path:[n.PRESENTATION,n.COLOR],varname:"--".concat(n.PRESENTATION,"-").concat(n.COLOR),varnameRGB:"--".concat(n.PRESENTATION,"-").concat(n.COLOR)}),_defineProperty(n,"P_PRES_WEIGHT",{path:[n.PRESENTATION,n.WEIGHT],varname:"--".concat(n.PRESENTATION,"-").concat(n.WEIGHT)}),_defineProperty(n,"P_PRES_ICON",{path:[n.PRESENTATION,n.ICON],varname:"--".concat(n.PRESENTATION,"-").concat(n.ICON)}),e.exports=n},{}],388:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"META_PROPERTY_TYPE_CHANGED",Symbol("metaPropetyTypeChanged")),e.exports=n},{}],389:[function(__r__,e,t){var n=__r__(12),i=__r__(30),s=__r__(32),a=__r__(1),l=__r__(364),c=__r__(500),u=__r__(379),h=function(e){_inherits(Bindings,e);var t=_createSuper(Bindings);function Bindings(){return _classCallCheck(this,Bindings),t.call(this)}return _createClass(Bindings,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Bindings.prototype),"_Init",this).call(this),s.DialogOverlay.__default_overlayContentClass=c.DialogBox,this.Add({context:i.overlays.CONTEXT.CONTENT,kvps:[{key:s.REQUEST.DIALOG,binding:c.DialogBox}]},{context:i.CONTEXT.STANDALONE_INPUT,kvps:[{key:i.inputs.KEYS.STRING,binding:u.Text},{key:i.inputs.KEYS.STRING_TEXT,binding:u.Textarea},{key:i.inputs.KEYS.STRING_PATH,binding:u.Path},{key:i.inputs.KEYS.STRING_PATH_DIR,binding:u.Directory},{key:i.inputs.KEYS.STRING_IDENTIFIER,binding:u.Identifier},{key:i.inputs.KEYS.FILE,binding:u.File},{key:i.inputs.KEYS.DIRECTORY,binding:u.Directory},{key:i.inputs.KEYS.NUMBER,binding:u.Number},{key:i.inputs.KEYS.NUMBER_SLIDER,binding:u.Number},{key:i.inputs.KEYS.NUMBER_ANGLE,binding:u.Number},{key:i.inputs.KEYS.COLOR,binding:u.Color},{key:i.inputs.KEYS.BOOLEAN,binding:u.Boolean},{key:i.inputs.KEYS.BOOLEAN_CHECK,binding:u.Boolean}]},{context:i.overlays.CONTEXT.OVERLAY,kvps:[{key:a.DRAWER,binding:l.DrawerOverlay}]},{context:i.overlays.CONTEXT.CONTENT,kvps:[{key:a.DRAWER,binding:l.Drawer}]})}}]),Bindings}(n.helpers.BindingKit);e.exports=h},{500:403,379:414,364:432,1:434,12:27,32:177,30:285}],390:[function(__r__,e,t){e.exports={REQUEST:__r__(1),bars:__r__(501),buttons:__r__(502),cards:__r__(503),inputs:__r__(379),overlays:__r__(364),lists:__r__(381),dom:__r__(504),views:__r__(382),widgets:__r__(505)},__r__(12).BINDINGS.Expand(__r__(110))},{110:389,501:393,502:397,503:400,504:404,379:414,381:425,364:432,1:434,382:435,505:439,12:27}],391:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(506),l=function(e){_inherits(BreadcrumbItem,e);var t=_createSuper(BreadcrumbItem);function BreadcrumbItem(){return _classCallCheck(this,BreadcrumbItem),t.call(this)}return _createClass(BreadcrumbItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(BreadcrumbItem.prototype),"_Init",this).call(this),this._optionsHandler.Hook(s.IDS.ICON,null,""),this._optionsHandler.Hook(s.IDS.LABEL,null,""),this._alwaysDisplayCommand=!0,this._icon=null,this._label=null}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._flags.Set(s.FLAGS.NO_ICON,!this._icon.Set(e))}},{key:"label",get:function get(){return this._label},set:function set(e){this._flags.Set(s.FLAGS.NO_LABEL,!this._label.Set(e))}},{key:"_Render",value:function _Render(){var e;s.Render(a.FacadeLabel,this,(_defineProperty(e={},s.IDS.OWNER,this),_defineProperty(e,s.IDS.LABEL,_defineProperty({},s.IDS.CSS_CL,i.FONT_FLAG.REGULAR)),e)),this.focusArea=this}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){_get(_getPrototypeOf(BreadcrumbItem.prototype),"_OnDataUpdated",this).call(this,e)}}]),BreadcrumbItem}(s.WidgetButton);_defineProperty(l,"__NFO__",n.NFOS.Ext({css:["@/lists/breadcrum-item.css"]},s.WidgetButton,["css"])),e.exports=l,s.Register("nkmjs-breadcrum-item",l)},{506:404,12:27,29:272,30:285}],392:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(507),l=function(e){_inherits(Breadcrumb,e);var t=_createSuper(Breadcrumb);function Breadcrumb(){return _classCallCheck(this,Breadcrumb),t.call(this)}return _createClass(Breadcrumb,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Breadcrumb.prototype),"_Init",this).call(this),this._defaultWidgetClass=a}},{key:"_Style",value:function _Style(){return i.Extends({":host":{},":host(.vertical)":{"align-content":"flex-end"},":host(.horizontal)":{"align-content":"flex-end"}},_get(_getPrototypeOf(Breadcrumb.prototype),"_Style",this).call(this))}}]),Breadcrumb}(s.WidgetBar);_defineProperty(l,"__NFO__",n.NFOS.Ext({css:["@/lists/breadcrum.css"]},s.WidgetBar,["css"])),e.exports=l,s.Register("nkmjs-breadcrum",l)},{507:391,12:27,29:272,30:285}],393:[function(__r__,e,t){e.exports={Breadcrumb:__r__(508),BreadcrumbItem:__r__(507)}},{508:392,507:391}],394:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(509),l=function(e){_inherits(ButtonDragHandle,e);var t=_createSuper(ButtonDragHandle);function ButtonDragHandle(){return _classCallCheck(this,ButtonDragHandle),t.call(this)}return _createClass(ButtonDragHandle,[{key:"_Style",value:function _Style(){return i.Extends({":host":_defineProperty({cursor:"move"},"cursor","grab"),":host(.focused)":_defineProperty({cursor:"move"},"cursor","grab")},_get(_getPrototypeOf(ButtonDragHandle.prototype),"_Style",this).call(this))}}]),ButtonDragHandle}(a);_defineProperty(l,"__NFO__",n.NFOS.Ext({css:["@/buttons/button-drag-handle.css"]},a,["css"])),e.exports=l,s.Register("nkmjs-button-drag-handle",l)},{509:396,12:27,29:272,30:285}],395:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=function(e){_inherits(ButtonEx,e);var t=_createSuper(ButtonEx);function ButtonEx(){return _classCallCheck(this,ButtonEx),t.call(this)}return _createClass(ButtonEx,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ButtonEx.prototype),"_Init",this).call(this),this._optionsHandler.Hook(s.IDS.ICON,null,""),this._optionsHandler.Hook(s.IDS.LABEL,null,""),this._optionsHandler.Hook("uppercaseText"),this._icon=null,this._label=null,this._flags.Add(this,s.FLAGS.NO_ICON,s.FLAGS.NO_LABEL)}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){_get(_getPrototypeOf(ButtonEx.prototype),"_OnDataUpdated",this).call(this,e)}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._flags.Set(s.FLAGS.NO_ICON,!this._icon.Set(e))}},{key:"label",get:function get(){return this._label},set:function set(e){this._flags.Set(s.FLAGS.NO_LABEL,!this._label.Set(e))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(ButtonEx.prototype),"_Render",this).call(this),this._icon=new s.manipulators.Icon(n.dom.El("div",{class:s.IDS.ICON},this._host)),this._label=new s.manipulators.Text(n.dom.El("span",{class:s.IDS.LABEL},this._host))}},{key:"_CleanUp",value:function _CleanUp(){this._icon.Set(null),this._label.Set(null),_get(_getPrototypeOf(ButtonEx.prototype),"_CleanUp",this).call(this)}}]),ButtonEx}(s.WidgetButton);_defineProperty(a,"__NFO__",i.NFOS.Ext({css:["@/buttons/button-ex.css"]},s.WidgetButton,["css"])),e.exports=a,s.Register("nkmjs-button-ex",a)},{12:27,30:285,14:458}],396:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=function(e){_inherits(ToolButton,e);var t=_createSuper(ToolButton);function ToolButton(){return _classCallCheck(this,ToolButton),t.call(this)}return _createClass(ToolButton,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ToolButton.prototype),"_Init",this).call(this),this._optionsHandler.Hook(s.IDS.ICON),this._icon=null}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){_get(_getPrototypeOf(ToolButton.prototype),"_OnDataUpdated",this).call(this,e)}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon.Set(e)}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(ToolButton.prototype),"_Render",this).call(this),this._icon=new s.manipulators.Icon(n.dom.El("div",{class:s.IDS.ICON},this._host),!1)}},{key:"_PostRender",value:function _PostRender(){this._icon.Set(null)}},{key:"_CleanUp",value:function _CleanUp(){this._icon.Set(null),_get(_getPrototypeOf(ToolButton.prototype),"_CleanUp",this).call(this)}}]),ToolButton}(s.WidgetButton);_defineProperty(a,"__NFO__",i.NFOS.Ext({css:["@/buttons/button-tool.css"]},s.WidgetButton,["css"])),e.exports=a,s.Register("nkmjs-tool-button",a)},{12:27,30:285,14:458}],397:[function(__r__,e,t){e.exports={Tool:__r__(509),Button:__r__(510),DragHandle:__r__(511)}},{511:394,510:395,509:396}],398:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=__r__(29),l=__r__(506),c=__r__(512),u=function(e){_inherits(BaseCard,e);var t=_createSuper(BaseCard);function BaseCard(){return _classCallCheck(this,BaseCard),t.call(this)}return _createClass(BaseCard,[{key:"_Init",value:function _Init(){var e=this;_get(_getPrototypeOf(BaseCard.prototype),"_Init",this).call(this),this._actions=null,this._handles=null,this._orientation=new s.helpers.FlagEnum(s.FLAGS.orientations,!0),this._orientation.Add(this),this._variantEnum=new s.helpers.FlagEnum(s.FLAGS.variants,!0),this._variantEnum.Add(this),this._mediaPlacement=new s.helpers.FlagEnum(s.FLAGS.placementSimplified,!0,"header"),this._mediaPlacement.Add(this),this._optionsHandler.Hook("header-placement",(function(t){e._mediaPlacement.Set(t),e._orientation.Set(s.FLAGS.Orientation(t,!0))}),this.constructor.__default_headerPlacement),this._optionsHandler.Hook("variant",(function(t){e._variantEnum.Set(t)})),this._optionsHandler.Hook(s.IDS.TITLE,null,""),this._optionsHandler.Hook(s.IDS.SUBTITLE,null,""),this._optionsHandler.Hook(s.IDS.LABEL,null,""),this._optionsHandler.Hook("actions")}},{key:"variant",get:function get(){return this._variantEnum.currentFlag},set:function set(e){this._variantEnum.Set(e)}},{key:"title",set:function set(e){this._frame[s.IDS.TITLE].Set(e)}},{key:"subtitle",set:function set(e){this._frame[s.IDS.SUBTITLE].Set(e)}},{key:"label",set:function set(e){this._frame[s.IDS.LABEL].Set(e)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{display:"flex","justify-content":"stretch","align-items":"stretch"},".header":{flex:"0 1 auto","min-height":"100px","min-width":"100px"},".body":{flex:"1 1 auto",display:"flex","flex-flow":"column nowrap","min-width":0,"min-height":0},":host(.header-top)":{"flex-flow":"column nowrap"},":host(.header-bottom)":{"flex-flow":"column-reverse nowrap"},":host(.vertical)":{},":host(.vertical) .header":{},":host(.header-left)":{"flex-flow":"row nowrap"},":host(.header-right)":{"flex-flow":"row-reverse nowrap"},":host(.horizontal)":{},":host(.horizontal) .header":{}},_get(_getPrototypeOf(BaseCard.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(BaseCard.prototype),"_Render",this).call(this),this.focusArea=this,this._frame=s.DOMTemplate.Render(this.constructor.__cardTemplate,this,this.constructor.__cardOptions)}},{key:"actions",set:function set(e){if(this._actions!=e){var t=this._actions,n;if(this._actions=e,t&&this._toolbar&&(this._toolbar.Clear(),this._handles.length=0),this._actions)this._toolbar||(this._toolbar=this.Add(s.WidgetBar,"toolbar",this._frame[s.IDS.BODY]),this._toolbar._defaultWidgetClass=c.Button),this._handles=(n=this._toolbar).CreateHandles.apply(n,_toConsumableArray(this._actions));else this._toolbar&&(this._toolbar.Release(),this._toolbar=null,this._handles.length=0)}}}]),BaseCard}(s.WidgetItem);_defineProperty(u,"__NFO__",i.NFOS.Ext({},s.WidgetItem,["css"])),_defineProperty(u,"__cardTemplate",null),_defineProperty(u,"__cardOptions",{}),_defineProperty(u,"__default_headerPlacement",s.FLAGS.TOP),e.exports=u},{512:397,506:404,12:27,29:272,30:285,14:458}],399:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=__r__(29),l=__r__(506),c=__r__(512),u=__r__(513),h=function(e){_inherits(CardTemplate,e);var t=_createSuper(CardTemplate);function CardTemplate(){return _classCallCheck(this,CardTemplate),t.call(this)}return _createClass(CardTemplate,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,i,a;this._Add(n.dom.El("div",{class:s.IDS.HEADER}),_defineProperty({},s.IDS.UID,s.IDS.HEADER)),this._Add(n.dom.El("div",{class:"floating-".concat(s.IDS.ICON)}),(_defineProperty(e={},s.IDS.UID,s.IDS.ICON),_defineProperty(e,"parent",s.IDS.HEADER),_defineProperty(e,"fn",this.AsIconStatic),e)),this._Add(n.dom.El("div",{class:s.IDS.BODY}),_defineProperty({},s.IDS.UID,s.IDS.BODY)),this._Add(n.dom.El("span",{class:s.IDS.TITLE}),(_defineProperty(t={},s.IDS.UID,s.IDS.TITLE),_defineProperty(t,"parent",s.IDS.BODY),_defineProperty(t,"fn",this.AsText),t)),this._Add(n.dom.El("span",{class:s.IDS.SUBTITLE}),(_defineProperty(i={},s.IDS.UID,s.IDS.SUBTITLE),_defineProperty(i,"parent",s.IDS.BODY),_defineProperty(i,"fn",this.AsText),i)),this._Add(n.dom.El("span",{class:s.IDS.LABEL}),(_defineProperty(a={},s.IDS.UID,s.IDS.LABEL),_defineProperty(a,"parent",s.IDS.BODY),_defineProperty(a,"fn",this.AsText),a))}}]),CardTemplate}(s.DOMTemplate),d=function(e){_inherits(IconCard,e);var t=_createSuper(IconCard);function IconCard(){return _classCallCheck(this,IconCard),t.call(this)}return _createClass(IconCard,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(IconCard.prototype),"_Init",this).call(this),this._optionsHandler.Hook("icon")}},{key:"icon",set:function set(e){this._frame[s.IDS.ICON].Set(e)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{display:"flex","justify-content":"stretch","align-items":"stretch"},".header":{flex:"0 1 auto",display:"flex","justify-content":"center","align-items":"center"},".floating-icon":{flex:"1 1 auto"}},_get(_getPrototypeOf(IconCard.prototype),"_Style",this).call(this))}}]),IconCard}(u);_defineProperty(d,"__NFO__",i.NFOS.Ext({css:["@/cards/icon-card.css"]},u,["css"])),_defineProperty(d,"__cardTemplate",h),_defineProperty(d,"__cardOptions",_defineProperty({},s.IDS.LABEL,_defineProperty({},s.IDS.CSS_CL,"font-small"))),e.exports=d,s.Register("nkmjs-icon-card",d)},{512:397,506:404,513:398,12:27,29:272,30:285,14:458}],400:[function(__r__,e,t){e.exports={BaseCard:__r__(513),Media:__r__(514),Icon:__r__(515)}},{513:398,515:399,514:401}],401:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=__r__(29),l=__r__(506),c=__r__(512),u=__r__(513),h=function(e){_inherits(CardTemplate,e);var t=_createSuper(CardTemplate);function CardTemplate(){return _classCallCheck(this,CardTemplate),t.call(this)}return _createClass(CardTemplate,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,i,a;this._Add(n.dom.El("div",{class:s.IDS.HEADER}),(_defineProperty(e={},s.IDS.UID,s.IDS.HEADER),_defineProperty(e,"fn",this.AsBackgroundStatic),e)),this._Add(n.dom.El("div",{class:s.IDS.BODY}),_defineProperty({},s.IDS.UID,s.IDS.BODY)),this._Add(n.dom.El("span",{class:s.IDS.TITLE}),(_defineProperty(t={},s.IDS.UID,s.IDS.TITLE),_defineProperty(t,"parent",s.IDS.BODY),_defineProperty(t,"fn",this.AsText),t)),this._Add(n.dom.El("span",{class:s.IDS.SUBTITLE}),(_defineProperty(i={},s.IDS.UID,s.IDS.SUBTITLE),_defineProperty(i,"parent",s.IDS.BODY),_defineProperty(i,"fn",this.AsText),i)),this._Add(n.dom.El("span",{class:s.IDS.LABEL}),(_defineProperty(a={},s.IDS.UID,s.IDS.LABEL),_defineProperty(a,"parent",s.IDS.BODY),_defineProperty(a,"fn",this.AsText),a))}}]),CardTemplate}(s.DOMTemplate),d=function(e){_inherits(MediaCard,e);var t=_createSuper(MediaCard);function MediaCard(){return _classCallCheck(this,MediaCard),t.call(this)}return _createClass(MediaCard,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(MediaCard.prototype),"_Init",this).call(this),this._optionsHandler.Hook("media")}},{key:"media",set:function set(e){this._frame[s.IDS.HEADER].Set(e)}}]),MediaCard}(u);_defineProperty(d,"__NFO__",i.NFOS.Ext({css:["@/cards/media-card.css"]},u,["css"])),_defineProperty(d,"__cardTemplate",h),_defineProperty(d,"__cardOptions",_defineProperty({},s.IDS.LABEL,_defineProperty({},s.IDS.CSS_CL,"font-small"))),e.exports=d,s.Register("nkmjs-media-card",d)},{512:397,506:404,513:398,12:27,29:272,30:285,14:458}],402:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(29),l=__r__(30),c=__r__(32),u=__r__(512),h=function(e){_inherits(DialogBox,e);var t=_createSuper(DialogBox);function DialogBox(){return _classCallCheck(this,DialogBox),t.call(this)}return _createClass(DialogBox,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DialogBox.prototype),"_Init",this).call(this),this._toolbarDefaultWidgetClass=u.Button,this._header=null,this._body=null,this._footer=null,this._title=null,this._icon=null,this._optionsHandler.Hook(l.IDS.ICON,null,""),this._optionsHandler.Hook(l.IDS.VARIANT)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{display:"flex","flex-flow":"column","align-content":"stretch","align-items":"stretch","justify-content":"center"},".header":{},".footer":{display:"flex","flex-flow":"column","align-content":"flex-end","align-items":"flex-end",flex:"0 0 auto"},".toolbar":{flex:"0 0 auto"},".body":{flex:"1 1 auto"}},_get(_getPrototypeOf(DialogBox.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._icon=new l.manipulators.Icon(n.dom.El("div",{class:"corner-icon"},this._host),!1,!0),this._header=n.dom.El("div",{class:"group header"},this._host),this._body=n.dom.El("div",{class:"group body"},this._host),this._footer=n.dom.El("div",{class:"group footer"},this._host),this._toolbar=this.Add(this._toolbarClass,"toolbar",this._footer),this._toolbar._defaultWidgetClass=this._toolbarDefaultWidgetClass,this._toolbar.size=l.FLAGS.SIZE_M,this._title=new l.manipulators.Text(n.dom.El("span",{class:"title ".concat(a.FONT_FLAG.MEDIUM)},this._header),!1),this._messageElement=null,this._contentWrapper=this._body}},{key:"title",get:function get(){return this._title},set:function set(e){this._title.Set(e)}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon.Set(e)}},{key:"_OnOptionsUpdated",value:function _OnOptionsUpdated(e,t,n){_get(_getPrototypeOf(DialogBox.prototype),"_OnOptionsUpdated",this).call(this,e,t,n),e.icon||this._icon.Set(this.flavor||"")}},{key:"_Clear",value:function _Clear(){_get(_getPrototypeOf(DialogBox.prototype),"_Clear",this).call(this)}}]),DialogBox}(c.DialogBox);_defineProperty(h,"__NFO__",s.NFOS.Ext({css:["@/dialogs/dialog-box.css"]},c.DialogBox,["css"])),_defineProperty(h,"__default_flavor",null),e.exports=h,l.Register("nkmjs-dialog-box",h)},{512:397,18:21,12:27,32:177,29:272,30:285,14:458}],403:[function(__r__,e,t){e.exports={DialogBox:__r__(516)}},{516:402}],404:[function(__r__,e,t){e.exports={BodyExpand:__r__(517),BodyHeaderTitles:__r__(518),FacadeExpandLabel:__r__(519),FacadeExpandTitle:__r__(520),FacadeLabel:__r__(521),FacadeTitles:__r__(522),HeaderBodyFooter:__r__(523),FacadeLabelClose:__r__(524),FacadeTitleClose:__r__(525)}},{517:405,518:406,519:407,520:408,521:410,524:409,525:411,522:412,523:413}],405:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=__r__(519),a=i.IDS.HEADER,l="expandIcon",c=i.IDS.ICON,u=i.IDS.LABEL,h=i.IDS.BODY,d=function(e){_inherits(TPLBodyExpand,e);var t=_createSuper(TPLBodyExpand);function TPLBodyExpand(){return _classCallCheck(this,TPLBodyExpand),t.call(this)}return _createClass(TPLBodyExpand,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e=this,t,s,d;this._Add(n.dom.El("div",{class:i.IDS.HEADER}),_defineProperty({},i.IDS.UID,a)),this._Add(n.dom.El("div",{class:"".concat(i.IDS.ICON," expand")}),(_defineProperty(t={},i.IDS.UID,l),_defineProperty(t,"parent",a),_defineProperty(t,"fn",(function fn(t,n,i){var s=e.AsIconStatic(t,n,i);return s.Set("expand"),s})),t)),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(s={},i.IDS.UID,c),_defineProperty(s,"parent",a),_defineProperty(s,"fn",this.AsIcon),s)),this._Add(n.dom.El("span",{class:i.IDS.LABEL}),(_defineProperty(d={},i.IDS.UID,u),_defineProperty(d,"parent",a),_defineProperty(d,"fn",this.AsTextStatic),d)),this._Add(n.dom.El("div",{class:i.IDS.BODY}),_defineProperty({},i.IDS.UID,h))}}]),TPLBodyExpand}(s);e.exports=d},{519:407,30:285,14:458}],406:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=i.IDS.ICON,a=i.IDS.TITLE,l=i.IDS.SUBTITLE,c=i.IDS.HEADER,u=i.IDS.BODY,h="titles",d=function(e){_inherits(TPLBodyHeaderTitles,e);var t=_createSuper(TPLBodyHeaderTitles);function TPLBodyHeaderTitles(){return _classCallCheck(this,TPLBodyHeaderTitles),t.call(this)}return _createClass(TPLBodyHeaderTitles,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,d,p;this._Add(n.dom.El("div",{class:i.IDS.HEADER}),_defineProperty({},i.IDS.UID,c)),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(e={},i.IDS.UID,s),_defineProperty(e,"parent",c),_defineProperty(e,"fn",this.AsIcon),e)),this._Add(n.dom.El("span",{class:"titles"}),(_defineProperty(t={},i.IDS.UID,h),_defineProperty(t,"parent",c),t)),this._Add(n.dom.El("span",{class:i.IDS.TITLE}),(_defineProperty(d={},i.IDS.UID,a),_defineProperty(d,"parent",h),_defineProperty(d,"fn",this.AsText),d)),this._Add(n.dom.El("span",{class:i.IDS.SUBTITLE}),(_defineProperty(p={},i.IDS.UID,l),_defineProperty(p,"parent",h),_defineProperty(p,"fn",this.AsText),p)),this._Add(n.dom.El("div",{class:i.IDS.BODY}),_defineProperty({},i.IDS.UID,u))}}]),TPLBodyHeaderTitles}(i.DOMTemplate);e.exports=d},{30:285,14:458}],407:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s="expandIcon",a=i.IDS.ICON,l=i.IDS.LABEL,c=function(e){_inherits(TPLFacadeExpandLabel,e);var t=_createSuper(TPLFacadeExpandLabel);function TPLFacadeExpandLabel(){return _classCallCheck(this,TPLFacadeExpandLabel),t.call(this)}return _createClass(TPLFacadeExpandLabel,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e=this,t,c,u;this._Add(n.dom.El("div",{class:"".concat(i.IDS.ICON," expand")}),(_defineProperty(t={},i.IDS.UID,s),_defineProperty(t,"fn",(function fn(t,n,i){var s=e.AsIconStatic(t,n,i);return s.Set("expand"),s})),t)),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(c={},i.IDS.UID,a),_defineProperty(c,"fn",this.AsIcon),c)),this._Add(n.dom.El("span",{class:i.IDS.LABEL}),(_defineProperty(u={},i.IDS.UID,l),_defineProperty(u,"fn",this.AsTextStatic),u))}}]),TPLFacadeExpandLabel}(i.DOMTemplate);e.exports=c},{30:285,14:458}],408:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s="expandIcon",a=i.IDS.ICON,l=i.IDS.TITLE,c=function(e){_inherits(TPLFacadeExpandTitle,e);var t=_createSuper(TPLFacadeExpandTitle);function TPLFacadeExpandTitle(){var e;return _classCallCheck(this,TPLFacadeExpandTitle),e=t.call(this)}return _createClass(TPLFacadeExpandTitle,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e=this,t,c,u;this._Add(n.dom.El("div",{class:"".concat(i.IDS.ICON," expand")}),(_defineProperty(t={},i.IDS.UID,s),_defineProperty(t,"fn",(function fn(t,n,i){var s=e.AsIconStatic(t,n,i);return s.Set("expand"),s})),t)),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(c={},i.IDS.UID,a),_defineProperty(c,"fn",this.AsIcon),c)),this._Add(n.dom.El("span",{class:i.IDS.TITLE}),(_defineProperty(u={},i.IDS.UID,l),_defineProperty(u,"fn",this.AsText),u))}}]),TPLFacadeExpandTitle}(i.DOMTemplate);e.exports=c},{30:285,14:458}],409:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s="closeIcon",a=i.IDS.ICON,l=i.IDS.LABEL,c=function(e){_inherits(TPLFacadeLabelClose,e);var t=_createSuper(TPLFacadeLabelClose);function TPLFacadeLabelClose(){return _classCallCheck(this,TPLFacadeLabelClose),t.call(this)}return _createClass(TPLFacadeLabelClose,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,c=this,u;this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(e={},i.IDS.UID,a),_defineProperty(e,"fn",this.AsIcon),e)),this._Add(n.dom.El("span",{class:i.IDS.LABEL}),(_defineProperty(t={},i.IDS.UID,l),_defineProperty(t,"fn",this.AsTextStatic),t)),this._Add(n.dom.El("div",{class:"".concat(i.IDS.ICON," close")}),(_defineProperty(u={},i.IDS.UID,s),_defineProperty(u,"fn",(function fn(e,t,n){var i=c.AsIconStatic(e,t,n);return i.Set("close-small"),i})),u))}}]),TPLFacadeLabelClose}(i.DOMTemplate);e.exports=c},{30:285,14:458}],410:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=i.IDS.ICON,a=i.IDS.LABEL,l=function(e){_inherits(TPLFacadeLabel,e);var t=_createSuper(TPLFacadeLabel);function TPLFacadeLabel(){return _classCallCheck(this,TPLFacadeLabel),t.call(this)}return _createClass(TPLFacadeLabel,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t;_get(_getPrototypeOf(TPLFacadeLabel),"_CreateTemplate",this).call(this),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(e={},i.IDS.UID,s),_defineProperty(e,"fn",this.AsIcon),e)),this._Add(n.dom.El("span",{class:i.IDS.LABEL}),(_defineProperty(t={},i.IDS.UID,a),_defineProperty(t,"fn",this.AsText),t))}}]),TPLFacadeLabel}(i.DOMTemplate);e.exports=l},{30:285,14:458}],411:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s="closeIcon",a=i.IDS.ICON,l=i.IDS.TITLE,c=function(e){_inherits(TPLFacadeLabelClose,e);var t=_createSuper(TPLFacadeLabelClose);function TPLFacadeLabelClose(){var e;return _classCallCheck(this,TPLFacadeLabelClose),e=t.call(this)}return _createClass(TPLFacadeLabelClose,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,c=this,u;this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(e={},i.IDS.UID,a),_defineProperty(e,"fn",this.AsIcon),e)),this._Add(n.dom.El("span",{class:i.IDS.TITLE}),(_defineProperty(t={},i.IDS.UID,l),_defineProperty(t,"fn",this.AsTextStatic),t)),this._Add(n.dom.El("div",{class:"".concat(i.IDS.ICON," close")}),(_defineProperty(u={},i.IDS.UID,s),_defineProperty(u,"fn",(function fn(e,t,n){var i=c.AsIconStatic(e,t,n);return i.Set("close"),i})),u))}}]),TPLFacadeLabelClose}(i.DOMTemplate);e.exports=c},{30:285,14:458}],412:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=i.IDS.ICON,a=i.IDS.TITLE,l=i.IDS.SUBTITLE,c=function(e){_inherits(TPLFacadeTitles,e);var t=_createSuper(TPLFacadeTitles);function TPLFacadeTitles(){return _classCallCheck(this,TPLFacadeTitles),t.call(this)}return _createClass(TPLFacadeTitles,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){var e,t,c;_get(_getPrototypeOf(TPLFacadeTitles),"_CreateTemplate",this).call(this),this._Add(n.dom.El("div",{class:i.IDS.ICON}),(_defineProperty(e={},i.IDS.UID,s),_defineProperty(e,"fn",this.AsIcon),e)),this._Add(n.dom.El("span",{class:i.IDS.TITLE}),(_defineProperty(t={},i.IDS.UID,a),_defineProperty(t,"fn",this.AsText),t)),this._Add(n.dom.El("span",{class:i.IDS.SUBTITLE}),(_defineProperty(c={},i.IDS.UID,l),_defineProperty(c,"fn",this.AsText),c))}}]),TPLFacadeTitles}(i.DOMTemplate);e.exports=c},{30:285,14:458}],413:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=i.IDS.HEADER,a=i.IDS.BODY,l=i.IDS.FOOTER,c=function(e){_inherits(TPLHeaderBodyFooter,e);var t=_createSuper(TPLHeaderBodyFooter);function TPLHeaderBodyFooter(){return _classCallCheck(this,TPLHeaderBodyFooter),t.call(this)}return _createClass(TPLHeaderBodyFooter,null,[{key:"_CreateTemplate",value:function _CreateTemplate(){_get(_getPrototypeOf(TPLHeaderBodyFooter),"_CreateTemplate",this).call(this),this._Add(n.dom.El("div",{class:i.IDS.HEADER}),_defineProperty({},i.IDS.UID,s)),this._Add(n.dom.El("div",{class:i.IDS.BODY}),_defineProperty({},i.IDS.UID,a)),this._Add(n.dom.El("div",{class:i.IDS.FOOTER}),_defineProperty({},i.IDS.UID,l))}}]),TPLHeaderBodyFooter}(i.DOMTemplate);e.exports=c},{30:285,14:458}],414:[function(__r__,e,t){e.exports={Text:__r__(526),Identifier:__r__(527),Textarea:__r__(528),Boolean:__r__(529),Number:__r__(530),Color:__r__(531),Path:__r__(532),File:__r__(533),Directory:__r__(534),List:__r__(535)}},{529:415,531:416,534:417,533:418,527:419,535:420,530:421,532:422,526:423,528:424}],415:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l="checked",c=function(e){_inherits(InputBoolean,e);var t=_createSuper(InputBoolean);function InputBoolean(){return _classCallCheck(this,InputBoolean),t.call(this)}return _createClass(InputBoolean,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputBoolean.prototype),"_Init",this).call(this),this._handler.submitOnChange=!0,this._flags.Add(this,l),this._label=null,this._currentValue=this._changedValue=!1}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e)}},{key:"_Style",value:function _Style(){return s.Extends({".field":{"@":["invisible-fill"]}},_get(_getPrototypeOf(InputBoolean.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._label=new a.manipulators.Text(n.dom.El("span",{class:"label"},this._host));var e=n.dom.El("div",{class:"body"},this._host);this._handle=n.dom.El("div",{class:"handle"},e),this._inputField=n.dom.El("input",{class:"field",type:"checkbox"},this._host),this.focusArea=e}},{key:"_GrabValue",value:function _GrabValue(){return this._inputField.checked}},{key:"_UpdatePreview",value:function _UpdatePreview(){this._inputField.checked=this.changedValue,this._flags.Set(l,this.changedValue)}},{key:"Activate",value:function Activate(e){return!!_get(_getPrototypeOf(InputBoolean.prototype),"Activate",this).call(this,e)&&(this.changedValue=!this.changedValue,!0)}}]),InputBoolean}(a.inputs.InputField);_defineProperty(c,"__NFO__",i.NFOS.Ext({css:["@/inputs/boolean.css"]},a.inputs.InputField,["css"])),e.exports=c,a.Register("nkmjs-input-boolean",c)},{12:27,29:272,30:285,14:458}],416:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l=function(e){_inherits(InputColor,e);var t=_createSuper(InputColor);function InputColor(){return _classCallCheck(this,InputColor),t.call(this)}return _createClass(InputColor,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputColor.prototype),"_Init",this).call(this),this._label=null,this._body=null}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e)}},{key:"_Style",value:function _Style(){return s.Extends({".field":{"@":["invisible-fill"]}},_get(_getPrototypeOf(InputColor.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._label=new a.manipulators.Text(n.dom.El("span",{class:"label"},this._host)),this._inputField=n.dom.El("input",{class:"field",type:"color"},this._host),this._body=n.dom.El("div",{class:"body"},this._host)}},{key:"_UpdatePreview",value:function _UpdatePreview(){_get(_getPrototypeOf(InputColor.prototype),"_UpdatePreview",this).call(this),this._body.style["background-color"]=this.changedValue}}]),InputColor}(a.inputs.InputField);_defineProperty(l,"__NFO__",i.NFOS.Ext({css:["@/inputs/color.css"]},a.inputs.InputField,["css"])),e.exports=l,a.Register("nkmjs-input-color",l)},{12:27,29:272,30:285,14:458}],417:[function(__r__,e,t){var n=__r__(30),i,s=function(e){_inherits(InputDirectory,e);var t=_createSuper(InputDirectory);function InputDirectory(){return _classCallCheck(this,InputDirectory),t.call(this)}return _createClass(InputDirectory,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputDirectory.prototype),"_Init",this).call(this),this._openType="openDirectory",this._iconID="directory-search"}}]),InputDirectory}(__r__(533));e.exports=s,n.Register("nkmjs-input-directory",s)},{533:418,30:285}],418:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(27),a=__r__(21),l=__r__(29),c=__r__(30),u=__r__(512),h,d=function(e){_inherits(InputFile,e);var t=_createSuper(InputFile);function InputFile(){return _classCallCheck(this,InputFile),t.call(this)}return _createClass(InputFile,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputFile.prototype),"_Init",this).call(this),this._Bind(this._onPickerChange),this._Bind(this._Picked),this._openType="openFile",this._picker=null,this._iconID="document-search",this._dropExt=this._pointer.Add(c.extensions.Drop),this._dropExt.Hook({check:{fn:this._Bind(this._CheckDrop)},drop:{fn:this._Bind(this._Drop)},dropCandidate:{fn:this._Bind(this._ToggleDropCandidate)}})}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(InputFile.prototype),"_PostInit",this).call(this),this._dropExt.Setup(this)}},{key:"_Style",value:function _Style(){return l.Extends({".input-btn":{flex:"1 1 auto"},":host(.allow-drop)":{"background-color":"#00ff00"}},_get(_getPrototypeOf(InputFile.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;(_get(_getPrototypeOf(InputFile.prototype),"_Render",this).call(this),a.isNodeEnabled)?(this._picker=this.Add(u.Tool,"input-btn"),this._picker.options=(_defineProperty(e={},i.IDS.ICON,this._iconID),_defineProperty(e,"trigger",{fn:this._Pick,thisArg:this}),_defineProperty(e,"variant",c.FLAGS.MINIMAL),e),this._sizeEnum.Add(this._picker)):(this._picker=n.dom.El("input",{class:"input-btn",type:"file"},this._host),this._picker.addEventListener("change",this._onPickerChange))}},{key:"_Pick",value:function _Pick(){a.isNodeEnabled&&s.RELAY.ShowOpenDialog({defaultPath:this._currentValue?this._currentValue:"",properties:[this._openType]}).then(this._Picked)}},{key:"_Picked",value:function _Picked(e){var t;void 0!==e.filePaths[0]&&(this.changedValue=e.filePaths[0])}},{key:"_onPickerChange",value:function _onPickerChange(e){console.log(this._picker.value),console.log(e)}},{key:"_ToggleDropCandidate",value:function _ToggleDropCandidate(e){e?this.style.setProperty("border","1px solid red"):this.style.removeProperty("border")}},{key:"_CheckDrop",value:function _CheckDrop(e){return!!n.isString(e)||!!n.isInstanceOf(e,DataTransfer)}},{key:"_Drop",value:function _Drop(e){if(n.isString(e)&&(this.currentValue=e),n.isInstanceOf(e,DataTransfer))return!0}}]),InputFile}(__r__(532));e.exports=d,c.Register("nkmjs-input-file",d)},{512:397,532:422,27:1,12:27,21:190,29:272,30:285,14:458}],419:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l={type:i.FLAGS.ERROR,message:"No space allowed."},c={type:i.FLAGS.ERROR,message:"Must starts with <strong>A-Z, a-z</strong> or <strong>_</strong>"},u={type:i.FLAGS.ERROR,message:"Cannot be empty"},h={type:i.FLAGS.ERROR,message:"Can only contains the following characters : <strong>A-Z, a-z, _, 0-9</strong>"},d=function(e){_inherits(InputIdentifier,e);var t=_createSuper(InputIdentifier);function InputIdentifier(){return _classCallCheck(this,InputIdentifier),t.call(this)}return _createClass(InputIdentifier,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputIdentifier.prototype),"_Init",this).call(this),this._handler._updatePreviewOnChange=!1,this._handler._submitOnChange=!1,this._label=null}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e)}},{key:"_Style",value:function _Style(){return s.Extends({":host":{display:"flex","flex-flow":"column nowrap","align-items":"stretch","align-content":"stretch"},".field":{flex:"1 1 auto",width:"auto"}},_get(_getPrototypeOf(InputIdentifier.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){this._inputField=n.dom.El("input",{class:"field",type:"search"}),this._label=new a.manipulators.Text(n.dom.El("p",{class:"error"},this))}},{key:"_OnInputErrors",value:function _OnInputErrors(){_get(_getPrototypeOf(InputIdentifier.prototype),"_OnInputErrors",this).call(this),this._label.Set(this._ConcatErrors(i.FLAGS.ERROR,"<br/>"))}},{key:"_ClearFeedbacks",value:function _ClearFeedbacks(){_get(_getPrototypeOf(InputIdentifier.prototype),"_ClearFeedbacks",this).call(this),this._label.Set(null)}},{key:"_ValidateChangedValue",value:function _ValidateChangedValue(e){_get(_getPrototypeOf(InputIdentifier.prototype),"_ValidateChangedValue",this).call(this,e);var t=!1;n.tils.ValidIdentifier(e)||(n.tils.Empty(e)?this._PushError(u):(n.tils.StartWithNumber(e)&&(this._PushError(c),t=!0),n.tils.ContainsAnySpace(e)&&(this._PushError(l),t=!0),t||this._PushError(h)))}}]),InputIdentifier}(a.inputs.InputField);e.exports=d,a.Register("nkmjs-input-identifier",d)},{12:27,29:272,30:285,14:458}],420:[function(__r__,e,t){var n=__r__(30),i=__r__(29),s=function(e){_inherits(InputList,e);var t=_createSuper(InputList);function InputList(){return _classCallCheck(this,InputList),t.call(this)}return _createClass(InputList,[{key:"_Style",value:function _Style(){return i.Extends({".field":{}},_get(_getPrototypeOf(InputList.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){}}]),InputList}(n.inputs.InputBase);e.exports=s,n.Register("nkmjs-input-list",s)},{29:272,30:285}],421:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a="slider",l=function(e){_inherits(InputNumber,e);var t=_createSuper(InputNumber);function InputNumber(){return _classCallCheck(this,InputNumber),t.call(this)}return _createClass(InputNumber,[{key:"SetSliderData",value:function SetSliderData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e!=t?(n||(n=(t-e)/100),this._inputField.setAttribute("type","range"),this._inputField.setAttribute("min",e),this._inputField.setAttribute("max",t),this._inputField.setAttribute("step",n),this._flags.Set(a,!0)):(this._inputField.setAttribute("type","number"),this._inputField.removeAttribute("min"),this._inputField.removeAttribute("max"),this._inputField.removeAttribute("step"),this._flags.Set(a,!1))}},{key:"_Render",value:function _Render(){this._inputField=n.dom.El("input",{class:"field",type:"number"},this._host),this._flags.Add(this._inputField,a)}},{key:"_GrabValue",value:function _GrabValue(){var e=Number(this._inputField.value);return Number.isNaN(e)?0:e}},{key:"_CleanUp",value:function _CleanUp(){this.SetSliderData(),_get(_getPrototypeOf(InputNumber.prototype),"_CleanUp",this).call(this)}}]),InputNumber}(s.inputs.InputField);_defineProperty(l,"__NFO__",i.NFOS.Ext({css:["@/inputs/number.css"]},s.inputs.InputField,["css"])),e.exports=l,s.Register("nkmjs-input-number",l)},{12:27,30:285,14:458}],422:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=function(e){_inherits(InputPath,e);var t=_createSuper(InputPath);function InputPath(){return _classCallCheck(this,InputPath),t.call(this)}return _createClass(InputPath,[{key:"_SanitizeValue",value:function _SanitizeValue(e){return n.PATH.Sanitize(_get(_getPrototypeOf(InputPath.prototype),"_SanitizeValue",this).call(this,e))}}]),InputPath}(i.inputs.InputField);e.exports=s,i.Register("nkmjs-input-path",s)},{30:285,14:458}],423:[function(__r__,e,t){var n=__r__(14),i=__r__(30),s=function(e){_inherits(InputText,e);var t=_createSuper(InputText);function InputText(){return _classCallCheck(this,InputText),t.call(this)}return _createClass(InputText,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputText.prototype),"_Init",this).call(this),this._handler._updatePreviewOnChange=!1,this._handler._submitOnChange=!1}},{key:"_Render",value:function _Render(){this._inputField=n.dom.El("input",{class:"field",type:"search"},this._host)}}]),InputText}(i.inputs.InputField);e.exports=s,i.Register("nkmjs-input-text",s)},{30:285,14:458}],424:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=function(e){_inherits(InputTextarea,e);var t=_createSuper(InputTextarea);function InputTextarea(){return _classCallCheck(this,InputTextarea),t.call(this)}return _createClass(InputTextarea,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InputTextarea.prototype),"_Init",this).call(this),this._handler._updatePreviewOnChange=!1,this._handler._submitOnChange=!1}},{key:"_Render",value:function _Render(){this._inputField=n.dom.El("textarea",{class:"field",rows:3},this._host)}}]),InputTextarea}(s.inputs.InputField);_defineProperty(a,"__NFO__",i.NFOS.Ext({css:["@/inputs/expandable.css"]},s.inputs.InputField,["css"])),e.exports=a,s.Register("nkmjs-input-textarea",a)},{12:27,30:285,14:458}],425:[function(__r__,e,t){e.exports={Tab:__r__(536),TreeItem:__r__(537),TreeItemGroup:__r__(538),TreeRoot:__r__(539)}},{536:426,537:428,538:427,539:429}],426:[function(__r__,e,t){var n=__r__(12),i=__r__(14),s=__r__(21),a=__r__(29),l=__r__(30),c=__r__(506),u=function(e){_inherits(Tab,e);var t=_createSuper(Tab);function Tab(){return _classCallCheck(this,Tab),t.call(this)}return _createClass(Tab,[{key:"_Init",value:function _Init(){var e=this;_get(_getPrototypeOf(Tab.prototype),"_Init",this).call(this),this._Bind(this._CloseRequest),this._isStaticTab=!1,this._closeBtn=this._pointer.Add(l.extensions.Pointer),this._closeBtn.Hook(l.POINTER.MOUSE_LEFT,l.POINTER.RELEASE,this._CloseRequest),this._pointer.Hook(l.POINTER.MOUSE_MIDDLE,l.POINTER.RELEASE,this._CloseRequest),this._optionsHandler.Hook(l.IDS.NAME,"label"),this._optionsHandler.Hook(l.IDS.ICON),this._optionsHandler.Hook(l.IDS.STATIC,(function(t){e._isStaticTab=t,e._closeBtn.element&&(t?e._closeBtn.element.style.display="none":delete e._closeBtn.element.style.display)}))}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon.Set(e)}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e),this.htitle=e}},{key:"closeIcon",get:function get(){return this._closeIcon},set:function set(e){this._closeIcon.Set(e)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{position:"relative",display:"flex","flex-flow":"row nowrap","align-items":"center","align-content":"stretch"}},_get(_getPrototypeOf(Tab.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;l.Render(c.FacadeLabelClose,this,(_defineProperty(e={},l.IDS.OWNER,this),_defineProperty(e,"closeIcon",{htitle:"Close"}),e)),s.isTouchEnabled||(this._closeIcon.element.style.opacity=0),this.focusArea=this,this._closeBtn.element=this._closeIcon.element}},{key:"Activate",value:function Activate(e){return!this._closeBtn.isMouseOver&&_get(_getPrototypeOf(Tab.prototype),"Activate",this).call(this,e)}},{key:"_HighlightGain",value:function _HighlightGain(){s.isTouchEnabled||this._closeIcon.element.style.removeProperty("opacity")}},{key:"_HighlightLost",value:function _HighlightLost(){s.isTouchEnabled||(this._closeIcon.element.style.opacity=0)}},{key:"_CloseRequest",value:function _CloseRequest(){this._isActivable&&!this._isStaticTab&&this._Broadcast(l.SIGNAL.CLOSE_REQUESTED,this)}},{key:"_OnDataUpdated",value:function _OnDataUpdated(e){_get(_getPrototypeOf(Tab.prototype),"_OnDataUpdated",this).call(this,e)}},{key:"_OnItemDataUpdated",value:function _OnItemDataUpdated(e){_get(_getPrototypeOf(Tab.prototype),"_OnItemDataUpdated",this).call(this,e),this._label.TryReplace(e),this._icon.TryReplace(n.NFOS.Get(e))}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(Tab.prototype),"_CleanUp",this).call(this)}}]),Tab}(l.WidgetItem);_defineProperty(u,"__NFO__",n.NFOS.Ext({css:["@/buttons/tab.css"]},l.WidgetItem,["css"])),e.exports=u,l.Register("nkmjs-tab",u)},{506:404,12:27,21:190,29:272,30:285,14:458}],427:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(506),l=__r__(537),c=function(e){_inherits(TreeItemGroup,e);var t=_createSuper(TreeItemGroup);function TreeItemGroup(){return _classCallCheck(this,TreeItemGroup),t.call(this)}return _createClass(TreeItemGroup,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(TreeItemGroup.prototype),"_Init",this).call(this)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(TreeItemGroup.prototype),"_PostInit",this).call(this),this._extExpand.Setup(this,this._body,this._expandIcon.element)}},{key:"_SetupBuilder",value:function _SetupBuilder(e){e.host=this._body,e._defaultItemClass=l,e._defaultGroupClass=TreeItemGroup}},{key:"_Style",value:function _Style(){return i.Extends({},_get(_getPrototypeOf(TreeItemGroup.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;s.DOMTemplate.Render(a.BodyExpand,this,(_defineProperty(e={},s.IDS.OWNER,this),_defineProperty(e,"expandIcon",{htitle:"Expand"}),e)),this._icon.autoHide=!0,this._toolbarCtnr=this._header,this._dragActivator=this._header,this._dragFeedbackHost=this._header,this.focusArea=this._header}},{key:"_UpdateInfos",value:function _UpdateInfos(){_get(_getPrototypeOf(TreeItemGroup.prototype),"_UpdateInfos",this).call(this),this._itemData?(this._label.Set(this._itemData)||this._label.Set(this._data.options),this._icon.Set(this._itemData)||this._icon.Set(this._data.options)):(this._label.Set(this._data.options),this._icon.Set(this._data.options))}}]),TreeItemGroup}(s.lists.ItemGroup);_defineProperty(c,"__NFO__",n.NFOS.Ext({css:["@/lists/tree-group.css"]},s.lists.ItemGroup,["css"])),e.exports=c,s.Register("nkmjs-tree-item-group",c,"ul")},{506:404,537:428,12:27,29:272,30:285}],428:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l=__r__(506),c=function(e){_inherits(TreeItem,e);var t=_createSuper(TreeItem);function TreeItem(){var e;return _classCallCheck(this,TreeItem),(e=t.call(this)).depth=0,e}return _createClass(TreeItem,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(TreeItem.prototype),"_Init",this).call(this),this._toolbarClass=a.WidgetBar}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon.Set(e)}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e)}},{key:"_Style",value:function _Style(){return s.Extends({},_get(_getPrototypeOf(TreeItem.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;_get(_getPrototypeOf(TreeItem.prototype),"_Render",this).call(this),a.DOMTemplate.Render(l.FacadeLabel,this,(_defineProperty(e={},a.IDS.OWNER,this),_defineProperty(e,a.IDS.ICON,{autoHide:!1}),e))}},{key:"_UpdateInfos",value:function _UpdateInfos(){_get(_getPrototypeOf(TreeItem.prototype),"_UpdateInfos",this).call(this),this._itemData?(this._label.Set(this._itemData)||this._label.Set(this._data.options),this._icon.Set(this._itemData)||this._icon.Set(this._data.options)):(this._label.Set(this._data.options),this._icon.Set(this._data.options))}}]),TreeItem}(a.lists.Item);_defineProperty(c,"__NFO__",i.NFOS.Ext({css:["@/lists/tree-item.css"]},a.lists.Item,["css"])),e.exports=c,a.Register("nkmjs-tree-item",c,"li")},{506:404,12:27,29:272,30:285,14:458}],429:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(506),l=__r__(537),c=__r__(538),u=function(e){_inherits(TreeRoot,e);var t=_createSuper(TreeRoot);function TreeRoot(){return _classCallCheck(this,TreeRoot),t.call(this)}return _createClass(TreeRoot,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(TreeRoot.prototype),"_Init",this).call(this)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(TreeRoot.prototype),"_PostInit",this).call(this),this._extExpand.Setup(this,this._body,this._expandIcon.element)}},{key:"_SetupBuilder",value:function _SetupBuilder(e){e.host=this._body,e._defaultItemClass=l,e._defaultGroupClass=c}},{key:"_Style",value:function _Style(){return i.Extends({},_get(_getPrototypeOf(TreeRoot.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;s.DOMTemplate.Render(a.BodyExpand,this,(_defineProperty(e={},s.IDS.OWNER,this),_defineProperty(e,"expandIcon",{htitle:"Expand"}),e)),this._icon.autoHide=!0,this._toolbarCtnr=this._header,this._dragActivator=this._header,this._dragFeedbackHost=this._header,this.focusArea=this._header}},{key:"_UpdateInfos",value:function _UpdateInfos(){_get(_getPrototypeOf(TreeRoot.prototype),"_UpdateInfos",this).call(this),this._itemData?(this._label.Set(this._itemData)||this._label.Set(this._data.options),this._icon.Set(this._itemData)||this._icon.Set(this._data.options)):(this._label.Set(this._data.options),this._icon.Set(this._data.options))}},{key:"_OpenFind",value:function _OpenFind(){}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(TreeRoot.prototype),"_CleanUp",this).call(this)}}]),TreeRoot}(s.lists.Root);_defineProperty(u,"__NFO__",n.NFOS.Ext({css:["@/lists/tree-root.css"]},s.lists.Root,["css"])),e.exports=u,s.Register("nkmjs-tree-root",u)},{506:404,537:428,538:427,12:27,29:272,30:285}],430:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=function(e){_inherits(DrawerOverlay,e);var t=_createSuper(DrawerOverlay);function DrawerOverlay(){return _classCallCheck(this,DrawerOverlay),t.call(this)}return _createClass(DrawerOverlay,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(DrawerOverlay.prototype),"_Init",this).call(this),this._drawer=null}},{key:"_Style",value:function _Style(){return i.Extends({":host":{display:"flex"},":host(.content-left), :host(.content-top)":{"justify-content":"flex-start","align-content":"flex-start"},":host(.content-right), :host(.content-bottom)":{"justify-content":"flex-end","align-content":"flex-end"},":host(.vertical)":{"flex-flow":"column nowrap"},":host(.horizontal)":{"flex-flow":"row nowrap"},".content":{flex:"0 1 auto"}},_get(_getPrototypeOf(DrawerOverlay.prototype),"_Style",this).call(this))}}]),DrawerOverlay}(s.overlays.Overlay);_defineProperty(a,"__NFO__",n.NFOS.Ext({css:["@/views/drawer-overlay.css"]},s.overlays.Overlay,["css"])),_defineProperty(a,"__default_contentPlacement",s.FLAGS.BOTTOM_LEFT),e.exports=a,s.Register("nkmjs-drawer-overlay",a)},{12:27,29:272,30:285}],431:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(29),l=__r__(30),c=__r__(506),u=function(e){_inherits(Drawer,e);var t=_createSuper(Drawer);function Drawer(){return _classCallCheck(this,Drawer),t.call(this)}return _createClass(Drawer,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Drawer.prototype),"_Init",this).call(this),this._Bind(this._CloseRequest),this._closeBtn=this._pointer.Add(l.extensions.Pointer),this._closeBtn.Hook(l.POINTER.MOUSE_LEFT,l.POINTER.RELEASE,this._CloseRequest)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Drawer.prototype),"_PostInit",this).call(this)}},{key:"_Style",value:function _Style(){return a.Extends({":host":{display:"grid","grid-template-rows":"max-content auto"},".header":{"grid-row":"1"},".body":{"grid-row":"2","overflow-x":"hidden","overflow-y":"auto"},".icon.close":{}},_get(_getPrototypeOf(Drawer.prototype),"_Style",this).call(this))}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._icon.Set(e)}},{key:"title",get:function get(){return this._title},set:function set(e){this._title.Set(e)}},{key:"closeIcon",get:function get(){return this._closeIcon},set:function set(e){this._closeIcon.Set(e)}},{key:"_Render",value:function _Render(){var e;this._header=n.dom.El("div",{class:"header"},this),this._body=n.dom.El("div",{class:"body"},this),l.DOMTemplate.Render(this.constructor.__default_facadeTPL,this._header,(_defineProperty(e={},l.IDS.OWNER,this),_defineProperty(e,l.IDS.TITLE,_defineProperty({},l.IDS.CSS_CL,"".concat(a.FONT_FLAG.MEDIUM))),_defineProperty(e,"closeIcon",{htitle:"Close"}),e)),this._closeIcon.element.style["--size"]="var(--size_m)",this._closeBtn.element=this._closeIcon.element,this._wrapper=this._body}},{key:"_PreprocessData",value:function _PreprocessData(e){if(n.isInstanceOf(e,l.overlays.OverlayOptions)){var t=e.options;return this._icon.Set(t),this._title.Set(t),e.GetOption("data",e)}return e}},{key:"_CloseRequest",value:function _CloseRequest(){this._isActivable&&this._data&&this._data.Consume()}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(Drawer.prototype),"_CleanUp",this).call(this)}}]),Drawer}(l.views.View);_defineProperty(u,"__NFO__",i.NFOS.Ext({css:["@/views/drawer.css"]},l.views.View,["css"])),_defineProperty(u,"__default_orientation",l.FLAGS.VERTICAL),_defineProperty(u,"__default_facadeTPL",c.FacadeTitleClose),e.exports=u,l.Register("nkmjs-drawer",u)},{506:404,12:27,31:66,29:272,30:285,14:458}],432:[function(__r__,e,t){e.exports={CONTEXT:__r__(446),Drawer:__r__(540),DrawerOverlay:__r__(541)}},{540:431,541:430,446:433}],433:[function(__r__,e,t){var n,i=function(e){_inherits(DRAWER,e);var t=_createSuper(DRAWER);function DRAWER(){return _classCallCheck(this,DRAWER),t.call(this)}return DRAWER}(__r__(12).helpers.CSYMBOL);e.exports={DRAWER:i}},{12:27}],434:[function(__r__,e,t){var n=__r__(30);e.exports={DRAWER:function(e){_inherits(DRAWER,e);var t=_createSuper(DRAWER);function DRAWER(){var e;return _classCallCheck(this,DRAWER),_possibleConstructorReturn(e)}return DRAWER}(n.REQUEST.OVERLAY)}},{30:285}],435:[function(__r__,e,t){e.exports={ShelfNav:__r__(542),Shelf:__r__(543)}},{543:437,542:436}],436:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(18),a=__r__(30),l=__r__(506),c=__r__(512),u=function(e){_inherits(ShelfNav,e);var t=_createSuper(ShelfNav);function ShelfNav(){return _classCallCheck(this,ShelfNav),t.call(this)}return _createClass(ShelfNav,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(ShelfNav.prototype),"_Init",this).call(this),this._defaultWidgetClass=c.Tool,this._isHorizontalScrollEnabled=!0,this._handlesMap=new s.Dictionary,this._currentHandle=null,this._header=null,this._body=null,this._footer=null,this._toolbar=null}},{key:"currentHandle",get:function get(){return this._currentHandle}},{key:"toolbar",get:function get(){return this._toolbar}},{key:"_Style",value:function _Style(){return i.Extends({":host":{display:"grid","justify-content":"stretch","align-items":"stretch"},".body":{flex:"1 1 auto",display:"flex","justify-content":"flex-start","align-items":"stretch"},".header, .footer":{flex:"0 0 auto"},":host(.vertical)":{"grid-template-rows":"max-content auto max-content"},":host(.vertical) .header":{"grid-row":"1"},":host(.vertical) .footer":{"grid-row":"3"},":host(.vertical) .body":{"grid-row":"2","flex-flow":"column nowrap","overflow-x":"hidden","overflow-y":"overlay",width:"100%","min-height":"0"},":host(.horizontal)":{"grid-template-columns":"max-content auto max-content"},":host(.horizontal) .header":{"grid-column":"1"},":host(.horizontal) .footer":{"grid-column":"3"},":host(.horizontal) .body":{"grid-column":"2","flex-flow":"row nowrap","overflow-x":"overlay","overflow-y":"hidden",height:"100%","min-width":"0"}},_get(_getPrototypeOf(ShelfNav.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){a.DOMTemplate.Render(l.HeaderBodyFooter,this,_defineProperty({},a.IDS.OWNER,this)),this._toolbar=this.Add(a.WidgetBar,"toolbar",this._footer),this._toolbar._defaultWidgetClass=c.Tool,this._orientation.AddManaged(this._toolbar._orientation),this._toolbar.orientation=this.constructor.__default_orientation,this._sizeEnum.AddManaged(this._toolbar._sizeEnum),this._toolbar.size=this.constructor.__default_size,this._wrapper=this._body,this.focusArea=this}},{key:"_OnSizeChanged",value:function _OnSizeChanged(e,t){_get(_getPrototypeOf(ShelfNav.prototype),"_OnSizeChanged",this).call(this,e,t),this._toolbar.size=e}},{key:"_OnOrientationChanged",value:function _OnOrientationChanged(e,t){_get(_getPrototypeOf(ShelfNav.prototype),"_OnOrientationChanged",this).call(this,e,t),this._orientation.Apply("orientation",this._handles)}},{key:"_OnPlacementChanged",value:function _OnPlacementChanged(e,t){_get(_getPrototypeOf(ShelfNav.prototype),"_OnPlacementChanged",this).call(this,e,t),this._toolbar.placement=e}},{key:"Get",value:function Get(e){return this._handlesMap.Get(e)}},{key:"CreateHandle",value:function CreateHandle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this._handlesMap.Get(e);return n||(e.options.flagOn?e.options.flagOn.includes(a.FLAGS.TOGGLABLE)||e.options.flagOn.push(a.FLAGS.TOGGLABLE):e.options.flagOn=[a.FLAGS.TOGGLABLE],n=_get(_getPrototypeOf(ShelfNav.prototype),"CreateHandle",this).call(this,e.options),this._handlesMap.Set(e,n),n.data=e,n.Watch(a.SIGNAL.ACTIVATED,this._OnHandleActivated,this),"orientation"in n&&(n.orientation=this._orientation.currentFlag),n)}},{key:"Remove",value:function Remove(e){var t=this._handlesMap.Get(e);return t?(t.Release(),t):null}},{key:"_OnHandleActivated",value:function _OnHandleActivated(e){this._Broadcast(ShelfNav.HANDLE_ACTIVATED,this,e,this._optionsMap.Get(e))}},{key:"_CleanUp",value:function _CleanUp(){this._handlesMap.Clear(),_get(_getPrototypeOf(ShelfNav.prototype),"_CleanUp",this).call(this)}}]),ShelfNav}(a.WidgetBar);_defineProperty(u,"__NFO__",n.NFOS.Ext({css:["@/views/shelf-nav.css"]},a.WidgetBar,["css"])),_defineProperty(u,"HANDLE_ACTIVATED",Symbol("handleActivated")),_defineProperty(u,"__default_orientation",a.FLAGS.VERTICAL),e.exports=u,a.Register("nkmjs-shelf-nav",u)},{512:397,506:404,18:21,12:27,29:272,30:285}],437:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(30),l=__r__(542),c=function(e){_inherits(Shelf,e);var t=_createSuper(Shelf);function Shelf(){return _classCallCheck(this,Shelf),t.call(this)}return _createClass(Shelf,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Shelf.prototype),"_Init",this).call(this),this._isEmpty=!0,this._placholderViewClass=null,this._placeholderView=null,this._catalogViewBuilder=new a.helpers.CatalogViewBuilder,this._catalogViewBuilder.Watch(i.SIGNAL.ITEM_ADDED,this._OnCatalogItemAdded,this).Watch(i.SIGNAL.ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._navClass=l,this._nav=null,this._currentHandle=null,this._flags.Add(this,a.FLAGS.FIXED_SIZE),this._navPlacement=new a.helpers.FlagEnum(a.FLAGS.placement,!0),this._navPlacement.Add(this),this._navPlacement.onFlagChanged.Add(this._Bind(this._OnNavPlacementChanged)),this._isCollapsable=!0,this._flags.Add(this,a.FLAGS.EMPTY)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Shelf.prototype),"_PostInit",this).call(this),this._navPlacement.Set(this.constructor.__default_navPlacement),this._nav.Watch(l.HANDLE_ACTIVATED,this._OnHandleActivated,this);var e=this._placholderViewClass||this.constructor.__default_placeholderViewClass;e&&(this._placeholderView=this.Add(e,"view"),this.currentView=this._placeholderView),this._OnShelfEmpty()}},{key:"isCollapsable",get:function get(){return this._isCollapsable},set:function set(e){this._isCollapsable=e}},{key:"isEmpty",get:function get(){return this._isEmpty}},{key:"navPlacement",get:function get(){return this._navPlacement},set:function set(e){this._navPlacement.Set(e)}},{key:"_OnOrientationChanged",value:function _OnOrientationChanged(e,t){_get(_getPrototypeOf(Shelf.prototype),"_OnOrientationChanged",this).call(this,e,t);var n=this._navPlacement.currentFlag;this._OnNavPlacementChanged(n,n),this._nav.orientation=e}},{key:"_OnNavPlacementChanged",value:function _OnNavPlacementChanged(e,t){if(this._orientation.currentFlag===a.FLAGS.VERTICAL)switch(this._navPlacement.currentFlag){case a.FLAGS.RIGHT:case a.FLAGS.TOP_RIGHT:case a.FLAGS.BOTTOM_RIGHT:case a.FLAGS.BOTTOM:this.classList.add("nav-end"),this.classList.remove("nav-start"),this._nav.placement=a.FLAGS.RIGHT;break;default:case a.FLAGS.LEFT:case a.FLAGS.TOP_LEFT:case a.FLAGS.BOTTOM_LEFT:case a.FLAGS.TOP:this.classList.add("nav-start"),this.classList.remove("nav-end"),this._nav.placement=a.FLAGS.LEFT}else switch(this._navPlacement.currentFlag){case a.FLAGS.BOTTOM:case a.FLAGS.BOTTOM_LEFT:case a.FLAGS.BOTTOM_RIGHT:case a.FLAGS.RIGHT:this.classList.add("nav-end"),this.classList.remove("nav-start"),this._nav.placement=a.FLAGS.BOTTOM;break;default:case a.FLAGS.TOP:case a.FLAGS.TOP_LEFT:case a.FLAGS.TOP_RIGHT:case a.FLAGS.LEFT:this.classList.add("nav-start"),this.classList.remove("nav-end"),this._nav.placement=a.FLAGS.TOP}}},{key:"_Style",value:function _Style(){return{":host":{display:"grid","justify-content":"stretch"},":host(.empty) .navigation":{display:"none"},".navigation":{},".view":{},":host(.vertical)":{"flex-flow":"row nowrap"},":host(.vertical), :host(.vertical.nav-start)":{"grid-template-columns":"max-content auto"},":host(.vertical.nav-end)":{"grid-template-columns":"auto max-content"},":host(.vertical) .view":{"overflow-x":"overlay","overflow-y":"overlay",height:"100%","min-width":"0"},":host(.vertical) .navigation, :host(.vertical) .view":{"grid-row":"1"},":host(.vertical) .navigation, :host(.vertical.nav-start) .navigation":{"grid-column":"1"},":host(.vertical) .view, :host(.vertical.nav-start) .view":{"grid-column":"2"},":host(.vertical.nav-end) .navigation":{"grid-column":"2"},":host(.vertical.nav-end) .view":{"grid-column":"1"},":host(.horizontal), :host(.horizontal.nav-start)":{"grid-template-rows":"max-content auto"},":host(.horizontal.nav-end)":{"grid-template-rows":"auto max-content"},":host(.horizontal) .view":{"overflow-x":"overlay","overflow-y":"overlay",width:"100%","min-height":"0"},":host(.horizontal) .navigation, :host(.horizontal) .view":{"grid-column":"1"},":host(.horizontal) .navigation, :host(.horizontal.nav-start) .navigation":{"grid-row":"1"},":host(.horizontal) .view, :host(.horizontal.nav-start) .view":{"grid-row":"2"},":host(.horizontal.nav-end) .navigation":{"grid-row":"2"},":host(.horizontal.nav-end) .view":{"grid-row":"1"}}}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(Shelf.prototype),"_Render",this).call(this),this._nav=this.Add(this._navClass,"navigation"),this._orientation.AddManaged(this._nav._orientation),this._nav.orientation=this.constructor.__default_orientation}},{key:"nav",get:function get(){return this._nav}},{key:"catalog",get:function get(){return this._catalogViewBuilder.catalog},set:function set(e){this._catalogViewBuilder.catalog=e}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t,n){var i=this._nav.CreateHandle(t);return i.Watch(a.SIGNAL.CLOSE_REQUESTED,this._OnHandleCloseRequest,this),n.Watch(a.SIGNAL.DISPLAY_REQUESTED,this._OnViewRequestDisplay,this),n.Watch(a.SIGNAL.CLOSE_REQUESTED,this._OnViewRequestClose,this),n.visible=!1,n.classList.add(a.IDS.VIEW),this.Add(n),this._Broadcast(a.SIGNAL.VIEW_ADDED,this,n,i),this._isEmpty&&this._OnShelfNonEmpty(),n}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,n,i){var s=this._nav.Remove(t);if(this.currentHandle===s&&(this.currentHandle=null),n===this.currentView)if(this.currentView=null,0===this._nav._handles.length)this._OnShelfEmpty();else{console.log(i);var a=this._nav._handles;i>=a.length&&(i=a.length-1),this.currentHandle=a[i]}}},{key:"_OnHandleActivated",value:function _OnHandleActivated(e,t){var i=this._catalogViewBuilder.Get(t.data);n.isInstanceOf(i,a.views.View)&&(this._isCollapsable&&this._currentView===i?this.currentView=null:i.RequestDisplay())}},{key:"_OnHandleCloseRequest",value:function _OnHandleCloseRequest(e){var t=e.data,n=this._catalogViewBuilder.Get(t);n?n.RequestClose():t.Release()}},{key:"RequestView",value:function RequestView(e){if(n.isNumber(e)){var t=this._nav._handles;if(e<0||e>t.length-1)return;this.currentHandle=t[e]}else n.isString(e)||n.isInstanceOf(s.catalogs.CatalogItem)}},{key:"_OnViewRequestDisplay",value:function _OnViewRequestDisplay(e){this.currentView=e}},{key:"_OnViewRequestClose",value:function _OnViewRequestClose(e){var t=this._catalogViewBuilder._reverseMap.get(e);t&&t.Release()}},{key:"_OnShelfEmpty",value:function _OnShelfEmpty(){this._isEmpty=!0,this._flags.Set(a.FLAGS.EMPTY,!0),this._Broadcast(a.SIGNAL.EMPTY,this),this.RequestPlaceholderView(!0)}},{key:"_OnShelfNonEmpty",value:function _OnShelfNonEmpty(e){this._isEmpty=!1,this._flags.Set(a.FLAGS.EMPTY,!1),this._Broadcast(a.SIGNAL.NON_EMPTY,this)}},{key:"currentHandle",get:function get(){return this._currentHandle},set:function set(e){if(this._currentHandle!==e){var t=this._currentHandle;this._currentHandle=e,t&&(t.Select(!1),t._flags.Set(a.FLAGS.TOGGLED,!1)),this._currentHandle&&(this._currentHandle.Select(!0),this._currentHandle._flags.Set(a.FLAGS.TOGGLED,!0)),this._OnCurrentHandleChanged(t)}}},{key:"_OnCurrentHandleChanged",value:function _OnCurrentHandleChanged(e){var t=this._currentHandle?this._currentHandle.data:null,n=this._catalogViewBuilder.Get(t);n&&this.currentView!=n&&n.RequestDisplay()}},{key:"currentView",get:function get(){return this._currentView},set:function set(e){if(this._currentView!==e){var t=this._currentView;this._currentView=e,t&&(this._catalogViewBuilder.Owns(t)?t.visible=!1:(t.classList.remove(a.IDS.VIEW),this.Remove(t))),this._currentView&&(this._catalogViewBuilder.Owns(this._currentView)?this._currentView.visible=!0:(this._currentView.classList.add(a.IDS.VIEW),this.Add(this._currentView))),this._OnCurrentViewChanged(t)}}},{key:"SetCurrentView",value:function SetCurrentView(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.currentView=e}},{key:"RequestPlaceholderView",value:function RequestPlaceholderView(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e||this._placeholderView)&&(this.currentView=this._placeholderView),!!this._placeholderView}},{key:"_OnCurrentViewChanged",value:function _OnCurrentViewChanged(e){if(this._currentView){var t=this._catalogViewBuilder._reverseMap.get(this._currentView);this.currentHandle=t?this._nav.Get(t):null,this._currentView.DisplayGranted()}else this.currentHandle=null}},{key:"_CleanUp",value:function _CleanUp(){this._nav.parentElement!=this._host&&n.dom.AttachFirst(this._nav,this._host,!1),this._catalogViewBuilder.catalog=null,this.classList.remove("nav-end"),this.classList.remove("nav-start"),_get(_getPrototypeOf(Shelf.prototype),"_CleanUp",this).call(this)}}]),Shelf}(a.views.View);_defineProperty(c,"__NFO__",i.NFOS.Ext({css:["@/views/shelf.css"]},a.views.View,["css"])),_defineProperty(c,"__default_placeholderViewClass",null),_defineProperty(c,"__default_orientation",a.FLAGS.VERTICAL),_defineProperty(c,"__default_navPlacement",a.FLAGS.TOP),e.exports=c,a.Register("nkmjs-shelf",c)},{542:436,12:27,31:66,30:285,14:458}],438:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(30),l=function(e){_inherits(Tag,e);var t=_createSuper(Tag);function Tag(){return _classCallCheck(this,Tag),t.call(this)}return _createClass(Tag,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Tag.prototype),"_Init",this).call(this),this._sizeEnum=new a.helpers.FlagEnum(a.FLAGS.sizes,!0),this._sizeEnum.Add(this),this._flavorEnum=new a.helpers.FlagEnum(a.FLAGS.flavorsExtended,!0),this._flavorEnum.Add(this)}},{key:"size",get:function get(){return this._sizeEnum.currentFlag},set:function set(e){this._sizeEnum.Set(e)}},{key:"flavor",get:function get(){return this._flavorEnum.currentFlag},set:function set(e){this._flavorEnum.Set(e)}},{key:"label",get:function get(){return this._label},set:function set(e){this._label.Set(e)}},{key:"_Render",value:function _Render(){this._label=new a.manipulators.Text(n.dom.El("span",{class:"".concat(a.IDS.LABEL," ").concat(s.FONT_FLAG.TAG)},this),!1)}}]),Tag}(a.Widget);_defineProperty(l,"__NFO__",i.NFOS.Ext({css:["@/widgets/tag.css"]},a.Widget,["css"])),e.exports=l,a.Register("nkmjs-tag",l)},{12:27,29:272,30:285,14:458}],439:[function(__r__,e,t){e.exports={Tag:__r__(544)}},{544:438}],440:[function(__r__,e,t){e.exports={SIGNAL:__r__(47),Explorer:__r__(545),ExplorerTile:__r__(545),CONTEXT:__r__(150),editors:__r__(472),inspectors:__r__(473),helpers:__r__(51),Workspace:__r__(546),WorkspaceCellNav:__r__(547),WorkspaceCell:__r__(548),WorkspaceRoot:__r__(549)}},{150:441,472:446,545:447,51:449,473:451,47:453,546:457,548:455,547:454,549:456}],441:[function(__r__,e,t){var n=__r__(12),i=function(e){_inherits(EDITOR,e);var t=_createSuper(EDITOR);function EDITOR(){return _classCallCheck(this,EDITOR),t.call(this)}return EDITOR}(n.helpers.CSYMBOL),s=function(e){_inherits(DEFAULT_EDITOR,e);var t=_createSuper(DEFAULT_EDITOR);function DEFAULT_EDITOR(){return _classCallCheck(this,DEFAULT_EDITOR),t.call(this)}return DEFAULT_EDITOR}(i),a=function(e){_inherits(INSPECTOR,e);var t=_createSuper(INSPECTOR);function INSPECTOR(){return _classCallCheck(this,INSPECTOR),t.call(this)}return INSPECTOR}(n.helpers.CSYMBOL),l=function(e){_inherits(DEFAULT_INSPECTOR,e);var t=_createSuper(DEFAULT_INSPECTOR);function DEFAULT_INSPECTOR(){return _classCallCheck(this,DEFAULT_INSPECTOR),t.call(this)}return DEFAULT_INSPECTOR}(a),c=function(e){_inherits(EDITOR_IN_PLACE,e);var t=_createSuper(EDITOR_IN_PLACE);function EDITOR_IN_PLACE(){return _classCallCheck(this,EDITOR_IN_PLACE),t.call(this)}return EDITOR_IN_PLACE}(n.helpers.CSYMBOL);e.exports={EDITOR:i,DEFAULT_EDITOR:s,INSPECTOR:a,DEFAULT_INSPECTOR:l,EDITOR_IN_PLACE:c}},{12:27}],442:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(29),a=__r__(31),l=__r__(30),c=__r__(37),u=__r__(95),h=__r__(550),d=__r__(551),p=__r__(552),m=function(e){_inherits(EditorEx,e);var t=_createSuper(EditorEx);function EditorEx(){return _classCallCheck(this,EditorEx),t.call(this)}return _createClass(EditorEx,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EditorEx.prototype),"_Init",this).call(this),this._shelfCatalog=new a.catalogs.Catalog(!1),this._shelf=null,this._inspectorShell=null,this._historyInspector=null,this._viewport=null,this._header=null,this._body=null,this._footer=null,this._topStatus=null,this._bottomStatus=null}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(EditorEx.prototype),"_PostInit",this).call(this);var e=[];this._InitShelfCatalog(e),this._shelf.catalog=this._shelfCatalog;for(var t=null,i=null,s=null,a=null,l=0,c=e.length;l<c;l++)t=e[l],s=(i=this._shelfCatalog.Register(t)).GetOption("view",null),a=n.tils.Get(t,"assign",null),s&&a&&(this[a]=s)}},{key:"_InitShelfCatalog",value:function _InitShelfCatalog(e){var t;e.push((_defineProperty(t={},l.IDS.NAME,"Inspector"),_defineProperty(t,l.IDS.ICON,"parameters"),_defineProperty(t,l.IDS.VIEW_CLASS,this.constructor.__default_inspectorShellClass),_defineProperty(t,"assign","_inspector"),t))}},{key:"_Style",value:function _Style(){return s.Extends({":host":{position:"relative",display:"flex","align-items":"stretch","align-content":"stretch","min-width":0},":host(.vertical)":{"flex-flow":"row"},":host(.horizontal)":{"flex-flow":"column"},":host(.vertical).fs":{},":host(.horizontal).fs":{},".fs":{flex:"0 0 auto"},".body":{position:"relative",display:"flex","align-items":"stretch","align-content":"stretch",flex:"1 1 auto"},".viewport":{position:"relative",display:"flex",flex:"1 1 auto"},".shelf":{position:"relative",display:"flex",flex:"0 0 auto"},".topstatus":{position:"absolute",width:"100%"}},_get(_getPrototypeOf(EditorEx.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){l.Render(c.dom.HeaderBodyFooter,this,_defineProperty({},l.IDS.OWNER,this)),this._shelf=this.Add(this.constructor.__default_shelfClass,"shelf",this._body),this._viewport=this.Add(this.constructor.__default_viewportClass,"viewport",this._body),this._inspectorShell=this.Add(this.constructor.__default_inspectorShellClass,"inspector",this._body),this._inspectorShell.orientation=l.FLAGS.HORIZONTAL,this._shelf.orientation=l.FLAGS.HORIZONTAL}},{key:"_OnDataChanged",value:function _OnDataChanged(e){_get(_getPrototypeOf(EditorEx.prototype),"_OnDataChanged",this).call(this,e),this._inspectorShell.data=this._data,this._inspectorShell.context=this._data}},{key:"_OnDataDirty",value:function _OnDataDirty(e){_get(_getPrototypeOf(EditorEx.prototype),"_OnDataDirty",this).call(this,e),this._ToggleWarning(!0)}},{key:"_OnDataCleaned",value:function _OnDataCleaned(e){_get(_getPrototypeOf(EditorEx.prototype),"_OnDataCleaned",this).call(this,e),this._ToggleWarning(!1)}},{key:"_ToggleWarning",value:function _ToggleWarning(e){var t}},{key:"Inspect",value:function Inspect(e){_get(_getPrototypeOf(EditorEx.prototype),"Inspect",this).call(this,e),this._inspectorShell.RequestDisplay()}},{key:"_OnInspectedDataChanged",value:function _OnInspectedDataChanged(e){_get(_getPrototypeOf(EditorEx.prototype),"_OnInspectedDataChanged",this).call(this,e),this._inspectedData?this._inspectorShell.data=this._inspectedData:this._inspectorShell.data=this._data}}]),EditorEx}(u.Editor);_defineProperty(m,"__default_shelfClass",p),_defineProperty(m,"__default_inspectorShellClass",h),_defineProperty(m,"__default_historyInspectorClass",d),_defineProperty(m,"__default_viewportClass",l.views.View),e.exports=m,l.Register("nkmjs-editor-ex",m)},{551:450,550:452,552:444,12:27,31:66,29:272,30:285,95:356,37:390,14:458}],443:[function(__r__,e,t){var n=__r__(29),i=__r__(30),s,a=function(e){_inherits(EditorShelfNav,e);var t=_createSuper(EditorShelfNav);function EditorShelfNav(){return _classCallCheck(this,EditorShelfNav),t.call(this)}return _createClass(EditorShelfNav,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EditorShelfNav.prototype),"_Init",this).call(this)}},{key:"_Style",value:function _Style(){return n.Extends({},_get(_getPrototypeOf(EditorShelfNav.prototype),"_Style",this).call(this))}},{key:"_OpenSettings",value:function _OpenSettings(){console.log("Open Settings")}}]),EditorShelfNav}(__r__(37).views.ShelfNav);e.exports=a,i.Register("nkmjs-editor-shelf-nav",a)},{29:272,30:285,37:390}],444:[function(__r__,e,t){var n=__r__(29),i=__r__(30),s=__r__(37),a=__r__(553),l=function(e){_inherits(EditorShelf,e);var t=_createSuper(EditorShelf);function EditorShelf(){return _classCallCheck(this,EditorShelf),t.call(this)}return _createClass(EditorShelf,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(EditorShelf.prototype),"_Init",this).call(this),this._navClass=a}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(EditorShelf.prototype),"_PostInit",this).call(this)}},{key:"_Style",value:function _Style(){return n.Extends({":host":{width:"354px",flex:"0 0 auto","background-color":"rgba(127,127,127,0.1)"},".controls":{"background-color":"rgba(127,127,127,0.0)"}},_get(_getPrototypeOf(EditorShelf.prototype),"_Style",this).call(this))}}]),EditorShelf}(s.views.Shelf);e.exports=l,i.Register("nkmjs-editor-shelf",l)},{553:443,29:272,30:285,37:390}],445:[function(__r__,e,t){var n=__r__(30),i,s=function(e){_inherits(SlateEditor,e);var t=_createSuper(SlateEditor);function SlateEditor(){return _classCallCheck(this,SlateEditor),t.call(this)}return _createClass(SlateEditor,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(SlateEditor.prototype),"_Init",this).call(this)}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(SlateEditor.prototype),"_Render",this).call(this)}}]),SlateEditor}(__r__(554));e.exports=s,n.Register("nkmjs-editor-slate",s)},{554:442,30:285}],446:[function(__r__,e,t){e.exports={EditorEx:__r__(554),EditorShelfNav:__r__(553),EditorShelf:__r__(552),SlateEditor:__r__(555)}},{554:442,552:444,553:443,555:445}],447:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(30),a=function(e){_inherits(Explorer,e);var t=_createSuper(Explorer);function Explorer(){return _classCallCheck(this,Explorer),t.call(this)}return _createClass(Explorer,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Explorer.prototype),"_Init",this).call(this)}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._body}},{key:"footer",get:function get(){return this._footer}},{key:"_Style",value:function _Style(){var e=5,t="rgba(0,0,0,0.5)";return{":host":{position:"relative",flex:"1 1 auto","min-width":0,display:"flex","flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch"},".group":{position:"relative"},".header":{flex:"0 0 auto"},".footer":{flex:"0 0 auto"},".body":{"overflow-y":"overlay","min-width":0,flex:"1 1 1px"}}}},{key:"_Render",value:function _Render(){this._header=n.dom.El("div",{class:"header group"},this._host),this._body=n.dom.El("div",{class:"body group"},this._host),this._footer=n.dom.El("div",{class:"footer group"},this._host),this._wrapper=this._body}}]),Explorer}(s.views.View);_defineProperty(a,"__NFO__",i.NFOS.Ext({css:["@/views/explorer.css"]},s.views.View,["css"])),e.exports=a,s.Register("nkmjs-explorer",a)},{12:27,30:285,14:458}],448:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(30),a=function(e){_inherits(Group,e);var t=_createSuper(Group);function Group(){return _classCallCheck(this,Group),t.call(this)}return _createClass(Group,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Group.prototype),"_Init",this).call(this),this._header=null,this._footer=null,this._groupMap=new i.Dictionary,this._groupList=[]}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._wrapper}},{key:"footer",get:function get(){return this._footer}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex",flex:"1 1 auto","margin-bottom":"20px"},".header":{position:"relative",flex:"0 0 auto"},".footer":{position:"relative",flex:"0 0 auto"},".body":{position:"relative",display:"flex",flex:"1 1 auto"},":host(.horizontal) .body":{"flex-flow":"row wrap","align-content":"flex-start","align-items":"flex-start"},":host(.vertical) .body":{"flex-flow":"column nowrap","align-content":"stretch","align-items":"stretch"}}}},{key:"_Render",value:function _Render(){this._header=n.dom.El("div",{class:"header"},this._host),this._wrapper=n.dom.El("div",{class:"body"},this._host),this._footer=n.dom.El("div",{class:"footer"},this._host)}},{key:"_GetOrCreateGroup",value:function _GetOrCreateGroup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=n||Group;var i=this._groupMap.Get(e);if(!i){if(i=this.Add(n,"group tile-ctnr",this._viewport.wrapper),this._groupMap.Set(e,i),this._groupList.push(i),t)for(var s in t)i._flags.Set(s,t[s]);this._OnGroupCreated(e,i),this._Broadcast(Group.GROUP_CREATED,this,i)}return i}},{key:"_OnGroupCreated",value:function _OnGroupCreated(e,t){}},{key:"_ClearGroup",value:function _ClearGroup(e){var t=this._groupMap.Get(e);if(t){var n=this._groupList.indexOf(t);this._groupList.splice(n,1),this._groupMap.Remove(e),t.Release()}}},{key:"_ClearAllGroups",value:function _ClearAllGroups(){this._groupMap.Clear();for(var e=this._groupList,t=0,n=e.length;t<n;t++)e[t].Release();e.length=0}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(Group.prototype),"_CleanUp",this).call(this),this._ClearAllGroups()}}]),Group}(s.WidgetOrientable);_defineProperty(a,"GROUP_CREATED",Symbol("groupCreated")),e.exports=a,s.Register("nkmjs-group",a)},{18:21,30:285,14:458}],449:[function(__r__,e,t){e.exports={Group:__r__(556)}},{556:448}],450:[function(__r__,e,t){var n=__r__(14),i=__r__(29),s=__r__(30),a,l=function(e){_inherits(HistoryInspectorShell,e);var t=_createSuper(HistoryInspectorShell);function HistoryInspectorShell(){return _classCallCheck(this,HistoryInspectorShell),t.call(this)}return _createClass(HistoryInspectorShell,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(HistoryInspectorShell.prototype),"_Init",this).call(this)}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(HistoryInspectorShell.prototype),"_PostInit",this).call(this),this._icon.Set(null),this._title.Set("HISTORY"),this._subtitle.Set("Editor")}},{key:"_Style",value:function _Style(){return i.Extends({":host":{},".facade":{},".navigation":{}},_get(_getPrototypeOf(HistoryInspectorShell.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(HistoryInspectorShell.prototype),"_Render",this).call(this)}}]),HistoryInspectorShell}(__r__(557));e.exports=l,s.Register("nkmjs-history-inspector-shell",l)},{557:452,29:272,30:285,14:458}],451:[function(__r__,e,t){e.exports={HistoryInspectorShell:__r__(558)}},{558:450}],452:[function(__r__,e,t){var n=__r__(12),i=__r__(29),s=__r__(30),a=__r__(37),l=__r__(145),c=function(e){_inherits(InspectorShell,e);var t=_createSuper(InspectorShell);function InspectorShell(){return _classCallCheck(this,InspectorShell),t.call(this)}return _createClass(InspectorShell,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(InspectorShell.prototype),"_Init",this).call(this),this._context=null,this._inspector=null,this._flags.Add(this,s.FLAGS.FIXED_SIZE),this._flags.Set(s.FLAGS.FIXED_SIZE,!0),this._icon=null,this._title=null,this._subtitle=null,this._header=null,this._body=null}},{key:"context",get:function get(){return this._context},set:function set(e){if(this._context!==e){var t=this._context;this._context=e,this._OnContextDataChanged(t)}}},{key:"_OnContextDataChanged",value:function _OnContextDataChanged(e){this._inspector&&(this._inspector.context=this._context)}},{key:"icon",get:function get(){return this._icon},set:function set(e){this._flags.Set(s.FLAGS.NO_ICON,!this._icon.Set(e))}},{key:"title",get:function get(){return this._title},set:function set(e){this._flags.Set(s.FLAGS.NO_LABEL,!this._title.Set(e))}},{key:"subtitle",get:function get(){return this._subtitle},set:function set(e){this._subtitle.Set(e)}},{key:"header",get:function get(){return this._header}},{key:"body",get:function get(){return this._body}},{key:"_Style",value:function _Style(){return i.Extends({":host":{display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch","align-content":"stretch"},":host(.fixed-size)":{width:"350px"},".header":{flex:"0 0 auto"},".body":{flex:"1 1 auto","min-width":"0",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"stretch"},".inspector":{flex:"1 1 auto"}},_get(_getPrototypeOf(InspectorShell.prototype),"_Style",this).call(this))}},{key:"_Render",value:function _Render(){var e;s.Render(a.dom.BodyHeaderTitles,this,(_defineProperty(e={},s.IDS.OWNER,this),_defineProperty(e,s.IDS.ICON,_defineProperty({},s.IDS.CSS_CL,s.FLAGS.SIZE_S)),_defineProperty(e,s.IDS.SUBTITLE,_defineProperty({},s.IDS.CSS_CL,i.FONT_FLAG.SMALL)),e))}},{key:"_OnDataChanged",value:function _OnDataChanged(e){if(_get(_getPrototypeOf(InspectorShell.prototype),"_OnDataChanged",this).call(this,e),this._inspector&&(this._inspector.Release(),this._inspector=null),!this._data)return this._title.Set("(NO_DATA)"),void this._subtitle.Set("---");this._title.Set(this._data.id);var t=this._data.constructor,i=n.NFOS.Get(this._data);i?(this._subtitle.Set(i),this._icon.Set(i)):(this._subtitle.Set(t.name),this._icon.Set(null));var s=n.BINDINGS.Get(l.DEFAULT_INSPECTOR,t);s&&(this._inspector=this.Add(s,"inspector",this._body),this._inspector.context=this._context,this._inspector.data=this._data)}}]),InspectorShell}(s.views.View);_defineProperty(c,"__NFO__",n.NFOS.Ext({css:["@/views/inspector-shell.css"]},s.views.View,["css"])),e.exports=c,s.Register("nkmjs-inspector-shell",c)},{145:441,12:27,29:272,30:285,37:390}],453:[function(__r__,e,t){var n=function SIGNAL(){_classCallCheck(this,SIGNAL)};_defineProperty(n,"VALUE_CHANGED",Symbol("valueChanged")),_defineProperty(n,"VALUE_COMMITTED",Symbol("valueCommitted")),e.exports=n},{}],454:[function(__r__,e,t){var n=__r__(12),i=__r__(30),s=__r__(37),a=function(e){_inherits(WorkspaceCellNav,e);var t=_createSuper(WorkspaceCellNav);function WorkspaceCellNav(){return _classCallCheck(this,WorkspaceCellNav),t.call(this)}return _createClass(WorkspaceCellNav,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(WorkspaceCellNav.prototype),"_Init",this).call(this),this._defaultWidgetClass=s.lists.Tab,this._cellOptionsBtn=null}},{key:"_Render",value:function _Render(){var e;_get(_getPrototypeOf(WorkspaceCellNav.prototype),"_Render",this).call(this),this._cellOptionsBtn=this._toolbar.CreateHandle((_defineProperty(e={},i.IDS.ICON,"dots"),_defineProperty(e,"text","More Actions..."),_defineProperty(e,"trigger",{thisArg:this,fn:this._OpenSettings}),e))}},{key:"_OpenSettings",value:function _OpenSettings(){}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(WorkspaceCellNav.prototype),"_CleanUp",this).call(this)}}]),WorkspaceCellNav}(s.views.ShelfNav);_defineProperty(a,"__NFO__",n.NFOS.Ext({css:["@/views/workspace-cell-nav.css"]},s.views.ShelfNav,["css"])),e.exports=a,i.Register("nkmjs-workspace-cell-nav",a)},{12:27,30:285,37:390}],455:[function(__r__,e,t){var n=__r__(14),i=__r__(12),s=__r__(31),a=__r__(30),l=__r__(37),c=__r__(559),u=function(e){_inherits(WorkspaceCell,e);var t=_createSuper(WorkspaceCell);function WorkspaceCell(){return _classCallCheck(this,WorkspaceCell),t.call(this)}return _createClass(WorkspaceCell,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(WorkspaceCell.prototype),"_Init",this).call(this),this._navClass=c,this._isCollapsable=!1,this._gridItemController=new a.manipulators.GridItem(this)}},{key:"gridItemController",get:function get(){return this._gridItemController}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t,i){if(!n.isInstanceOf(t,s.catalogs.CatalogItem))throw new Error("non-catalog item added to workspace cell catalog.");if(n.isInstanceOf(t,s.catalogs.Catalog))throw new Error("Full catalog item added to workspace cell catalog.");var a=_get(_getPrototypeOf(WorkspaceCell.prototype),"_OnCatalogItemAdded",this).call(this,e,t,i);return a.RequestDisplay(),a}}]),WorkspaceCell}(l.views.Shelf);_defineProperty(u,"__NFO__",i.NFOS.Ext({css:["@/views/workspace-cell.css"]},l.views.Shelf,["css"])),_defineProperty(u,"__default_orientation",a.FLAGS.HORIZONTAL),e.exports=u,a.Register("nkmjs-workspace-cell",u)},{559:454,12:27,31:66,30:285,37:390,14:458}],456:[function(__r__,e,t){var n=__r__(14),i=__r__(27),s=__r__(12),a=__r__(29),l=__r__(31),c=__r__(30),u=__r__(145),h,d=function(e){_inherits(RootWorkspace,e);var t=_createSuper(RootWorkspace);function RootWorkspace(){return _classCallCheck(this,RootWorkspace),t.call(this)}return _createClass(RootWorkspace,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(RootWorkspace.prototype),"_Init",this).call(this),this._rootCatalog=new l.catalogs.Catalog,this._rootCatalog.GetOrCreateCatalog({name:"RootCell"})}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(RootWorkspace.prototype),"_PostInit",this).call(this),i.RELAY.Watch(i.REQUEST.EDIT,this._HandleEditRequest,this).Watch(i.REQUEST.OPEN,this._HandleOpenRequest,this).Watch(i.REQUEST.CREATE,this._HandleCreateRequest,this),this.catalog=this._rootCatalog}},{key:"rootCatalog",get:function get(){return this._rootCatalog}},{key:"_Style",value:function _Style(){return a.Extends({":host":{position:"relative",flex:"1 1 auto",display:"flex"}},_get(_getPrototypeOf(RootWorkspace.prototype),"_Style",this).call(this))}},{key:"_HandleEditRequest",value:function _HandleEditRequest(e){var t;if(!e.isHandled){var i=e.GetOption("data",null),a=e.GetOption("editor",null);i?(a=a?s.BINDINGS.Get(a,i,a):s.BINDINGS.Get(u.DEFAULT_EDITOR,i))?(n.LOG._("Editing request for ".concat(i," will be handled using ").concat(a.name)),this.Host((_defineProperty(t={},c.IDS.DATA,i),_defineProperty(t,c.IDS.VIEW_CLASS,a),_defineProperty(t,c.IDS.NAME,i.id.name),t)),e.HandleSuccess(this)):e.HandleFail("Could not find editor association for ".concat(i,".")):e.HandleFail("Editing request has no data.")}}},{key:"_HandleOpenRequest",value:function _HandleOpenRequest(e){}},{key:"_HandleCreateRequest",value:function _HandleCreateRequest(e){}}]),RootWorkspace}(__r__(560));e.exports=d,c.Register("nkmjs-root-workspace",d)},{145:441,560:457,27:1,12:27,31:66,29:272,30:285,14:458}],457:[function(__r__,e,t){var n=__r__(14),i=__r__(18),s=__r__(12),a=__r__(31),l=__r__(30),c=__r__(561),u=function(e){_inherits(Workspace,e);var t=_createSuper(Workspace);function Workspace(){return _classCallCheck(this,Workspace),t.call(this)}return _createClass(Workspace,[{key:"_Init",value:function _Init(){_get(_getPrototypeOf(Workspace.prototype),"_Init",this).call(this),this._cellDefaultClass=c,this._placeholderViewClass=null,this._placeholderView=null,this._cells=new i.List,this._isEmpty=!0,this._flags.Add(this,l.FLAGS.EMPTY),this._catalogHandler=new a.catalogs.CatalogHandler,this._catalogHandler.Watch(s.SIGNAL.ITEM_ADDED,this._OnCatalogItemAdded,this).Watch(s.SIGNAL.ITEM_REMOVED,this._OnCatalogItemRemoved,this),this._gridController=new l.manipulators.Grid(this,[1,1])}},{key:"_PostInit",value:function _PostInit(){_get(_getPrototypeOf(Workspace.prototype),"_PostInit",this).call(this),this._OnWorkspacefEmpty()}},{key:"gridController",get:function get(){return this._gridController}},{key:"catalog",get:function get(){return this._catalogHandler.catalog},set:function set(e){this._catalogHandler.catalog=e}},{key:"isEmpty",get:function get(){return this._isEmpty}},{key:"_Style",value:function _Style(){return{":host":{position:"relative",display:"flex"},".navigation":{position:"relative",flex:"1 1 auto",outline:"1px rgba(0,255,0,0.5) solid","outline-offset":"-1px"},".cell":{position:"relative"}}}},{key:"_Render",value:function _Render(){_get(_getPrototypeOf(Workspace.prototype),"_Render",this).call(this);var e=this._placholderViewClass||this.constructor.__default_placeholderViewClass;e&&(this._placeholderView=this.Add(e,"cell"),this._placeholderView.visible=!0)}},{key:"_OnCatalogItemAdded",value:function _OnCatalogItemAdded(e,t){if(!n.isInstanceOf(t,a.catalogs.Catalog))throw new Error("non-catalog item added to workspace catalog : ".concat(t,"."));var i=t.GetOption("cellClass",this._cellDefaultClass),l=this.Add(i,"cell");e.Set(t,l),t.data&&t.data.Watch(s.SIGNAL.RELEASED,this._OnItemDataReleased,this),this._OnCellCreated(t,l)}},{key:"_OnCellCreated",value:function _OnCellCreated(e,t){this._cells.Add(t),t.Watch(l.SIGNAL.DISPLAY_REQUESTED,this._OnCellDisplayRequested,this),t.Watch(l.SIGNAL.EMPTY,this._OnCellEmpty,this),t.Watch(l.SIGNAL.NON_EMPTY,this._OnCellNonEmpty,this),t.catalog=e,this._UpdateWorkspaceEmptyState()}},{key:"_OnItemDataReleased",value:function _OnItemDataReleased(e){var t=this.catalog;if(t){for(var n=t.FindDataHolders(p_item.data),i=0,s=n.length;i<s;i++)n[i].Release();n&&n.length>0&&this._UpdateWorkspaceEmptyState()}}},{key:"_OnCatalogItemRemoved",value:function _OnCatalogItemRemoved(e,t,n){t.data&&t.data.Unwatch(s.SIGNAL.RELEASED,this._OnItemDataReleased,this),n&&(this._OnCellRemoved(t,n),n.parent===this&&n.Release())}},{key:"_OnCellRemoved",value:function _OnCellRemoved(e,t){this._cells.Remove(t),t.Unwatch(l.SIGNAL.DISPLAY_REQUESTED,this._OnCellDisplayRequested,this),t.Unwatch(l.SIGNAL.EMPTY,this._OnCellEmpty,this),t.Unwatch(l.SIGNAL.NON_EMPTY,this._OnCellNonEmpty,this),this._UpdateWorkspaceEmptyState()}},{key:"_OnCellDisplayRequested",value:function _OnCellDisplayRequested(e){}},{key:"_OnCellEmpty",value:function _OnCellEmpty(e){this._UpdateWorkspaceEmptyState()}},{key:"_OnCellNonEmpty",value:function _OnCellNonEmpty(e){this._UpdateWorkspaceEmptyState()}},{key:"Host",value:function Host(e){var t=this._FetchCatalog(),i;if(n.isInstanceOf(e,a.catalogs.CatalogItem))return t.Add(e),e;for(var s=null,c=n.tils.Get(e,[l.IDS.VIEW_CLASS],null),u=t.FindDataHolders(e.data),h=0,d=u.length;h<d;h++){var p=u[h],m=p.GetOption([l.IDS.VIEW_CLASS],null);if(m&&n.isInstanceOf(m,c))return m.RequestDisplay(),p}return t.Register(e)}},{key:"_FetchCatalog",value:function _FetchCatalog(){var e=this.catalog;if(e){for(var t=null,i=e.count,l=0;null===t||l<i;)t=e.At(l),n.isInstanceOf(t,a.catalogs.Catalog)||(t=null),l++;e=t||e.GetOrCreateCatalog({name:"RootCell"})}else{var c=s.Rent(a.catalogs.Catalog);e=c.GetOrCreateCatalog({name:"RootCell"}),this.catalog=c}return e}},{key:"_UpdateWorkspaceEmptyState",value:function _UpdateWorkspaceEmptyState(){var e=!0;if(this._cells.isEmpty)e=!0;else for(var t=0,n=this._cells.count;t<n;t++){var i=this._cells.At(t);i.isEmpty?i.visible=!1:(e=!1,i.visible=!0)}this._isEmpty!==e&&(e?this._OnWorkspacefEmpty():this._OnWorkspaceNonEmpty())}},{key:"_OnWorkspacefEmpty",value:function _OnWorkspacefEmpty(){this._isEmpty=!0,this._flags.Set(l.FLAGS.EMPTY,!0),this._Broadcast(l.SIGNAL.EMPTY,this),this._placeholderView&&(this._placeholderView.visible=!0)}},{key:"_OnWorkspaceNonEmpty",value:function _OnWorkspaceNonEmpty(e){this._isEmpty=!1,this._flags.Set(l.FLAGS.EMPTY,!1),this._Broadcast(l.SIGNAL.NON_EMPTY,this),this._placeholderView&&(this._placeholderView.visible=!1)}},{key:"_CleanUp",value:function _CleanUp(){_get(_getPrototypeOf(Workspace.prototype),"_CleanUp",this).call(this)}}]),Workspace}(l.views.View);_defineProperty(u,"__NFO__",s.NFOS.Ext({css:["@/views/workspace.css"]},l.views.View,["css"])),_defineProperty(u,"__default_placeholderViewClass",null),e.exports=u,l.Register("nkmjs-workspace",u)},{561:455,18:21,12:27,31:66,30:285,14:458}],458:[function(__r__,e,t){var n=__r__(160),i=__r__(562),s=__r__(563),a=__r__(564);e.exports={tils:n,helpers:__r__(51),check:s,isArray:s.isArray.bind(s),isArrayBuffer:s.isArrayBuffer.bind(s),isSymbol:s.isSymbol.bind(s),isObject:s.isObject.bind(s),isFunc:s.isFunc.bind(s),isString:s.isString.bind(s),isNumber:s.isNumber.bind(s),isBool:s.isBool.bind(s),isUndefined:s.isUndefined.bind(s),isVoid:s.isVoid.bind(s),isInstanceOf:s.isInstanceOf.bind(s),isEmpty:s.isEmpty.bind(s),dom:i,El:i.El.bind(i),PATH:a,FULL:a.FULL.bind(a),SHORT:a.SHORT.bind(a),MIME:__r__(565),LOG:__r__(566),Argv:__r__(567)}},{567:459,563:460,51:461,566:463,565:464,564:465,160:467,562:466}],459:[function(__r__,e,t){var n=function(){function Argv(e){if(_classCallCheck(this,Argv),Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var i=e[t];try{var s=i.split("="),a=this._Shorten(s.shift()),l=s.length?s.join("="):null;null!==l&&("TRUE"===l.toUpperCase()?l=!0:"FALSE"===l.toUpperCase()&&(l=!1)),this[a]=null===l||l}catch(e){this[c=this._Shorten(c)]=!0}}else if("object"===_typeof(e))for(var c in e)this[c]=e[c]}return _createClass(Argv,[{key:"_Shorten",value:function _Shorten(e){try{"-"==e[0]&&"-"==(e=e.substr(1))[0]&&(e=e.substr(1))}catch(e){}return e}},{key:"Has",value:function Has(e){return this.hasOwnProperty(e)}},{key:"Get",value:function Get(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.hasOwnProperty(e)?this[e]:t}}]),Argv}();e.exports=n},{}],460:[function(__r__,e,t){var n=Object.prototype.toString,i=function(){function CHECKS(){_classCallCheck(this,CHECKS)}return _createClass(CHECKS,null,[{key:"isArray",value:function isArray(e){return Array.isArray(e)}},{key:"isArrayBuffer",value:function isArrayBuffer(e){return"[object ArrayBuffer]"===n.call(e)}},{key:"isSymbol",value:function isSymbol(e){return"symbol"===_typeof(e)}},{key:"isObject",value:function isObject(e){return null!==e&&"object"===_typeof(e)}},{key:"isFunc",value:function isFunc(e){return"function"==typeof e}},{key:"isString",value:function isString(e){return"string"==typeof e}},{key:"isNumber",value:function isNumber(e){return"number"==typeof e}},{key:"isBool",value:function isBool(e){return"boolean"==typeof e}},{key:"isUndefined",value:function isUndefined(e){return void 0===e}},{key:"isVoid",value:function isVoid(e){return null==e}},{key:"isInstanceOf",value:function isInstanceOf(e,t){if(this.isVoid(e)||this.isVoid(t))return!1;var n="function"==typeof e,i="function"==typeof t,s,a;return!(!n||!i||e!==t)||(n?e.prototype:e)instanceof(i?t:t.constructor)}},{key:"isEmpty",value:function isEmpty(e){if(this.isVoid(e)||""===e)return!0;if(this.isArray(e))return 0===e.length;if(this.isObject(e)){for(var t in e)return!1;return!0}return!1}}]),CHECKS}();e.exports=i},{}],461:[function(__r__,e,t){e.exports={Movement:__r__(568)}},{568:462}],462:[function(__r__,e,t){var n=function(){function Movement(){_classCallCheck(this,Movement),this._x=0,this._y=0,this._pinX=0,this._pinY=0,this._pinOffsetX=0,this._pinOffsetY=0,this._pinDist=0,this._moveX=0,this._moveY=0,this._moveDist=0}return _createClass(Movement,[{key:"x",set:function set(e){this._x=e}},{key:"y",set:function set(e){this._y=e}},{key:"Pin",value:function Pin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(this._x=e),t&&(this._y=t),this._pinX=this._x,this._pinY=this._y,this._pinDist=0}},{key:"Move",value:function Move(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.Update(this._x+e,this._y+t)}},{key:"Update",value:function Update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._x,i=this._y;e&&(this._x=e),t&&(this._y=t),this._moveX=this._x-n,this._moveY=this._y-i;var s=-this._moveX,a=-this._moveY;this._moveDist=Math.sqrt(s*s+a*a),this._pinOffsetX=this._x-this._pinX,this._pinOffsetY=this._y-this._pinY,s=-this._pinOffsetX,a=-this._pinOffsetY,this._pinDist=Math.sqrt(s*s+a*a)}}]),Movement}();e.exports=n},{}],463:[function(__r__,e,t){var n=function(){function LOG(){_classCallCheck(this,LOG)}return _createClass(LOG,null,[{key:"toggle",value:function toggle(e){this._enabled=e}},{key:"_",value:function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#818181",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._enabled&&(n?console.log("%c ".concat(e," "),"background: ".concat(n,"; color: ").concat(t,"; border-radius: 5px;")):console.log("%c".concat(e," "),"color: ".concat(t)))}},{key:"_U",value:function _U(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#818181",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._enabled&&(s?console.log("%c ⭮ ".concat(e," 🠚 '").concat(t,"' %c(was '").concat(n,"') "),"background: ".concat(s,"; color: ").concat(i,"; border-radius: 5px;"),"background: ".concat(s,"; color: ").concat(i,"; font-style: italic; border-radius: 5px;")):console.log("%c⭮ ".concat(e," 🠚 '").concat(t,"' %c(was '").concat(n,"')"),"color: ".concat(i),"color: ".concat(i,"; font-style: italic")))}}]),LOG}();e.exports=n},{}],464:[function(__r__,e,t){var n=function(){function MIME(){_classCallCheck(this,MIME)}return _createClass(MIME,null,[{key:"_GenerateMap",value:function _GenerateMap(){this._map={};for(var e=0,t=this.__commonMIMEs.length;e<t;e++){var n=this.__commonMIMEs[e];this._map[n.ext]={type:n.type,desc:n.desc,as:n.as||"fetch"}}}},{key:"mimes",get:function get(){return this._map||this._GenerateMap(),this._map}},{key:"Get",value:function Get(e){return this._map||this._GenerateMap(),this._map[e]}},{key:"Set",value:function Set(e){this._map[m.ext]=e}}]),MIME}();_defineProperty(n,"__commonMIMEs",[{ext:".localStorage",desc:"A local storage object in string form",type:"text/plain"},{ext:".aac",desc:"AAC audio",type:"audio/aac",as:"audio"},{ext:".abw",desc:"AbiWord document",type:"application/x-abiword"},{ext:".arc",desc:"Archive document (multiple files embedded)",type:"application/x-freearc"},{ext:".avi",desc:"AVI: Audio Video Interleave",type:"video/x-msvideo",as:"video"},{ext:".azw",desc:"Amazon Kindle eBook format",type:"application/vnd.amazon.ebook"},{ext:".bin",desc:"Any kind of binary data",type:"application/octet-stream"},{ext:".bmp",desc:"Windows OS/2 Bitmap Graphics",type:"image/bmp",as:"image"},{ext:".bz",desc:"BZip archive",type:"application/x-bzip"},{ext:".bz2",desc:"BZip2 archive",type:"application/x-bzip2"},{ext:".csh",desc:"C-Shell script",type:"application/x-csh"},{ext:".css",desc:"Cascading Style Sheets (CSS)",type:"text/css",as:"style"},{ext:".csv",desc:"Comma-separated values (CSV)",type:"text/csv"},{ext:".doc",desc:"Microsoft Word",type:"application/msword"},{ext:".docx",desc:"Microsoft Word (OpenXML)",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{ext:".eot",desc:"MS Embedded OpenType fonts",type:"application/vnd.ms-fontobject",as:"font"},{ext:".epub",desc:"Electronic publication (EPUB)",type:"application/epub+zip"},{ext:".gz",desc:"GZip Compressed Archive",type:"application/gzip"},{ext:".gif",desc:"Graphics Interchange Format (GIF)",type:"image/gif",as:"image"},{ext:".htm",desc:"HyperText Markup Language (HTML)",type:"text/html",as:"document"},{ext:".html",desc:"HyperText Markup Language (HTML)",type:"text/html",as:"document"},{ext:".ico",desc:"Icon format",type:"image/vnd.microsoft.icon",as:"image"},{ext:".ics",desc:"iCalendar format",type:"text/calendar"},{ext:".jar",desc:"Java Archive (JAR)",type:"application/java-archive"},{ext:".jpeg",desc:"JPEG images",type:"image/jpeg",as:"image"},{ext:".jpg",desc:"JPEG images",type:"image/jpeg",as:"image"},{ext:".js",desc:"JavaScript",type:"application/javascript",as:"script"},{ext:".json",desc:"JSON format",type:"application/json"},{ext:".jsonld",desc:"JSON-LD format",type:"application/ld+json"},{ext:".mid",desc:"Musical Instrument Digital Interface (MIDI)",type:"audio/midi audio/x-midi",as:"audio"},{ext:".midi",desc:"Musical Instrument Digital Interface (MIDI)",type:"audio/midi audio/x-midi",as:"audio"},{ext:".mjs",desc:"JavaScript module",type:"text/javascript",as:"script"},{ext:".mp3",desc:"MP3 audio",type:"audio/mpeg",as:"audio"},{ext:".mpeg",desc:"MPEG Video",type:"video/mpeg",as:"video"},{ext:".mpkg",desc:"Apple Installer Package",type:"application/vnd.apple.installer+xml"},{ext:".odp",desc:"OpenDocument presentation document",type:"application/vnd.oasis.opendocument.presentation"},{ext:".ods",desc:"OpenDocument spreadsheet document",type:"application/vnd.oasis.opendocument.spreadsheet"},{ext:".odt",desc:"OpenDocument text document",type:"application/vnd.oasis.opendocument.text"},{ext:".oga",desc:"OGG audio",type:"audio/ogg",as:"audio"},{ext:".ogv",desc:"OGG video",type:"video/ogg",as:"video"},{ext:".ogx",desc:"OGG",type:"application/ogg"},{ext:".opus",desc:"Opus audio",type:"audio/opus",as:"audio"},{ext:".otf",desc:"OpenType font",type:"font/otf",as:"font"},{ext:".png",desc:"Portable Network Graphics",type:"image/png",as:"image"},{ext:".pdf",desc:"Adobe Portable Document Format (PDF)",type:"application/pdf"},{ext:".php",desc:"Hypertext Preprocessor (Personal Home Page)",type:"application/x-httpd-php"},{ext:".ppt",desc:"Microsoft PowerPoint",type:"application/vnd.ms-powerpoint"},{ext:".pptx",desc:"Microsoft PowerPoint (OpenXML)",type:"application/vnd.openxmlformats-officedocument.presentationml.presentation"},{ext:".rar",desc:"RAR archive",type:"application/vnd.rar"},{ext:".rtf",desc:"Rich Text Format (RTF)",type:"application/rtf"},{ext:".sh",desc:"Bourne shell script",type:"application/x-sh"},{ext:".svg",desc:"Scalable Vector Graphics (SVG)",type:"image/svg+xml"},{ext:".swf",desc:"Small web format (SWF) or Adobe Flash document",type:"application/x-shockwave-flash"},{ext:".tar",desc:"Tape Archive (TAR)",type:"application/x-tar"},{ext:".tif",desc:"Tagged Image File Format (TIFF)",type:"image/tiff",as:"image"},{ext:".tiff",desc:"Tagged Image File Format (TIFF)",type:"image/tiff",as:"image"},{ext:".ts",desc:"MPEG transport stream",type:"video/mp2t",as:"video"},{ext:".ttf",desc:"TrueType Font",type:"font/ttf",as:"font"},{ext:".txt",desc:"Text, (generally ASCII or ISO 8859-n)",type:"text/plain"},{ext:".vsd",desc:"Microsoft Visio",type:"application/vnd.visio"},{ext:".wav",desc:"Waveform Audio Format",type:"audio/wav",as:"audio"},{ext:".weba",desc:"WEBM audio",type:"audio/webm",as:"audio"},{ext:".webm",desc:"WEBM video",type:"video/webm",as:"video"},{ext:".webp",desc:"WEBP image",type:"image/webp",as:"image"},{ext:".woff",desc:"Web Open Font Format (WOFF)",type:"font/woff",as:"font"},{ext:".woff2",desc:"Web Open Font Format (WOFF)",type:"font/woff2",as:"font"},{ext:".xhtml",desc:"XHTML",type:"application/xhtml+xml",as:"document"},{ext:".xls",desc:"Microsoft Excel",type:"application/vnd.ms-excel"},{ext:".xlsx",desc:"Microsoft Excel (OpenXML)",type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{ext:".xml",desc:"XML",type:"text/xml"},{ext:".xul",desc:"XUL",type:"application/vnd.mozilla.xul+xml"},{ext:".zip",desc:"ZIP archive",type:"application/zip"},{ext:".3gp",desc:"3GPP audio/video container",type:"video/3gpp audio/3gpp",as:"video"},{ext:".3g2",desc:"3GPP2 audio/video container",type:"video/3gpp2 audio/3gpp2",as:"video"},{ext:".7z",desc:"7-zip archive",type:"application/x-7z-compressed"}]),e.exports=n},{}],465:[function(__r__,e,t){var n=__r__(569),i=function(){function PATH(){_classCallCheck(this,PATH)}return _createClass(PATH,null,[{key:"SET",value:function SET(e,t){if(this.SYSTEM_MAP.includes(e)&&this.MAP.hasOwnProperty(e))throw new Error("Cannot override system path (".concat(e,")"));e.length<3||"%"!=e.substr(0,1)||"%"!=e.substr(e.length-1,1)||(this.MAP[e]=t,n._("⮥ ".concat(e," ⮧ ").concat(t),"#7f7f7f"))}},{key:"UNSET",value:function UNSET(e){delete this.MAP[e]}},{key:"Sanitize",value:function Sanitize(e){return e.split("\\").join("/")}},{key:"SHORT",value:function SHORT(e){for(var t in e=this.Sanitize(e),this.MAP)""!==this.MAP[t]&&(e=e.replace(this.MAP[t],t));return e}},{key:"FULL",value:function FULL(e){for(var t in this.MAP)e=e.replace(t,this.MAP[t]);return this.Sanitize(e)}},{key:"dir",value:function dir(e){var t=this.Sanitize(e).split("/");return t.pop(),t.join("/")}},{key:"name",value:function name(e){var t=e.split("/");if(t.length<=1)return this.stripExt(e);for(var n=t.pop();""===n&&t.length>=1;)n=t.pop();return this.stripExt(n)}},{key:"ext",value:function ext(e){if(e.includes("?")){var t=e.split("?");e=t[0]}var n=e.split(".");return n.length<=1?e:".".concat(n[n.length-1])}},{key:"stripExt",value:function stripExt(e){var t=e.split(".");return t.length<=1?e:(t.pop(),t.join("."))}},{key:"extras",get:function get(){var e={};for(var t in this.MAP)this.SYSTEM_MAP.includes(t)||(e[t]=this.MAP[t]);return e}}]),PATH}();_defineProperty(i,"APP","%APP%"),_defineProperty(i,"APP_DATA","%APP_DATA%"),_defineProperty(i,"USER_DATA","%USER_DATA%"),_defineProperty(i,"HOME","%HOME%"),_defineProperty(i,"TEMP","%TEMP%"),_defineProperty(i,"DOCUMENTS","%DOCUMENTS%"),_defineProperty(i,"DESKTOP","%DESKTOP%"),_defineProperty(i,"LOGS","%LOGS%"),_defineProperty(i,"DOWNLOADS","%DOWNLOADS%"),_defineProperty(i,"VIDEOS","%VIDEOS%"),_defineProperty(i,"PICTURES","%PICTURES%"),_defineProperty(i,"MUSIC","%MUSIC%"),_defineProperty(i,"STYLE","%STYLE%"),_defineProperty(i,"SYSTEM_MAP",[i.APP_DATA,i.USER_DATA,i.HOME,i.TEMP,i.DOCUMENTS,i.DESKTOP,i.LOGS,i.DOWNLOADS,i.VIDEOS,i.PICTURES,i.MUSIC,i.STYLE]),_defineProperty(i,"MAP",{}),e.exports=i},{569:463}],466:[function(__r__,e,t){var n=__r__(316),i=__r__(570),s=function(){function UTILS_DOM(){_classCallCheck(this,UTILS_DOM)}return _createClass(UTILS_DOM,null,[{key:"El",value:function El(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=document.createElement(e);if(!i.isVoid(t))for(var a in t)s.setAttribute(a,t[a]);return i.isVoid(n)||this.Attach(s,n),s}},{key:"ElClone",value:function ElClone(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.cloneNode(!0);return i.isVoid(t)||this.Attach(n,t),n}},{key:"Attach",value:function Attach(e,t){"_wrapper"in t?t._wrapper.appendChild(e):t.appendChild(e)}},{key:"AttachFirst",value:function AttachFirst(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&t.firstChild?t.insertBefore(e,t.firstChild):!n&&t.firstElementChild?t.insertBefore(e,t.firstElementChild):t.appendChild(e)}},{key:"Detach",value:function Detach(e){i.isVoid(e.parentNode)||e.parentNode.removeChild(e)}},{key:"ToFront",value:function ToFront(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n,s;if(i.isVoid(e.parentNode))throw new Error("Node has no parent.");e.parentNode.lastChild!=e&&e.parentNode.appendChild(e)}},{key:"ToBack",value:function ToBack(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.isVoid(e.parentNode))throw new Error("Node has no parent.");t?e.parentNode.firstChild?e.parentNode.insertBefore(e,e.parentNode.firstChild):e.parentNode.appendChild(e):e.parentNode.firstElementChild?e.parentNode.insertBefore(e,e.parentNode.firstElementChild):e.parentNode.firstChild?e.parentNode.insertBefore(e,e.parentNode.firstChild):e.parentNode.appendChild(e)}},{key:"Rect",value:function Rect(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getBoundingClientRect();if(!t)return n;var i=t.getBoundingClientRect();return DOMRectReadOnly.fromRect({x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height})}},{key:"OverflowsY",value:function OverflowsY(e){return e.scrollHeight>e.clientHeight}},{key:"OverflowsX",value:function OverflowsX(e){return e.scrollWidth>e.clientWidth}}]),UTILS_DOM}();e.exports=s},{570:460,316:467}],467:[function(__r__,e,t){var n=__r__("uuid"),i=__r__(570),s=function(){function UTILS(){_classCallCheck(this,UTILS)}return _createClass(UTILS,null,[{key:"JSONStripEmpty",value:function JSONStripEmpty(e,t){if(!i.isEmpty(t)){if(!i.isObject(t))return t;for(var n in t)if(t.hasOwnProperty(n))return t}}},{key:"Default",value:function Default(){for(var e=0,t=arguments.length;e<t;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];if(!i.isVoid(n))return n}return null}},{key:"Get",value:function Get(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i.isVoid(e))return n;var s=e[t];return i.isVoid(s)?n:s}},{key:"GetPath",value:function GetPath(e,t){for(var n=e,i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];for(var l=0,c=s.length;l<c;l++)if(!(n=n[s[l]]))return t;return n||t}},{key:"Ensure",value:function Ensure(e,t,n){return t in e||(e[t]=n),e}},{key:"EnsureMultiple",value:function EnsureMultiple(e,t){for(var n in t)n in e||(e[n]=t[n]);return e}},{key:"ParsePath",value:function ParsePath(e){if(i.isVoid(e))return null;var t={},n,s;if(e.includes(this.DELIM_PROTOCOL)){var a=e.split(this.DELIM_PROTOCOL);if(2!=a.length)throw new Error("Path '".concat(e,"' cannot be parsed (protocol malformed)."));t.protocol=a[0]+this.DELIM_PROTOCOL,e=a[1]}if(e.includes(this.DELIM_DRIVE)){var l=e.split(this.DELIM_DRIVE);if(l.length>2)throw new Error("Path '".concat(e,"' cannot be parsed (drive malformed)."));t.drive=l[0]+this.DELIM_PROTOCOL,e=l[1]}var c=e.split(this.DELIM_DIR),u=c.length-1,h,d=c[u].split(this.DELIM_EXT);c.splice(u,1);for(var p=0,m=c.length;p<m;p++)""===c[p]&&(c.splice(p,1),p--);return t.path=c.join(this.DELIM_DIR)+this.DELIM_DIR,t.pathArray=c,t.name=d[0],t.ext=this.DELIM_EXT+d[d.length-1],t}},{key:"FixSlash",value:function FixSlash(e){return e.split("\\").join("/")}},{key:"isNot",value:function isNot(e){for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t++)if((t+1<1||arguments.length<=t+1?void 0:arguments[t+1])===e)return!1;return!0}},{key:"Append",value:function Append(e,t){if(i.isVoid(e)&&(e={}),i.isVoid(t))return e;for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}},{key:"SetMissing",value:function SetMissing(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var s in t){var a=t[s];if(e.hasOwnProperty(s)){var l=e[s];if(i.isArray(l)){if(i.isArray(a)&&0!==n)for(var c=0,u=a.length;c<u;c++)l.includes(a[c])||(n<0?l.unshift(a[c]):l.push(a[c]))}else i.isObject(l)&&i.isObject(a)&&this.SetMissing(l,a)}else i.isArray(a)?e[s]=_toConsumableArray(a):i.isObject(a)?e[s]=this.SetMissing({},a):e[s]=a}return e}},{key:"SetOverwrite",value:function SetOverwrite(e,t){for(var n in t){var s=t[n];if(e.hasOwnProperty(n)){var a=e[n];i.isArray(a)?e[n]=s:i.isObject(s)&&i.isObject(a)?this.SetOverwrite(a,s):e[n]=s}else i.isArray(s)||i.isObject(),e[n]=s}return e}},{key:"MergeArray",value:function MergeArray(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return e=[],t?e=_toConsumableArray(t):e;if(!t||0===t.length)return e;if(n>=0)for(var i=0,s=t.length;i<s;i++){var a=t[i];e.includes(a)||e.push(a)}else for(var l=0,c=t.length;l<c;l++){var u=t[l];e.includes(u)||e.unshift(u)}return e}},{key:"Clone",value:function Clone(e){if(!i.isObject(e))throw new Error("Cannot Clone the non-object '".concat(e,"'"));var t={};for(var n in e)if(e.hasOwnProperty(n)){var s=e[n];null!=s&&(i.isArray(s)?s=this.CloneArray(s):i.isObject(s)&&(s=this.Clone(s))),t[n]=s}return t}},{key:"CloneArray",value:function CloneArray(e){if(!i.isArray(e))throw new Error("Cannot CloneArray the non-array '".concat(e,"'"));for(var t=[],n=0,s=e.length;n<s;n++){var a=e[n];null!=a&&(i.isArray(a)?a=this.CloneArray(a):i.isObject(a)&&(a=this.Clone(a))),t.push(a)}return t}},{key:"CamelSplit",value:function CamelSplit(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.replace(/([a-z0-9])([A-Z#])/g,"$1".concat(t,"$2"))}},{key:"ArrayDiff",value:function ArrayDiff(e,t,n,s){if(i.isVoid(e)){if(i.isVoid(t))return;for(var a=0,l=t.length;a<l;a++)s.push(t[a])}else if(i.isVoid(t)){if(i.isVoid(e))return;for(var c=0,u=e.length;c<u;c++)n.push(e[c])}else{for(var h=0,d=e.length;h<d;h++){var p=e[h];t.includes(p)||n.push(p)}for(var m=0,y=t.length;m<y;m++){var g=e[m];t.includes(g)||s.push(g)}}}},{key:"ArrayDiffCallbacks",value:function ArrayDiffCallbacks(e,t,n,s){if(i.isVoid(e)){if(i.isVoid(t))return;for(var a=0,l=t.length;a<l;a++)s(t[a],a)}else if(i.isVoid(t)){if(i.isVoid(e))return;for(var c=0,u=e.length;c<u;c++)n(e[c],c)}else{for(var h=0,d=e.length;h<d;h++){var p=e[h];t.includes(p)||n(p,h)}for(var m=0,y=t.length;m<y;m++){var g=t[m];e.includes(g)||s(g,m)}}}},{key:"InheritanceDistance",value:function InheritanceDistance(e,t){var n=0;if(!i.isInstanceOf(e,t))return-1;for(var s=Object.getPrototypeOf(e);null!=s&&n<100;){if(s===t)return n;s=Object.getPrototypeOf(s),n++}return 100===n&&console.warn("InheritanceDistance reached 100 iterations. Stopping."),-1}},{key:"Clear",value:function Clear(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)delete e[n];if(t)return{}}},{key:"DeepClear",value:function DeepClear(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;for(var s in e)n=e[s],i.isArray(n)?this.DeepClearArray(n):i.isObject(n)&&this.DeepClear(n),e[s]=null;if(t)return{}}},{key:"DeepClearArray",value:function DeepClearArray(e){for(var t=null;0!=e.length;)t=e.pop(),i.isArray(t)?this.DeepClearArray(t):i.isObject(t)&&this.DeepClear(t)}},{key:"isSame",value:function isSame(e,t){if(e===t)return!0;var n=0;for(var s in e){if(n++,!(s in t))return!1;var a=e[s],l=t[s];if(a!==l){var c=_typeof(a),u;if(c!==_typeof(l))return!1;if(i.isArray(a)){if(!this.isSameArray(a,l))return!1}else{if("object"!==c)return!1;if(!this.isSame(a,l))return!1}}}var h=0;for(var d in t)h++;return n==h}},{key:"isSameArray",value:function isSameArray(e,t){if(e===t)return!0;var n=e.length;if(n!=t.length)return!1;for(var s=0;s<n;s++){var a=e[s],l=t[s];if(a!==l){var c=_typeof(a),u;if(c!==_typeof(l))return!1;if(i.isArray(a)){if(!this.isSameArray(a,l))return!1}else{if("object"!==c)return!1;if(!this.isSame(a,l))return!1}}}return!0}},{key:"Join",value:function Join(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;-1===i&&(i=e.length-1);for(var s="".concat(e[n]),a=++n;a<=i;a++)s+="".concat(t).concat(e[a]);return s}},{key:"Resolve",value:function Resolve(e,t){for(var n=t.split("."),i=e,s=0,a=n.length;s<a;s++){if(void 0===i[n[s]])return;i=i[n[s]]}return i}},{key:"ValidIdentifier",value:function ValidIdentifier(e){return/^[A-Za-z_][A-Za-z0-9_]*$/.test(e)}},{key:"StartWithNumber",value:function StartWithNumber(e){return/^\d/.test(e)}},{key:"ContainsAnySpace",value:function ContainsAnySpace(e){return e.includes(" "," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","​"," "," ","　","\ufeff")}},{key:"unsafeUID",get:function get(){return"_".concat(Math.random().toString(36).substr(2,9))}},{key:"UUID",get:function get(){return n.v4()}},{key:"Move",value:function Move(e,t,n){if(t!==n){if(-1===t)throw new Error("Item is not in array");e.splice(n,0,e.splice(t,1)[0])}}},{key:"Pad",value:function Pad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;for(e=e.toString();e.length<t;)e="0"+e;return e}},{key:"DateDiff",value:function DateDiff(e,t){var n=e.getTime()-t.getTime(),i=n/1e3,s=i/60,a=s/60,l,c=n%1e3,u=(n-c)/1e3%60,h=(i-u)/60%60,d=(s-h)/60%60,p=(a-d)/24,m={totalMs:n,totalSeconds:i,totalMinutes:s,totalHours:a,totalDays:a/24,ms:c<1?0:c,seconds:u<1?0:u,minutes:h<1?0:h,hours:d<1?0:d,days:p<1?0:p},y="";return y=m.days>0?"".concat(m.days,"d").concat(m.hours,"h").concat(m.minutes,"m").concat(m.seconds,"s").concat(m.ms,"ms"):m.hours>0?"".concat(m.hours,"h").concat(m.minutes,"m").concat(m.seconds,"s").concat(m.ms,"ms"):m.minutes>0?"".concat(m.minutes,"m").concat(m.seconds,"s").concat(m.ms,"ms"):m.seconds>0?"".concat(m.seconds,"s").concat(m.ms,"ms"):"".concat(m.ms,"ms"),m.string=y,m}},{key:"ToCustomElementID",value:function ToCustomElementID(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.CamelSplit("".concat(e).concat(t?this.unsafeUID:""),"-").replace("_","-").replace(" ","-").toLowerCase()}}]),UTILS}();_defineProperty(s,"DELIM_PROTOCOL","://"),_defineProperty(s,"DELIM_DRIVE",":/"),_defineProperty(s,"DELIM_DIR","/"),_defineProperty(s,"DELIM_EXT","."),_defineProperty(s,"DELIM_COLON",":"),_defineProperty(s,"DELIM_SEMI",";"),_defineProperty(s,"DELIM_COMMA",","),_defineProperty(s,"DELIM_PIPE","|"),e.exports=s},{570:460,uuid:468}],468:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function get(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function get(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function get(){return s.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function get(){return a.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function get(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return c.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function get(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function get(){return h.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function get(){return d.default}});var n=_interopRequireDefault(__r__(571)),i=_interopRequireDefault(__r__(572)),s=_interopRequireDefault(__r__(573)),a=_interopRequireDefault(__r__(574)),l=_interopRequireDefault(__r__(575)),c=_interopRequireDefault(__r__(576)),u=_interopRequireDefault(__r__(577)),h=_interopRequireDefault(__r__(578)),d=_interopRequireDefault(__r__(579));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},{575:470,579:471,578:475,571:476,572:477,573:479,574:480,577:481,576:482}],469:[function(__r__,e,t){function md5(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(e),8*e.length))}function md5ToHexEncodedArray(e){for(var t=[],n=32*e.length,i="0123456789abcdef",s=0;s<n;s+=8){var a=e[s>>5]>>>s%32&255,l=parseInt(i.charAt(a>>>4&15)+i.charAt(15&a),16);t.push(l)}return t}function getOutputLength(e){return 14+(e+64>>>9<<4)+1}function wordsToMd5(e,t){e[t>>5]|=128<<t%32,e[getOutputLength(t)-1]=t;for(var n=1732584193,i=-271733879,s=-1732584194,a=271733878,l=0;l<e.length;l+=16){var c=n,u=i,h=s,d=a;n=md5ff(n,i,s,a,e[l],7,-680876936),a=md5ff(a,n,i,s,e[l+1],12,-389564586),s=md5ff(s,a,n,i,e[l+2],17,606105819),i=md5ff(i,s,a,n,e[l+3],22,-1044525330),n=md5ff(n,i,s,a,e[l+4],7,-176418897),a=md5ff(a,n,i,s,e[l+5],12,1200080426),s=md5ff(s,a,n,i,e[l+6],17,-1473231341),i=md5ff(i,s,a,n,e[l+7],22,-45705983),n=md5ff(n,i,s,a,e[l+8],7,1770035416),a=md5ff(a,n,i,s,e[l+9],12,-1958414417),s=md5ff(s,a,n,i,e[l+10],17,-42063),i=md5ff(i,s,a,n,e[l+11],22,-1990404162),n=md5ff(n,i,s,a,e[l+12],7,1804603682),a=md5ff(a,n,i,s,e[l+13],12,-40341101),s=md5ff(s,a,n,i,e[l+14],17,-1502002290),n=md5gg(n,i=md5ff(i,s,a,n,e[l+15],22,1236535329),s,a,e[l+1],5,-165796510),a=md5gg(a,n,i,s,e[l+6],9,-1069501632),s=md5gg(s,a,n,i,e[l+11],14,643717713),i=md5gg(i,s,a,n,e[l],20,-373897302),n=md5gg(n,i,s,a,e[l+5],5,-701558691),a=md5gg(a,n,i,s,e[l+10],9,38016083),s=md5gg(s,a,n,i,e[l+15],14,-660478335),i=md5gg(i,s,a,n,e[l+4],20,-405537848),n=md5gg(n,i,s,a,e[l+9],5,568446438),a=md5gg(a,n,i,s,e[l+14],9,-1019803690),s=md5gg(s,a,n,i,e[l+3],14,-187363961),i=md5gg(i,s,a,n,e[l+8],20,1163531501),n=md5gg(n,i,s,a,e[l+13],5,-1444681467),a=md5gg(a,n,i,s,e[l+2],9,-51403784),s=md5gg(s,a,n,i,e[l+7],14,1735328473),n=md5hh(n,i=md5gg(i,s,a,n,e[l+12],20,-1926607734),s,a,e[l+5],4,-378558),a=md5hh(a,n,i,s,e[l+8],11,-2022574463),s=md5hh(s,a,n,i,e[l+11],16,1839030562),i=md5hh(i,s,a,n,e[l+14],23,-35309556),n=md5hh(n,i,s,a,e[l+1],4,-1530992060),a=md5hh(a,n,i,s,e[l+4],11,1272893353),s=md5hh(s,a,n,i,e[l+7],16,-155497632),i=md5hh(i,s,a,n,e[l+10],23,-1094730640),n=md5hh(n,i,s,a,e[l+13],4,681279174),a=md5hh(a,n,i,s,e[l],11,-358537222),s=md5hh(s,a,n,i,e[l+3],16,-722521979),i=md5hh(i,s,a,n,e[l+6],23,76029189),n=md5hh(n,i,s,a,e[l+9],4,-640364487),a=md5hh(a,n,i,s,e[l+12],11,-421815835),s=md5hh(s,a,n,i,e[l+15],16,530742520),n=md5ii(n,i=md5hh(i,s,a,n,e[l+2],23,-995338651),s,a,e[l],6,-198630844),a=md5ii(a,n,i,s,e[l+7],10,1126891415),s=md5ii(s,a,n,i,e[l+14],15,-1416354905),i=md5ii(i,s,a,n,e[l+5],21,-57434055),n=md5ii(n,i,s,a,e[l+12],6,1700485571),a=md5ii(a,n,i,s,e[l+3],10,-1894986606),s=md5ii(s,a,n,i,e[l+10],15,-1051523),i=md5ii(i,s,a,n,e[l+1],21,-2054922799),n=md5ii(n,i,s,a,e[l+8],6,1873313359),a=md5ii(a,n,i,s,e[l+15],10,-30611744),s=md5ii(s,a,n,i,e[l+6],15,-1560198380),i=md5ii(i,s,a,n,e[l+13],21,1309151649),n=md5ii(n,i,s,a,e[l+4],6,-145523070),a=md5ii(a,n,i,s,e[l+11],10,-1120210379),s=md5ii(s,a,n,i,e[l+2],15,718787259),i=md5ii(i,s,a,n,e[l+9],21,-343485551),n=safeAdd(n,c),i=safeAdd(i,u),s=safeAdd(s,h),a=safeAdd(a,d)}return[n,i,s,a]}function bytesToWords(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(getOutputLength(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}function safeAdd(e,t){var n=(65535&e)+(65535&t),i;return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function bitRotateLeft(e,t){return e<<t|e>>>32-t}function md5cmn(e,t,n,i,s,a){return safeAdd(bitRotateLeft(safeAdd(safeAdd(t,e),safeAdd(i,a)),s),n)}function md5ff(e,t,n,i,s,a,l){return md5cmn(t&n|~t&i,e,t,s,a,l)}function md5gg(e,t,n,i,s,a,l){return md5cmn(t&i|n&~i,e,t,s,a,l)}function md5hh(e,t,n,i,s,a,l){return md5cmn(t^n^i,e,t,s,a,l)}function md5ii(e,t,n,i,s,a,l){return md5cmn(n^(t|~i),e,t,s,a,l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=md5;t.default=n},{}],470:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="00000000-0000-0000-0000-000000000000";t.default=n},{}],471:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(577));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");var t,i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}var i=parse;t.default=i},{577:481}],472:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t.default=n},{}],473:[function(__r__,e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=rng;var i=new Uint8Array(16);function rng(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},{}],474:[function(__r__,e,t){function f(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,l=Math.ceil(a/16),c=new Array(l),u=0;u<l;++u){for(var h=new Uint32Array(16),d=0;d<16;++d)h[d]=e[64*u+4*d]<<24|e[64*u+4*d+1]<<16|e[64*u+4*d+2]<<8|e[64*u+4*d+3];c[u]=h}c[l-1][14]=8*(e.length-1)/Math.pow(2,32),c[l-1][14]=Math.floor(c[l-1][14]),c[l-1][15]=8*(e.length-1)&4294967295;for(var p=0;p<l;++p){for(var m=new Uint32Array(80),y=0;y<16;++y)m[y]=c[p][y];for(var g=16;g<80;++g)m[g]=ROTL(m[g-3]^m[g-8]^m[g-14]^m[g-16],1);for(var v=n[0],k=n[1],O=n[2],S=n[3],E=n[4],C=0;C<80;++C){var I=Math.floor(C/20),D=ROTL(v,5)+f(I,k,O,S)+E+t[I]+m[C]>>>0;E=S,S=O,O=ROTL(k,30)>>>0,k=v,v=D}n[0]=n[0]+v>>>0,n[1]=n[1]+k>>>0,n[2]=n[2]+O>>>0,n[3]=n[3]+S>>>0,n[4]=n[4]+E>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=sha1;t.default=n},{}],475:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(577));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}for(var i=[],s=0;s<256;++s)i.push((s+256).toString(16).substr(1));function stringify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,n.default)(s))throw TypeError("Stringified UUID is invalid");return s}var a=stringify;t.default=a},{577:481}],476:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(580)),i=_interopRequireDefault(__r__(578)),s,a;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=0,c=0;function v1(e,t,u){var h=t&&u||0,d=t||new Array(16),p=(e=e||{}).node||s,m=void 0!==e.clockseq?e.clockseq:a;if(null==p||null==m){var y=e.random||(e.rng||n.default)();null==p&&(p=s=[1|y[0],y[1],y[2],y[3],y[4],y[5]]),null==m&&(m=a=16383&(y[6]<<8|y[7]))}var g=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:c+1,k=g-l+(v-c)/1e4;if(k<0&&void 0===e.clockseq&&(m=m+1&16383),(k<0||g>l)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=g,c=v,a=m;var O=(1e4*(268435455&(g+=122192928e5))+v)%4294967296;d[h++]=O>>>24&255,d[h++]=O>>>16&255,d[h++]=O>>>8&255,d[h++]=255&O;var S=g/4294967296*1e4&268435455;d[h++]=S>>>8&255,d[h++]=255&S,d[h++]=S>>>24&15|16,d[h++]=S>>>16&255,d[h++]=m>>>8|128,d[h++]=255&m;for(var E=0;E<6;++E)d[h+E]=p[E];return t||(0,i.default)(d)}var u=v1;t.default=u},{580:473,578:475}],477:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(581)),i=_interopRequireDefault(__r__(582));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s,a=(0,n.default)("v3",48,i.default);t.default=a},{582:469,581:478}],478:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_default,t.URL=t.DNS=void 0;var n=_interopRequireDefault(__r__(578)),i=_interopRequireDefault(__r__(579));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;var a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function _default(e,t,l){function generateUUID(e,s,a,c){if("string"==typeof e&&(e=stringToBytes(e)),"string"==typeof s&&(s=(0,i.default)(s)),16!==s.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+e.length);if(u.set(s),u.set(e,s.length),(u=l(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,a){c=c||0;for(var h=0;h<16;++h)a[c+h]=u[h];return a}return(0,n.default)(u)}try{generateUUID.name=e}catch(e){}return generateUUID.DNS=s,generateUUID.URL=a,generateUUID}t.URL=a},{579:471,578:475}],479:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(580)),i=_interopRequireDefault(__r__(578));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,s){var a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){s=s||0;for(var l=0;l<16;++l)t[s+l]=a[l];return t}return(0,i.default)(a)}var s=v4;t.default=s},{580:473,578:475}],480:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(581)),i=_interopRequireDefault(__r__(583));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s,a=(0,n.default)("v5",80,i.default);t.default=a},{583:474,581:478}],481:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(584));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return"string"==typeof e&&n.default.test(e)}var i=validate;t.default=i},{584:472}],482:[function(__r__,e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_interopRequireDefault(__r__(577));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var i=version;t.default=i},{577:481}],483:[function(__r__,e,t){window.nkmjs||(window.nkmjs=[]),window.nkmjs[0]=__r__(585)},{585:64}]},{},[483]);